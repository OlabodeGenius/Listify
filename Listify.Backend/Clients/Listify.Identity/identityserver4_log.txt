2020-01-12 12:59:52.102 -08:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-01-12 12:59:52.128 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-01-12 12:59:52.128 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-01-12 12:59:52.129 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-01-12 12:59:52.129 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-01-12 12:59:52.129 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-01-12 12:59:52.129 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-01-12 12:59:52.306 -08:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-01-12 12:59:52.351 -08:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-01-12 12:59:52.355 -08:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-01-12 12:59:52.369 -08:00 [DBG] Login Url: /Account/Login
2020-01-12 12:59:52.369 -08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-01-12 12:59:52.369 -08:00 [DBG] Logout Url: /Account/Logout
2020-01-12 12:59:52.369 -08:00 [DBG] ConsentUrl Url: /consent
2020-01-12 12:59:52.369 -08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-01-12 12:59:52.369 -08:00 [DBG] Error Url: /home/error
2020-01-12 12:59:52.369 -08:00 [DBG] Error Id Parameter: errorId
2020-01-12 12:59:52.379 -08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-01-12 12:59:52.389 -08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-01-12 12:59:52.389 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-01-12 12:59:52.390 -08:00 [DBG] Start discovery request
2020-01-12 12:59:53.809 -08:00 [DBG] Found ["profile","openid","roles","phs.themonitaur.webapi"] as all scopes in database
2020-01-12 12:59:53.908 -08:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-01-12 12:59:53.911 -08:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-01-12 12:59:53.912 -08:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-01-12 12:59:53.913 -08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-01-12 12:59:53.914 -08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-01-12 12:59:53.914 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-01-12 12:59:53.915 -08:00 [DBG] Start key discovery request
2020-01-12 12:59:53.960 -08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-01-12 12:59:53.984 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-01-12 12:59:53.984 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-01-12 12:59:53.986 -08:00 [DBG] Start authorize request
2020-01-12 12:59:53.990 -08:00 [DBG] No user present in authorize request
2020-01-12 12:59:53.991 -08:00 [DBG] Start authorize request protocol validation
2020-01-12 12:59:54.219 -08:00 [DBG] phs.themonitaur.webapp found in database: true
2020-01-12 12:59:54.225 -08:00 [DBG] client configuration validation for client phs.themonitaur.webapp succeeded.
2020-01-12 12:59:54.825 -08:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-01-12 12:59:55.363 -08:00 [DBG] Found ["phs.themonitaur.webapi"] API scopes in database
2020-01-12 12:59:55.875 -08:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-01-12 12:59:56.384 -08:00 [DBG] Found ["phs.themonitaur.webapi"] API scopes in database
2020-01-12 12:59:56.390 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-01-12 12:59:56.401 -08:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"phs.themonitaur.webapp","ClientName":"The Monitaur WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles phs.themonitaur.webapi","State":"e3S5-COXSJYvNm1qQ0wbpZ7dfxKkmkPiSDq_83LCLf6y0","UiLocales":null,"Nonce":"e3S5-COXSJYvNm1qQ0wbpZ7dfxKkmkPiSDq_83LCLf6y0","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"phs.themonitaur.webapp","state":"e3S5-COXSJYvNm1qQ0wbpZ7dfxKkmkPiSDq_83LCLf6y0","redirect_uri":"http://localhost:4200","scope":"openid profile roles phs.themonitaur.webapi","nonce":"e3S5-COXSJYvNm1qQ0wbpZ7dfxKkmkPiSDq_83LCLf6y0"},"$type":"AuthorizeRequestValidationLog"}
2020-01-12 12:59:56.406 -08:00 [INF] Showing login: User is not authenticated
2020-01-12 12:59:56.572 -08:00 [DBG] Start authorize request protocol validation
2020-01-12 12:59:57.096 -08:00 [DBG] phs.themonitaur.webapp found in database: true
2020-01-12 12:59:57.097 -08:00 [DBG] client configuration validation for client phs.themonitaur.webapp succeeded.
2020-01-12 12:59:57.600 -08:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-01-12 12:59:58.104 -08:00 [DBG] Found ["phs.themonitaur.webapi"] API scopes in database
2020-01-12 12:59:58.609 -08:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-01-12 12:59:59.112 -08:00 [DBG] Found ["phs.themonitaur.webapi"] API scopes in database
2020-01-12 12:59:59.113 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-01-12 12:59:59.639 -08:00 [DBG] phs.themonitaur.webapp found in database: true
2020-01-12 12:59:59.639 -08:00 [DBG] client configuration validation for client phs.themonitaur.webapp succeeded.
2020-01-12 13:12:35.765 -08:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-01-12 13:12:35.796 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-01-12 13:12:35.796 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-01-12 13:12:35.796 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-01-12 13:12:35.796 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-01-12 13:12:35.797 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-01-12 13:12:35.797 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-01-12 13:12:35.998 -08:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-01-12 13:12:36.041 -08:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-01-12 13:12:36.045 -08:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-01-12 13:12:36.056 -08:00 [DBG] Login Url: /Account/Login
2020-01-12 13:12:36.056 -08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-01-12 13:12:36.056 -08:00 [DBG] Logout Url: /Account/Logout
2020-01-12 13:12:36.056 -08:00 [DBG] ConsentUrl Url: /consent
2020-01-12 13:12:36.056 -08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-01-12 13:12:36.056 -08:00 [DBG] Error Url: /home/error
2020-01-12 13:12:36.056 -08:00 [DBG] Error Id Parameter: errorId
2020-01-12 13:12:36.067 -08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-01-12 13:12:36.071 -08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-01-12 13:12:36.071 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-01-12 13:12:36.073 -08:00 [DBG] Start discovery request
2020-01-12 13:12:36.214 -08:00 [DBG] Found ["profile","openid","roles","phs.themonitaur.webapi"] as all scopes in database
2020-01-12 13:12:36.325 -08:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-01-12 13:12:36.327 -08:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-01-12 13:12:36.327 -08:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-01-12 13:12:36.341 -08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-01-12 13:12:36.343 -08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-01-12 13:12:36.343 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-01-12 13:12:36.344 -08:00 [DBG] Start key discovery request
2020-01-12 13:12:36.391 -08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-01-12 13:12:36.414 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-01-12 13:12:36.414 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-01-12 13:12:36.416 -08:00 [DBG] Start authorize request
2020-01-12 13:12:36.422 -08:00 [DBG] No user present in authorize request
2020-01-12 13:12:36.424 -08:00 [DBG] Start authorize request protocol validation
2020-01-12 13:12:36.569 -08:00 [DBG] phs.themonitaur.webapp found in database: true
2020-01-12 13:12:36.574 -08:00 [DBG] client configuration validation for client phs.themonitaur.webapp succeeded.
2020-01-12 13:12:36.647 -08:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-01-12 13:12:36.689 -08:00 [DBG] Found ["phs.themonitaur.webapi"] API scopes in database
2020-01-12 13:12:36.699 -08:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-01-12 13:12:36.702 -08:00 [DBG] Found ["phs.themonitaur.webapi"] API scopes in database
2020-01-12 13:12:36.707 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-01-12 13:12:36.717 -08:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"phs.themonitaur.webapp","ClientName":"The Monitaur WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles phs.themonitaur.webapi","State":"5HAj3yQY-BMd8iNJdG4uxDnYjdUwUbazooUHntlarpqLv","UiLocales":null,"Nonce":"5HAj3yQY-BMd8iNJdG4uxDnYjdUwUbazooUHntlarpqLv","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"phs.themonitaur.webapp","state":"5HAj3yQY-BMd8iNJdG4uxDnYjdUwUbazooUHntlarpqLv","redirect_uri":"http://localhost:4200","scope":"openid profile roles phs.themonitaur.webapi","nonce":"5HAj3yQY-BMd8iNJdG4uxDnYjdUwUbazooUHntlarpqLv"},"$type":"AuthorizeRequestValidationLog"}
2020-01-12 13:12:36.723 -08:00 [INF] Showing login: User is not authenticated
2020-01-12 13:12:36.874 -08:00 [DBG] Start authorize request protocol validation
2020-01-12 13:12:36.892 -08:00 [DBG] phs.themonitaur.webapp found in database: true
2020-01-12 13:12:36.893 -08:00 [DBG] client configuration validation for client phs.themonitaur.webapp succeeded.
2020-01-12 13:12:36.896 -08:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-01-12 13:12:36.899 -08:00 [DBG] Found ["phs.themonitaur.webapi"] API scopes in database
2020-01-12 13:12:36.902 -08:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-01-12 13:12:36.905 -08:00 [DBG] Found ["phs.themonitaur.webapi"] API scopes in database
2020-01-12 13:12:36.905 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-01-12 13:12:36.925 -08:00 [DBG] phs.themonitaur.webapp found in database: true
2020-01-12 13:12:36.926 -08:00 [DBG] client configuration validation for client phs.themonitaur.webapp succeeded.
2020-01-12 13:13:23.148 -08:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-01-12 13:13:23.189 -08:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-01-12 13:13:23.190 -08:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-01-12 13:13:23.191 -08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-01-12 13:13:23.193 -08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-01-12 13:13:23.194 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-01-12 13:13:23.194 -08:00 [DBG] Start discovery request
2020-01-12 13:13:23.215 -08:00 [DBG] Found ["profile","openid","roles","phs.themonitaur.webapi"] as all scopes in database
2020-01-12 13:13:23.225 -08:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-01-12 13:13:23.229 -08:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-01-12 13:13:23.235 -08:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-01-12 13:13:23.235 -08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-01-12 13:13:23.236 -08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-01-12 13:13:23.236 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-01-12 13:13:23.236 -08:00 [DBG] Start key discovery request
2020-01-12 13:13:23.247 -08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-01-12 13:13:23.248 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-01-12 13:13:23.248 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-01-12 13:13:23.248 -08:00 [DBG] Start authorize request
2020-01-12 13:13:23.248 -08:00 [DBG] No user present in authorize request
2020-01-12 13:13:23.248 -08:00 [DBG] Start authorize request protocol validation
2020-01-12 13:13:23.266 -08:00 [DBG] phs.themonitaur.webapp found in database: true
2020-01-12 13:13:23.266 -08:00 [DBG] client configuration validation for client phs.themonitaur.webapp succeeded.
2020-01-12 13:13:23.269 -08:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-01-12 13:13:23.272 -08:00 [DBG] Found ["phs.themonitaur.webapi"] API scopes in database
2020-01-12 13:13:23.275 -08:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-01-12 13:13:23.277 -08:00 [DBG] Found ["phs.themonitaur.webapi"] API scopes in database
2020-01-12 13:13:23.277 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-01-12 13:13:23.278 -08:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"phs.themonitaur.webapp","ClientName":"The Monitaur WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles phs.themonitaur.webapi","State":"VHYrrw7YSHYbuF_pepar5lI-4fCNo_m4sVIspcBYBdRHU","UiLocales":null,"Nonce":"VHYrrw7YSHYbuF_pepar5lI-4fCNo_m4sVIspcBYBdRHU","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"phs.themonitaur.webapp","state":"VHYrrw7YSHYbuF_pepar5lI-4fCNo_m4sVIspcBYBdRHU","redirect_uri":"http://localhost:4200","scope":"openid profile roles phs.themonitaur.webapi","nonce":"VHYrrw7YSHYbuF_pepar5lI-4fCNo_m4sVIspcBYBdRHU"},"$type":"AuthorizeRequestValidationLog"}
2020-01-12 13:13:23.278 -08:00 [INF] Showing login: User is not authenticated
2020-01-12 13:13:23.306 -08:00 [DBG] Start authorize request protocol validation
2020-01-12 13:13:23.323 -08:00 [DBG] phs.themonitaur.webapp found in database: true
2020-01-12 13:13:23.323 -08:00 [DBG] client configuration validation for client phs.themonitaur.webapp succeeded.
2020-01-12 13:13:23.326 -08:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-01-12 13:13:23.329 -08:00 [DBG] Found ["phs.themonitaur.webapi"] API scopes in database
2020-01-12 13:13:23.331 -08:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-01-12 13:13:23.334 -08:00 [DBG] Found ["phs.themonitaur.webapi"] API scopes in database
2020-01-12 13:13:23.334 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-01-12 13:13:23.348 -08:00 [DBG] phs.themonitaur.webapp found in database: true
2020-01-12 13:13:23.348 -08:00 [DBG] client configuration validation for client phs.themonitaur.webapp succeeded.
2020-01-12 13:13:39.300 -08:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-01-12 13:13:39.305 -08:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-01-12 13:13:39.305 -08:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-01-12 13:13:39.306 -08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-01-12 13:13:39.313 -08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-01-12 13:13:39.313 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-01-12 13:13:39.313 -08:00 [DBG] Start discovery request
2020-01-12 13:13:39.320 -08:00 [DBG] Found ["profile","openid","roles","phs.themonitaur.webapi"] as all scopes in database
2020-01-12 13:13:39.342 -08:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-01-12 13:13:39.346 -08:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-01-12 13:13:39.346 -08:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-01-12 13:13:39.346 -08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-01-12 13:13:39.349 -08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-01-12 13:13:39.349 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-01-12 13:13:39.349 -08:00 [DBG] Start key discovery request
2020-01-12 13:13:39.361 -08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-01-12 13:13:39.366 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-01-12 13:13:39.367 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-01-12 13:13:39.367 -08:00 [DBG] Start authorize request
2020-01-12 13:13:39.367 -08:00 [DBG] No user present in authorize request
2020-01-12 13:13:39.367 -08:00 [DBG] Start authorize request protocol validation
2020-01-12 13:13:39.386 -08:00 [DBG] phs.themonitaur.webapp found in database: true
2020-01-12 13:13:39.386 -08:00 [DBG] client configuration validation for client phs.themonitaur.webapp succeeded.
2020-01-12 13:13:39.389 -08:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-01-12 13:13:39.391 -08:00 [DBG] Found ["phs.themonitaur.webapi"] API scopes in database
2020-01-12 13:13:39.394 -08:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-01-12 13:13:39.397 -08:00 [DBG] Found ["phs.themonitaur.webapi"] API scopes in database
2020-01-12 13:13:39.397 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-01-12 13:13:39.397 -08:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"phs.themonitaur.webapp","ClientName":"The Monitaur WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles phs.themonitaur.webapi","State":"0DubPW0lO6MWfVxhpU8Eci3KrtHczQ9seqc32uViwe1sH","UiLocales":null,"Nonce":"0DubPW0lO6MWfVxhpU8Eci3KrtHczQ9seqc32uViwe1sH","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"phs.themonitaur.webapp","state":"0DubPW0lO6MWfVxhpU8Eci3KrtHczQ9seqc32uViwe1sH","redirect_uri":"http://localhost:4200","scope":"openid profile roles phs.themonitaur.webapi","nonce":"0DubPW0lO6MWfVxhpU8Eci3KrtHczQ9seqc32uViwe1sH"},"$type":"AuthorizeRequestValidationLog"}
2020-01-12 13:13:39.397 -08:00 [INF] Showing login: User is not authenticated
2020-01-12 13:13:39.422 -08:00 [DBG] Start authorize request protocol validation
2020-01-12 13:13:39.442 -08:00 [DBG] phs.themonitaur.webapp found in database: true
2020-01-12 13:13:39.442 -08:00 [DBG] client configuration validation for client phs.themonitaur.webapp succeeded.
2020-01-12 13:13:39.444 -08:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-01-12 13:13:39.447 -08:00 [DBG] Found ["phs.themonitaur.webapi"] API scopes in database
2020-01-12 13:13:39.450 -08:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-01-12 13:13:39.452 -08:00 [DBG] Found ["phs.themonitaur.webapi"] API scopes in database
2020-01-12 13:13:39.452 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-01-12 13:13:39.465 -08:00 [DBG] phs.themonitaur.webapp found in database: true
2020-01-12 13:13:39.465 -08:00 [DBG] client configuration validation for client phs.themonitaur.webapp succeeded.
2020-08-11 21:37:14.722 +02:00 [ERR] Failed executing DbCommand (201ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2020-08-11 21:37:15.105 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Listify.Identity.DAL.IdentityContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'AspNetUsers'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:0cf89be4-623f-4ede-b089-efa989a2313c
Error Number:208,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'AspNetUsers'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:0cf89be4-623f-4ede-b089-efa989a2313c
Error Number:208,State:1,Class:16
2020-08-11 21:39:43.162 +02:00 [ERR] Failed executing DbCommand (20ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2020-08-11 21:39:43.308 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Listify.Identity.DAL.IdentityContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'AspNetUsers'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:6b11fa98-6a5e-4901-aea9-2710aac8c948
Error Number:208,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'AspNetUsers'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:6b11fa98-6a5e-4901-aea9-2710aac8c948
Error Number:208,State:1,Class:16
2020-08-11 22:41:28.650 +02:00 [ERR] Failed executing DbCommand (23ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2020-08-11 22:41:28.808 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Listify.Identity.Data.ApplicationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'AspNetUsers'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:891a82fa-3551-4a84-86cf-5c0edb3de6e8
Error Number:208,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'AspNetUsers'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:891a82fa-3551-4a84-86cf-5c0edb3de6e8
Error Number:208,State:1,Class:16
2020-08-11 22:45:16.817 +02:00 [ERR] Failed executing DbCommand (21ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2020-08-11 22:45:16.922 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Listify.Identity.Data.ApplicationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'AspNetUsers'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:abb1c769-64df-4d6f-a51d-51d22381882c
Error Number:208,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'AspNetUsers'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:abb1c769-64df-4d6f-a51d-51d22381882c
Error Number:208,State:1,Class:16
2020-08-11 22:56:52.616 +02:00 [ERR] Failed executing DbCommand (53ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2020-08-11 22:56:53.176 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Listify.Identity.Data.ApplicationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'AspNetUsers'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:8542257f-21bb-4e58-94ec-bdc43cbe356b
Error Number:208,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'AspNetUsers'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:8542257f-21bb-4e58-94ec-bdc43cbe356b
Error Number:208,State:1,Class:16
2020-08-11 23:04:59.886 +02:00 [WRN] User 7b53c337-d817-4ddf-94ef-311c546a8090 password validation failed: PasswordRequiresNonAlphanumeric;PasswordRequiresDigit;PasswordRequiresUpper.
2020-08-11 23:10:48.423 +02:00 [WRN] User 6183f026-bf7f-414e-9c34-f7a75050f836 password validation failed: PasswordRequiresNonAlphanumeric;PasswordRequiresDigit;PasswordRequiresUpper.
2020-08-11 23:11:59.110 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-11 23:11:59.140 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-11 23:11:59.140 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-11 23:11:59.141 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-11 23:11:59.141 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-11 23:11:59.141 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-11 23:11:59.141 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-11 23:11:59.736 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided. (Parameter 'ClientId')
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationBuilder.<>c__DisplayClass4_0`2.<AddSchemeHelper>b__1(TOptions o)
   at Microsoft.Extensions.Options.ValidateOptions`1.Validate(String name, TOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at Microsoft.Extensions.Options.OptionsMonitor`1.<>c__DisplayClass11_0.<Get>b__0()
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.get_Value()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd(String name, Func`1 createOptions)
   at Microsoft.Extensions.Options.OptionsMonitor`1.Get(String name)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-08-12 00:35:13.268 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-12 00:35:13.337 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-12 00:35:13.337 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-12 00:35:13.353 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-12 00:35:13.353 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-12 00:35:13.353 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-12 00:35:13.353 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-12 00:35:13.737 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided. (Parameter 'ClientId')
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationBuilder.<>c__DisplayClass4_0`2.<AddSchemeHelper>b__1(TOptions o)
   at Microsoft.Extensions.Options.ValidateOptions`1.Validate(String name, TOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at Microsoft.Extensions.Options.OptionsMonitor`1.<>c__DisplayClass11_0.<Get>b__0()
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
--- End of stack trace from previous location where exception was thrown ---
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.get_Value()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd(String name, Func`1 createOptions)
   at Microsoft.Extensions.Options.OptionsMonitor`1.Get(String name)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-08-12 00:35:13.737 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided. (Parameter 'ClientId')
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationBuilder.<>c__DisplayClass4_0`2.<AddSchemeHelper>b__1(TOptions o)
   at Microsoft.Extensions.Options.ValidateOptions`1.Validate(String name, TOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at Microsoft.Extensions.Options.OptionsMonitor`1.<>c__DisplayClass11_0.<Get>b__0()
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
--- End of stack trace from previous location where exception was thrown ---
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.get_Value()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd(String name, Func`1 createOptions)
   at Microsoft.Extensions.Options.OptionsMonitor`1.Get(String name)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-08-12 00:35:14.011 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided. (Parameter 'ClientId')
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationBuilder.<>c__DisplayClass4_0`2.<AddSchemeHelper>b__1(TOptions o)
   at Microsoft.Extensions.Options.ValidateOptions`1.Validate(String name, TOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at Microsoft.Extensions.Options.OptionsMonitor`1.<>c__DisplayClass11_0.<Get>b__0()
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
--- End of stack trace from previous location where exception was thrown ---
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.get_Value()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd(String name, Func`1 createOptions)
   at Microsoft.Extensions.Options.OptionsMonitor`1.Get(String name)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.get_Value()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd(String name, Func`1 createOptions)
   at Microsoft.Extensions.Options.OptionsMonitor`1.Get(String name)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-08-12 00:35:14.011 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided. (Parameter 'ClientId')
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationBuilder.<>c__DisplayClass4_0`2.<AddSchemeHelper>b__1(TOptions o)
   at Microsoft.Extensions.Options.ValidateOptions`1.Validate(String name, TOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at Microsoft.Extensions.Options.OptionsMonitor`1.<>c__DisplayClass11_0.<Get>b__0()
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
--- End of stack trace from previous location where exception was thrown ---
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.get_Value()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd(String name, Func`1 createOptions)
   at Microsoft.Extensions.Options.OptionsMonitor`1.Get(String name)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.get_Value()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd(String name, Func`1 createOptions)
   at Microsoft.Extensions.Options.OptionsMonitor`1.Get(String name)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-08-12 00:35:14.116 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided. (Parameter 'ClientId')
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationBuilder.<>c__DisplayClass4_0`2.<AddSchemeHelper>b__1(TOptions o)
   at Microsoft.Extensions.Options.ValidateOptions`1.Validate(String name, TOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at Microsoft.Extensions.Options.OptionsMonitor`1.<>c__DisplayClass11_0.<Get>b__0()
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
--- End of stack trace from previous location where exception was thrown ---
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.get_Value()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd(String name, Func`1 createOptions)
   at Microsoft.Extensions.Options.OptionsMonitor`1.Get(String name)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-08-12 00:35:14.116 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided. (Parameter 'ClientId')
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationBuilder.<>c__DisplayClass4_0`2.<AddSchemeHelper>b__1(TOptions o)
   at Microsoft.Extensions.Options.ValidateOptions`1.Validate(String name, TOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at Microsoft.Extensions.Options.OptionsMonitor`1.<>c__DisplayClass11_0.<Get>b__0()
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
--- End of stack trace from previous location where exception was thrown ---
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.get_Value()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd(String name, Func`1 createOptions)
   at Microsoft.Extensions.Options.OptionsMonitor`1.Get(String name)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-08-12 00:35:14.227 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided. (Parameter 'ClientId')
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationBuilder.<>c__DisplayClass4_0`2.<AddSchemeHelper>b__1(TOptions o)
   at Microsoft.Extensions.Options.ValidateOptions`1.Validate(String name, TOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at Microsoft.Extensions.Options.OptionsMonitor`1.<>c__DisplayClass11_0.<Get>b__0()
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
--- End of stack trace from previous location where exception was thrown ---
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.get_Value()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd(String name, Func`1 createOptions)
   at Microsoft.Extensions.Options.OptionsMonitor`1.Get(String name)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-08-12 00:35:14.582 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided. (Parameter 'ClientId')
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationBuilder.<>c__DisplayClass4_0`2.<AddSchemeHelper>b__1(TOptions o)
   at Microsoft.Extensions.Options.ValidateOptions`1.Validate(String name, TOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at Microsoft.Extensions.Options.OptionsMonitor`1.<>c__DisplayClass11_0.<Get>b__0()
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
--- End of stack trace from previous location where exception was thrown ---
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.get_Value()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd(String name, Func`1 createOptions)
   at Microsoft.Extensions.Options.OptionsMonitor`1.Get(String name)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-08-12 00:38:45.243 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-12 00:38:45.451 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-12 00:38:45.451 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-12 00:38:45.451 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-12 00:38:45.451 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-12 00:38:45.451 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-12 00:38:45.451 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-12 00:38:45.803 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided. (Parameter 'ClientId')
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationBuilder.<>c__DisplayClass4_0`2.<AddSchemeHelper>b__1(TOptions o)
   at Microsoft.Extensions.Options.ValidateOptions`1.Validate(String name, TOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at Microsoft.Extensions.Options.OptionsMonitor`1.<>c__DisplayClass11_0.<Get>b__0()
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.get_Value()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd(String name, Func`1 createOptions)
   at Microsoft.Extensions.Options.OptionsMonitor`1.Get(String name)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-08-12 01:03:37.873 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-12 01:03:38.215 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-12 01:03:38.215 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-12 01:03:38.215 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-12 01:03:38.215 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-12 01:03:38.215 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-12 01:03:38.216 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-12 01:03:38.676 +02:00 [DBG] Login Url: /Account/Login
2020-08-12 01:03:38.678 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-12 01:03:38.678 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-12 01:03:38.678 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-12 01:03:38.678 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-12 01:03:38.678 +02:00 [DBG] Error Url: /home/error
2020-08-12 01:03:38.679 +02:00 [DBG] Error Id Parameter: errorId
2020-08-12 01:03:55.694 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Endpoint IdentityServer4.Quickstart.UI.GrantsController.Index (Listify.Identity) contains authorization metadata, but a middleware was not found that supports authorization.
Configure your application startup by adding app.UseAuthorization() inside the call to Configure(..) in the application startup code. The call to app.UseAuthorization() must appear between app.UseRouting() and app.UseEndpoints(...).
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.ThrowMissingAuthMiddlewareException(Endpoint endpoint)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-08-12 01:04:12.805 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 01:04:12.815 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 01:04:12.815 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 01:04:12.847 +02:00 [DBG] Start discovery request
2020-08-12 01:04:13.375 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 01:04:32.695 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 01:04:32.745 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 01:04:32.746 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 01:04:32.753 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 01:04:32.755 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 01:04:32.755 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 01:04:32.755 +02:00 [DBG] Start discovery request
2020-08-12 01:04:32.770 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 01:04:33.226 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 01:04:33.232 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 01:04:33.232 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 01:04:33.233 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 01:04:33.234 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 01:04:33.234 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 01:04:33.236 +02:00 [DBG] Start key discovery request
2020-08-12 01:04:37.515 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 01:04:37.520 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 01:04:37.520 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 01:04:37.523 +02:00 [DBG] Start authorize request
2020-08-12 01:04:37.530 +02:00 [DBG] No user present in authorize request
2020-08-12 01:04:37.548 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 01:04:37.718 +02:00 [ERR] Unknown client or not enabled: Listify
{"ClientId":null,"ClientName":null,"RedirectUri":null,"AllowedRedirectUris":null,"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"response_type":"id_token token","client_id":"Listify","state":"aUZFQW1lemxOY1gxYUVkSXM2UnF0Z3hUNHdjeWJXYS5NU0tiMVZmVWFKRUxP","redirect_uri":"http://localhost:4200","scope":"openid listifyID profile listifyWebAPI","nonce":"aUZFQW1lemxOY1gxYUVkSXM2UnF0Z3hUNHdjeWJXYS5NU0tiMVZmVWFKRUxP"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 01:04:37.725 +02:00 [ERR] Request validation failed
2020-08-12 01:04:37.725 +02:00 [INF] {"ClientId":null,"ClientName":null,"RedirectUri":null,"AllowedRedirectUris":null,"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"response_type":"id_token token","client_id":"Listify","state":"aUZFQW1lemxOY1gxYUVkSXM2UnF0Z3hUNHdjeWJXYS5NU0tiMVZmVWFKRUxP","redirect_uri":"http://localhost:4200","scope":"openid listifyID profile listifyWebAPI","nonce":"aUZFQW1lemxOY1gxYUVkSXM2UnF0Z3hUNHdjeWJXYS5NU0tiMVZmVWFKRUxP"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 01:04:37.732 +02:00 [INF] {"ClientId":"Listify","ClientName":null,"RedirectUri":null,"Endpoint":"Authorize","SubjectId":null,"Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Unknown client or client not enabled","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"80000019-0002-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-11T23:04:37.0000000Z","ProcessId":19592,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2020-08-12 01:22:09.993 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-12 01:22:10.049 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-12 01:22:10.049 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-12 01:22:10.050 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-12 01:22:10.050 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-12 01:22:10.050 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-12 01:22:10.050 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-12 01:22:10.515 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 01:22:10.605 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 01:22:10.608 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 01:22:10.677 +02:00 [DBG] Login Url: /Account/Login
2020-08-12 01:22:10.677 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-12 01:22:10.677 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-12 01:22:10.677 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-12 01:22:10.677 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-12 01:22:10.677 +02:00 [DBG] Error Url: /home/error
2020-08-12 01:22:10.677 +02:00 [DBG] Error Id Parameter: errorId
2020-08-12 01:22:10.688 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 01:22:10.693 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 01:22:10.693 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 01:22:10.695 +02:00 [DBG] Start discovery request
2020-08-12 01:22:11.763 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 01:22:23.484 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 01:22:23.496 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 01:22:23.497 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 01:22:23.501 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 01:22:23.505 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 01:22:23.505 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 01:22:23.507 +02:00 [DBG] Start key discovery request
2020-08-12 01:22:24.048 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 01:22:24.065 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 01:22:24.065 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 01:22:24.067 +02:00 [DBG] Start authorize request
2020-08-12 01:22:24.080 +02:00 [DBG] No user present in authorize request
2020-08-12 01:22:24.151 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 01:22:24.463 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 01:22:24.471 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 01:22:24.585 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 01:22:24.662 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 01:22:24.666 +02:00 [ERR] Invalid scope: listifyID
2020-08-12 01:22:24.670 +02:00 [ERR] Request validation failed
2020-08-12 01:22:24.686 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid listifyID profile roles listifyWebAPI","State":"NDB1QVdQbE5WRlkwek9DdUJNMUEtX21-aGEyX35ic01ycGZGd2p1QUJiVzRo","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"NDB1QVdQbE5WRlkwek9DdUJNMUEtX21-aGEyX35ic01ycGZGd2p1QUJiVzRo","redirect_uri":"http://localhost:4200","scope":"openid listifyID profile roles listifyWebAPI","nonce":"NDB1QVdQbE5WRlkwek9DdUJNMUEtX21-aGEyX35ic01ycGZGd2p1QUJiVzRo"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 01:22:24.700 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid listifyID profile roles listifyWebAPI","GrantType":"implicit","Error":"invalid_scope","ErrorDescription":"Invalid scope","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"8000001e-0002-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-11T23:22:24.0000000Z","ProcessId":20804,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2020-08-12 01:25:41.632 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 01:25:41.796 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 01:25:41.797 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 01:25:41.797 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 01:25:41.798 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 01:25:41.798 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 01:25:41.798 +02:00 [DBG] Start key discovery request
2020-08-12 01:25:45.224 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 01:25:45.231 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 01:25:45.231 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 01:25:45.232 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 01:25:45.232 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 01:25:45.232 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 01:25:45.232 +02:00 [DBG] Start discovery request
2020-08-12 01:25:45.269 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 01:25:45.500 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 01:25:45.515 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 01:25:45.516 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 01:25:45.517 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 01:25:45.530 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 01:25:45.530 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 01:25:45.530 +02:00 [DBG] Start key discovery request
2020-08-12 01:25:46.296 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 01:25:46.299 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 01:25:46.299 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 01:25:46.299 +02:00 [DBG] Start authorize request
2020-08-12 01:25:46.299 +02:00 [DBG] No user present in authorize request
2020-08-12 01:25:46.300 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 01:25:46.347 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 01:25:46.347 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 01:25:46.355 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 01:25:46.374 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 01:25:46.376 +02:00 [ERR] Invalid scope: listifyWebAPI
2020-08-12 01:25:46.376 +02:00 [ERR] Request validation failed
2020-08-12 01:25:46.377 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles listifyWebAPI","State":"SEJzRWJlczFacU0xdWdkWTFYZTlUZ0pOZTRTQTctUGNxandwbUpGeGNNMWNw","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"SEJzRWJlczFacU0xdWdkWTFYZTlUZ0pOZTRTQTctUGNxandwbUpGeGNNMWNw","redirect_uri":"http://localhost:4200","scope":"openid profile roles listifyWebAPI","nonce":"SEJzRWJlczFacU0xdWdkWTFYZTlUZ0pOZTRTQTctUGNxandwbUpGeGNNMWNw"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 01:25:46.377 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid profile roles listifyWebAPI","GrantType":"implicit","Error":"invalid_scope","ErrorDescription":"Invalid scope","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"80000008-0002-fc00-b63f-84710c7967bb","TimeStamp":"2020-08-11T23:25:46.0000000Z","ProcessId":20804,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2020-08-12 01:25:50.472 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 01:25:50.484 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 01:25:50.484 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 01:25:50.486 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 01:25:50.486 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 01:25:50.486 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 01:25:50.486 +02:00 [DBG] Start key discovery request
2020-08-12 01:25:51.508 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 01:25:51.515 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 01:25:51.516 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 01:25:51.516 +02:00 [DBG] Start authorize request
2020-08-12 01:25:51.516 +02:00 [DBG] No user present in authorize request
2020-08-12 01:25:51.516 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 01:25:51.551 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 01:25:51.552 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 01:25:51.559 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 01:25:51.578 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 01:25:51.578 +02:00 [ERR] Invalid scope: listifyWebAPI
2020-08-12 01:25:51.578 +02:00 [ERR] Request validation failed
2020-08-12 01:25:51.579 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles listifyWebAPI","State":"VzBseFp3MFZHaGQyZ0hra3hGdE93fnk4QTlWYnpRMW9BdzR-ZnFiNHdmRkpJ","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"VzBseFp3MFZHaGQyZ0hra3hGdE93fnk4QTlWYnpRMW9BdzR-ZnFiNHdmRkpJ","redirect_uri":"http://localhost:4200","scope":"openid profile roles listifyWebAPI","nonce":"VzBseFp3MFZHaGQyZ0hra3hGdE93fnk4QTlWYnpRMW9BdzR-ZnFiNHdmRkpJ"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 01:25:51.580 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid profile roles listifyWebAPI","GrantType":"implicit","Error":"invalid_scope","ErrorDescription":"Invalid scope","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"80000013-0004-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-11T23:25:51.0000000Z","ProcessId":20804,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2020-08-12 01:25:55.041 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 01:25:55.056 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 01:25:55.056 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 01:25:55.057 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 01:25:55.058 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 01:25:55.059 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 01:25:55.059 +02:00 [DBG] Start key discovery request
2020-08-12 01:26:24.062 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 01:26:24.079 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 01:26:24.079 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 01:26:24.080 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 01:26:24.082 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 01:26:24.082 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 01:26:24.082 +02:00 [DBG] Start discovery request
2020-08-12 01:26:24.139 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 01:26:24.219 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 01:26:24.300 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 01:26:24.300 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 01:26:24.301 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 01:26:24.301 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 01:26:24.301 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 01:26:24.301 +02:00 [DBG] Start key discovery request
2020-08-12 01:26:28.175 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 01:26:28.176 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 01:26:28.176 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 01:26:28.176 +02:00 [DBG] Start authorize request
2020-08-12 01:26:28.176 +02:00 [DBG] No user present in authorize request
2020-08-12 01:26:28.176 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 01:26:28.742 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 01:26:28.742 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 01:26:28.882 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 01:26:28.952 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 01:26:29.098 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 01:26:29.166 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 01:26:29.187 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 01:26:29.188 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"ZnRSQ1p3WURtZ2dsM0ppa3JTejVoYXdiWklXQ35ldkZjYnVpaFh2Mk9LU1NI","UiLocales":null,"Nonce":"ZnRSQ1p3WURtZ2dsM0ppa3JTejVoYXdiWklXQ35ldkZjYnVpaFh2Mk9LU1NI","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"ZnRSQ1p3WURtZ2dsM0ppa3JTejVoYXdiWklXQ35ldkZjYnVpaFh2Mk9LU1NI","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"ZnRSQ1p3WURtZ2dsM0ppa3JTejVoYXdiWklXQ35ldkZjYnVpaFh2Mk9LU1NI"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 01:26:29.258 +02:00 [INF] Showing login: User is not authenticated
2020-08-12 01:26:29.480 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 01:26:29.792 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 01:26:29.792 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 01:26:29.941 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 01:26:30.103 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 01:26:30.144 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 01:26:30.293 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 01:26:30.294 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 01:26:30.610 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 01:26:30.610 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 01:27:09.594 +02:00 [INF] AuthenticationScheme: Google was challenged.
2020-08-12 01:27:10.689 +02:00 [INF] Removing 0 grants
2020-08-12 01:27:10.735 +02:00 [INF] Removing 0 device flow codes
2020-08-12 01:27:16.139 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 01:27:16.327 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 01:27:16.327 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 01:27:16.404 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 01:27:16.462 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 01:27:16.468 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 01:27:16.492 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 01:27:16.500 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 01:27:16.686 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 01:27:16.686 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 01:27:35.331 +02:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2020-08-12 01:27:35.597 +02:00 [DBG] Augmenting SignInContext
2020-08-12 01:27:35.597 +02:00 [DBG] Adding idp claim with value: local
2020-08-12 01:27:35.597 +02:00 [DBG] Adding auth_time claim with value: 1597188455
2020-08-12 01:27:35.606 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-12 01:27:35.610 +02:00 [INF] {"Username":"aboelkassem","Provider":null,"ProviderUserId":null,"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","DisplayName":"aboelkassem","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"8000001a-0004-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-11T23:27:35.0000000Z","ProcessId":20804,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-12 01:27:37.480 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-12 01:27:37.480 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-12 01:27:37.480 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-12 01:27:37.482 +02:00 [DBG] Start authorize callback request
2020-08-12 01:27:37.485 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 01:27:37.485 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 01:27:37.515 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 01:27:37.515 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 01:27:37.585 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 01:27:37.641 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 01:27:37.643 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 01:27:37.645 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 01:27:37.645 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 01:27:37.646 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"ZnRSQ1p3WURtZ2dsM0ppa3JTejVoYXdiWklXQ35ldkZjYnVpaFh2Mk9LU1NI","UiLocales":null,"Nonce":"ZnRSQ1p3WURtZ2dsM0ppa3JTejVoYXdiWklXQ35ldkZjYnVpaFh2Mk9LU1NI","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"ZnRSQ1p3WURtZ2dsM0ppa3JTejVoYXdiWklXQ35ldkZjYnVpaFh2Mk9LU1NI","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"ZnRSQ1p3WURtZ2dsM0ppa3JTejVoYXdiWklXQ35ldkZjYnVpaFh2Mk9LU1NI"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 01:27:37.664 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 01:27:37.667 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 01:27:37.714 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 01:27:37.715 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 01:27:38.191 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 01:27:38.191 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 01:27:38.196 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****JsEA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****2Ayw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000001b-0004-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-11T23:27:38.0000000Z","ProcessId":20804,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 01:27:38.197 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"ZnRSQ1p3WURtZ2dsM0ppa3JTejVoYXdiWklXQ35ldkZjYnVpaFh2Mk9LU1NI","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 01:27:38.203 +02:00 [DBG] Augmenting SignInContext
2020-08-12 01:27:38.203 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-12 01:27:38.435 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 01:27:38.439 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 01:27:38.439 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 01:27:38.439 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 01:27:38.439 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 01:27:38.439 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 01:27:38.440 +02:00 [DBG] Start discovery request
2020-08-12 01:27:38.603 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 01:27:39.087 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 01:27:39.092 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 01:27:39.092 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 01:27:39.092 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 01:27:39.093 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 01:27:39.093 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 01:27:39.093 +02:00 [DBG] Start key discovery request
2020-08-12 01:27:44.787 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 01:27:44.787 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 01:27:44.787 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 01:27:44.787 +02:00 [DBG] Start authorize request
2020-08-12 01:27:44.787 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 01:27:44.787 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 01:27:44.824 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 01:27:44.824 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 01:27:44.894 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 01:27:44.963 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 01:27:44.968 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 01:27:44.970 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 01:27:44.970 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 01:27:44.970 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"Tld0SWZNfkNMZF8uMEJjYkNyfnhHRWhNM0ZObmNOaktCYkRRRkVDQlZlQXBa","UiLocales":null,"Nonce":"Tld0SWZNfkNMZF8uMEJjYkNyfnhHRWhNM0ZObmNOaktCYkRRRkVDQlZlQXBa","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"Tld0SWZNfkNMZF8uMEJjYkNyfnhHRWhNM0ZObmNOaktCYkRRRkVDQlZlQXBa","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"Tld0SWZNfkNMZF8uMEJjYkNyfnhHRWhNM0ZObmNOaktCYkRRRkVDQlZlQXBa"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 01:27:45.017 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 01:27:45.017 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 01:27:45.017 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 01:27:45.017 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 01:27:45.037 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 01:27:45.037 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 01:27:45.039 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****96AA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****CNfg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000001c-0004-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-11T23:27:45.0000000Z","ProcessId":20804,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 01:27:45.039 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"Tld0SWZNfkNMZF8uMEJjYkNyfnhHRWhNM0ZObmNOaktCYkRRRkVDQlZlQXBa","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 01:27:45.243 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 01:27:45.247 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 01:27:45.247 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 01:27:45.248 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 01:27:45.249 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 01:27:45.249 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 01:27:45.249 +02:00 [DBG] Start discovery request
2020-08-12 01:27:45.377 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 01:27:45.433 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 01:27:45.435 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 01:27:45.436 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 01:27:45.436 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 01:27:45.436 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 01:27:45.436 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 01:27:45.436 +02:00 [DBG] Start key discovery request
2020-08-12 01:27:46.821 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 01:27:46.822 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 01:27:46.822 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 01:27:46.822 +02:00 [DBG] Start authorize request
2020-08-12 01:27:46.822 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 01:27:46.822 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 01:27:46.872 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 01:27:46.872 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 01:27:46.877 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 01:27:46.891 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 01:27:46.893 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 01:27:46.897 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 01:27:46.897 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 01:27:46.897 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"cThKS21BWTV5MjBLQ2pCZzRYaU81WWNJQXBjU2pEU2suV1F2dGc3OEpkRWNB","UiLocales":null,"Nonce":"cThKS21BWTV5MjBLQ2pCZzRYaU81WWNJQXBjU2pEU2suV1F2dGc3OEpkRWNB","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"cThKS21BWTV5MjBLQ2pCZzRYaU81WWNJQXBjU2pEU2suV1F2dGc3OEpkRWNB","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"cThKS21BWTV5MjBLQ2pCZzRYaU81WWNJQXBjU2pEU2suV1F2dGc3OEpkRWNB"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 01:27:46.945 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 01:27:46.945 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 01:27:46.946 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 01:27:46.946 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 01:27:46.966 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 01:27:46.966 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 01:27:46.968 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****BAbA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****A1NQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000001d-0004-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-11T23:27:46.0000000Z","ProcessId":20804,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 01:27:46.968 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"cThKS21BWTV5MjBLQ2pCZzRYaU81WWNJQXBjU2pEU2suV1F2dGc3OEpkRWNB","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 01:27:47.231 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 01:27:47.234 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 01:27:47.234 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 01:27:47.234 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 01:27:47.235 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 01:27:47.235 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 01:27:47.235 +02:00 [DBG] Start discovery request
2020-08-12 01:27:47.359 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 01:27:47.401 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 01:27:47.406 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 01:27:47.406 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 01:27:47.406 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 01:27:47.406 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 01:27:47.406 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 01:27:47.406 +02:00 [DBG] Start key discovery request
2020-08-12 01:27:57.683 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 01:27:57.683 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 01:27:57.683 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 01:27:57.683 +02:00 [DBG] Start authorize request
2020-08-12 01:27:57.683 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 01:27:57.683 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 01:27:58.116 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 01:27:58.116 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 01:27:58.197 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 01:27:58.254 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 01:27:58.358 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 01:27:58.381 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 01:27:58.381 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 01:27:58.381 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"WklFNE13Z2gxbWN5S3hXYmo3cXhMQTlSbWQxNkhrT1pNbDl-ZFlTejlvc2F-","UiLocales":null,"Nonce":"WklFNE13Z2gxbWN5S3hXYmo3cXhMQTlSbWQxNkhrT1pNbDl-ZFlTejlvc2F-","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"WklFNE13Z2gxbWN5S3hXYmo3cXhMQTlSbWQxNkhrT1pNbDl-ZFlTejlvc2F-","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"WklFNE13Z2gxbWN5S3hXYmo3cXhMQTlSbWQxNkhrT1pNbDl-ZFlTejlvc2F-"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 01:27:58.430 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 01:27:58.430 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 01:27:58.430 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 01:27:58.430 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 01:27:58.704 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 01:27:58.704 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 01:27:58.707 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****51bA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****8l5w","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000001e-0004-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-11T23:27:58.0000000Z","ProcessId":20804,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 01:27:58.707 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"WklFNE13Z2gxbWN5S3hXYmo3cXhMQTlSbWQxNkhrT1pNbDl-ZFlTejlvc2F-","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 01:27:59.041 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 01:27:59.102 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 01:27:59.102 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 01:27:59.102 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 01:27:59.102 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 01:27:59.102 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 01:27:59.103 +02:00 [DBG] Start discovery request
2020-08-12 01:27:59.238 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 01:27:59.248 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 01:27:59.486 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 01:27:59.486 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 01:27:59.486 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 01:27:59.487 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 01:27:59.487 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 01:27:59.487 +02:00 [DBG] Start key discovery request
2020-08-12 02:14:05.555 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-12 02:14:05.882 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-12 02:14:05.883 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-12 02:14:05.883 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-12 02:14:05.883 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-12 02:14:05.883 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-12 02:14:05.883 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-12 02:14:07.408 +02:00 [DBG] Login Url: /Account/Login
2020-08-12 02:14:07.410 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-12 02:14:07.410 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-12 02:14:07.410 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-12 02:14:07.410 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-12 02:14:07.410 +02:00 [DBG] Error Url: /home/error
2020-08-12 02:14:07.411 +02:00 [DBG] Error Id Parameter: errorId
2020-08-12 02:15:31.577 +02:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2020-08-12 02:15:32.753 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-12 02:15:32.754 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-12 02:15:32.755 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-12 02:15:33.230 +02:00 [INF] {"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","DisplayName":"Mohamed Abdelrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"8000000e-0002-fc00-b63f-84710c7967bb","TimeStamp":"2020-08-12T00:15:33.0000000Z","ProcessId":5756,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-12 02:15:47.477 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Value cannot be null or empty. (Parameter 'url')
   at Microsoft.AspNetCore.Mvc.ControllerBase.Redirect(String url)
   at IdentityServer4.Quickstart.UI.AccountController.Logout(LogoutInputModel model) in E:\programming\Projects\Listify\Listify.Backend\Listify.Identity\Quickstart\Account\AccountController.cs:line 257
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-08-12 02:16:08.140 +02:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2020-08-12 02:16:08.180 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-12 02:16:08.182 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-12 02:16:08.183 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-12 02:16:08.184 +02:00 [INF] {"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","DisplayName":"Mohamed Abdelrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"80000011-0002-fc00-b63f-84710c7967bb","TimeStamp":"2020-08-12T00:16:08.0000000Z","ProcessId":5756,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-12 02:16:08.236 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Value cannot be null or empty. (Parameter 'url')
   at Microsoft.AspNetCore.Mvc.ControllerBase.Redirect(String url)
   at IdentityServer4.Quickstart.UI.AccountController.Logout(LogoutInputModel model) in E:\programming\Projects\Listify\Listify.Backend\Listify.Identity\Quickstart\Account\AccountController.cs:line 257
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-08-12 02:17:30.929 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 02:17:31.760 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 02:17:31.761 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 02:17:31.825 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 02:17:31.828 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 02:17:31.828 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 02:17:31.842 +02:00 [DBG] Start discovery request
2020-08-12 02:17:34.009 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 02:17:34.115 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 02:17:34.119 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 02:17:34.119 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 02:17:34.120 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 02:17:34.121 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 02:17:34.121 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 02:17:34.122 +02:00 [DBG] Start key discovery request
2020-08-12 02:17:34.438 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 02:17:34.442 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 02:17:34.442 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 02:17:34.444 +02:00 [DBG] Start authorize request
2020-08-12 02:17:34.450 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 02:17:34.454 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 02:17:34.811 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 02:17:34.818 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 02:17:35.051 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 02:17:35.103 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 02:17:35.112 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 02:17:35.115 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 02:17:35.120 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 02:17:35.127 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"VFNaQUZlWGF-T0V6dkpDbi5LWn5ZSWpIM3RNMUhWZGIxcmdra1NqUjhkQTRW","UiLocales":null,"Nonce":"VFNaQUZlWGF-T0V6dkpDbi5LWn5ZSWpIM3RNMUhWZGIxcmdra1NqUjhkQTRW","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"VFNaQUZlWGF-T0V6dkpDbi5LWn5ZSWpIM3RNMUhWZGIxcmdra1NqUjhkQTRW","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"VFNaQUZlWGF-T0V6dkpDbi5LWn5ZSWpIM3RNMUhWZGIxcmdra1NqUjhkQTRW"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 02:17:35.168 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 02:17:35.170 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 02:17:35.289 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 02:17:35.290 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 02:17:35.710 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 02:17:35.710 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 02:17:35.717 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****B38Q","$type":"Token"},{"TokenType":"access_token","TokenValue":"****s1DQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000012-0002-fc00-b63f-84710c7967bb","TimeStamp":"2020-08-12T00:17:35.0000000Z","ProcessId":5756,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 02:17:35.719 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"VFNaQUZlWGF-T0V6dkpDbi5LWn5ZSWpIM3RNMUhWZGIxcmdra1NqUjhkQTRW","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 02:17:35.987 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 02:17:35.994 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 02:17:35.995 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 02:17:35.995 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 02:17:35.996 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 02:17:35.996 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 02:17:35.996 +02:00 [DBG] Start discovery request
2020-08-12 02:17:36.027 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 02:17:36.169 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 02:17:36.176 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 02:17:36.176 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 02:17:36.177 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 02:17:36.178 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 02:17:36.178 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 02:17:36.178 +02:00 [DBG] Start key discovery request
2020-08-12 02:17:37.115 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 02:17:37.116 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 02:17:37.116 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 02:17:37.116 +02:00 [DBG] Start authorize request
2020-08-12 02:17:37.116 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 02:17:37.116 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 02:17:37.167 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 02:17:37.167 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 02:17:37.172 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 02:17:37.189 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 02:17:37.191 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 02:17:37.193 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 02:17:37.193 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 02:17:37.194 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"Z0EuZWVkMExFQnByVk5jdi5fZkl0VWt2YkpGQkVnZS5xNjlpT19oX3hPRVNo","UiLocales":null,"Nonce":"Z0EuZWVkMExFQnByVk5jdi5fZkl0VWt2YkpGQkVnZS5xNjlpT19oX3hPRVNo","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"Z0EuZWVkMExFQnByVk5jdi5fZkl0VWt2YkpGQkVnZS5xNjlpT19oX3hPRVNo","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"Z0EuZWVkMExFQnByVk5jdi5fZkl0VWt2YkpGQkVnZS5xNjlpT19oX3hPRVNo"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 02:17:37.197 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 02:17:37.197 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 02:17:37.197 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 02:17:37.197 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 02:17:37.206 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 02:17:37.206 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 02:17:37.207 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****ZA5Q","$type":"Token"},{"TokenType":"access_token","TokenValue":"****z0sQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000013-0002-fc00-b63f-84710c7967bb","TimeStamp":"2020-08-12T00:17:37.0000000Z","ProcessId":5756,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 02:17:37.207 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"Z0EuZWVkMExFQnByVk5jdi5fZkl0VWt2YkpGQkVnZS5xNjlpT19oX3hPRVNo","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 02:17:37.810 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 02:17:37.815 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 02:17:37.815 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 02:17:37.816 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 02:17:37.820 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 02:17:37.820 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 02:17:37.820 +02:00 [DBG] Start discovery request
2020-08-12 02:17:37.842 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 02:17:37.865 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 02:17:37.870 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 02:17:37.871 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 02:17:37.872 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 02:17:37.874 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 02:17:37.874 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 02:17:37.874 +02:00 [DBG] Start key discovery request
2020-08-12 02:17:39.300 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 02:17:39.306 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 02:17:39.306 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 02:17:39.306 +02:00 [DBG] Start authorize request
2020-08-12 02:17:39.307 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 02:17:39.307 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 02:17:39.355 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 02:17:39.355 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 02:17:39.360 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 02:17:39.376 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 02:17:39.381 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 02:17:39.396 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 02:17:39.397 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 02:17:39.397 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"TDF3a2dJZXZVT296WXJUQk5jU1VYVm5MYm9wV2pSdzl4cTVyd3laZXdsaHhs","UiLocales":null,"Nonce":"TDF3a2dJZXZVT296WXJUQk5jU1VYVm5MYm9wV2pSdzl4cTVyd3laZXdsaHhs","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"TDF3a2dJZXZVT296WXJUQk5jU1VYVm5MYm9wV2pSdzl4cTVyd3laZXdsaHhs","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"TDF3a2dJZXZVT296WXJUQk5jU1VYVm5MYm9wV2pSdzl4cTVyd3laZXdsaHhs"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 02:17:39.401 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 02:17:39.402 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 02:17:39.402 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 02:17:39.402 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 02:17:39.411 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 02:17:39.411 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 02:17:39.413 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****UI5A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****4cmw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000014-0002-fc00-b63f-84710c7967bb","TimeStamp":"2020-08-12T00:17:39.0000000Z","ProcessId":5756,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 02:17:39.413 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"TDF3a2dJZXZVT296WXJUQk5jU1VYVm5MYm9wV2pSdzl4cTVyd3laZXdsaHhs","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 02:17:39.771 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 02:17:39.777 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 02:17:39.777 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 02:17:39.777 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 02:17:39.778 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 02:17:39.778 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 02:17:39.778 +02:00 [DBG] Start discovery request
2020-08-12 02:17:39.794 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 02:17:39.952 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 02:17:39.959 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 02:17:39.959 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 02:17:39.959 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 02:17:39.959 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 02:17:39.959 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 02:17:39.960 +02:00 [DBG] Start key discovery request
2020-08-12 02:17:40.525 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 02:17:40.525 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 02:17:40.525 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 02:17:40.525 +02:00 [DBG] Start authorize request
2020-08-12 02:17:40.525 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 02:17:40.525 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 02:17:40.558 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 02:17:40.558 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 02:17:40.563 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 02:17:40.579 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 02:17:40.582 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 02:17:40.593 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 02:17:40.599 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 02:17:40.600 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"Q2hmVzZDLWVHVVkxRWJJUU1kZ1pUUk9QZGFxflhlOWl0bEhaU3pMU0JnVkk5","UiLocales":null,"Nonce":"Q2hmVzZDLWVHVVkxRWJJUU1kZ1pUUk9QZGFxflhlOWl0bEhaU3pMU0JnVkk5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"Q2hmVzZDLWVHVVkxRWJJUU1kZ1pUUk9QZGFxflhlOWl0bEhaU3pMU0JnVkk5","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"Q2hmVzZDLWVHVVkxRWJJUU1kZ1pUUk9QZGFxflhlOWl0bEhaU3pMU0JnVkk5"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 02:17:40.603 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 02:17:40.603 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 02:17:40.603 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 02:17:40.603 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 02:17:40.611 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 02:17:40.611 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 02:17:40.612 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****xW0A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****ovMA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000015-0002-fc00-b63f-84710c7967bb","TimeStamp":"2020-08-12T00:17:40.0000000Z","ProcessId":5756,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 02:17:40.612 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"Q2hmVzZDLWVHVVkxRWJJUU1kZ1pUUk9QZGFxflhlOWl0bEhaU3pMU0JnVkk5","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 02:17:40.793 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 02:17:40.796 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 02:17:40.796 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 02:17:40.797 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 02:17:40.797 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 02:17:40.797 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 02:17:40.797 +02:00 [DBG] Start discovery request
2020-08-12 02:17:40.809 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 02:17:40.946 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 02:17:40.950 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 02:17:40.950 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 02:17:40.950 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 02:17:40.951 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 02:17:40.951 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 02:17:40.951 +02:00 [DBG] Start key discovery request
2020-08-12 02:17:41.268 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 02:17:41.268 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 02:17:41.268 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 02:17:41.268 +02:00 [DBG] Start authorize request
2020-08-12 02:17:41.269 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 02:17:41.269 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 02:17:41.294 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 02:17:41.294 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 02:17:41.298 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 02:17:41.310 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 02:17:41.314 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 02:17:41.325 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 02:17:41.325 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 02:17:41.326 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"eTYzV1IyTndwT1RNbWlBSG1HTUZqMjdkNURPRDM1azBUajgtZmRKNnNPbWdq","UiLocales":null,"Nonce":"eTYzV1IyTndwT1RNbWlBSG1HTUZqMjdkNURPRDM1azBUajgtZmRKNnNPbWdq","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"eTYzV1IyTndwT1RNbWlBSG1HTUZqMjdkNURPRDM1azBUajgtZmRKNnNPbWdq","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"eTYzV1IyTndwT1RNbWlBSG1HTUZqMjdkNURPRDM1azBUajgtZmRKNnNPbWdq"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 02:17:41.329 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 02:17:41.329 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 02:17:41.329 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 02:17:41.329 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 02:17:41.336 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 02:17:41.336 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 02:17:41.337 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****fO4A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****NqBg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000016-0002-fc00-b63f-84710c7967bb","TimeStamp":"2020-08-12T00:17:41.0000000Z","ProcessId":5756,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 02:17:41.337 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"eTYzV1IyTndwT1RNbWlBSG1HTUZqMjdkNURPRDM1azBUajgtZmRKNnNPbWdq","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 02:17:41.534 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 02:17:41.537 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 02:17:41.537 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 02:17:41.538 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 02:17:41.538 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 02:17:41.539 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 02:17:41.539 +02:00 [DBG] Start discovery request
2020-08-12 02:17:41.553 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 02:17:41.710 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 02:17:41.713 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 02:17:41.713 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 02:17:41.713 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 02:17:41.886 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 02:17:42.133 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 02:17:42.133 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 02:17:42.133 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 02:17:42.133 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 02:17:42.133 +02:00 [DBG] Start authorize request
2020-08-12 02:17:42.133 +02:00 [DBG] Start key discovery request
2020-08-12 02:17:42.133 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 02:17:42.133 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 02:17:42.162 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 02:17:42.162 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 02:17:42.169 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 02:17:42.181 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 02:17:42.185 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 02:17:42.204 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 02:17:42.205 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 02:17:42.205 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"OE53RE9lUm91eGRRWi5ZSy5udU5wZFdIQnB2aF96U2pRbzJnV2pkMTdZcnI2","UiLocales":null,"Nonce":"OE53RE9lUm91eGRRWi5ZSy5udU5wZFdIQnB2aF96U2pRbzJnV2pkMTdZcnI2","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"OE53RE9lUm91eGRRWi5ZSy5udU5wZFdIQnB2aF96U2pRbzJnV2pkMTdZcnI2","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"OE53RE9lUm91eGRRWi5ZSy5udU5wZFdIQnB2aF96U2pRbzJnV2pkMTdZcnI2"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 02:17:42.209 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 02:17:42.209 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 02:17:42.209 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 02:17:42.209 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 02:17:42.215 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 02:17:42.215 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 02:17:42.217 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****36dw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****aAkQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000017-0002-fc00-b63f-84710c7967bb","TimeStamp":"2020-08-12T00:17:42.0000000Z","ProcessId":5756,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 02:17:42.217 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"OE53RE9lUm91eGRRWi5ZSy5udU5wZFdIQnB2aF96U2pRbzJnV2pkMTdZcnI2","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 02:17:42.377 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 02:17:42.381 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 02:17:42.381 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 02:17:42.382 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 02:17:42.382 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 02:17:42.382 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 02:17:42.382 +02:00 [DBG] Start discovery request
2020-08-12 02:17:42.395 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 02:17:42.764 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 02:17:42.767 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 02:17:42.767 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 02:17:42.768 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 02:17:42.768 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 02:17:42.768 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 02:17:42.768 +02:00 [DBG] Start key discovery request
2020-08-12 02:19:07.245 +02:00 [INF] Removing 0 grants
2020-08-12 02:19:07.259 +02:00 [INF] Removing 0 device flow codes
2020-08-12 02:19:17.909 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 02:19:17.926 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 02:19:17.926 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 02:19:18.030 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 02:19:18.030 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 02:19:18.030 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 02:19:18.031 +02:00 [DBG] Start discovery request
2020-08-12 02:19:18.114 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 02:19:18.378 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 02:19:18.393 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 02:19:18.393 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 02:19:18.394 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 02:19:18.395 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 02:19:18.395 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 02:19:18.395 +02:00 [DBG] Start key discovery request
2020-08-12 02:20:00.274 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 02:20:00.275 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 02:20:00.275 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 02:20:00.275 +02:00 [DBG] Start authorize request
2020-08-12 02:20:00.275 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 02:20:00.275 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 02:20:00.549 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 02:20:00.549 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 02:20:00.554 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 02:20:00.567 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 02:20:00.570 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 02:20:00.578 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 02:20:00.579 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 02:20:00.579 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"N3d5SDlGT2dMeEtBWVZ1Zkl5TVBBcVl-dEdXcF9KZUt3RFp0Vi1yRVlfRG9p","UiLocales":null,"Nonce":"N3d5SDlGT2dMeEtBWVZ1Zkl5TVBBcVl-dEdXcF9KZUt3RFp0Vi1yRVlfRG9p","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"N3d5SDlGT2dMeEtBWVZ1Zkl5TVBBcVl-dEdXcF9KZUt3RFp0Vi1yRVlfRG9p","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"N3d5SDlGT2dMeEtBWVZ1Zkl5TVBBcVl-dEdXcF9KZUt3RFp0Vi1yRVlfRG9p"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 02:20:00.583 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 02:20:00.583 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 02:20:00.584 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 02:20:00.584 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 02:20:00.590 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 02:20:00.590 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 02:20:00.591 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****pbGA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****FZfg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000030-0004-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-12T00:20:00.0000000Z","ProcessId":5756,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 02:20:00.592 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"N3d5SDlGT2dMeEtBWVZ1Zkl5TVBBcVl-dEdXcF9KZUt3RFp0Vi1yRVlfRG9p","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 02:20:01.057 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 02:20:01.061 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 02:20:01.061 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 02:20:01.063 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 02:20:01.064 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 02:20:01.064 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 02:20:01.064 +02:00 [DBG] Start discovery request
2020-08-12 02:20:01.077 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 02:20:01.405 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 02:20:01.408 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 02:20:01.408 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 02:20:01.409 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 02:20:01.409 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 02:20:01.409 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 02:20:01.409 +02:00 [DBG] Start key discovery request
2020-08-12 02:21:44.501 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 02:21:44.537 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 02:21:44.537 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 02:21:44.538 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 02:21:44.538 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 02:21:44.538 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 02:21:44.538 +02:00 [DBG] Start discovery request
2020-08-12 02:21:44.566 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 02:21:44.807 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 02:21:44.812 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 02:21:44.812 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 02:21:44.825 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 02:21:44.825 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 02:21:44.825 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 02:21:44.825 +02:00 [DBG] Start key discovery request
2020-08-12 02:21:48.423 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 02:21:48.423 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 02:21:48.423 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 02:21:48.424 +02:00 [DBG] Start authorize request
2020-08-12 02:21:48.424 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 02:21:48.424 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 02:21:48.463 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 02:21:48.463 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 02:21:48.472 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 02:21:48.499 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 02:21:48.508 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 02:21:48.537 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 02:21:48.538 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 02:21:48.538 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"Qkk1M19xd3IxLjBkUXdKM1BOTDhWUGQ0VDZ-V3ptZUEudkdPdXdFa3dkQWZw","UiLocales":null,"Nonce":"Qkk1M19xd3IxLjBkUXdKM1BOTDhWUGQ0VDZ-V3ptZUEudkdPdXdFa3dkQWZw","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"Qkk1M19xd3IxLjBkUXdKM1BOTDhWUGQ0VDZ-V3ptZUEudkdPdXdFa3dkQWZw","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"Qkk1M19xd3IxLjBkUXdKM1BOTDhWUGQ0VDZ-V3ptZUEudkdPdXdFa3dkQWZw"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 02:21:48.544 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 02:21:48.545 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 02:21:48.545 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 02:21:48.545 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 02:21:48.556 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 02:21:48.557 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 02:21:48.559 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****hDDg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****4Kuw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000031-0004-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-12T00:21:48.0000000Z","ProcessId":5756,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 02:21:48.560 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"Qkk1M19xd3IxLjBkUXdKM1BOTDhWUGQ0VDZ-V3ptZUEudkdPdXdFa3dkQWZw","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 02:21:49.502 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 02:21:49.510 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 02:21:49.510 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 02:21:49.511 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 02:21:49.511 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 02:21:49.511 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 02:21:49.511 +02:00 [DBG] Start discovery request
2020-08-12 02:21:49.537 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 02:21:50.061 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 02:21:50.066 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 02:21:50.066 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 02:21:50.067 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 02:21:50.067 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 02:21:50.067 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 02:21:50.067 +02:00 [DBG] Start key discovery request
2020-08-12 02:23:54.372 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 02:23:54.416 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 02:23:54.425 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 02:23:54.498 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 02:23:54.499 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 02:23:54.499 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 02:23:54.499 +02:00 [DBG] Start discovery request
2020-08-12 02:23:54.653 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 02:23:56.084 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 02:23:56.088 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 02:23:56.088 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 02:23:56.088 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 02:23:56.088 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 02:23:56.088 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 02:23:56.088 +02:00 [DBG] Start key discovery request
2020-08-12 02:24:07.281 +02:00 [INF] Removing 0 grants
2020-08-12 02:24:07.284 +02:00 [INF] Removing 0 device flow codes
2020-08-12 02:29:06.916 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-12 02:29:06.947 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-12 02:29:06.947 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-12 02:29:06.947 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-12 02:29:06.948 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-12 02:29:06.948 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-12 02:29:06.948 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-12 02:29:07.210 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 02:29:07.263 +02:00 [DBG] Login Url: /Account/Login
2020-08-12 02:29:07.263 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-12 02:29:07.263 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-12 02:29:07.263 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-12 02:29:07.263 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-12 02:29:07.263 +02:00 [DBG] Error Url: /home/error
2020-08-12 02:29:07.263 +02:00 [DBG] Error Id Parameter: errorId
2020-08-12 02:29:07.303 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 02:29:07.307 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 02:29:07.317 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 02:29:07.321 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 02:29:07.321 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 02:29:07.351 +02:00 [DBG] Start discovery request
2020-08-12 02:29:08.336 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 02:29:08.449 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 02:29:08.453 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 02:29:08.453 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 02:29:08.454 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 02:29:08.455 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 02:29:08.455 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 02:29:08.456 +02:00 [DBG] Start key discovery request
2020-08-12 02:29:08.519 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 02:29:08.524 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 02:29:08.524 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 02:29:08.529 +02:00 [DBG] Start authorize request
2020-08-12 02:29:08.535 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 02:29:08.546 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 02:29:08.863 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 02:29:08.869 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 02:29:08.948 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 02:29:08.993 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 02:29:09.005 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 02:29:09.007 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 02:29:09.013 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 02:29:09.024 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"NWYuNHBNR1BtMDdxbGFVc1R4Z3dhdTVpY0QxLXVHaERHZkwxakh6a0V1RzdR","UiLocales":null,"Nonce":"NWYuNHBNR1BtMDdxbGFVc1R4Z3dhdTVpY0QxLXVHaERHZkwxakh6a0V1RzdR","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"NWYuNHBNR1BtMDdxbGFVc1R4Z3dhdTVpY0QxLXVHaERHZkwxakh6a0V1RzdR","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"NWYuNHBNR1BtMDdxbGFVc1R4Z3dhdTVpY0QxLXVHaERHZkwxakh6a0V1RzdR"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 02:29:09.082 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 02:29:09.086 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 02:29:09.096 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 02:29:09.097 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 02:29:09.323 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 02:29:09.323 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 02:29:09.337 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****htvw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****lCFA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000001a-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T00:29:09.0000000Z","ProcessId":17788,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 02:29:09.339 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"NWYuNHBNR1BtMDdxbGFVc1R4Z3dhdTVpY0QxLXVHaERHZkwxakh6a0V1RzdR","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 02:29:09.705 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 02:29:09.717 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 02:29:09.717 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 02:29:09.719 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 02:29:09.721 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 02:29:09.722 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 02:29:09.722 +02:00 [DBG] Start discovery request
2020-08-12 02:29:09.747 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 02:29:09.883 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 02:29:09.889 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 02:29:09.889 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 02:29:09.890 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 02:29:09.891 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 02:29:09.891 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 02:29:09.891 +02:00 [DBG] Start key discovery request
2020-08-12 02:29:24.616 +02:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2020-08-12 02:29:24.681 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-12 02:29:24.682 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-12 02:29:24.683 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-12 02:29:24.684 +02:00 [INF] {"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","DisplayName":"Mohamed Abdelrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"8000001c-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T00:29:24.0000000Z","ProcessId":17788,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-12 02:29:24.914 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Value cannot be null or empty. (Parameter 'url')
   at Microsoft.AspNetCore.Mvc.ControllerBase.Redirect(String url)
   at IdentityServer4.Quickstart.UI.AccountController.Logout(LogoutInputModel model) in E:\programming\Projects\Listify\Listify.Backend\Listify.Identity\Quickstart\Account\AccountController.cs:line 257
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-08-12 02:34:36.873 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-12 02:34:36.901 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-12 02:34:36.901 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-12 02:34:36.901 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-12 02:34:36.901 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-12 02:34:36.901 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-12 02:34:36.902 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-12 02:34:37.153 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 02:34:37.184 +02:00 [DBG] Login Url: /Account/Login
2020-08-12 02:34:37.184 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-12 02:34:37.184 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-12 02:34:37.184 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-12 02:34:37.184 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-12 02:34:37.184 +02:00 [DBG] Error Url: /home/error
2020-08-12 02:34:37.184 +02:00 [DBG] Error Id Parameter: errorId
2020-08-12 02:34:37.247 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 02:34:37.249 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 02:34:37.265 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 02:34:37.269 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 02:34:37.269 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 02:34:37.272 +02:00 [DBG] Start discovery request
2020-08-12 02:34:38.082 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 02:34:38.177 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 02:34:38.180 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 02:34:38.180 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 02:34:38.186 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 02:34:38.187 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 02:34:38.187 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 02:34:38.189 +02:00 [DBG] Start key discovery request
2020-08-12 02:34:43.483 +02:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2020-08-12 02:35:42.365 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-12 02:35:42.366 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-12 02:35:42.367 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-12 02:35:50.882 +02:00 [INF] {"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","DisplayName":"Mohamed Abdelrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"80000010-0001-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-12T00:35:50.0000000Z","ProcessId":17616,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-12 02:38:34.555 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Value cannot be null or empty. (Parameter 'url')
   at Microsoft.AspNetCore.Mvc.ControllerBase.Redirect(String url)
   at IdentityServer4.Quickstart.UI.AccountController.Logout(LogoutInputModel model) in E:\programming\Projects\Listify\Listify.Backend\Listify.Identity\Quickstart\Account\AccountController.cs:line 257
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-08-12 02:41:27.138 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-12 02:41:27.168 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-12 02:41:27.168 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-12 02:41:27.168 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-12 02:41:27.168 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-12 02:41:27.168 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-12 02:41:27.168 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-12 02:41:27.430 +02:00 [DBG] Login Url: /Account/Login
2020-08-12 02:41:27.432 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-12 02:41:27.432 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-12 02:41:27.432 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-12 02:41:27.432 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-12 02:41:27.432 +02:00 [DBG] Error Url: /home/error
2020-08-12 02:41:27.432 +02:00 [DBG] Error Id Parameter: errorId
2020-08-12 02:42:27.877 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-12 02:42:27.905 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-12 02:42:27.905 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-12 02:42:27.905 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-12 02:42:27.905 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-12 02:42:27.905 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-12 02:42:27.905 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-12 02:42:28.181 +02:00 [DBG] Login Url: /Account/Login
2020-08-12 02:42:28.183 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-12 02:42:28.183 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-12 02:42:28.183 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-12 02:42:28.183 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-12 02:42:28.183 +02:00 [DBG] Error Url: /home/error
2020-08-12 02:42:28.184 +02:00 [DBG] Error Id Parameter: errorId
2020-08-12 02:46:05.918 +02:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2020-08-12 02:46:20.809 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-12 02:46:20.810 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-12 02:46:20.811 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-12 02:46:20.819 +02:00 [INF] {"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","DisplayName":"Mohamed Abdelrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"80000037-0004-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-12T00:46:20.0000000Z","ProcessId":8504,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-12 02:46:20.958 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Value cannot be null or empty. (Parameter 'url')
   at Microsoft.AspNetCore.Mvc.ControllerBase.Redirect(String url)
   at IdentityServer4.Quickstart.UI.AccountController.Logout(LogoutInputModel model) in E:\programming\Projects\Listify\Listify.Backend\Listify.Identity\Quickstart\Account\AccountController.cs:line 257
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-08-12 02:47:28.160 +02:00 [INF] Removing 0 grants
2020-08-12 02:47:28.179 +02:00 [INF] Removing 0 device flow codes
2020-08-12 03:07:04.296 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-12 03:07:04.360 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-12 03:07:04.360 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-12 03:07:04.360 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-12 03:07:04.360 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-12 03:07:04.360 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-12 03:07:04.360 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-12 03:07:04.564 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 03:07:04.609 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:07:04.612 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:07:04.688 +02:00 [DBG] Login Url: /Account/Login
2020-08-12 03:07:04.688 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-12 03:07:04.688 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-12 03:07:04.688 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-12 03:07:04.688 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-12 03:07:04.688 +02:00 [DBG] Error Url: /home/error
2020-08-12 03:07:04.688 +02:00 [DBG] Error Id Parameter: errorId
2020-08-12 03:07:04.706 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 03:07:04.712 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 03:07:04.712 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 03:07:04.714 +02:00 [DBG] Start discovery request
2020-08-12 03:07:05.221 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 03:07:07.744 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 03:07:07.749 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:07:07.749 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:07:07.751 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 03:07:07.753 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 03:07:07.753 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 03:07:07.755 +02:00 [DBG] Start key discovery request
2020-08-12 03:07:08.078 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 03:07:08.089 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 03:07:08.089 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 03:07:08.091 +02:00 [DBG] Start authorize request
2020-08-12 03:07:08.099 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:07:08.101 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 03:07:08.404 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 03:07:08.413 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 03:07:08.473 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:07:08.512 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:07:08.521 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:07:08.524 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:07:08.530 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 03:07:08.545 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"ZlNwWFMwLmdkMUdLem5KeTFpbkdOUS5BSHhmZHl5YWFqTDhsTVdicUR6T2ZL","UiLocales":null,"Nonce":"ZlNwWFMwLmdkMUdLem5KeTFpbkdOUS5BSHhmZHl5YWFqTDhsTVdicUR6T2ZL","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"ZlNwWFMwLmdkMUdLem5KeTFpbkdOUS5BSHhmZHl5YWFqTDhsTVdicUR6T2ZL","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"ZlNwWFMwLmdkMUdLem5KeTFpbkdOUS5BSHhmZHl5YWFqTDhsTVdicUR6T2ZL"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 03:07:08.565 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 03:07:08.573 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 03:07:08.590 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 03:07:08.591 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:07:08.831 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 03:07:08.831 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 03:07:08.844 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****YzuA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****WB3g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000004-0004-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-12T01:07:08.0000000Z","ProcessId":3236,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 03:07:08.846 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"ZlNwWFMwLmdkMUdLem5KeTFpbkdOUS5BSHhmZHl5YWFqTDhsTVdicUR6T2ZL","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 03:07:09.209 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 03:07:09.229 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:07:09.229 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:07:09.232 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 03:07:09.235 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 03:07:09.235 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 03:07:09.236 +02:00 [DBG] Start discovery request
2020-08-12 03:07:09.261 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 03:07:09.344 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 03:07:09.347 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:07:09.348 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:07:09.348 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 03:07:09.349 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 03:07:09.349 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 03:07:09.349 +02:00 [DBG] Start key discovery request
2020-08-12 03:07:10.081 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 03:07:10.082 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 03:07:10.082 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 03:07:10.082 +02:00 [DBG] Start authorize request
2020-08-12 03:07:10.082 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:07:10.082 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 03:07:10.113 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 03:07:10.114 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 03:07:10.119 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:07:10.132 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:07:10.139 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:07:10.154 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:07:10.155 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 03:07:10.155 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"ei5vV0xjVWhWOUx5NHNXNn56eVlYQUxpakprU0RNYUZVMkRBLVNsM0Nxbzly","UiLocales":null,"Nonce":"ei5vV0xjVWhWOUx5NHNXNn56eVlYQUxpakprU0RNYUZVMkRBLVNsM0Nxbzly","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"ei5vV0xjVWhWOUx5NHNXNn56eVlYQUxpakprU0RNYUZVMkRBLVNsM0Nxbzly","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"ei5vV0xjVWhWOUx5NHNXNn56eVlYQUxpakprU0RNYUZVMkRBLVNsM0Nxbzly"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 03:07:10.162 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 03:07:10.162 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 03:07:10.162 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 03:07:10.162 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:07:10.170 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 03:07:10.170 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 03:07:10.172 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****NqzA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****kBHg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000005-0004-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-12T01:07:10.0000000Z","ProcessId":3236,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 03:07:10.172 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"ei5vV0xjVWhWOUx5NHNXNn56eVlYQUxpakprU0RNYUZVMkRBLVNsM0Nxbzly","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 03:07:11.309 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 03:07:11.316 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:07:11.316 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:07:11.317 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 03:07:11.331 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 03:07:11.331 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 03:07:11.332 +02:00 [DBG] Start discovery request
2020-08-12 03:07:11.348 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 03:07:11.442 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 03:07:11.445 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:07:11.445 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:07:11.446 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 03:07:11.448 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 03:07:11.448 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 03:07:11.448 +02:00 [DBG] Start key discovery request
2020-08-12 03:07:12.206 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 03:07:12.216 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 03:07:12.216 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 03:07:12.216 +02:00 [DBG] Start authorize request
2020-08-12 03:07:12.217 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:07:12.217 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 03:07:12.274 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 03:07:12.275 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 03:07:12.283 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:07:12.301 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:07:12.307 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:07:12.326 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:07:12.327 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 03:07:12.327 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"Y29INm9WR1dnb0t6QkkyY1ZsTHBYN19DT2VwZFYxbUtKR1dackRIWHZUcVFl","UiLocales":null,"Nonce":"Y29INm9WR1dnb0t6QkkyY1ZsTHBYN19DT2VwZFYxbUtKR1dackRIWHZUcVFl","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"Y29INm9WR1dnb0t6QkkyY1ZsTHBYN19DT2VwZFYxbUtKR1dackRIWHZUcVFl","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"Y29INm9WR1dnb0t6QkkyY1ZsTHBYN19DT2VwZFYxbUtKR1dackRIWHZUcVFl"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 03:07:12.331 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 03:07:12.332 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 03:07:12.332 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 03:07:12.332 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:07:12.342 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 03:07:12.342 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 03:07:12.345 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****iWIA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****c41w","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000006-0004-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-12T01:07:12.0000000Z","ProcessId":3236,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 03:07:12.346 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"Y29INm9WR1dnb0t6QkkyY1ZsTHBYN19DT2VwZFYxbUtKR1dackRIWHZUcVFl","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 03:07:12.766 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 03:07:12.772 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:07:12.773 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:07:12.774 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 03:07:12.775 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 03:07:12.775 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 03:07:12.775 +02:00 [DBG] Start discovery request
2020-08-12 03:07:12.796 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 03:07:12.949 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 03:07:12.954 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:07:12.954 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:07:12.955 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 03:07:12.955 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 03:07:12.955 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 03:07:12.955 +02:00 [DBG] Start key discovery request
2020-08-12 03:07:13.206 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 03:07:13.207 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 03:07:13.207 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 03:07:13.207 +02:00 [DBG] Start authorize request
2020-08-12 03:07:13.207 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:07:13.207 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 03:07:13.252 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 03:07:13.253 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 03:07:13.258 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:07:13.274 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:07:13.280 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:07:13.296 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:07:13.297 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 03:07:13.297 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"d1pyeFNTaklRNV9tUkNHbWF4Y3pmM091UnNlX0JwWml4fkhKWW1KeHdpRTNx","UiLocales":null,"Nonce":"d1pyeFNTaklRNV9tUkNHbWF4Y3pmM091UnNlX0JwWml4fkhKWW1KeHdpRTNx","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"d1pyeFNTaklRNV9tUkNHbWF4Y3pmM091UnNlX0JwWml4fkhKWW1KeHdpRTNx","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"d1pyeFNTaklRNV9tUkNHbWF4Y3pmM091UnNlX0JwWml4fkhKWW1KeHdpRTNx"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 03:07:13.301 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 03:07:13.301 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 03:07:13.301 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 03:07:13.301 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:07:13.311 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 03:07:13.311 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 03:07:13.313 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Dx8A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****_DfQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000007-0004-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-12T01:07:13.0000000Z","ProcessId":3236,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 03:07:13.313 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"d1pyeFNTaklRNV9tUkNHbWF4Y3pmM091UnNlX0JwWml4fkhKWW1KeHdpRTNx","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 03:07:14.395 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 03:07:14.399 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:07:14.399 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:07:14.400 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 03:07:14.401 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 03:07:14.401 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 03:07:14.401 +02:00 [DBG] Start discovery request
2020-08-12 03:07:14.423 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 03:07:14.607 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 03:07:14.614 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:07:14.614 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:07:14.616 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 03:07:14.617 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 03:07:14.617 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 03:07:14.617 +02:00 [DBG] Start key discovery request
2020-08-12 03:07:14.902 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 03:07:14.903 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 03:07:14.903 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 03:07:14.903 +02:00 [DBG] Start authorize request
2020-08-12 03:07:14.903 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:07:14.903 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 03:07:14.939 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 03:07:14.941 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 03:07:14.949 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:07:14.965 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:07:14.969 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:07:14.982 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:07:14.982 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 03:07:14.982 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"TW5ObmFBSHZGelpYaGxVczFwR1lRZHVZcklYejBMVUlJWmpCbmpJX0Z3alc3","UiLocales":null,"Nonce":"TW5ObmFBSHZGelpYaGxVczFwR1lRZHVZcklYejBMVUlJWmpCbmpJX0Z3alc3","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"TW5ObmFBSHZGelpYaGxVczFwR1lRZHVZcklYejBMVUlJWmpCbmpJX0Z3alc3","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"TW5ObmFBSHZGelpYaGxVczFwR1lRZHVZcklYejBMVUlJWmpCbmpJX0Z3alc3"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 03:07:14.986 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 03:07:14.986 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 03:07:14.986 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 03:07:14.986 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:07:14.993 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 03:07:14.993 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 03:07:14.995 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****IDgw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****c4oQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000008-0004-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-12T01:07:14.0000000Z","ProcessId":3236,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 03:07:14.996 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"TW5ObmFBSHZGelpYaGxVczFwR1lRZHVZcklYejBMVUlJWmpCbmpJX0Z3alc3","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 03:07:16.189 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 03:07:16.202 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:07:16.203 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:07:16.205 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 03:07:16.206 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 03:07:16.207 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 03:07:16.208 +02:00 [DBG] Start discovery request
2020-08-12 03:07:16.237 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 03:07:16.275 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 03:07:16.278 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:07:16.278 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:07:16.279 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 03:07:16.279 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 03:07:16.279 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 03:07:16.279 +02:00 [DBG] Start key discovery request
2020-08-12 03:07:16.299 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 03:07:16.300 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 03:07:16.300 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 03:07:16.300 +02:00 [DBG] Start authorize request
2020-08-12 03:07:16.300 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:07:16.300 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 03:07:16.335 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 03:07:16.335 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 03:07:16.340 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:07:16.357 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:07:16.362 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:07:16.376 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:07:16.377 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 03:07:16.377 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"YWJhUU9RSzBsU0xUbWx1dVlpYTBTcy5GZnp-Ty1XTE9tbThORWdJN2hQaGJp","UiLocales":null,"Nonce":"YWJhUU9RSzBsU0xUbWx1dVlpYTBTcy5GZnp-Ty1XTE9tbThORWdJN2hQaGJp","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"YWJhUU9RSzBsU0xUbWx1dVlpYTBTcy5GZnp-Ty1XTE9tbThORWdJN2hQaGJp","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"YWJhUU9RSzBsU0xUbWx1dVlpYTBTcy5GZnp-Ty1XTE9tbThORWdJN2hQaGJp"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 03:07:16.383 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 03:07:16.383 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 03:07:16.384 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 03:07:16.384 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:07:16.392 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 03:07:16.392 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 03:07:16.394 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****9S7g","$type":"Token"},{"TokenType":"access_token","TokenValue":"****pCgg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000009-0004-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-12T01:07:16.0000000Z","ProcessId":3236,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 03:07:16.394 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"YWJhUU9RSzBsU0xUbWx1dVlpYTBTcy5GZnp-Ty1XTE9tbThORWdJN2hQaGJp","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 03:07:16.984 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 03:07:16.987 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:07:16.987 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:07:16.988 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 03:07:16.988 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 03:07:16.988 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 03:07:16.988 +02:00 [DBG] Start discovery request
2020-08-12 03:07:17.002 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 03:07:17.139 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 03:07:17.142 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:07:17.143 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:07:17.143 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 03:07:17.143 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 03:07:17.143 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 03:07:17.143 +02:00 [DBG] Start key discovery request
2020-08-12 03:07:17.486 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 03:07:17.486 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 03:07:17.486 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 03:07:17.486 +02:00 [DBG] Start authorize request
2020-08-12 03:07:17.487 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:07:17.488 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 03:07:17.541 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 03:07:17.541 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 03:07:17.546 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:07:17.565 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:07:17.566 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:07:17.568 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:07:17.568 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 03:07:17.569 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"Q2cuV2xKZ1BCcThFdk5JeERzQ29lSklSdE1lWWJvNFhBMU9ZNlRWcEJ4N1Na","UiLocales":null,"Nonce":"Q2cuV2xKZ1BCcThFdk5JeERzQ29lSklSdE1lWWJvNFhBMU9ZNlRWcEJ4N1Na","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"Q2cuV2xKZ1BCcThFdk5JeERzQ29lSklSdE1lWWJvNFhBMU9ZNlRWcEJ4N1Na","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"Q2cuV2xKZ1BCcThFdk5JeERzQ29lSklSdE1lWWJvNFhBMU9ZNlRWcEJ4N1Na"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 03:07:17.572 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 03:07:17.572 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 03:07:17.572 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 03:07:17.572 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:07:17.579 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 03:07:17.580 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 03:07:17.582 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****aBNA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Ungg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000000a-0004-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-12T01:07:17.0000000Z","ProcessId":3236,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 03:07:17.582 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"Q2cuV2xKZ1BCcThFdk5JeERzQ29lSklSdE1lWWJvNFhBMU9ZNlRWcEJ4N1Na","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 03:07:17.842 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 03:07:17.845 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:07:17.845 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:07:17.846 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 03:07:17.846 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 03:07:17.846 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 03:07:17.846 +02:00 [DBG] Start discovery request
2020-08-12 03:07:17.857 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 03:07:17.991 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 03:07:17.996 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:07:17.996 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:07:17.998 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 03:07:17.999 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 03:07:17.999 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 03:07:17.999 +02:00 [DBG] Start key discovery request
2020-08-12 03:07:18.452 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 03:07:18.452 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 03:07:18.452 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 03:07:18.452 +02:00 [DBG] Start authorize request
2020-08-12 03:07:18.452 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:07:18.452 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 03:07:18.490 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 03:07:18.490 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 03:07:18.495 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:07:18.511 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:07:18.517 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:07:18.534 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:07:18.534 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 03:07:18.535 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"NV9QMm5Bb29QRkcxQkQwWHB0TElvMGZPaVJoTDl0NWo1TjJNRnBoUjgwZVEt","UiLocales":null,"Nonce":"NV9QMm5Bb29QRkcxQkQwWHB0TElvMGZPaVJoTDl0NWo1TjJNRnBoUjgwZVEt","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"NV9QMm5Bb29QRkcxQkQwWHB0TElvMGZPaVJoTDl0NWo1TjJNRnBoUjgwZVEt","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"NV9QMm5Bb29QRkcxQkQwWHB0TElvMGZPaVJoTDl0NWo1TjJNRnBoUjgwZVEt"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 03:07:18.539 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 03:07:18.539 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 03:07:18.539 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 03:07:18.539 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:07:18.549 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 03:07:18.549 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 03:07:18.551 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Cqew","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Mdpg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000000b-0004-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-12T01:07:18.0000000Z","ProcessId":3236,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 03:07:18.551 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"NV9QMm5Bb29QRkcxQkQwWHB0TElvMGZPaVJoTDl0NWo1TjJNRnBoUjgwZVEt","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 03:07:18.829 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 03:07:18.838 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:07:18.838 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:07:18.838 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 03:07:18.839 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 03:07:18.839 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 03:07:18.839 +02:00 [DBG] Start discovery request
2020-08-12 03:07:18.857 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 03:07:18.992 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 03:07:18.996 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:07:18.996 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:07:18.996 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 03:07:18.996 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 03:07:18.997 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 03:07:18.997 +02:00 [DBG] Start key discovery request
2020-08-12 03:08:04.064 +02:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2020-08-12 03:08:04.475 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-12 03:08:04.479 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-12 03:08:04.479 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-12 03:08:04.480 +02:00 [INF] {"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","DisplayName":"Mohamed Abdelrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"80000029-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T01:08:04.0000000Z","ProcessId":3236,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-12 03:08:04.571 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Value cannot be null or empty. (Parameter 'url')
   at Microsoft.AspNetCore.Mvc.ControllerBase.Redirect(String url)
   at IdentityServer4.Quickstart.UI.AccountController.Logout(LogoutInputModel model) in E:\programming\Projects\Listify\Listify.Backend\Listify.Identity\Quickstart\Account\AccountController.cs:line 257
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-08-12 03:19:28.640 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-12 03:19:28.781 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-12 03:19:28.791 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-12 03:19:28.791 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-12 03:19:28.791 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-12 03:19:28.791 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-12 03:19:28.792 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-12 03:19:29.055 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 03:19:29.055 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 03:19:29.147 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:19:29.151 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:19:29.213 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:19:29.213 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:19:29.255 +02:00 [DBG] Login Url: /Account/Login
2020-08-12 03:19:29.255 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-12 03:19:29.255 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-12 03:19:29.255 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-12 03:19:29.255 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-12 03:19:29.255 +02:00 [DBG] Error Url: /home/error
2020-08-12 03:19:29.255 +02:00 [DBG] Error Id Parameter: errorId
2020-08-12 03:19:29.317 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 03:19:29.317 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 03:19:29.335 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 03:19:29.335 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 03:19:29.336 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 03:19:29.336 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 03:19:29.337 +02:00 [DBG] Start discovery request
2020-08-12 03:19:29.337 +02:00 [DBG] Start discovery request
2020-08-12 03:19:30.849 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 03:19:30.849 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 03:19:31.265 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 03:19:31.277 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:19:31.278 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:19:31.282 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 03:19:31.284 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 03:19:31.284 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 03:19:31.286 +02:00 [DBG] Start key discovery request
2020-08-12 03:19:57.648 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-12 03:19:57.677 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-12 03:19:57.677 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-12 03:19:57.677 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-12 03:19:57.677 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-12 03:19:57.677 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-12 03:19:57.678 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-12 03:19:57.865 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 03:19:57.933 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:19:57.935 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:19:57.968 +02:00 [DBG] Login Url: /Account/Login
2020-08-12 03:19:57.968 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-12 03:19:57.968 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-12 03:19:57.968 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-12 03:19:57.968 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-12 03:19:57.968 +02:00 [DBG] Error Url: /home/error
2020-08-12 03:19:57.968 +02:00 [DBG] Error Id Parameter: errorId
2020-08-12 03:19:57.978 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 03:19:57.982 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 03:19:57.982 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 03:19:57.983 +02:00 [DBG] Start discovery request
2020-08-12 03:19:58.466 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 03:19:58.581 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 03:19:58.584 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:19:58.585 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:19:58.598 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 03:19:58.599 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 03:19:58.599 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 03:19:58.601 +02:00 [DBG] Start key discovery request
2020-08-12 03:19:58.693 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 03:19:58.706 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 03:19:58.706 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 03:19:58.708 +02:00 [DBG] Start authorize request
2020-08-12 03:19:58.730 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:19:58.751 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 03:19:59.180 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 03:19:59.186 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 03:19:59.274 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:19:59.326 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:19:59.338 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:19:59.339 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:19:59.345 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 03:19:59.355 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"X0ttc2llbm04RmFaQWtLbU5KeGhocV9VbjVDblV1ZDJjbzlFUEJpZThpYmh6","UiLocales":null,"Nonce":"X0ttc2llbm04RmFaQWtLbU5KeGhocV9VbjVDblV1ZDJjbzlFUEJpZThpYmh6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"X0ttc2llbm04RmFaQWtLbU5KeGhocV9VbjVDblV1ZDJjbzlFUEJpZThpYmh6","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"X0ttc2llbm04RmFaQWtLbU5KeGhocV9VbjVDblV1ZDJjbzlFUEJpZThpYmh6"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 03:19:59.409 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 03:19:59.412 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 03:19:59.419 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 03:19:59.420 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:20:00.247 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 03:20:00.247 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 03:20:00.258 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****8rog","$type":"Token"},{"TokenType":"access_token","TokenValue":"****bZmA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000000e-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T01:20:00.0000000Z","ProcessId":4184,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 03:20:00.260 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"X0ttc2llbm04RmFaQWtLbU5KeGhocV9VbjVDblV1ZDJjbzlFUEJpZThpYmh6","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 03:20:00.655 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 03:20:00.719 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:20:00.719 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:20:00.720 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 03:20:00.721 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 03:20:00.721 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 03:20:00.721 +02:00 [DBG] Start discovery request
2020-08-12 03:20:00.880 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 03:20:01.140 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 03:20:01.395 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:20:01.396 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:20:01.397 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 03:20:01.399 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 03:20:01.399 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 03:20:01.399 +02:00 [DBG] Start key discovery request
2020-08-12 03:20:02.565 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 03:20:02.567 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 03:20:02.567 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 03:20:02.567 +02:00 [DBG] Start authorize request
2020-08-12 03:20:02.567 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:20:02.568 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 03:20:02.728 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 03:20:02.729 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 03:20:02.801 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:20:02.863 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:20:02.867 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:20:02.880 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:20:02.880 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 03:20:02.880 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"Sl9-V2kuUzFDRzB-amR5ZDUxUFhkUVhmR2stenVEQ2ZIYkdpU0x5fkU4cTcy","UiLocales":null,"Nonce":"Sl9-V2kuUzFDRzB-amR5ZDUxUFhkUVhmR2stenVEQ2ZIYkdpU0x5fkU4cTcy","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"Sl9-V2kuUzFDRzB-amR5ZDUxUFhkUVhmR2stenVEQ2ZIYkdpU0x5fkU4cTcy","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"Sl9-V2kuUzFDRzB-amR5ZDUxUFhkUVhmR2stenVEQ2ZIYkdpU0x5fkU4cTcy"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 03:20:02.930 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 03:20:02.930 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 03:20:02.930 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 03:20:02.930 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:20:02.949 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 03:20:02.949 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 03:20:02.950 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****qgaQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****lN5g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000000f-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T01:20:02.0000000Z","ProcessId":4184,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 03:20:02.951 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"Sl9-V2kuUzFDRzB-amR5ZDUxUFhkUVhmR2stenVEQ2ZIYkdpU0x5fkU4cTcy","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 03:20:03.448 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 03:20:03.745 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:20:03.746 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:20:03.749 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 03:20:03.774 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 03:20:03.775 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 03:20:03.776 +02:00 [DBG] Start discovery request
2020-08-12 03:20:03.935 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 03:20:03.969 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 03:20:03.973 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:20:03.973 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:20:03.974 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 03:20:03.976 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 03:20:03.976 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 03:20:03.976 +02:00 [DBG] Start key discovery request
2020-08-12 03:20:04.067 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 03:20:04.072 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 03:20:04.072 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 03:20:04.072 +02:00 [DBG] Start authorize request
2020-08-12 03:20:04.073 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:20:04.073 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 03:20:04.243 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 03:20:04.243 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 03:20:04.250 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:20:04.267 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:20:04.270 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:20:04.272 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:20:04.273 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 03:20:04.273 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"ckJSTUMxdDBNVWVHcUxMWFVpeHZCcnlyQU5CWDNNMjlGTWdqSTRtbzNiekpZ","UiLocales":null,"Nonce":"ckJSTUMxdDBNVWVHcUxMWFVpeHZCcnlyQU5CWDNNMjlGTWdqSTRtbzNiekpZ","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"ckJSTUMxdDBNVWVHcUxMWFVpeHZCcnlyQU5CWDNNMjlGTWdqSTRtbzNiekpZ","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"ckJSTUMxdDBNVWVHcUxMWFVpeHZCcnlyQU5CWDNNMjlGTWdqSTRtbzNiekpZ"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 03:20:04.322 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 03:20:04.322 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 03:20:04.322 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 03:20:04.323 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:20:04.551 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 03:20:04.551 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 03:20:04.553 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Mqaw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****6w2A","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000010-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T01:20:04.0000000Z","ProcessId":4184,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 03:20:04.553 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"ckJSTUMxdDBNVWVHcUxMWFVpeHZCcnlyQU5CWDNNMjlGTWdqSTRtbzNiekpZ","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 03:20:04.840 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 03:20:04.891 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:20:04.892 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:20:04.892 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 03:20:04.893 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 03:20:04.893 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 03:20:04.894 +02:00 [DBG] Start discovery request
2020-08-12 03:20:05.035 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 03:20:05.422 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 03:20:05.429 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:20:05.429 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:20:05.431 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 03:20:05.432 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 03:20:05.432 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 03:20:05.432 +02:00 [DBG] Start key discovery request
2020-08-12 03:24:15.635 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 03:24:16.026 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:24:16.026 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:24:16.056 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 03:24:16.057 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 03:24:16.057 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 03:24:16.057 +02:00 [DBG] Start discovery request
2020-08-12 03:24:16.184 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 03:24:16.590 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 03:24:16.597 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:24:16.598 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:24:16.599 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 03:24:16.600 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 03:24:16.600 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 03:24:16.600 +02:00 [DBG] Start key discovery request
2020-08-12 03:24:45.553 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 03:24:45.554 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 03:24:45.554 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 03:24:45.554 +02:00 [DBG] Start authorize request
2020-08-12 03:24:45.554 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:24:45.554 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 03:24:45.788 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 03:24:45.788 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 03:24:45.804 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:24:45.821 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:24:45.827 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:24:45.843 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:24:45.844 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 03:24:45.845 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"TUF4T1pvNkF1MEdsYXVTb1d-MXBBTkVxV0ZMRnlXb05MbnAtMmNESS1DflZp","UiLocales":null,"Nonce":"TUF4T1pvNkF1MEdsYXVTb1d-MXBBTkVxV0ZMRnlXb05MbnAtMmNESS1DflZp","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"TUF4T1pvNkF1MEdsYXVTb1d-MXBBTkVxV0ZMRnlXb05MbnAtMmNESS1DflZp","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"TUF4T1pvNkF1MEdsYXVTb1d-MXBBTkVxV0ZMRnlXb05MbnAtMmNESS1DflZp"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 03:24:45.896 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 03:24:45.896 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 03:24:45.896 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 03:24:45.896 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:24:45.995 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 03:24:45.995 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 03:24:45.997 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****GDoA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****tB3w","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000008-0001-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-12T01:24:45.0000000Z","ProcessId":4184,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 03:24:45.997 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"TUF4T1pvNkF1MEdsYXVTb1d-MXBBTkVxV0ZMRnlXb05MbnAtMmNESS1DflZp","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 03:24:46.583 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 03:24:46.589 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:24:46.589 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:24:46.590 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 03:24:46.590 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 03:24:46.590 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 03:24:46.590 +02:00 [DBG] Start discovery request
2020-08-12 03:24:46.606 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 03:24:46.840 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 03:24:46.845 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:24:46.845 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:24:46.846 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 03:24:46.848 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 03:24:46.848 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 03:24:46.848 +02:00 [DBG] Start key discovery request
2020-08-12 03:24:51.852 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 03:24:51.853 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 03:24:51.853 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 03:24:51.853 +02:00 [DBG] Start authorize request
2020-08-12 03:24:51.853 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:24:51.853 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 03:24:51.892 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 03:24:51.892 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 03:24:51.897 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:24:51.910 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:24:51.915 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:24:51.938 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:24:51.939 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 03:24:51.939 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"Q05IaWZCRC5rV0gyVGk1eGxhWUxjTE1FZ0VtWmc3cUVsMTVVTFlwaFEzQkZS","UiLocales":null,"Nonce":"Q05IaWZCRC5rV0gyVGk1eGxhWUxjTE1FZ0VtWmc3cUVsMTVVTFlwaFEzQkZS","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"Q05IaWZCRC5rV0gyVGk1eGxhWUxjTE1FZ0VtWmc3cUVsMTVVTFlwaFEzQkZS","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"Q05IaWZCRC5rV0gyVGk1eGxhWUxjTE1FZ0VtWmc3cUVsMTVVTFlwaFEzQkZS"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 03:24:51.943 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 03:24:51.943 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 03:24:51.943 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 03:24:51.943 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:24:51.949 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 03:24:51.949 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 03:24:51.952 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****w7Jw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****by8g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000009-0001-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-12T01:24:51.0000000Z","ProcessId":4184,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 03:24:51.952 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"Q05IaWZCRC5rV0gyVGk1eGxhWUxjTE1FZ0VtWmc3cUVsMTVVTFlwaFEzQkZS","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 03:24:52.356 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 03:24:52.359 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:24:52.359 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:24:52.360 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 03:24:52.360 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 03:24:52.360 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 03:24:52.360 +02:00 [DBG] Start discovery request
2020-08-12 03:24:52.375 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 03:24:52.553 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 03:24:52.562 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:24:52.562 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:24:52.563 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 03:24:52.564 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 03:24:52.564 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 03:24:52.564 +02:00 [DBG] Start key discovery request
2020-08-12 03:24:55.252 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 03:24:55.252 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 03:24:55.252 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 03:24:55.253 +02:00 [DBG] Start authorize request
2020-08-12 03:24:55.253 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:24:55.253 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 03:24:55.294 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 03:24:55.294 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 03:24:55.299 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:24:55.315 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:24:55.317 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:24:55.320 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:24:55.321 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 03:24:55.321 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"bjR-cUlwakZDSllaRmQwd0MyV1Y0Q2R0Um1qM3dUeU0tSWVNMGQ4bFRxVmYt","UiLocales":null,"Nonce":"bjR-cUlwakZDSllaRmQwd0MyV1Y0Q2R0Um1qM3dUeU0tSWVNMGQ4bFRxVmYt","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"bjR-cUlwakZDSllaRmQwd0MyV1Y0Q2R0Um1qM3dUeU0tSWVNMGQ4bFRxVmYt","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"bjR-cUlwakZDSllaRmQwd0MyV1Y0Q2R0Um1qM3dUeU0tSWVNMGQ4bFRxVmYt"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 03:24:55.325 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 03:24:55.326 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 03:24:55.326 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 03:24:55.326 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:24:55.333 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 03:24:55.333 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 03:24:55.335 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Xi8g","$type":"Token"},{"TokenType":"access_token","TokenValue":"****IH-Q","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000000a-0001-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-12T01:24:55.0000000Z","ProcessId":4184,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 03:24:55.335 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"bjR-cUlwakZDSllaRmQwd0MyV1Y0Q2R0Um1qM3dUeU0tSWVNMGQ4bFRxVmYt","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 03:24:55.765 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 03:24:56.054 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:24:56.054 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:24:56.055 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 03:24:56.057 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 03:24:56.057 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 03:24:56.057 +02:00 [DBG] Start discovery request
2020-08-12 03:24:56.198 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 03:24:56.245 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 03:24:56.247 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:24:56.248 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:24:56.248 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 03:24:56.248 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 03:24:56.248 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 03:24:56.248 +02:00 [DBG] Start key discovery request
2020-08-12 03:24:57.952 +02:00 [INF] Removing 0 grants
2020-08-12 03:24:57.986 +02:00 [INF] Removing 0 device flow codes
2020-08-12 03:24:59.104 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 03:24:59.104 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 03:24:59.104 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 03:24:59.104 +02:00 [DBG] Start authorize request
2020-08-12 03:24:59.104 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:24:59.104 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 03:24:59.259 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 03:24:59.259 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 03:24:59.264 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:24:59.276 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:24:59.281 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:24:59.293 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:24:59.293 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 03:24:59.293 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"RkxRbGpmaEF3cEJ2T0lGckNxQkw1c0JCcXJZZnp5T2dxb1ppOEktSEpOd0tN","UiLocales":null,"Nonce":"RkxRbGpmaEF3cEJ2T0lGckNxQkw1c0JCcXJZZnp5T2dxb1ppOEktSEpOd0tN","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"RkxRbGpmaEF3cEJ2T0lGckNxQkw1c0JCcXJZZnp5T2dxb1ppOEktSEpOd0tN","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"RkxRbGpmaEF3cEJ2T0lGckNxQkw1c0JCcXJZZnp5T2dxb1ppOEktSEpOd0tN"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 03:24:59.320 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 03:24:59.320 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 03:24:59.320 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 03:24:59.320 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:24:59.337 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 03:24:59.337 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 03:24:59.338 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****jMLQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****9nEw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000000b-0001-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-12T01:24:59.0000000Z","ProcessId":4184,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 03:24:59.338 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"RkxRbGpmaEF3cEJ2T0lGckNxQkw1c0JCcXJZZnp5T2dxb1ppOEktSEpOd0tN","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 03:24:59.635 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 03:24:59.638 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:24:59.639 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:24:59.639 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 03:24:59.639 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 03:24:59.639 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 03:24:59.639 +02:00 [DBG] Start discovery request
2020-08-12 03:24:59.656 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 03:24:59.850 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 03:24:59.855 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:24:59.855 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:24:59.856 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 03:24:59.856 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 03:24:59.856 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 03:24:59.856 +02:00 [DBG] Start key discovery request
2020-08-12 03:25:00.183 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 03:25:00.184 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 03:25:00.184 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 03:25:00.184 +02:00 [DBG] Start authorize request
2020-08-12 03:25:00.184 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:25:00.184 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 03:25:00.223 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 03:25:00.223 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 03:25:00.229 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:25:00.241 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:25:00.243 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:25:00.245 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:25:00.245 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 03:25:00.245 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"WFdCUC5sb0p-Y21CT2ZJbzBHdDA5djBqan5fdmducUg2TUo5eFowd190WUpz","UiLocales":null,"Nonce":"WFdCUC5sb0p-Y21CT2ZJbzBHdDA5djBqan5fdmducUg2TUo5eFowd190WUpz","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"WFdCUC5sb0p-Y21CT2ZJbzBHdDA5djBqan5fdmducUg2TUo5eFowd190WUpz","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"WFdCUC5sb0p-Y21CT2ZJbzBHdDA5djBqan5fdmducUg2TUo5eFowd190WUpz"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 03:25:00.248 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 03:25:00.248 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 03:25:00.249 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 03:25:00.249 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:25:00.255 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 03:25:00.255 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 03:25:00.256 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****IUzQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****oo5Q","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000000c-0001-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-12T01:25:00.0000000Z","ProcessId":4184,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 03:25:00.256 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"WFdCUC5sb0p-Y21CT2ZJbzBHdDA5djBqan5fdmducUg2TUo5eFowd190WUpz","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 03:25:00.880 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 03:25:00.883 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:25:00.883 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:25:00.884 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 03:25:00.884 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 03:25:00.884 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 03:25:00.884 +02:00 [DBG] Start discovery request
2020-08-12 03:25:00.963 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 03:25:01.167 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 03:25:01.171 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:25:01.171 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:25:01.171 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 03:25:01.172 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 03:25:01.172 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 03:25:01.172 +02:00 [DBG] Start key discovery request
2020-08-12 03:25:01.288 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 03:25:01.289 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 03:25:01.289 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 03:25:01.289 +02:00 [DBG] Start authorize request
2020-08-12 03:25:01.289 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:25:01.289 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 03:25:01.321 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 03:25:01.321 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 03:25:01.326 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:25:01.340 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:25:01.341 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:25:01.344 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:25:01.346 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 03:25:01.346 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"bXNHMTU0RmkxanlHS29pQ29wVGxheEhfZXhsLlN4VWM3aE10U2lOfkFOTTEx","UiLocales":null,"Nonce":"bXNHMTU0RmkxanlHS29pQ29wVGxheEhfZXhsLlN4VWM3aE10U2lOfkFOTTEx","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"bXNHMTU0RmkxanlHS29pQ29wVGxheEhfZXhsLlN4VWM3aE10U2lOfkFOTTEx","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"bXNHMTU0RmkxanlHS29pQ29wVGxheEhfZXhsLlN4VWM3aE10U2lOfkFOTTEx"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 03:25:01.371 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 03:25:01.371 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 03:25:01.372 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 03:25:01.372 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:25:01.381 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 03:25:01.381 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 03:25:01.383 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****DHQg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****MrSw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000000d-0001-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-12T01:25:01.0000000Z","ProcessId":4184,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 03:25:01.383 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"bXNHMTU0RmkxanlHS29pQ29wVGxheEhfZXhsLlN4VWM3aE10U2lOfkFOTTEx","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 03:25:01.749 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 03:25:01.755 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:25:01.755 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:25:01.756 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 03:25:01.756 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 03:25:01.756 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 03:25:01.756 +02:00 [DBG] Start discovery request
2020-08-12 03:25:01.772 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 03:25:01.949 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 03:25:01.953 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:25:01.953 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:25:01.954 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 03:25:01.954 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 03:25:01.954 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 03:25:01.955 +02:00 [DBG] Start key discovery request
2020-08-12 03:25:02.187 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 03:25:02.187 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 03:25:02.187 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 03:25:02.187 +02:00 [DBG] Start authorize request
2020-08-12 03:25:02.188 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:25:02.188 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 03:25:02.232 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 03:25:02.233 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 03:25:02.238 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:25:02.259 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:25:02.271 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:25:02.303 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:25:02.304 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 03:25:02.306 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"elowYmdMSS4zMHFXdzZtVHppNFNQTS4zNEdPaXhMX0QwZ1pYS25SRlFQTTVF","UiLocales":null,"Nonce":"elowYmdMSS4zMHFXdzZtVHppNFNQTS4zNEdPaXhMX0QwZ1pYS25SRlFQTTVF","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"elowYmdMSS4zMHFXdzZtVHppNFNQTS4zNEdPaXhMX0QwZ1pYS25SRlFQTTVF","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"elowYmdMSS4zMHFXdzZtVHppNFNQTS4zNEdPaXhMX0QwZ1pYS25SRlFQTTVF"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 03:25:02.316 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 03:25:02.316 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 03:25:02.316 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 03:25:02.319 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:25:02.331 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 03:25:02.331 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 03:25:02.333 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****OKyQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****zDew","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000000e-0001-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-12T01:25:02.0000000Z","ProcessId":4184,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 03:25:02.333 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"elowYmdMSS4zMHFXdzZtVHppNFNQTS4zNEdPaXhMX0QwZ1pYS25SRlFQTTVF","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 03:25:02.636 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 03:25:02.640 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:25:02.640 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:25:02.640 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 03:25:02.640 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 03:25:02.640 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 03:25:02.640 +02:00 [DBG] Start discovery request
2020-08-12 03:25:02.655 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 03:25:02.888 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 03:25:02.893 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:25:02.893 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:25:02.894 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 03:25:02.896 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 03:25:02.897 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 03:25:02.897 +02:00 [DBG] Start key discovery request
2020-08-12 03:25:03.159 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 03:25:03.159 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 03:25:03.160 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 03:25:03.160 +02:00 [DBG] Start authorize request
2020-08-12 03:25:03.160 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:25:03.160 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 03:25:03.244 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 03:25:03.244 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 03:25:03.254 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:25:03.273 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:25:03.280 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:25:03.303 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:25:03.303 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 03:25:03.304 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"fl80ZGliVEtZbW9OeH50TmlZQjMyVGZvQXhvVk9DSWhxVWpTVUI5eDJOaWQ4","UiLocales":null,"Nonce":"fl80ZGliVEtZbW9OeH50TmlZQjMyVGZvQXhvVk9DSWhxVWpTVUI5eDJOaWQ4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"fl80ZGliVEtZbW9OeH50TmlZQjMyVGZvQXhvVk9DSWhxVWpTVUI5eDJOaWQ4","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"fl80ZGliVEtZbW9OeH50TmlZQjMyVGZvQXhvVk9DSWhxVWpTVUI5eDJOaWQ4"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 03:25:03.307 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 03:25:03.307 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 03:25:03.307 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 03:25:03.307 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:25:03.314 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 03:25:03.314 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 03:25:03.316 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****9AjQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****nLqQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000000f-0001-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-12T01:25:03.0000000Z","ProcessId":4184,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 03:25:03.316 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"fl80ZGliVEtZbW9OeH50TmlZQjMyVGZvQXhvVk9DSWhxVWpTVUI5eDJOaWQ4","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 03:25:03.613 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 03:25:03.617 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:25:03.617 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:25:03.617 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 03:25:03.617 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 03:25:03.617 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 03:25:03.618 +02:00 [DBG] Start discovery request
2020-08-12 03:25:03.695 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 03:25:03.857 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 03:25:03.860 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:25:03.860 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:25:03.860 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 03:25:03.861 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 03:25:03.861 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 03:25:03.861 +02:00 [DBG] Start key discovery request
2020-08-12 03:25:28.332 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 03:25:28.336 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:25:28.336 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:25:28.337 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 03:25:28.338 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 03:25:28.338 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 03:25:28.339 +02:00 [DBG] Start discovery request
2020-08-12 03:25:28.354 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 03:25:28.613 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 03:25:28.617 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:25:28.617 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:25:28.618 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 03:25:28.618 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 03:25:28.618 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 03:25:28.618 +02:00 [DBG] Start key discovery request
2020-08-12 03:25:33.040 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 03:25:33.040 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 03:25:33.040 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 03:25:33.040 +02:00 [DBG] Start authorize request
2020-08-12 03:25:33.041 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:25:33.041 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 03:25:33.081 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 03:25:33.081 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 03:25:33.086 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:25:33.100 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:25:33.102 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:25:33.103 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:25:33.104 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 03:25:33.104 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"dUNafk95YkN0SXAwSDFRM1lLRmZTeEdfUWdXSXVvSWNxeGpTZFBXcWRGTDVt","UiLocales":null,"Nonce":"dUNafk95YkN0SXAwSDFRM1lLRmZTeEdfUWdXSXVvSWNxeGpTZFBXcWRGTDVt","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"dUNafk95YkN0SXAwSDFRM1lLRmZTeEdfUWdXSXVvSWNxeGpTZFBXcWRGTDVt","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"dUNafk95YkN0SXAwSDFRM1lLRmZTeEdfUWdXSXVvSWNxeGpTZFBXcWRGTDVt"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 03:25:33.107 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 03:25:33.107 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 03:25:33.107 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 03:25:33.107 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:25:33.115 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 03:25:33.116 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 03:25:33.117 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****iBQw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****271Q","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000010-0001-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-12T01:25:33.0000000Z","ProcessId":4184,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 03:25:33.117 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"dUNafk95YkN0SXAwSDFRM1lLRmZTeEdfUWdXSXVvSWNxeGpTZFBXcWRGTDVt","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 03:25:33.504 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 03:25:33.509 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:25:33.509 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:25:33.510 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 03:25:33.510 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 03:25:33.510 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 03:25:33.510 +02:00 [DBG] Start discovery request
2020-08-12 03:25:33.528 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 03:25:34.135 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 03:25:34.139 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:25:34.139 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:25:34.140 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 03:25:34.140 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 03:25:34.140 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 03:25:34.140 +02:00 [DBG] Start key discovery request
2020-08-12 03:26:21.831 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 03:26:21.835 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:26:21.835 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:26:21.835 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 03:26:21.835 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 03:26:21.835 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 03:26:21.835 +02:00 [DBG] Start discovery request
2020-08-12 03:26:21.898 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 03:26:22.318 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 03:26:22.334 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:26:22.334 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:26:22.335 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 03:26:22.336 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 03:26:22.336 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 03:26:22.336 +02:00 [DBG] Start key discovery request
2020-08-12 03:26:26.984 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 03:26:26.984 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 03:26:26.984 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 03:26:26.985 +02:00 [DBG] Start authorize request
2020-08-12 03:26:26.985 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:26:26.985 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 03:26:27.147 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 03:26:27.147 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 03:26:27.153 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:26:27.169 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:26:27.173 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 03:26:27.189 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 03:26:27.189 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 03:26:27.189 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"YkNOWklUeUxTMHpyNDV0b1FVLjJMOUxIeUlFSmJDQm4zbWc5SzJ5aWhycGt4","UiLocales":null,"Nonce":"YkNOWklUeUxTMHpyNDV0b1FVLjJMOUxIeUlFSmJDQm4zbWc5SzJ5aWhycGt4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"YkNOWklUeUxTMHpyNDV0b1FVLjJMOUxIeUlFSmJDQm4zbWc5SzJ5aWhycGt4","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"YkNOWklUeUxTMHpyNDV0b1FVLjJMOUxIeUlFSmJDQm4zbWc5SzJ5aWhycGt4"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 03:26:27.236 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 03:26:27.236 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 03:26:27.237 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 03:26:27.237 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 03:26:27.387 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 03:26:27.387 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 03:26:27.389 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****5QZA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****R-qQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000011-0001-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-12T01:26:27.0000000Z","ProcessId":4184,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 03:26:27.389 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"YkNOWklUeUxTMHpyNDV0b1FVLjJMOUxIeUlFSmJDQm4zbWc5SzJ5aWhycGt4","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 03:26:27.714 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 03:26:27.719 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:26:27.720 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:26:27.720 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 03:26:27.720 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 03:26:27.720 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 03:26:27.720 +02:00 [DBG] Start discovery request
2020-08-12 03:26:27.736 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 03:26:27.954 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 03:26:27.958 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:26:27.959 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:26:27.959 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 03:26:27.959 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 03:26:27.959 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 03:26:27.960 +02:00 [DBG] Start key discovery request
2020-08-12 03:26:54.859 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 03:26:54.862 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:26:54.862 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:26:54.863 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 03:26:54.863 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 03:26:54.863 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 03:26:54.863 +02:00 [DBG] Start discovery request
2020-08-12 03:26:54.912 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 03:26:55.230 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 03:26:55.242 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 03:26:55.242 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 03:26:55.242 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 03:26:55.242 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 03:26:55.243 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 03:26:55.243 +02:00 [DBG] Start key discovery request
2020-08-12 14:14:53.516 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-12 14:14:53.610 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-12 14:14:53.611 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-12 14:14:53.611 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-12 14:14:53.611 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-12 14:14:53.611 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-12 14:14:53.611 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-12 14:14:54.298 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:14:54.298 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:14:54.298 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:14:54.405 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:14:54.410 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:14:54.473 +02:00 [DBG] Login Url: /Account/Login
2020-08-12 14:14:54.473 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-12 14:14:54.473 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-12 14:14:54.473 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-12 14:14:54.473 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-12 14:14:54.473 +02:00 [DBG] Error Url: /home/error
2020-08-12 14:14:54.473 +02:00 [DBG] Error Id Parameter: errorId
2020-08-12 14:14:54.485 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:14:54.498 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:14:54.498 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:14:54.500 +02:00 [DBG] Start discovery request
2020-08-12 14:14:54.959 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:14:54.959 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:14:54.982 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:14:54.982 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:14:54.983 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:14:54.985 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:14:54.985 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:14:54.986 +02:00 [DBG] Start discovery request
2020-08-12 14:14:54.989 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:14:55.000 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:14:55.000 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:14:55.000 +02:00 [DBG] Start discovery request
2020-08-12 14:14:58.630 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:14:58.630 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:14:58.630 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:15:08.574 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:15:08.590 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:15:08.591 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:15:08.593 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:15:08.594 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:15:08.594 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:15:08.596 +02:00 [DBG] Start key discovery request
2020-08-12 14:15:08.998 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:15:09.013 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:15:09.013 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:15:09.014 +02:00 [DBG] Start authorize request
2020-08-12 14:15:09.025 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:15:09.081 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:15:09.390 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:15:09.397 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:15:09.480 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:15:09.552 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:15:09.569 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:15:09.593 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:15:09.598 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:15:09.611 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"TktCaURhaF9BVDRGN2g2VExyMlVGWmFjZU1GZ0lOWGFXWEp5WUZiUmtzMEw0","UiLocales":null,"Nonce":"TktCaURhaF9BVDRGN2g2VExyMlVGWmFjZU1GZ0lOWGFXWEp5WUZiUmtzMEw0","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"TktCaURhaF9BVDRGN2g2VExyMlVGWmFjZU1GZ0lOWGFXWEp5WUZiUmtzMEw0","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"TktCaURhaF9BVDRGN2g2VExyMlVGWmFjZU1GZ0lOWGFXWEp5WUZiUmtzMEw0"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:15:09.623 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:15:09.626 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:15:09.636 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:15:09.636 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:15:09.990 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:15:09.990 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:15:10.003 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****WR3w","$type":"Token"},{"TokenType":"access_token","TokenValue":"****aVjw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000014-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:15:09.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:15:10.005 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"TktCaURhaF9BVDRGN2g2VExyMlVGWmFjZU1GZ0lOWGFXWEp5WUZiUmtzMEw0","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:15:10.289 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:15:10.296 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:15:10.296 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:15:10.297 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:15:10.297 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:15:10.297 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:15:10.297 +02:00 [DBG] Start discovery request
2020-08-12 14:15:10.313 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:15:10.443 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:15:10.447 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:15:10.447 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:15:10.447 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:15:10.447 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:15:10.447 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:15:10.448 +02:00 [DBG] Start key discovery request
2020-08-12 14:15:12.145 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:15:12.147 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:15:12.147 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:15:12.147 +02:00 [DBG] Start authorize request
2020-08-12 14:15:12.148 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:15:12.148 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:15:12.198 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:15:12.199 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:15:12.207 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:15:12.220 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:15:12.224 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:15:12.227 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:15:12.227 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:15:12.228 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"MElpeVRCWDlDY0VIemtRVEVRVXJpaGp5b2FhTUI3cHNPbkZGflJmMWRPN0Nw","UiLocales":null,"Nonce":"MElpeVRCWDlDY0VIemtRVEVRVXJpaGp5b2FhTUI3cHNPbkZGflJmMWRPN0Nw","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"MElpeVRCWDlDY0VIemtRVEVRVXJpaGp5b2FhTUI3cHNPbkZGflJmMWRPN0Nw","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"MElpeVRCWDlDY0VIemtRVEVRVXJpaGp5b2FhTUI3cHNPbkZGflJmMWRPN0Nw"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:15:12.235 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:15:12.236 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:15:12.236 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:15:12.236 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:15:12.244 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:15:12.244 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:15:12.246 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****dP0g","$type":"Token"},{"TokenType":"access_token","TokenValue":"****NGOg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000015-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:15:12.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:15:12.246 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"MElpeVRCWDlDY0VIemtRVEVRVXJpaGp5b2FhTUI3cHNPbkZGflJmMWRPN0Nw","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:15:12.472 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:15:12.477 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:15:12.477 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:15:12.478 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:15:12.479 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:15:12.479 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:15:12.479 +02:00 [DBG] Start discovery request
2020-08-12 14:15:12.493 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:15:12.676 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:15:12.683 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:15:12.683 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:15:12.684 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:15:12.689 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:15:12.689 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:15:12.689 +02:00 [DBG] Start key discovery request
2020-08-12 14:15:12.981 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:15:12.991 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:15:12.992 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:15:12.992 +02:00 [DBG] Start authorize request
2020-08-12 14:15:12.992 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:15:12.992 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:15:13.022 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:15:13.023 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:15:13.028 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:15:13.040 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:15:13.042 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:15:13.043 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:15:13.044 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:15:13.044 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"d19hR1h5OG9lNHV5dW1RVC5WTmJSU3V4VE9aVnpfYmhrWTNjdkJNNnY1aDNj","UiLocales":null,"Nonce":"d19hR1h5OG9lNHV5dW1RVC5WTmJSU3V4VE9aVnpfYmhrWTNjdkJNNnY1aDNj","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"d19hR1h5OG9lNHV5dW1RVC5WTmJSU3V4VE9aVnpfYmhrWTNjdkJNNnY1aDNj","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"d19hR1h5OG9lNHV5dW1RVC5WTmJSU3V4VE9aVnpfYmhrWTNjdkJNNnY1aDNj"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:15:13.047 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:15:13.047 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:15:13.047 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:15:13.047 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:15:13.054 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:15:13.054 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:15:13.056 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****wrsQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****t_Sw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000016-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:15:13.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:15:13.056 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"d19hR1h5OG9lNHV5dW1RVC5WTmJSU3V4VE9aVnpfYmhrWTNjdkJNNnY1aDNj","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:15:13.264 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:15:13.268 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:15:13.268 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:15:13.269 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:15:13.269 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:15:13.269 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:15:13.269 +02:00 [DBG] Start discovery request
2020-08-12 14:15:13.285 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:15:13.395 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:15:13.399 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:15:13.399 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:15:13.400 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:15:13.400 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:15:13.401 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:15:13.401 +02:00 [DBG] Start key discovery request
2020-08-12 14:15:13.612 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:15:13.612 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:15:13.612 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:15:13.612 +02:00 [DBG] Start authorize request
2020-08-12 14:15:13.612 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:15:13.613 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:15:13.657 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:15:13.657 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:15:13.666 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:15:13.686 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:15:13.695 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:15:13.719 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:15:13.719 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:15:13.720 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"MHNhSFV6LVFXMS5KanZ4b0xNeWIzQi1vWHZmc1h1d0Q1ZHdBZG9nTFYzTmlZ","UiLocales":null,"Nonce":"MHNhSFV6LVFXMS5KanZ4b0xNeWIzQi1vWHZmc1h1d0Q1ZHdBZG9nTFYzTmlZ","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"MHNhSFV6LVFXMS5KanZ4b0xNeWIzQi1vWHZmc1h1d0Q1ZHdBZG9nTFYzTmlZ","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"MHNhSFV6LVFXMS5KanZ4b0xNeWIzQi1vWHZmc1h1d0Q1ZHdBZG9nTFYzTmlZ"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:15:13.727 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:15:13.727 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:15:13.727 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:15:13.728 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:15:13.740 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:15:13.740 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:15:13.743 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****2zQw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****t_Sw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000017-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:15:13.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:15:13.744 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"MHNhSFV6LVFXMS5KanZ4b0xNeWIzQi1vWHZmc1h1d0Q1ZHdBZG9nTFYzTmlZ","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:15:14.024 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:15:14.028 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:15:14.028 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:15:14.029 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:15:14.029 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:15:14.029 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:15:14.029 +02:00 [DBG] Start discovery request
2020-08-12 14:15:14.042 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:15:14.186 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:15:14.195 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:15:14.195 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:15:14.195 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:15:14.195 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:15:14.195 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:15:14.196 +02:00 [DBG] Start key discovery request
2020-08-12 14:15:14.220 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:15:14.221 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:15:14.221 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:15:14.221 +02:00 [DBG] Start authorize request
2020-08-12 14:15:14.222 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:15:14.222 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:15:14.263 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:15:14.263 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:15:14.268 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:15:14.287 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:15:14.293 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:15:14.295 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:15:14.295 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:15:14.295 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"aXdtUW44RC01UC1KaVBoeWREbG5MNlhJN0l0dWJPSkU3TTk2ZEdmRmNwSHow","UiLocales":null,"Nonce":"aXdtUW44RC01UC1KaVBoeWREbG5MNlhJN0l0dWJPSkU3TTk2ZEdmRmNwSHow","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"aXdtUW44RC01UC1KaVBoeWREbG5MNlhJN0l0dWJPSkU3TTk2ZEdmRmNwSHow","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"aXdtUW44RC01UC1KaVBoeWREbG5MNlhJN0l0dWJPSkU3TTk2ZEdmRmNwSHow"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:15:14.298 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:15:14.298 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:15:14.298 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:15:14.299 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:15:14.304 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:15:14.304 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:15:14.307 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****SKaQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****zUbg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000018-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:15:14.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:15:14.307 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"aXdtUW44RC01UC1KaVBoeWREbG5MNlhJN0l0dWJPSkU3TTk2ZEdmRmNwSHow","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:15:14.558 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:15:14.562 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:15:14.562 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:15:14.563 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:15:14.563 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:15:14.564 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:15:14.564 +02:00 [DBG] Start discovery request
2020-08-12 14:15:14.578 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:15:14.702 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:15:14.706 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:15:14.706 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:15:14.707 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:15:14.707 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:15:14.707 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:15:14.708 +02:00 [DBG] Start key discovery request
2020-08-12 14:15:14.831 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:15:14.831 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:15:14.831 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:15:14.831 +02:00 [DBG] Start authorize request
2020-08-12 14:15:14.832 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:15:14.832 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:15:14.859 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:15:14.859 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:15:14.864 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:15:14.880 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:15:14.885 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:15:14.908 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:15:14.909 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:15:14.910 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"N2Z0dy5GVHlwM3N6MW5-N182TV9IUmJZdUlOdVNtVnRScWlyT1JocWZGcFpK","UiLocales":null,"Nonce":"N2Z0dy5GVHlwM3N6MW5-N182TV9IUmJZdUlOdVNtVnRScWlyT1JocWZGcFpK","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"N2Z0dy5GVHlwM3N6MW5-N182TV9IUmJZdUlOdVNtVnRScWlyT1JocWZGcFpK","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"N2Z0dy5GVHlwM3N6MW5-N182TV9IUmJZdUlOdVNtVnRScWlyT1JocWZGcFpK"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:15:14.916 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:15:14.916 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:15:14.916 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:15:14.916 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:15:14.929 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:15:14.929 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:15:14.932 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****A4IA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****zUbg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000019-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:15:14.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:15:14.932 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"N2Z0dy5GVHlwM3N6MW5-N182TV9IUmJZdUlOdVNtVnRScWlyT1JocWZGcFpK","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:15:15.210 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:15:15.214 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:15:15.215 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:15:15.215 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:15:15.216 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:15:15.216 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:15:15.216 +02:00 [DBG] Start discovery request
2020-08-12 14:15:15.235 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:15:15.414 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:15:15.427 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:15:15.427 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:15:15.428 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:15:15.428 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:15:15.428 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:15:15.428 +02:00 [DBG] Start key discovery request
2020-08-12 14:15:15.453 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:15:15.453 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:15:15.454 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:15:15.454 +02:00 [DBG] Start authorize request
2020-08-12 14:15:15.454 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:15:15.454 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:15:15.525 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:15:15.528 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:15:15.537 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:15:15.563 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:15:15.566 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:15:15.568 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:15:15.569 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:15:15.569 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"Y3MuU3k0d1FwNl9OeHpzenJWWmNVZ0xzT0JpLnZDeHU1YkRhTEl1Mm5oa1pu","UiLocales":null,"Nonce":"Y3MuU3k0d1FwNl9OeHpzenJWWmNVZ0xzT0JpLnZDeHU1YkRhTEl1Mm5oa1pu","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"Y3MuU3k0d1FwNl9OeHpzenJWWmNVZ0xzT0JpLnZDeHU1YkRhTEl1Mm5oa1pu","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"Y3MuU3k0d1FwNl9OeHpzenJWWmNVZ0xzT0JpLnZDeHU1YkRhTEl1Mm5oa1pu"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:15:15.574 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:15:15.574 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:15:15.574 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:15:15.574 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:15:15.583 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:15:15.583 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:15:15.585 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****na0A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****pGXA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000001a-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:15:15.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:15:15.585 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"Y3MuU3k0d1FwNl9OeHpzenJWWmNVZ0xzT0JpLnZDeHU1YkRhTEl1Mm5oa1pu","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:15:15.830 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:15:15.833 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:15:15.833 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:15:15.834 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:15:15.834 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:15:15.834 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:15:15.834 +02:00 [DBG] Start discovery request
2020-08-12 14:15:15.850 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:15:16.005 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:15:16.014 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:15:16.014 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:15:16.015 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:15:16.015 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:15:16.015 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:15:16.015 +02:00 [DBG] Start key discovery request
2020-08-12 14:15:33.620 +02:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2020-08-12 14:15:33.720 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-12 14:15:33.721 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-12 14:15:33.721 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-12 14:15:33.722 +02:00 [INF] {"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","DisplayName":"Mohamed Abdelrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"8000001f-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:15:33.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-12 14:15:34.027 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Value cannot be null or empty. (Parameter 'url')
   at Microsoft.AspNetCore.Mvc.ControllerBase.Redirect(String url)
   at IdentityServer4.Quickstart.UI.AccountController.Logout(LogoutInputModel model) in E:\programming\Projects\Listify\Listify.Backend\Listify.Identity\Quickstart\Account\AccountController.cs:line 257
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-08-12 14:18:03.668 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:18:03.697 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:18:03.704 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:18:03.705 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:18:03.705 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:18:03.705 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:18:03.705 +02:00 [DBG] Start discovery request
2020-08-12 14:18:03.733 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:18:04.157 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:18:04.163 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:18:04.164 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:18:04.165 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:18:04.165 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:18:04.165 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:18:04.165 +02:00 [DBG] Start key discovery request
2020-08-12 14:18:19.870 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:18:19.870 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:18:19.870 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:18:19.870 +02:00 [DBG] Start authorize request
2020-08-12 14:18:19.871 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:18:19.871 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:18:19.901 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:18:19.901 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:18:19.905 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:18:19.920 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:18:19.923 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:18:19.925 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:18:19.926 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:18:19.928 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"SlhSRTFYSnh5SENDOFdwWVhFR1NiNmYwcHR3cFZyaTJ5bnBxTHRwZ0ROMldC","UiLocales":null,"Nonce":"SlhSRTFYSnh5SENDOFdwWVhFR1NiNmYwcHR3cFZyaTJ5bnBxTHRwZ0ROMldC","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"SlhSRTFYSnh5SENDOFdwWVhFR1NiNmYwcHR3cFZyaTJ5bnBxTHRwZ0ROMldC","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"SlhSRTFYSnh5SENDOFdwWVhFR1NiNmYwcHR3cFZyaTJ5bnBxTHRwZ0ROMldC"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:18:19.933 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:18:19.933 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:18:19.933 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:18:19.933 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:18:19.941 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:18:19.941 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:18:19.944 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****fBNw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****zJfw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000021-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:18:19.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:18:19.944 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"SlhSRTFYSnh5SENDOFdwWVhFR1NiNmYwcHR3cFZyaTJ5bnBxTHRwZ0ROMldC","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:18:20.443 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:18:20.447 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:18:20.447 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:18:20.447 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:18:20.448 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:18:20.448 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:18:20.448 +02:00 [DBG] Start discovery request
2020-08-12 14:18:20.457 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:18:20.684 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:18:20.686 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:18:20.686 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:18:20.687 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:18:20.687 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:18:20.687 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:18:20.687 +02:00 [DBG] Start key discovery request
2020-08-12 14:18:56.568 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:18:56.568 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:18:56.568 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:18:56.568 +02:00 [DBG] Start authorize request
2020-08-12 14:18:56.568 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:18:56.568 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:18:56.655 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:18:56.655 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:18:56.659 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:18:56.683 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:18:56.686 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:18:56.688 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:18:56.688 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:18:56.688 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"YUZ2VDB6bEd-OURXZXVhWHpXSkxwQ0FwWjlfZlpxR3NBZmdMSWtmYl9NeHFI","UiLocales":null,"Nonce":"YUZ2VDB6bEd-OURXZXVhWHpXSkxwQ0FwWjlfZlpxR3NBZmdMSWtmYl9NeHFI","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"YUZ2VDB6bEd-OURXZXVhWHpXSkxwQ0FwWjlfZlpxR3NBZmdMSWtmYl9NeHFI","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"YUZ2VDB6bEd-OURXZXVhWHpXSkxwQ0FwWjlfZlpxR3NBZmdMSWtmYl9NeHFI"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:18:56.692 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:18:56.692 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:18:56.692 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:18:56.692 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:18:56.705 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:18:56.705 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:18:56.707 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****VgxA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****JBgA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000022-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:18:56.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:18:56.707 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"YUZ2VDB6bEd-OURXZXVhWHpXSkxwQ0FwWjlfZlpxR3NBZmdMSWtmYl9NeHFI","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:18:57.019 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:18:57.022 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:18:57.022 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:18:57.023 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:18:57.023 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:18:57.023 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:18:57.023 +02:00 [DBG] Start discovery request
2020-08-12 14:18:57.036 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:18:57.322 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:18:57.324 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:18:57.324 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:18:57.324 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:18:57.325 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:18:57.325 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:18:57.325 +02:00 [DBG] Start key discovery request
2020-08-12 14:18:58.570 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:18:58.570 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:18:58.570 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:18:58.571 +02:00 [DBG] Start authorize request
2020-08-12 14:18:58.571 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:18:58.571 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:18:58.614 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:18:58.615 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:18:58.622 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:18:58.638 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:18:58.643 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:18:58.658 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:18:58.658 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:18:58.658 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"UEQxMkVRMERqX05PM0pwdUdUbzgyTmlCU3dKeGxvME1HZldsQkxCQlBSdk10","UiLocales":null,"Nonce":"UEQxMkVRMERqX05PM0pwdUdUbzgyTmlCU3dKeGxvME1HZldsQkxCQlBSdk10","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"UEQxMkVRMERqX05PM0pwdUdUbzgyTmlCU3dKeGxvME1HZldsQkxCQlBSdk10","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"UEQxMkVRMERqX05PM0pwdUdUbzgyTmlCU3dKeGxvME1HZldsQkxCQlBSdk10"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:18:58.662 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:18:58.662 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:18:58.662 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:18:58.662 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:18:58.671 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:18:58.672 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:18:58.673 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****UrsA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****bseQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000023-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:18:58.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:18:58.673 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"UEQxMkVRMERqX05PM0pwdUdUbzgyTmlCU3dKeGxvME1HZldsQkxCQlBSdk10","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:18:59.275 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:18:59.278 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:18:59.279 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:18:59.279 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:18:59.280 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:18:59.280 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:18:59.280 +02:00 [DBG] Start discovery request
2020-08-12 14:18:59.302 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:19:00.330 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:19:00.335 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:19:00.336 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:19:00.336 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:19:00.337 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:19:00.337 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:19:00.337 +02:00 [DBG] Start key discovery request
2020-08-12 14:19:01.221 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:19:01.222 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:19:01.222 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:19:01.222 +02:00 [DBG] Start authorize request
2020-08-12 14:19:01.222 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:19:01.222 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:19:01.262 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:19:01.263 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:19:01.271 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:19:01.287 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:19:01.290 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:19:01.291 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:19:01.292 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:19:01.292 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"d3pRa2JqZkVxdUxwT1NIaTEzT3NuSE1DTy04T1diT19tNVVieXlxc1pIUFdh","UiLocales":null,"Nonce":"d3pRa2JqZkVxdUxwT1NIaTEzT3NuSE1DTy04T1diT19tNVVieXlxc1pIUFdh","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"d3pRa2JqZkVxdUxwT1NIaTEzT3NuSE1DTy04T1diT19tNVVieXlxc1pIUFdh","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"d3pRa2JqZkVxdUxwT1NIaTEzT3NuSE1DTy04T1diT19tNVVieXlxc1pIUFdh"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:19:01.296 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:19:01.296 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:19:01.296 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:19:01.296 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:19:01.306 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:19:01.306 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:19:01.308 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****zPOg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****2IJQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000024-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:19:01.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:19:01.308 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"d3pRa2JqZkVxdUxwT1NIaTEzT3NuSE1DTy04T1diT19tNVVieXlxc1pIUFdh","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:19:01.809 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:19:01.814 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:19:01.814 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:19:01.815 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:19:01.816 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:19:01.816 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:19:01.816 +02:00 [DBG] Start discovery request
2020-08-12 14:19:01.829 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:19:02.113 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:19:02.116 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:19:02.116 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:19:02.117 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:19:02.117 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:19:02.117 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:19:02.117 +02:00 [DBG] Start key discovery request
2020-08-12 14:19:54.209 +02:00 [INF] Removing 0 grants
2020-08-12 14:19:54.234 +02:00 [INF] Removing 0 device flow codes
2020-08-12 14:23:02.570 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:23:02.623 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:23:02.623 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:23:02.624 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:23:02.625 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:23:02.625 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:23:02.625 +02:00 [DBG] Start discovery request
2020-08-12 14:23:02.661 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:23:02.693 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:23:02.698 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:23:02.698 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:23:02.706 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:23:02.707 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:23:02.707 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:23:02.707 +02:00 [DBG] Start key discovery request
2020-08-12 14:23:36.258 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:23:36.264 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:23:36.264 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:23:36.265 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:23:36.280 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:23:36.281 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:23:36.281 +02:00 [DBG] Start discovery request
2020-08-12 14:23:36.330 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:23:36.483 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:23:36.487 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:23:36.487 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:23:36.488 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:23:36.488 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:23:36.489 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:23:36.490 +02:00 [DBG] Start key discovery request
2020-08-12 14:24:54.264 +02:00 [INF] Removing 0 grants
2020-08-12 14:24:54.275 +02:00 [INF] Removing 0 device flow codes
2020-08-12 14:26:27.143 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:26:27.160 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:26:27.160 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:26:27.170 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:26:27.170 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:26:27.170 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:26:27.171 +02:00 [DBG] Start discovery request
2020-08-12 14:26:27.198 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:26:27.390 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:26:27.393 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:26:27.393 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:26:27.393 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:26:27.393 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:26:27.393 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:26:27.393 +02:00 [DBG] Start key discovery request
2020-08-12 14:27:09.438 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:27:09.452 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:09.453 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:09.453 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:27:09.455 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:27:09.455 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:27:09.455 +02:00 [DBG] Start discovery request
2020-08-12 14:27:09.487 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:27:09.665 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:27:09.668 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:09.668 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:09.668 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:27:09.668 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:27:09.668 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:27:09.668 +02:00 [DBG] Start key discovery request
2020-08-12 14:27:09.801 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:27:09.802 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:27:09.802 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:27:09.802 +02:00 [DBG] Start authorize request
2020-08-12 14:27:09.803 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:09.803 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:27:09.857 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:27:09.857 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:27:09.862 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:09.875 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:09.877 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:09.879 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:09.879 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:27:09.880 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"TkdHSzVqajlmV1g0am11QmY5cGc1elMwUkFjaEVheGl0VnB1WTd0NXBsU0pm","UiLocales":null,"Nonce":"TkdHSzVqajlmV1g0am11QmY5cGc1elMwUkFjaEVheGl0VnB1WTd0NXBsU0pm","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"TkdHSzVqajlmV1g0am11QmY5cGc1elMwUkFjaEVheGl0VnB1WTd0NXBsU0pm","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"TkdHSzVqajlmV1g0am11QmY5cGc1elMwUkFjaEVheGl0VnB1WTd0NXBsU0pm"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:27:09.898 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:27:09.898 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:27:09.898 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:27:09.898 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:09.941 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:27:09.941 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:27:09.943 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****M5iA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****gOow","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000038-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:27:09.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:27:09.943 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"TkdHSzVqajlmV1g0am11QmY5cGc1elMwUkFjaEVheGl0VnB1WTd0NXBsU0pm","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:27:10.380 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:27:10.383 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:10.384 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:10.384 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:27:10.384 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:27:10.384 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:27:10.384 +02:00 [DBG] Start discovery request
2020-08-12 14:27:10.396 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:27:10.490 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:27:10.492 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:10.492 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:10.492 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:27:10.493 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:27:10.493 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:27:10.493 +02:00 [DBG] Start key discovery request
2020-08-12 14:27:10.700 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:27:10.700 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:27:10.700 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:27:10.700 +02:00 [DBG] Start authorize request
2020-08-12 14:27:10.700 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:10.700 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:27:10.725 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:27:10.725 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:27:10.729 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:10.741 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:10.743 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:10.744 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:10.744 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:27:10.744 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"NDBNZy5pc1JvZGU3RHJ2X2F4aHo1cFpzQ25fS0JxYmpWNEh0LncxeUtSRURl","UiLocales":null,"Nonce":"NDBNZy5pc1JvZGU3RHJ2X2F4aHo1cFpzQ25fS0JxYmpWNEh0LncxeUtSRURl","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"NDBNZy5pc1JvZGU3RHJ2X2F4aHo1cFpzQ25fS0JxYmpWNEh0LncxeUtSRURl","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"NDBNZy5pc1JvZGU3RHJ2X2F4aHo1cFpzQ25fS0JxYmpWNEh0LncxeUtSRURl"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:27:10.747 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:27:10.747 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:27:10.747 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:27:10.747 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:10.753 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:27:10.753 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:27:10.755 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****uQPQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****CKVQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000039-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:27:10.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:27:10.755 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"NDBNZy5pc1JvZGU3RHJ2X2F4aHo1cFpzQ25fS0JxYmpWNEh0LncxeUtSRURl","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:27:11.116 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:27:11.119 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:11.120 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:11.120 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:27:11.120 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:27:11.120 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:27:11.120 +02:00 [DBG] Start discovery request
2020-08-12 14:27:11.140 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:27:11.351 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:27:11.355 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:11.355 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:11.355 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:27:11.355 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:27:11.355 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:27:11.355 +02:00 [DBG] Start key discovery request
2020-08-12 14:27:11.458 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:27:11.458 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:27:11.459 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:27:11.459 +02:00 [DBG] Start authorize request
2020-08-12 14:27:11.459 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:11.459 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:27:11.483 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:27:11.483 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:27:11.487 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:11.501 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:11.503 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:11.504 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:11.504 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:27:11.504 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"UHNoRVctdXl0UzQ5eDlEY2JmczVQTjBVOTZfT3k3czh3VUt3aG1IZVEud19W","UiLocales":null,"Nonce":"UHNoRVctdXl0UzQ5eDlEY2JmczVQTjBVOTZfT3k3czh3VUt3aG1IZVEud19W","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"UHNoRVctdXl0UzQ5eDlEY2JmczVQTjBVOTZfT3k3czh3VUt3aG1IZVEud19W","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"UHNoRVctdXl0UzQ5eDlEY2JmczVQTjBVOTZfT3k3czh3VUt3aG1IZVEud19W"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:27:11.510 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:27:11.510 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:27:11.510 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:27:11.510 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:11.519 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:27:11.519 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:27:11.521 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****VuTw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****FlEA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000003a-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:27:11.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:27:11.521 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"UHNoRVctdXl0UzQ5eDlEY2JmczVQTjBVOTZfT3k3czh3VUt3aG1IZVEud19W","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:27:12.024 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:27:12.029 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:12.029 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:12.029 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:27:12.029 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:27:12.029 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:27:12.029 +02:00 [DBG] Start discovery request
2020-08-12 14:27:12.044 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:27:12.420 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:27:12.427 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:12.427 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:12.427 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:27:12.427 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:27:12.427 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:27:12.428 +02:00 [DBG] Start key discovery request
2020-08-12 14:27:12.570 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:27:12.571 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:27:12.571 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:27:12.571 +02:00 [DBG] Start authorize request
2020-08-12 14:27:12.571 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:12.571 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:27:12.617 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:27:12.617 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:27:12.623 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:12.642 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:12.647 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:12.662 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:12.663 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:27:12.663 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"MXpNek9NWU1XNUNQWG5-VlVScDN3fn5Fd1pOVk91cVNCaXBaZjVTN3c1eVky","UiLocales":null,"Nonce":"MXpNek9NWU1XNUNQWG5-VlVScDN3fn5Fd1pOVk91cVNCaXBaZjVTN3c1eVky","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"MXpNek9NWU1XNUNQWG5-VlVScDN3fn5Fd1pOVk91cVNCaXBaZjVTN3c1eVky","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"MXpNek9NWU1XNUNQWG5-VlVScDN3fn5Fd1pOVk91cVNCaXBaZjVTN3c1eVky"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:27:12.668 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:27:12.668 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:27:12.668 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:27:12.669 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:12.683 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:27:12.683 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:27:12.687 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****rWvQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****uFcA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000003b-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:27:12.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:27:12.687 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"MXpNek9NWU1XNUNQWG5-VlVScDN3fn5Fd1pOVk91cVNCaXBaZjVTN3c1eVky","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:27:13.268 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:27:13.304 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:13.304 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:13.304 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:27:13.304 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:27:13.304 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:27:13.305 +02:00 [DBG] Start discovery request
2020-08-12 14:27:13.348 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:27:13.472 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:27:13.478 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:13.478 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:13.479 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:27:13.479 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:27:13.479 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:27:13.479 +02:00 [DBG] Start key discovery request
2020-08-12 14:27:13.836 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:27:13.837 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:27:13.838 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:27:13.838 +02:00 [DBG] Start authorize request
2020-08-12 14:27:13.838 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:13.838 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:27:13.959 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:27:13.960 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:27:13.965 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:13.978 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:13.980 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:13.982 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:13.982 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:27:13.982 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"WFdKQVFiZ1AwWEJseE5RTm9RM1g4aWJ4MVhpbjVEWGtxRk92UmlxWWxUUU9M","UiLocales":null,"Nonce":"WFdKQVFiZ1AwWEJseE5RTm9RM1g4aWJ4MVhpbjVEWGtxRk92UmlxWWxUUU9M","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"WFdKQVFiZ1AwWEJseE5RTm9RM1g4aWJ4MVhpbjVEWGtxRk92UmlxWWxUUU9M","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"WFdKQVFiZ1AwWEJseE5RTm9RM1g4aWJ4MVhpbjVEWGtxRk92UmlxWWxUUU9M"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:27:13.986 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:27:13.986 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:27:13.986 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:27:13.986 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:13.996 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:27:13.996 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:27:13.998 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****7Zyw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****N56Q","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000003c-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:27:13.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:27:13.999 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"WFdKQVFiZ1AwWEJseE5RTm9RM1g4aWJ4MVhpbjVEWGtxRk92UmlxWWxUUU9M","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:27:14.528 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:27:14.531 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:14.532 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:14.532 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:27:14.532 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:27:14.532 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:27:14.532 +02:00 [DBG] Start discovery request
2020-08-12 14:27:14.553 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:27:14.748 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:27:14.752 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:14.752 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:14.754 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:27:14.754 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:27:14.754 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:27:14.754 +02:00 [DBG] Start key discovery request
2020-08-12 14:27:14.887 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:27:14.887 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:27:14.887 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:27:14.887 +02:00 [DBG] Start authorize request
2020-08-12 14:27:14.888 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:14.888 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:27:15.391 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:27:15.391 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:27:15.399 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:15.423 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:15.433 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:15.452 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:15.452 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:27:15.453 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"MFZIbXpofmhPeEtkbHJKZXFBUERNdlZjSUVhakg3MkJhVmJmbFNtNVBYMm9k","UiLocales":null,"Nonce":"MFZIbXpofmhPeEtkbHJKZXFBUERNdlZjSUVhakg3MkJhVmJmbFNtNVBYMm9k","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"MFZIbXpofmhPeEtkbHJKZXFBUERNdlZjSUVhakg3MkJhVmJmbFNtNVBYMm9k","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"MFZIbXpofmhPeEtkbHJKZXFBUERNdlZjSUVhakg3MkJhVmJmbFNtNVBYMm9k"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:27:15.457 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:27:15.457 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:27:15.457 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:27:15.457 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:15.470 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:27:15.470 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:27:15.472 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****5IIQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****xyDg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000003d-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:27:15.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:27:15.472 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"MFZIbXpofmhPeEtkbHJKZXFBUERNdlZjSUVhakg3MkJhVmJmbFNtNVBYMm9k","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:27:16.336 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:27:16.342 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:16.343 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:16.344 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:27:16.344 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:27:16.344 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:27:16.344 +02:00 [DBG] Start discovery request
2020-08-12 14:27:16.366 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:27:16.835 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:27:16.841 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:16.841 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:16.841 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:27:16.842 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:27:16.842 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:27:16.842 +02:00 [DBG] Start key discovery request
2020-08-12 14:27:17.007 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:27:17.008 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:27:17.008 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:27:17.008 +02:00 [DBG] Start authorize request
2020-08-12 14:27:17.008 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:17.008 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:27:17.060 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:27:17.061 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:27:17.068 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:17.099 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:17.106 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:17.134 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:17.135 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:27:17.135 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"dkFhTHZ4bXR1RGR3bWZGYzdOd1NheFJCWC5TdlJtb1ZTQ1Fkc05VeWN2RTNy","UiLocales":null,"Nonce":"dkFhTHZ4bXR1RGR3bWZGYzdOd1NheFJCWC5TdlJtb1ZTQ1Fkc05VeWN2RTNy","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"dkFhTHZ4bXR1RGR3bWZGYzdOd1NheFJCWC5TdlJtb1ZTQ1Fkc05VeWN2RTNy","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"dkFhTHZ4bXR1RGR3bWZGYzdOd1NheFJCWC5TdlJtb1ZTQ1Fkc05VeWN2RTNy"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:27:17.140 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:27:17.140 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:27:17.141 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:27:17.141 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:17.151 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:27:17.151 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:27:17.154 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****NpvQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****RZ_g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000003e-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:27:17.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:27:17.154 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"dkFhTHZ4bXR1RGR3bWZGYzdOd1NheFJCWC5TdlJtb1ZTQ1Fkc05VeWN2RTNy","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:27:22.722 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:27:22.726 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:22.727 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:22.727 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:27:22.727 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:27:22.727 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:27:22.727 +02:00 [DBG] Start discovery request
2020-08-12 14:27:22.742 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:27:24.160 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:27:24.162 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:24.162 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:24.162 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:27:24.162 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:27:24.163 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:27:24.163 +02:00 [DBG] Start key discovery request
2020-08-12 14:27:24.668 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:27:24.669 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:27:24.669 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:27:24.669 +02:00 [DBG] Start authorize request
2020-08-12 14:27:24.669 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:24.669 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:27:24.694 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:27:24.694 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:27:24.697 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:24.708 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:24.709 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:24.711 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:24.711 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:27:24.711 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"WFhuMVZSMEhQeVA1RXdMUjNJSWpvUkFTcVhKYkZ2ZFZJNF9sRERUckw2emRh","UiLocales":null,"Nonce":"WFhuMVZSMEhQeVA1RXdMUjNJSWpvUkFTcVhKYkZ2ZFZJNF9sRERUckw2emRh","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"WFhuMVZSMEhQeVA1RXdMUjNJSWpvUkFTcVhKYkZ2ZFZJNF9sRERUckw2emRh","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"WFhuMVZSMEhQeVA1RXdMUjNJSWpvUkFTcVhKYkZ2ZFZJNF9sRERUckw2emRh"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:27:24.716 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:27:24.716 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:27:24.716 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:27:24.716 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:24.722 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:27:24.722 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:27:24.724 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****T1LA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****f0dA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000003f-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:27:24.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:27:24.724 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"WFhuMVZSMEhQeVA1RXdMUjNJSWpvUkFTcVhKYkZ2ZFZJNF9sRERUckw2emRh","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:27:25.022 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:27:25.024 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:25.024 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:25.025 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:27:25.025 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:27:25.025 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:27:25.025 +02:00 [DBG] Start discovery request
2020-08-12 14:27:25.029 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:27:25.089 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:27:25.092 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:25.092 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:25.092 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:27:25.092 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:27:25.092 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:27:25.092 +02:00 [DBG] Start key discovery request
2020-08-12 14:27:25.311 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:27:25.312 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:27:25.312 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:27:25.312 +02:00 [DBG] Start authorize request
2020-08-12 14:27:25.312 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:25.312 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:27:25.341 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:27:25.341 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:27:25.343 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:25.344 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:25.345 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:25.346 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:25.346 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:27:25.346 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"UmV3cl83RmM4ZFhuM1hLNTBwU2JHMzM3T2ZTdEwzZjJ0MVZpUGQ0NWRRbW82","UiLocales":null,"Nonce":"UmV3cl83RmM4ZFhuM1hLNTBwU2JHMzM3T2ZTdEwzZjJ0MVZpUGQ0NWRRbW82","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"UmV3cl83RmM4ZFhuM1hLNTBwU2JHMzM3T2ZTdEwzZjJ0MVZpUGQ0NWRRbW82","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"UmV3cl83RmM4ZFhuM1hLNTBwU2JHMzM3T2ZTdEwzZjJ0MVZpUGQ0NWRRbW82"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:27:25.348 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:27:25.349 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:27:25.349 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:27:25.349 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:25.353 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:27:25.353 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:27:25.354 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****QMzQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****lhHw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000040-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:27:25.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:27:25.354 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"UmV3cl83RmM4ZFhuM1hLNTBwU2JHMzM3T2ZTdEwzZjJ0MVZpUGQ0NWRRbW82","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:27:25.694 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:27:25.696 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:25.696 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:25.696 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:27:25.697 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:27:25.697 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:27:25.697 +02:00 [DBG] Start discovery request
2020-08-12 14:27:25.700 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:27:25.960 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:27:25.963 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:25.963 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:25.963 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:27:25.963 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:27:25.963 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:27:25.963 +02:00 [DBG] Start key discovery request
2020-08-12 14:27:26.286 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:27:26.286 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:27:26.286 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:27:26.286 +02:00 [DBG] Start authorize request
2020-08-12 14:27:26.286 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:26.286 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:27:26.299 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:27:26.299 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:27:26.302 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:26.305 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:26.310 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:26.313 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:26.313 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:27:26.314 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"bGlEYlZ0eEw3aEpJNjFzQWk2T203NUN2ZmFrcWljREttVVRCU3E1N3dzSS5M","UiLocales":null,"Nonce":"bGlEYlZ0eEw3aEpJNjFzQWk2T203NUN2ZmFrcWljREttVVRCU3E1N3dzSS5M","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"bGlEYlZ0eEw3aEpJNjFzQWk2T203NUN2ZmFrcWljREttVVRCU3E1N3dzSS5M","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"bGlEYlZ0eEw3aEpJNjFzQWk2T203NUN2ZmFrcWljREttVVRCU3E1N3dzSS5M"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:27:26.317 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:27:26.317 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:27:26.317 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:27:26.317 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:26.325 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:27:26.325 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:27:26.327 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****XD8Q","$type":"Token"},{"TokenType":"access_token","TokenValue":"****CrkQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000041-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:27:26.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:27:26.328 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"bGlEYlZ0eEw3aEpJNjFzQWk2T203NUN2ZmFrcWljREttVVRCU3E1N3dzSS5M","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:27:26.727 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:27:26.730 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:26.730 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:26.730 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:27:26.730 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:27:26.730 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:27:26.730 +02:00 [DBG] Start discovery request
2020-08-12 14:27:27.033 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:27:27.262 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:27:27.266 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:27.266 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:27.266 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:27:27.266 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:27:27.266 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:27:27.266 +02:00 [DBG] Start key discovery request
2020-08-12 14:27:27.628 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:27:27.628 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:27:27.628 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:27:27.628 +02:00 [DBG] Start authorize request
2020-08-12 14:27:27.628 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:27.628 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:27:27.656 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:27:27.656 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:27:27.660 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:27.672 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:27.674 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:27.675 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:27.675 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:27:27.675 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"YVFYd3o5M1Vhd3AwZWg1T19yOVU2SHl-cGFzeGczdkVqR2Z5VmI0NU10bXA4","UiLocales":null,"Nonce":"YVFYd3o5M1Vhd3AwZWg1T19yOVU2SHl-cGFzeGczdkVqR2Z5VmI0NU10bXA4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"YVFYd3o5M1Vhd3AwZWg1T19yOVU2SHl-cGFzeGczdkVqR2Z5VmI0NU10bXA4","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"YVFYd3o5M1Vhd3AwZWg1T19yOVU2SHl-cGFzeGczdkVqR2Z5VmI0NU10bXA4"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:27:27.678 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:27:27.678 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:27:27.678 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:27:27.678 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:27.685 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:27:27.685 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:27:27.687 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Fn1g","$type":"Token"},{"TokenType":"access_token","TokenValue":"****2M5g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000042-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:27:27.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:27:27.687 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"YVFYd3o5M1Vhd3AwZWg1T19yOVU2SHl-cGFzeGczdkVqR2Z5VmI0NU10bXA4","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:27:28.452 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:27:28.455 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:28.455 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:28.456 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:27:28.456 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:27:28.456 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:27:28.456 +02:00 [DBG] Start discovery request
2020-08-12 14:27:28.468 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:27:28.682 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:27:28.687 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:28.687 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:28.688 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:27:28.688 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:27:28.688 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:27:28.688 +02:00 [DBG] Start key discovery request
2020-08-12 14:27:28.931 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:27:28.932 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:27:28.932 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:27:28.932 +02:00 [DBG] Start authorize request
2020-08-12 14:27:28.932 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:28.932 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:27:28.975 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:27:28.975 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:27:28.981 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:28.999 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:29.001 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:29.003 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:29.003 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:27:29.003 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"VDl3Q3gyZHBKc2ZhU3lIU0sxTTlIcG9jM2Q0d2hoMElwYndlWDEzaTNLT2Y0","UiLocales":null,"Nonce":"VDl3Q3gyZHBKc2ZhU3lIU0sxTTlIcG9jM2Q0d2hoMElwYndlWDEzaTNLT2Y0","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"VDl3Q3gyZHBKc2ZhU3lIU0sxTTlIcG9jM2Q0d2hoMElwYndlWDEzaTNLT2Y0","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"VDl3Q3gyZHBKc2ZhU3lIU0sxTTlIcG9jM2Q0d2hoMElwYndlWDEzaTNLT2Y0"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:27:29.007 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:27:29.007 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:27:29.007 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:27:29.007 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:29.016 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:27:29.016 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:27:29.017 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****TwPQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****GD7g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000043-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:27:29.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:27:29.017 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"VDl3Q3gyZHBKc2ZhU3lIU0sxTTlIcG9jM2Q0d2hoMElwYndlWDEzaTNLT2Y0","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:27:30.781 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:27:30.786 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:30.787 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:30.787 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:27:30.787 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:27:30.787 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:27:30.787 +02:00 [DBG] Start discovery request
2020-08-12 14:27:30.808 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:27:30.971 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:27:30.974 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:30.974 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:30.974 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:27:30.974 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:27:30.974 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:27:30.975 +02:00 [DBG] Start key discovery request
2020-08-12 14:27:31.022 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:27:31.022 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:27:31.023 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:27:31.023 +02:00 [DBG] Start authorize request
2020-08-12 14:27:31.023 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:31.023 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:27:31.051 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:27:31.051 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:27:31.055 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:31.068 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:31.069 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:31.071 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:31.071 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:27:31.071 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"ZEZRRWJkZDZuS3VwM1FtMHZiM0Q1aWFndDNqSXRKZ1c1Z2NlQ084eWVqdGJi","UiLocales":null,"Nonce":"ZEZRRWJkZDZuS3VwM1FtMHZiM0Q1aWFndDNqSXRKZ1c1Z2NlQ084eWVqdGJi","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"ZEZRRWJkZDZuS3VwM1FtMHZiM0Q1aWFndDNqSXRKZ1c1Z2NlQ084eWVqdGJi","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"ZEZRRWJkZDZuS3VwM1FtMHZiM0Q1aWFndDNqSXRKZ1c1Z2NlQ084eWVqdGJi"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:27:31.074 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:27:31.075 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:27:31.075 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:27:31.075 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:31.081 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:27:31.081 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:27:31.082 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****6XEQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****BiGA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000044-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:27:31.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:27:31.082 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"ZEZRRWJkZDZuS3VwM1FtMHZiM0Q1aWFndDNqSXRKZ1c1Z2NlQ084eWVqdGJi","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:27:36.181 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:27:36.185 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:36.185 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:36.185 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:27:36.185 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:27:36.185 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:27:36.185 +02:00 [DBG] Start discovery request
2020-08-12 14:27:36.200 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:27:37.199 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:27:37.202 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:37.202 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:37.203 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:27:37.203 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:27:37.203 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:27:37.203 +02:00 [DBG] Start key discovery request
2020-08-12 14:27:37.284 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:27:37.284 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:27:37.285 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:27:37.285 +02:00 [DBG] Start authorize request
2020-08-12 14:27:37.285 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:37.285 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:27:37.366 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:27:37.366 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:27:37.371 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:37.384 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:37.388 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:37.401 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:37.401 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:27:37.401 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"SmFZT0NyemFZcExpM3ZwOUZ2ZUxGeVV2b0pCMUdJdXBrVzV2eEwuT0Yzb1Zl","UiLocales":null,"Nonce":"SmFZT0NyemFZcExpM3ZwOUZ2ZUxGeVV2b0pCMUdJdXBrVzV2eEwuT0Yzb1Zl","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"SmFZT0NyemFZcExpM3ZwOUZ2ZUxGeVV2b0pCMUdJdXBrVzV2eEwuT0Yzb1Zl","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"SmFZT0NyemFZcExpM3ZwOUZ2ZUxGeVV2b0pCMUdJdXBrVzV2eEwuT0Yzb1Zl"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:27:37.405 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:27:37.405 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:27:37.405 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:27:37.405 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:37.411 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:27:37.411 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:27:37.413 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****R0Xw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****q0zQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000045-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:27:37.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:27:37.413 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"SmFZT0NyemFZcExpM3ZwOUZ2ZUxGeVV2b0pCMUdJdXBrVzV2eEwuT0Yzb1Zl","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:27:37.788 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:27:37.791 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:37.791 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:37.792 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:27:37.792 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:27:37.792 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:27:37.792 +02:00 [DBG] Start discovery request
2020-08-12 14:27:37.803 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:27:37.855 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:27:37.858 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:37.858 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:37.858 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:27:37.858 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:27:37.858 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:27:37.859 +02:00 [DBG] Start key discovery request
2020-08-12 14:27:38.216 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:27:38.216 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:27:38.216 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:27:38.216 +02:00 [DBG] Start authorize request
2020-08-12 14:27:38.216 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:38.216 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:27:38.251 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:27:38.251 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:27:38.257 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:38.269 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:38.271 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:38.273 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:38.273 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:27:38.273 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"MEJ-Xy1IUlZFV21tMDY4WmtkMG01V0F1bm5ERG9fTlJlVDJRTGdfUVNDclAw","UiLocales":null,"Nonce":"MEJ-Xy1IUlZFV21tMDY4WmtkMG01V0F1bm5ERG9fTlJlVDJRTGdfUVNDclAw","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"MEJ-Xy1IUlZFV21tMDY4WmtkMG01V0F1bm5ERG9fTlJlVDJRTGdfUVNDclAw","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"MEJ-Xy1IUlZFV21tMDY4WmtkMG01V0F1bm5ERG9fTlJlVDJRTGdfUVNDclAw"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:27:38.277 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:27:38.277 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:27:38.277 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:27:38.277 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:38.284 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:27:38.284 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:27:38.286 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****7hNw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****gZXA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000046-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:27:38.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:27:38.286 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"MEJ-Xy1IUlZFV21tMDY4WmtkMG01V0F1bm5ERG9fTlJlVDJRTGdfUVNDclAw","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:27:38.837 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:27:38.842 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:38.842 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:38.842 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:27:38.842 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:27:38.842 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:27:38.842 +02:00 [DBG] Start discovery request
2020-08-12 14:27:38.854 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:27:39.023 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:27:39.027 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:39.027 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:39.027 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:27:39.027 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:27:39.027 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:27:39.027 +02:00 [DBG] Start key discovery request
2020-08-12 14:27:39.090 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:27:39.090 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:27:39.090 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:27:39.090 +02:00 [DBG] Start authorize request
2020-08-12 14:27:39.090 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:39.090 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:27:39.119 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:27:39.120 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:27:39.124 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:39.141 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:39.143 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:39.145 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:39.145 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:27:39.146 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"anNoMFNLeC1OdnM2ODJUdTNhSnlUT1R1Ujl1OH5lVDB-SjRubk01cUFNeklV","UiLocales":null,"Nonce":"anNoMFNLeC1OdnM2ODJUdTNhSnlUT1R1Ujl1OH5lVDB-SjRubk01cUFNeklV","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"anNoMFNLeC1OdnM2ODJUdTNhSnlUT1R1Ujl1OH5lVDB-SjRubk01cUFNeklV","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"anNoMFNLeC1OdnM2ODJUdTNhSnlUT1R1Ujl1OH5lVDB-SjRubk01cUFNeklV"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:27:39.150 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:27:39.150 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:27:39.150 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:27:39.150 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:39.160 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:27:39.160 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:27:39.162 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****KtbQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****5Gzw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000047-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:27:39.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:27:39.163 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"anNoMFNLeC1OdnM2ODJUdTNhSnlUT1R1Ujl1OH5lVDB-SjRubk01cUFNeklV","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:27:39.630 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:27:39.633 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:39.633 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:39.633 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:27:39.634 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:27:39.634 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:27:39.634 +02:00 [DBG] Start discovery request
2020-08-12 14:27:39.648 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:27:39.712 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:27:39.715 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:39.715 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:39.715 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:27:39.715 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:27:39.715 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:27:39.715 +02:00 [DBG] Start key discovery request
2020-08-12 14:27:39.862 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:27:39.862 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:27:39.863 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:27:39.863 +02:00 [DBG] Start authorize request
2020-08-12 14:27:39.863 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:39.863 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:27:39.895 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:27:39.895 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:27:39.899 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:39.912 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:39.914 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:39.916 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:39.917 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:27:39.917 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"WTUuRkJPMnJXa25zbmx2VWJDR3dwNHdxb3ZOS1V2Y0x5eXpuOVlVeWhqTzNn","UiLocales":null,"Nonce":"WTUuRkJPMnJXa25zbmx2VWJDR3dwNHdxb3ZOS1V2Y0x5eXpuOVlVeWhqTzNn","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"WTUuRkJPMnJXa25zbmx2VWJDR3dwNHdxb3ZOS1V2Y0x5eXpuOVlVeWhqTzNn","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"WTUuRkJPMnJXa25zbmx2VWJDR3dwNHdxb3ZOS1V2Y0x5eXpuOVlVeWhqTzNn"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:27:39.921 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:27:39.921 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:27:39.921 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:27:39.922 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:39.929 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:27:39.929 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:27:39.931 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****oqJg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****5Gzw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000048-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:27:39.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:27:39.931 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"WTUuRkJPMnJXa25zbmx2VWJDR3dwNHdxb3ZOS1V2Y0x5eXpuOVlVeWhqTzNn","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:27:40.468 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:27:40.472 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:40.472 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:40.472 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:27:40.472 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:27:40.472 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:27:40.473 +02:00 [DBG] Start discovery request
2020-08-12 14:27:40.490 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:27:40.626 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:27:40.630 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:40.630 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:40.630 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:27:40.631 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:27:40.631 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:27:40.631 +02:00 [DBG] Start key discovery request
2020-08-12 14:27:40.992 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:27:40.992 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:27:40.993 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:27:40.993 +02:00 [DBG] Start authorize request
2020-08-12 14:27:40.993 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:40.993 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:27:41.032 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:27:41.032 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:27:41.040 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:41.055 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:41.063 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:41.080 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:41.080 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:27:41.081 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"ZHFXVWZXLXh1NTJCTldZWnRvSlB4flZOUlVRMjN3X3lIbDVoLk5ZbWlzUEQ0","UiLocales":null,"Nonce":"ZHFXVWZXLXh1NTJCTldZWnRvSlB4flZOUlVRMjN3X3lIbDVoLk5ZbWlzUEQ0","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"ZHFXVWZXLXh1NTJCTldZWnRvSlB4flZOUlVRMjN3X3lIbDVoLk5ZbWlzUEQ0","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"ZHFXVWZXLXh1NTJCTldZWnRvSlB4flZOUlVRMjN3X3lIbDVoLk5ZbWlzUEQ0"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:27:41.084 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:27:41.085 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:27:41.085 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:27:41.085 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:41.093 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:27:41.093 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:27:41.095 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****0P3A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****liAg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000049-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:27:41.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:27:41.096 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"ZHFXVWZXLXh1NTJCTldZWnRvSlB4flZOUlVRMjN3X3lIbDVoLk5ZbWlzUEQ0","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:27:41.633 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:27:41.639 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:41.639 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:41.640 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:27:41.640 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:27:41.640 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:27:41.640 +02:00 [DBG] Start discovery request
2020-08-12 14:27:41.662 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:27:41.982 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:27:41.991 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:41.992 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:41.992 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:27:41.993 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:27:41.993 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:27:41.993 +02:00 [DBG] Start key discovery request
2020-08-12 14:27:42.301 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:27:42.301 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:27:42.301 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:27:42.302 +02:00 [DBG] Start authorize request
2020-08-12 14:27:42.303 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:42.303 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:27:42.355 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:27:42.356 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:27:42.364 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:42.382 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:42.389 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:42.412 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:42.412 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:27:42.412 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"c0hEdG1CbGxPZkgxRzByNUF-TGN5cTVYTzBRNHY2fndiUW1lRUVCVzI1cFEt","UiLocales":null,"Nonce":"c0hEdG1CbGxPZkgxRzByNUF-TGN5cTVYTzBRNHY2fndiUW1lRUVCVzI1cFEt","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"c0hEdG1CbGxPZkgxRzByNUF-TGN5cTVYTzBRNHY2fndiUW1lRUVCVzI1cFEt","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"c0hEdG1CbGxPZkgxRzByNUF-TGN5cTVYTzBRNHY2fndiUW1lRUVCVzI1cFEt"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:27:42.417 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:27:42.417 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:27:42.417 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:27:42.417 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:42.427 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:27:42.427 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:27:42.429 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****uNDw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****rhJg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000004a-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:27:42.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:27:42.429 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"c0hEdG1CbGxPZkgxRzByNUF-TGN5cTVYTzBRNHY2fndiUW1lRUVCVzI1cFEt","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:27:42.859 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:27:42.863 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:42.863 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:42.863 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:27:42.864 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:27:42.864 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:27:42.864 +02:00 [DBG] Start discovery request
2020-08-12 14:27:42.882 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:27:43.097 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:27:43.102 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:43.102 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:43.102 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:27:43.102 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:27:43.102 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:27:43.102 +02:00 [DBG] Start key discovery request
2020-08-12 14:27:43.209 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:27:43.210 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:27:43.210 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:27:43.210 +02:00 [DBG] Start authorize request
2020-08-12 14:27:43.210 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:43.210 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:27:43.252 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:27:43.252 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:27:43.257 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:43.277 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:43.280 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:43.283 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:43.283 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:27:43.283 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"eUVSdDBnTXUwekdwZ2ppcDhDeXdHQW5EVHBtNEJ2VzR2VlVlOFU0fi1MYS5P","UiLocales":null,"Nonce":"eUVSdDBnTXUwekdwZ2ppcDhDeXdHQW5EVHBtNEJ2VzR2VlVlOFU0fi1MYS5P","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"eUVSdDBnTXUwekdwZ2ppcDhDeXdHQW5EVHBtNEJ2VzR2VlVlOFU0fi1MYS5P","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"eUVSdDBnTXUwekdwZ2ppcDhDeXdHQW5EVHBtNEJ2VzR2VlVlOFU0fi1MYS5P"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:27:43.289 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:27:43.290 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:27:43.290 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:27:43.290 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:43.300 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:27:43.300 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:27:43.301 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****5U1A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****ysXg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000004b-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:27:43.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:27:43.302 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"eUVSdDBnTXUwekdwZ2ppcDhDeXdHQW5EVHBtNEJ2VzR2VlVlOFU0fi1MYS5P","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:27:43.724 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:27:43.728 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:43.728 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:43.729 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:27:43.729 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:27:43.729 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:27:43.729 +02:00 [DBG] Start discovery request
2020-08-12 14:27:43.745 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:27:44.294 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:27:44.299 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:44.299 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:44.299 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:27:44.299 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:27:44.299 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:27:44.299 +02:00 [DBG] Start key discovery request
2020-08-12 14:27:44.646 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:27:44.646 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:27:44.646 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:27:44.646 +02:00 [DBG] Start authorize request
2020-08-12 14:27:44.646 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:44.646 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:27:44.676 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:27:44.676 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:27:44.680 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:44.691 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:44.693 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:44.694 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:44.694 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:27:44.694 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"dWtjR2ZRWkcyV0hpZjRPcEVTQnlxVm5MTDZieVRPRGxPemZSQkxyVUZraW90","UiLocales":null,"Nonce":"dWtjR2ZRWkcyV0hpZjRPcEVTQnlxVm5MTDZieVRPRGxPemZSQkxyVUZraW90","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"dWtjR2ZRWkcyV0hpZjRPcEVTQnlxVm5MTDZieVRPRGxPemZSQkxyVUZraW90","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"dWtjR2ZRWkcyV0hpZjRPcEVTQnlxVm5MTDZieVRPRGxPemZSQkxyVUZraW90"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:27:44.697 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:27:44.697 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:27:44.697 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:27:44.697 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:44.703 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:27:44.703 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:27:44.704 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****G2lg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****a_ww","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000004c-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:27:44.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:27:44.704 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"dWtjR2ZRWkcyV0hpZjRPcEVTQnlxVm5MTDZieVRPRGxPemZSQkxyVUZraW90","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:27:45.291 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:27:45.298 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:45.299 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:45.299 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:27:45.299 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:27:45.300 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:27:45.300 +02:00 [DBG] Start discovery request
2020-08-12 14:27:45.330 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:27:45.501 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:27:45.506 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:45.506 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:45.506 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:27:45.507 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:27:45.507 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:27:45.507 +02:00 [DBG] Start key discovery request
2020-08-12 14:27:45.774 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:27:45.775 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:27:45.775 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:27:45.775 +02:00 [DBG] Start authorize request
2020-08-12 14:27:45.775 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:45.775 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:27:45.811 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:27:45.812 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:27:45.817 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:45.836 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:45.842 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:45.844 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:45.844 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:27:45.844 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"TzlPVDJRZVQtUUFOQUxrMlJQTmQ4LVgxMkVTMldib0liRUpyZ0RRTFVSS2Jq","UiLocales":null,"Nonce":"TzlPVDJRZVQtUUFOQUxrMlJQTmQ4LVgxMkVTMldib0liRUpyZ0RRTFVSS2Jq","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"TzlPVDJRZVQtUUFOQUxrMlJQTmQ4LVgxMkVTMldib0liRUpyZ0RRTFVSS2Jq","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"TzlPVDJRZVQtUUFOQUxrMlJQTmQ4LVgxMkVTMldib0liRUpyZ0RRTFVSS2Jq"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:27:45.847 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:27:45.848 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:27:45.848 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:27:45.848 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:45.853 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:27:45.853 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:27:45.854 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****9gyA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****uBiQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000004d-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:27:45.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:27:45.854 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"TzlPVDJRZVQtUUFOQUxrMlJQTmQ4LVgxMkVTMldib0liRUpyZ0RRTFVSS2Jq","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:27:46.671 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:27:46.680 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:46.680 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:46.680 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:27:46.681 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:27:46.681 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:27:46.681 +02:00 [DBG] Start discovery request
2020-08-12 14:27:46.732 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:27:46.815 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:27:46.819 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:46.820 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:46.820 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:27:46.820 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:27:46.820 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:27:46.820 +02:00 [DBG] Start key discovery request
2020-08-12 14:27:47.050 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:27:47.051 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:27:47.051 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:27:47.051 +02:00 [DBG] Start authorize request
2020-08-12 14:27:47.051 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:47.051 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:27:47.094 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:27:47.095 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:27:47.100 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:47.118 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:47.121 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:47.123 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:47.124 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:27:47.124 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"VFZRZWFhanF3eU1YVWZSelRKeEtybmxLcDZmbVJvfkJSQWdqcVZWQVlwMy5v","UiLocales":null,"Nonce":"VFZRZWFhanF3eU1YVWZSelRKeEtybmxLcDZmbVJvfkJSQWdqcVZWQVlwMy5v","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"VFZRZWFhanF3eU1YVWZSelRKeEtybmxLcDZmbVJvfkJSQWdqcVZWQVlwMy5v","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"VFZRZWFhanF3eU1YVWZSelRKeEtybmxLcDZmbVJvfkJSQWdqcVZWQVlwMy5v"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:27:47.129 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:27:47.129 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:27:47.129 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:27:47.129 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:47.138 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:27:47.138 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:27:47.140 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****cZaA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****FPjg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000004e-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:27:47.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:27:47.140 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"VFZRZWFhanF3eU1YVWZSelRKeEtybmxLcDZmbVJvfkJSQWdqcVZWQVlwMy5v","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:27:47.881 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:27:47.886 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:47.886 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:47.886 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:27:47.887 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:27:47.887 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:27:47.887 +02:00 [DBG] Start discovery request
2020-08-12 14:27:47.909 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:27:48.248 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:27:48.252 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:48.252 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:48.252 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:27:48.253 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:27:48.253 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:27:48.253 +02:00 [DBG] Start key discovery request
2020-08-12 14:27:48.516 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:27:48.516 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:27:48.516 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:27:48.516 +02:00 [DBG] Start authorize request
2020-08-12 14:27:48.516 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:48.516 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:27:48.566 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:27:48.566 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:27:48.585 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:48.615 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:48.623 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:48.652 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:48.653 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:27:48.653 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"SzU1NkJUakt1cEt-Z1dsc2lqdVEyeE54RWkwRFJzQ1VHSHBpbnhMQ3Vma25s","UiLocales":null,"Nonce":"SzU1NkJUakt1cEt-Z1dsc2lqdVEyeE54RWkwRFJzQ1VHSHBpbnhMQ3Vma25s","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"SzU1NkJUakt1cEt-Z1dsc2lqdVEyeE54RWkwRFJzQ1VHSHBpbnhMQ3Vma25s","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"SzU1NkJUakt1cEt-Z1dsc2lqdVEyeE54RWkwRFJzQ1VHSHBpbnhMQ3Vma25s"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:27:48.657 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:27:48.658 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:27:48.658 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:27:48.658 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:48.667 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:27:48.667 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:27:48.669 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****LjTA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****UZqw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000004f-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:27:48.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:27:48.669 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"SzU1NkJUakt1cEt-Z1dsc2lqdVEyeE54RWkwRFJzQ1VHSHBpbnhMQ3Vma25s","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:27:49.277 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:27:49.281 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:49.281 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:49.282 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:27:49.282 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:27:49.282 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:27:49.282 +02:00 [DBG] Start discovery request
2020-08-12 14:27:49.298 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:27:49.532 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:27:49.537 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:49.538 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:49.538 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:27:49.538 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:27:49.538 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:27:49.538 +02:00 [DBG] Start key discovery request
2020-08-12 14:27:49.760 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:27:49.760 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:27:49.760 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:27:49.760 +02:00 [DBG] Start authorize request
2020-08-12 14:27:49.761 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:49.761 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:27:49.822 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:27:49.822 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:27:49.831 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:49.862 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:49.868 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:49.889 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:49.889 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:27:49.889 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"aHNqTTV2eUdFcW81WXR2ZGxSbndaSF9rbS5WRjdveVBrQXVha3RrRmd2UzYt","UiLocales":null,"Nonce":"aHNqTTV2eUdFcW81WXR2ZGxSbndaSF9rbS5WRjdveVBrQXVha3RrRmd2UzYt","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"aHNqTTV2eUdFcW81WXR2ZGxSbndaSF9rbS5WRjdveVBrQXVha3RrRmd2UzYt","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"aHNqTTV2eUdFcW81WXR2ZGxSbndaSF9rbS5WRjdveVBrQXVha3RrRmd2UzYt"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:27:49.894 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:27:49.894 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:27:49.894 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:27:49.894 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:49.909 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:27:49.909 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:27:49.911 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****ePng","$type":"Token"},{"TokenType":"access_token","TokenValue":"****SBMQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000050-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:27:49.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:27:49.911 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"aHNqTTV2eUdFcW81WXR2ZGxSbndaSF9rbS5WRjdveVBrQXVha3RrRmd2UzYt","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:27:50.563 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:27:50.568 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:50.568 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:50.568 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:27:50.568 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:27:50.568 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:27:50.568 +02:00 [DBG] Start discovery request
2020-08-12 14:27:50.585 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:27:50.937 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:27:50.942 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:50.942 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:50.942 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:27:50.942 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:27:50.942 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:27:50.942 +02:00 [DBG] Start key discovery request
2020-08-12 14:27:51.063 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:27:51.064 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:27:51.064 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:27:51.064 +02:00 [DBG] Start authorize request
2020-08-12 14:27:51.064 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:51.064 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:27:51.119 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:27:51.119 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:27:51.126 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:51.142 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:51.147 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:51.149 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:51.149 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:27:51.149 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"Lko5dVNmZXVvVGxSSFhpWWN2cU52Y25kb1NKZUNJVlNuRXJCM3FkNnFkQmly","UiLocales":null,"Nonce":"Lko5dVNmZXVvVGxSSFhpWWN2cU52Y25kb1NKZUNJVlNuRXJCM3FkNnFkQmly","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"Lko5dVNmZXVvVGxSSFhpWWN2cU52Y25kb1NKZUNJVlNuRXJCM3FkNnFkQmly","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"Lko5dVNmZXVvVGxSSFhpWWN2cU52Y25kb1NKZUNJVlNuRXJCM3FkNnFkQmly"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:27:51.153 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:27:51.153 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:27:51.153 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:27:51.153 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:51.160 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:27:51.160 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:27:51.162 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****USsw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****GAHA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000051-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:27:51.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:27:51.162 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"Lko5dVNmZXVvVGxSSFhpWWN2cU52Y25kb1NKZUNJVlNuRXJCM3FkNnFkQmly","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:27:51.867 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:27:51.872 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:51.872 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:51.872 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:27:51.872 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:27:51.872 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:27:51.872 +02:00 [DBG] Start discovery request
2020-08-12 14:27:51.897 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:27:52.447 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:27:52.640 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:52.640 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:52.640 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:27:52.640 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:27:52.640 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:27:52.640 +02:00 [DBG] Start key discovery request
2020-08-12 14:27:52.774 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:27:52.774 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:27:52.774 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:27:52.774 +02:00 [DBG] Start authorize request
2020-08-12 14:27:52.774 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:52.774 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:27:52.816 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:27:52.816 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:27:52.822 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:52.849 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:52.857 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:52.882 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:52.882 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:27:52.882 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"djRwcWtQbHhESkYuZ0dTaW5WZGNaamZPVHE5aUNBZkZ1ZjRjaE5-TkZwUTJ5","UiLocales":null,"Nonce":"djRwcWtQbHhESkYuZ0dTaW5WZGNaamZPVHE5aUNBZkZ1ZjRjaE5-TkZwUTJ5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"djRwcWtQbHhESkYuZ0dTaW5WZGNaamZPVHE5aUNBZkZ1ZjRjaE5-TkZwUTJ5","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"djRwcWtQbHhESkYuZ0dTaW5WZGNaamZPVHE5aUNBZkZ1ZjRjaE5-TkZwUTJ5"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:27:52.886 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:27:52.886 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:27:52.886 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:27:52.886 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:52.894 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:27:52.894 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:27:52.895 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Gm4A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Nh6w","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000052-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:27:52.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:27:52.895 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"djRwcWtQbHhESkYuZ0dTaW5WZGNaamZPVHE5aUNBZkZ1ZjRjaE5-TkZwUTJ5","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:27:55.739 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:27:55.744 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:55.744 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:55.744 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:27:55.744 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:27:55.744 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:27:55.744 +02:00 [DBG] Start discovery request
2020-08-12 14:27:55.758 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:27:56.296 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:27:56.302 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:56.303 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:56.304 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:27:56.305 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:27:56.306 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:27:56.306 +02:00 [DBG] Start key discovery request
2020-08-12 14:27:56.680 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:27:56.680 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:27:56.680 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:27:56.680 +02:00 [DBG] Start authorize request
2020-08-12 14:27:56.680 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:56.680 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:27:56.724 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:27:56.724 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:27:56.731 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:56.749 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:56.752 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:56.755 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:56.755 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:27:56.756 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"dThTV1Y4MXl4WmRPaVptLVkwU0VRRUZQRGhyZ3JnY2l-RkVPQlZmcGhWVDBQ","UiLocales":null,"Nonce":"dThTV1Y4MXl4WmRPaVptLVkwU0VRRUZQRGhyZ3JnY2l-RkVPQlZmcGhWVDBQ","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"dThTV1Y4MXl4WmRPaVptLVkwU0VRRUZQRGhyZ3JnY2l-RkVPQlZmcGhWVDBQ","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"dThTV1Y4MXl4WmRPaVptLVkwU0VRRUZQRGhyZ3JnY2l-RkVPQlZmcGhWVDBQ"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:27:56.760 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:27:56.761 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:27:56.761 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:27:56.761 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:56.775 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:27:56.775 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:27:56.777 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Ltag","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Ufcg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000053-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:27:56.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:27:56.778 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"dThTV1Y4MXl4WmRPaVptLVkwU0VRRUZQRGhyZ3JnY2l-RkVPQlZmcGhWVDBQ","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:27:57.489 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:27:57.496 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:57.496 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:57.496 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:27:57.496 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:27:57.496 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:27:57.496 +02:00 [DBG] Start discovery request
2020-08-12 14:27:57.512 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:27:57.790 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:27:57.794 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:57.794 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:57.794 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:27:57.794 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:27:57.794 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:27:57.794 +02:00 [DBG] Start key discovery request
2020-08-12 14:27:57.972 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:27:57.972 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:27:57.972 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:27:57.972 +02:00 [DBG] Start authorize request
2020-08-12 14:27:57.972 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:57.972 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:27:58.040 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:27:58.040 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:27:58.048 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:58.065 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:58.067 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:27:58.069 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:27:58.069 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:27:58.069 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"SElVS1hyTGhqeTZ4VUxvN25CM2xDMWI4WmliTWFudjh1Y2ZvRTByTGVQbmU1","UiLocales":null,"Nonce":"SElVS1hyTGhqeTZ4VUxvN25CM2xDMWI4WmliTWFudjh1Y2ZvRTByTGVQbmU1","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"SElVS1hyTGhqeTZ4VUxvN25CM2xDMWI4WmliTWFudjh1Y2ZvRTByTGVQbmU1","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"SElVS1hyTGhqeTZ4VUxvN25CM2xDMWI4WmliTWFudjh1Y2ZvRTByTGVQbmU1"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:27:58.073 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:27:58.074 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:27:58.074 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:27:58.074 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:27:58.080 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:27:58.080 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:27:58.081 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****UB8Q","$type":"Token"},{"TokenType":"access_token","TokenValue":"****ncvA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000054-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:27:58.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:27:58.081 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"SElVS1hyTGhqeTZ4VUxvN25CM2xDMWI4WmliTWFudjh1Y2ZvRTByTGVQbmU1","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:27:59.489 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:27:59.493 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:27:59.493 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:27:59.493 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:27:59.493 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:27:59.493 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:27:59.493 +02:00 [DBG] Start discovery request
2020-08-12 14:27:59.507 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:00.161 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:00.166 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:00.166 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:00.166 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:00.167 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:00.167 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:00.167 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:00.609 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:00.610 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:00.610 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:00.610 +02:00 [DBG] Start authorize request
2020-08-12 14:28:00.610 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:00.610 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:00.642 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:00.642 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:00.646 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:00.660 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:00.661 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:00.663 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:00.663 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:00.664 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"bXhicGRXa3YuRV9LY2pYc1Nhfmt5NEFLRHAxdDZPS0MxOHVxR25jYnV3fm1B","UiLocales":null,"Nonce":"bXhicGRXa3YuRV9LY2pYc1Nhfmt5NEFLRHAxdDZPS0MxOHVxR25jYnV3fm1B","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"bXhicGRXa3YuRV9LY2pYc1Nhfmt5NEFLRHAxdDZPS0MxOHVxR25jYnV3fm1B","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"bXhicGRXa3YuRV9LY2pYc1Nhfmt5NEFLRHAxdDZPS0MxOHVxR25jYnV3fm1B"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:00.667 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:00.667 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:00.668 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:00.668 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:00.675 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:00.675 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:00.677 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****m86Q","$type":"Token"},{"TokenType":"access_token","TokenValue":"****gjGQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000055-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:00.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:00.677 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"bXhicGRXa3YuRV9LY2pYc1Nhfmt5NEFLRHAxdDZPS0MxOHVxR25jYnV3fm1B","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:01.360 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:01.364 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:01.364 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:01.364 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:01.364 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:01.364 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:01.364 +02:00 [DBG] Start discovery request
2020-08-12 14:28:01.379 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:01.806 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:01.815 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:01.815 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:01.815 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:01.815 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:01.816 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:01.816 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:02.163 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:02.163 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:02.163 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:02.163 +02:00 [DBG] Start authorize request
2020-08-12 14:28:02.164 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:02.164 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:02.212 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:02.212 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:02.220 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:02.250 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:02.295 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:02.322 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:02.322 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:02.323 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"TUZ0MTdVY1pFR0ZUanBQLW52V1NqOHNUTVRwYlNxRTdtWVltR2ZHS0ljV2di","UiLocales":null,"Nonce":"TUZ0MTdVY1pFR0ZUanBQLW52V1NqOHNUTVRwYlNxRTdtWVltR2ZHS0ljV2di","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"TUZ0MTdVY1pFR0ZUanBQLW52V1NqOHNUTVRwYlNxRTdtWVltR2ZHS0ljV2di","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"TUZ0MTdVY1pFR0ZUanBQLW52V1NqOHNUTVRwYlNxRTdtWVltR2ZHS0ljV2di"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:02.329 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:02.329 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:02.329 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:02.330 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:02.337 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:02.338 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:02.339 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****cnPw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****YpWQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000056-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:02.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:02.340 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"TUZ0MTdVY1pFR0ZUanBQLW52V1NqOHNUTVRwYlNxRTdtWVltR2ZHS0ljV2di","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:02.869 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:02.872 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:02.872 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:02.872 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:02.873 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:02.873 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:02.873 +02:00 [DBG] Start discovery request
2020-08-12 14:28:02.890 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:03.185 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:03.189 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:03.189 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:03.189 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:03.189 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:03.189 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:03.189 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:03.827 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:03.827 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:03.827 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:03.827 +02:00 [DBG] Start authorize request
2020-08-12 14:28:03.827 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:03.827 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:03.853 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:03.854 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:03.857 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:03.868 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:03.870 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:03.871 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:03.872 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:03.872 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"cH5mMXhValIyWDRiLVBsVmpldXhPT2F3dXItcWpPdGg5U0pNZU5vOXkwZzQ3","UiLocales":null,"Nonce":"cH5mMXhValIyWDRiLVBsVmpldXhPT2F3dXItcWpPdGg5U0pNZU5vOXkwZzQ3","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"cH5mMXhValIyWDRiLVBsVmpldXhPT2F3dXItcWpPdGg5U0pNZU5vOXkwZzQ3","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"cH5mMXhValIyWDRiLVBsVmpldXhPT2F3dXItcWpPdGg5U0pNZU5vOXkwZzQ3"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:03.874 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:03.875 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:03.875 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:03.875 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:03.880 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:03.880 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:03.882 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****CQaA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****8bzQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000057-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:03.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:03.882 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"cH5mMXhValIyWDRiLVBsVmpldXhPT2F3dXItcWpPdGg5U0pNZU5vOXkwZzQ3","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:04.492 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:04.495 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:04.495 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:04.496 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:04.496 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:04.496 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:04.496 +02:00 [DBG] Start discovery request
2020-08-12 14:28:04.507 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:04.576 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:04.580 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:04.580 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:04.581 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:04.581 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:04.581 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:04.581 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:04.881 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:04.881 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:04.881 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:04.881 +02:00 [DBG] Start authorize request
2020-08-12 14:28:04.882 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:04.882 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:04.928 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:04.928 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:04.933 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:04.948 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:04.950 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:04.952 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:04.952 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:04.952 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"TENQcXh2NDh2T01ETkc3bk5hdFJVVTdWeEJlcm9uMmRNMnpUUFV0cUdVYmxI","UiLocales":null,"Nonce":"TENQcXh2NDh2T01ETkc3bk5hdFJVVTdWeEJlcm9uMmRNMnpUUFV0cUdVYmxI","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"TENQcXh2NDh2T01ETkc3bk5hdFJVVTdWeEJlcm9uMmRNMnpUUFV0cUdVYmxI","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"TENQcXh2NDh2T01ETkc3bk5hdFJVVTdWeEJlcm9uMmRNMnpUUFV0cUdVYmxI"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:04.955 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:04.955 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:04.955 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:04.955 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:04.963 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:04.963 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:04.964 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****n2nw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****6Gxw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000058-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:04.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:04.964 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"TENQcXh2NDh2T01ETkc3bk5hdFJVVTdWeEJlcm9uMmRNMnpUUFV0cUdVYmxI","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:05.695 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:05.698 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:05.698 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:05.699 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:05.699 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:05.699 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:05.699 +02:00 [DBG] Start discovery request
2020-08-12 14:28:05.713 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:05.780 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:05.784 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:05.784 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:05.784 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:05.784 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:05.784 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:05.784 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:06.132 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:06.132 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:06.132 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:06.132 +02:00 [DBG] Start authorize request
2020-08-12 14:28:06.133 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:06.133 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:06.224 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:06.224 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:06.235 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:06.259 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:06.265 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:06.268 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:06.268 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:06.268 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"T3pofjZTNXhiNUx2QVpReDRmVnEzYmNTcmRnfmNIZ1JIQzgtRzk3WnVWS29E","UiLocales":null,"Nonce":"T3pofjZTNXhiNUx2QVpReDRmVnEzYmNTcmRnfmNIZ1JIQzgtRzk3WnVWS29E","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"T3pofjZTNXhiNUx2QVpReDRmVnEzYmNTcmRnfmNIZ1JIQzgtRzk3WnVWS29E","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"T3pofjZTNXhiNUx2QVpReDRmVnEzYmNTcmRnfmNIZ1JIQzgtRzk3WnVWS29E"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:06.273 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:06.273 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:06.273 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:06.273 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:06.284 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:06.284 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:06.285 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****HLZw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****0l-Q","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000059-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:06.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:06.285 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"T3pofjZTNXhiNUx2QVpReDRmVnEzYmNTcmRnfmNIZ1JIQzgtRzk3WnVWS29E","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:07.056 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:07.061 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:07.061 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:07.061 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:07.061 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:07.061 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:07.061 +02:00 [DBG] Start discovery request
2020-08-12 14:28:07.080 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:07.384 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:07.388 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:07.388 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:07.388 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:07.388 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:07.388 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:07.388 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:09.015 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:09.015 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:09.015 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:09.015 +02:00 [DBG] Start authorize request
2020-08-12 14:28:09.015 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:09.015 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:09.467 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:09.468 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:09.480 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:09.493 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:09.495 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:09.497 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:09.497 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:09.497 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"U0xlR1NoRlAyaXB6VlJoYmU3ZG5jaDJCbURTSURuOUwyYjJOYm5kdXVGeGh3","UiLocales":null,"Nonce":"U0xlR1NoRlAyaXB6VlJoYmU3ZG5jaDJCbURTSURuOUwyYjJOYm5kdXVGeGh3","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"U0xlR1NoRlAyaXB6VlJoYmU3ZG5jaDJCbURTSURuOUwyYjJOYm5kdXVGeGh3","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"U0xlR1NoRlAyaXB6VlJoYmU3ZG5jaDJCbURTSURuOUwyYjJOYm5kdXVGeGh3"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:09.500 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:09.501 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:09.501 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:09.501 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:09.506 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:09.506 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:09.508 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****JcFw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****UMhg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000005a-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:09.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:09.508 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"U0xlR1NoRlAyaXB6VlJoYmU3ZG5jaDJCbURTSURuOUwyYjJOYm5kdXVGeGh3","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:10.090 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:10.094 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:10.095 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:10.095 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:10.095 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:10.095 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:10.095 +02:00 [DBG] Start discovery request
2020-08-12 14:28:10.111 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:10.382 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:10.387 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:10.387 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:10.388 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:10.388 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:10.388 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:10.388 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:10.555 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:10.555 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:10.555 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:10.555 +02:00 [DBG] Start authorize request
2020-08-12 14:28:10.555 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:10.555 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:10.595 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:10.595 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:10.602 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:10.621 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:10.628 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:10.653 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:10.653 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:10.653 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"ai1mdGFsNmdOV2h3aF9RfnZtaXlQSkM0aWRjWDJ2R1Nab2FDVTkucEEydXNx","UiLocales":null,"Nonce":"ai1mdGFsNmdOV2h3aF9RfnZtaXlQSkM0aWRjWDJ2R1Nab2FDVTkucEEydXNx","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"ai1mdGFsNmdOV2h3aF9RfnZtaXlQSkM0aWRjWDJ2R1Nab2FDVTkucEEydXNx","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"ai1mdGFsNmdOV2h3aF9RfnZtaXlQSkM0aWRjWDJ2R1Nab2FDVTkucEEydXNx"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:10.657 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:10.657 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:10.657 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:10.657 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:10.664 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:10.664 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:10.666 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****wDig","$type":"Token"},{"TokenType":"access_token","TokenValue":"****29Rw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000005b-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:10.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:10.666 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"ai1mdGFsNmdOV2h3aF9RfnZtaXlQSkM0aWRjWDJ2R1Nab2FDVTkucEEydXNx","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:11.159 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:11.164 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:11.164 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:11.164 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:11.164 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:11.164 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:11.164 +02:00 [DBG] Start discovery request
2020-08-12 14:28:11.184 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:11.277 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:11.281 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:11.281 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:11.281 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:11.281 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:11.281 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:11.281 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:11.535 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:11.535 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:11.536 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:11.536 +02:00 [DBG] Start authorize request
2020-08-12 14:28:11.536 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:11.536 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:11.571 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:11.571 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:11.575 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:11.594 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:11.600 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:11.621 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:11.621 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:11.621 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"WWMycU1yQ0k2ck1DWlhFZjE1WFBnMkwzTTlDNUQwOTVHLVVMd1NMVkpESktr","UiLocales":null,"Nonce":"WWMycU1yQ0k2ck1DWlhFZjE1WFBnMkwzTTlDNUQwOTVHLVVMd1NMVkpESktr","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"WWMycU1yQ0k2ck1DWlhFZjE1WFBnMkwzTTlDNUQwOTVHLVVMd1NMVkpESktr","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"WWMycU1yQ0k2ck1DWlhFZjE1WFBnMkwzTTlDNUQwOTVHLVVMd1NMVkpESktr"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:11.626 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:11.626 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:11.626 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:11.626 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:11.646 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:11.646 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:11.647 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****3YcA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****kiRg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000005c-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:11.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:11.648 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"WWMycU1yQ0k2ck1DWlhFZjE1WFBnMkwzTTlDNUQwOTVHLVVMd1NMVkpESktr","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:12.120 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:12.124 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:12.124 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:12.124 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:12.124 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:12.124 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:12.124 +02:00 [DBG] Start discovery request
2020-08-12 14:28:12.140 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:12.245 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:12.249 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:12.249 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:12.249 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:12.249 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:12.250 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:12.250 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:12.475 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:12.475 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:12.476 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:12.476 +02:00 [DBG] Start authorize request
2020-08-12 14:28:12.476 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:12.476 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:12.506 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:12.506 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:12.510 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:12.523 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:12.525 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:12.526 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:12.526 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:12.527 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"fk1MYUl3eGZDZXFMcnBhbWlmVlUzU1lVbDhwa05rbnhKZzhnQWIwOHpzS0J1","UiLocales":null,"Nonce":"fk1MYUl3eGZDZXFMcnBhbWlmVlUzU1lVbDhwa05rbnhKZzhnQWIwOHpzS0J1","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"fk1MYUl3eGZDZXFMcnBhbWlmVlUzU1lVbDhwa05rbnhKZzhnQWIwOHpzS0J1","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"fk1MYUl3eGZDZXFMcnBhbWlmVlUzU1lVbDhwa05rbnhKZzhnQWIwOHpzS0J1"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:12.530 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:12.530 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:12.530 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:12.530 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:12.541 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:12.541 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:12.543 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****UTHQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****46sA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000005d-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:12.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:12.543 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"fk1MYUl3eGZDZXFMcnBhbWlmVlUzU1lVbDhwa05rbnhKZzhnQWIwOHpzS0J1","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:13.908 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:14.119 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:14.119 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:14.120 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:14.120 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:14.120 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:14.120 +02:00 [DBG] Start discovery request
2020-08-12 14:28:14.256 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:14.382 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:14.387 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:14.387 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:14.387 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:14.387 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:14.387 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:14.387 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:14.449 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:14.449 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:14.449 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:14.449 +02:00 [DBG] Start authorize request
2020-08-12 14:28:14.449 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:14.449 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:14.602 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:14.602 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:14.607 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:14.620 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:14.622 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:14.641 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:14.641 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:14.641 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"MUxfflhrUllyQ0UuZ3Zoay5jYXdGUUkxYk1FeVRIUzFGVEVYeTN5cWN5djlw","UiLocales":null,"Nonce":"MUxfflhrUllyQ0UuZ3Zoay5jYXdGUUkxYk1FeVRIUzFGVEVYeTN5cWN5djlw","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"MUxfflhrUllyQ0UuZ3Zoay5jYXdGUUkxYk1FeVRIUzFGVEVYeTN5cWN5djlw","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"MUxfflhrUllyQ0UuZ3Zoay5jYXdGUUkxYk1FeVRIUzFGVEVYeTN5cWN5djlw"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:14.677 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:14.677 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:14.677 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:14.677 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:14.695 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:14.695 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:14.697 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Ij0g","$type":"Token"},{"TokenType":"access_token","TokenValue":"****O_bQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000005e-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:14.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:14.697 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"MUxfflhrUllyQ0UuZ3Zoay5jYXdGUUkxYk1FeVRIUzFGVEVYeTN5cWN5djlw","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:15.574 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:15.779 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:15.779 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:15.779 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:15.780 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:15.780 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:15.780 +02:00 [DBG] Start discovery request
2020-08-12 14:28:15.900 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:16.003 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:16.007 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:16.007 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:16.008 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:16.008 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:16.008 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:16.008 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:16.093 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:16.094 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:16.094 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:16.094 +02:00 [DBG] Start authorize request
2020-08-12 14:28:16.095 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:16.095 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:16.277 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:16.277 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:16.283 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:16.319 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:16.325 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:16.350 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:16.351 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:16.351 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"Q1hiODVKQWNqc0pMNGEyZkNIbXRHT3Eta0ZPSVd0d1E1Z0dnN0VxMXViMDl3","UiLocales":null,"Nonce":"Q1hiODVKQWNqc0pMNGEyZkNIbXRHT3Eta0ZPSVd0d1E1Z0dnN0VxMXViMDl3","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"Q1hiODVKQWNqc0pMNGEyZkNIbXRHT3Eta0ZPSVd0d1E1Z0dnN0VxMXViMDl3","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"Q1hiODVKQWNqc0pMNGEyZkNIbXRHT3Eta0ZPSVd0d1E1Z0dnN0VxMXViMDl3"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:16.388 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:16.388 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:16.388 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:16.388 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:16.407 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:16.407 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:16.408 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****ay5w","$type":"Token"},{"TokenType":"access_token","TokenValue":"****BGqA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000005f-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:16.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:16.408 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"Q1hiODVKQWNqc0pMNGEyZkNIbXRHT3Eta0ZPSVd0d1E1Z0dnN0VxMXViMDl3","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:16.939 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:16.942 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:16.942 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:16.942 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:16.943 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:16.943 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:16.943 +02:00 [DBG] Start discovery request
2020-08-12 14:28:16.955 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:17.030 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:17.034 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:17.034 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:17.034 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:17.035 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:17.035 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:17.035 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:17.371 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:17.371 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:17.371 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:17.372 +02:00 [DBG] Start authorize request
2020-08-12 14:28:17.372 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:17.372 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:17.433 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:17.433 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:17.445 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:17.468 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:17.469 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:17.472 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:17.473 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:17.475 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"WkpvdmVuSHpzTVdub1NkR35sNX51R2NqZW5rZEFsejV-VTQxLXJacWRfUjFn","UiLocales":null,"Nonce":"WkpvdmVuSHpzTVdub1NkR35sNX51R2NqZW5rZEFsejV-VTQxLXJacWRfUjFn","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"WkpvdmVuSHpzTVdub1NkR35sNX51R2NqZW5rZEFsejV-VTQxLXJacWRfUjFn","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"WkpvdmVuSHpzTVdub1NkR35sNX51R2NqZW5rZEFsejV-VTQxLXJacWRfUjFn"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:17.486 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:17.486 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:17.486 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:17.486 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:17.502 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:17.502 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:17.504 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****bjVA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****ehrw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000060-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:17.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:17.504 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"WkpvdmVuSHpzTVdub1NkR35sNX51R2NqZW5rZEFsejV-VTQxLXJacWRfUjFn","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:18.029 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:18.032 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:18.032 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:18.033 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:18.033 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:18.033 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:18.033 +02:00 [DBG] Start discovery request
2020-08-12 14:28:18.051 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:18.490 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:18.494 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:18.494 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:18.494 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:18.494 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:18.494 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:18.494 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:18.719 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:18.720 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:18.720 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:18.720 +02:00 [DBG] Start authorize request
2020-08-12 14:28:18.720 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:18.720 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:18.766 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:18.766 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:18.776 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:18.798 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:18.808 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:18.838 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:18.841 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:18.841 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"RzJjSi0zcDZFTTUyVnVfSWpJdXZqcEV4UkJGeU0wMFVlbmh6R1hjWE9MMmpk","UiLocales":null,"Nonce":"RzJjSi0zcDZFTTUyVnVfSWpJdXZqcEV4UkJGeU0wMFVlbmh6R1hjWE9MMmpk","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"RzJjSi0zcDZFTTUyVnVfSWpJdXZqcEV4UkJGeU0wMFVlbmh6R1hjWE9MMmpk","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"RzJjSi0zcDZFTTUyVnVfSWpJdXZqcEV4UkJGeU0wMFVlbmh6R1hjWE9MMmpk"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:18.849 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:18.849 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:18.849 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:18.849 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:18.872 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:18.872 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:18.874 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****_8mA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****IpwQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000061-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:18.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:18.874 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"RzJjSi0zcDZFTTUyVnVfSWpJdXZqcEV4UkJGeU0wMFVlbmh6R1hjWE9MMmpk","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:19.482 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:19.487 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:19.488 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:19.488 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:19.489 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:19.489 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:19.489 +02:00 [DBG] Start discovery request
2020-08-12 14:28:19.509 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:19.609 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:19.612 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:19.612 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:19.613 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:19.613 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:19.613 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:19.613 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:19.812 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:19.812 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:19.812 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:19.812 +02:00 [DBG] Start authorize request
2020-08-12 14:28:19.812 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:19.812 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:19.853 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:19.853 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:19.858 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:19.874 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:19.877 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:19.879 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:19.880 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:19.880 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"RUJjU2JlTW1-cnRjR3ZOdlFTVW12Mk5DcnN6VkY4Q1c3bn5nZ1BTT2JFT0JU","UiLocales":null,"Nonce":"RUJjU2JlTW1-cnRjR3ZOdlFTVW12Mk5DcnN6VkY4Q1c3bn5nZ1BTT2JFT0JU","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"RUJjU2JlTW1-cnRjR3ZOdlFTVW12Mk5DcnN6VkY4Q1c3bn5nZ1BTT2JFT0JU","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"RUJjU2JlTW1-cnRjR3ZOdlFTVW12Mk5DcnN6VkY4Q1c3bn5nZ1BTT2JFT0JU"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:19.883 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:19.883 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:19.883 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:19.883 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:19.891 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:19.891 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:19.893 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****I7yw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****eAvw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000062-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:19.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:19.894 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"RUJjU2JlTW1-cnRjR3ZOdlFTVW12Mk5DcnN6VkY4Q1c3bn5nZ1BTT2JFT0JU","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:20.696 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:20.700 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:20.700 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:20.700 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:20.700 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:20.700 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:20.700 +02:00 [DBG] Start discovery request
2020-08-12 14:28:20.749 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:21.073 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:21.078 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:21.078 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:21.078 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:21.078 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:21.078 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:21.078 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:21.211 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:21.211 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:21.211 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:21.211 +02:00 [DBG] Start authorize request
2020-08-12 14:28:21.211 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:21.211 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:21.523 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:21.523 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:21.529 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:21.545 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:21.551 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:21.566 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:21.566 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:21.567 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"fndjVm9vNkN4bGhJVGVQMGdvZWE2eENZbnpVNW13UFIuSllKbHB1QVFiYVVn","UiLocales":null,"Nonce":"fndjVm9vNkN4bGhJVGVQMGdvZWE2eENZbnpVNW13UFIuSllKbHB1QVFiYVVn","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"fndjVm9vNkN4bGhJVGVQMGdvZWE2eENZbnpVNW13UFIuSllKbHB1QVFiYVVn","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"fndjVm9vNkN4bGhJVGVQMGdvZWE2eENZbnpVNW13UFIuSllKbHB1QVFiYVVn"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:21.602 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:21.602 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:21.602 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:21.602 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:21.620 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:21.620 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:21.622 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****uaTg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****LfRg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000063-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:21.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:21.622 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"fndjVm9vNkN4bGhJVGVQMGdvZWE2eENZbnpVNW13UFIuSllKbHB1QVFiYVVn","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:22.349 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:22.353 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:22.354 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:22.354 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:22.354 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:22.354 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:22.354 +02:00 [DBG] Start discovery request
2020-08-12 14:28:22.379 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:22.688 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:22.691 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:22.691 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:22.691 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:22.692 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:22.692 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:22.692 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:22.846 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:22.846 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:22.846 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:22.846 +02:00 [DBG] Start authorize request
2020-08-12 14:28:22.846 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:22.846 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:22.891 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:22.891 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:22.898 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:22.922 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:22.930 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:22.946 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:22.946 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:22.946 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"R1ZVSEd-a05Qc1ouX29wRkVOQm9jMW9UYW5jbkdkbGF1NEZ3TEZuazlQUUc0","UiLocales":null,"Nonce":"R1ZVSEd-a05Qc1ouX29wRkVOQm9jMW9UYW5jbkdkbGF1NEZ3TEZuazlQUUc0","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"R1ZVSEd-a05Qc1ouX29wRkVOQm9jMW9UYW5jbkdkbGF1NEZ3TEZuazlQUUc0","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"R1ZVSEd-a05Qc1ouX29wRkVOQm9jMW9UYW5jbkdkbGF1NEZ3TEZuazlQUUc0"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:22.950 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:22.950 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:22.950 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:22.950 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:22.956 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:22.956 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:22.957 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****gMFw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****80Qw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000064-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:22.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:22.957 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"R1ZVSEd-a05Qc1ouX29wRkVOQm9jMW9UYW5jbkdkbGF1NEZ3TEZuazlQUUc0","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:23.603 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:23.608 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:23.608 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:23.608 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:23.608 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:23.608 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:23.609 +02:00 [DBG] Start discovery request
2020-08-12 14:28:23.630 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:24.079 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:24.083 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:24.084 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:24.084 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:24.084 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:24.084 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:24.084 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:24.517 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:24.517 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:24.517 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:24.517 +02:00 [DBG] Start authorize request
2020-08-12 14:28:24.517 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:24.517 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:24.553 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:24.553 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:24.559 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:24.582 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:24.585 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:24.587 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:24.587 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:24.588 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"M2pXb00yX0N6VDJTQ2J-UjVxMDAtRENMMHFBYklsdm85akR1a2x2dy54V09M","UiLocales":null,"Nonce":"M2pXb00yX0N6VDJTQ2J-UjVxMDAtRENMMHFBYklsdm85akR1a2x2dy54V09M","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"M2pXb00yX0N6VDJTQ2J-UjVxMDAtRENMMHFBYklsdm85akR1a2x2dy54V09M","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"M2pXb00yX0N6VDJTQ2J-UjVxMDAtRENMMHFBYklsdm85akR1a2x2dy54V09M"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:24.593 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:24.594 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:24.594 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:24.594 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:24.607 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:24.607 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:24.609 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****xfFA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****uuYg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000065-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:24.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:24.609 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"M2pXb00yX0N6VDJTQ2J-UjVxMDAtRENMMHFBYklsdm85akR1a2x2dy54V09M","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:26.053 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:26.057 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:26.057 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:26.057 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:26.058 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:26.058 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:26.058 +02:00 [DBG] Start discovery request
2020-08-12 14:28:26.073 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:26.204 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:26.209 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:26.209 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:26.209 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:26.210 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:26.210 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:26.210 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:26.328 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:26.328 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:26.328 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:26.328 +02:00 [DBG] Start authorize request
2020-08-12 14:28:26.328 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:26.328 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:26.361 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:26.361 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:26.367 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:26.381 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:26.383 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:26.385 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:26.385 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:26.385 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"MkgwOGpBfmRhVHFzOWlhLVVRVUdfbjVEM1Z2NWRTRWJQSWl1UnBJb1hzflls","UiLocales":null,"Nonce":"MkgwOGpBfmRhVHFzOWlhLVVRVUdfbjVEM1Z2NWRTRWJQSWl1UnBJb1hzflls","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"MkgwOGpBfmRhVHFzOWlhLVVRVUdfbjVEM1Z2NWRTRWJQSWl1UnBJb1hzflls","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"MkgwOGpBfmRhVHFzOWlhLVVRVUdfbjVEM1Z2NWRTRWJQSWl1UnBJb1hzflls"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:26.389 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:26.389 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:26.389 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:26.389 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:26.397 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:26.397 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:26.399 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Pvww","$type":"Token"},{"TokenType":"access_token","TokenValue":"****erKQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000066-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:26.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:26.399 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"MkgwOGpBfmRhVHFzOWlhLVVRVUdfbjVEM1Z2NWRTRWJQSWl1UnBJb1hzflls","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:27.222 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:27.304 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:27.304 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:27.304 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:27.304 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:27.305 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:27.305 +02:00 [DBG] Start discovery request
2020-08-12 14:28:27.336 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:27.628 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:27.664 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:27.666 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:27.667 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:27.668 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:27.668 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:27.668 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:27.925 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:27.926 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:27.926 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:27.926 +02:00 [DBG] Start authorize request
2020-08-12 14:28:27.926 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:27.926 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:27.985 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:27.985 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:28.020 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:28.067 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:28.074 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:28.093 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:28.093 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:28.094 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"Sk1OT1c4X2VzcXJjWEVYUGkxMlViM1JvbGdmbWdBV3EybmNBWkpZbmcyYWtt","UiLocales":null,"Nonce":"Sk1OT1c4X2VzcXJjWEVYUGkxMlViM1JvbGdmbWdBV3EybmNBWkpZbmcyYWtt","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"Sk1OT1c4X2VzcXJjWEVYUGkxMlViM1JvbGdmbWdBV3EybmNBWkpZbmcyYWtt","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"Sk1OT1c4X2VzcXJjWEVYUGkxMlViM1JvbGdmbWdBV3EybmNBWkpZbmcyYWtt"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:28.108 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:28.108 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:28.108 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:28.108 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:28.118 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:28.118 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:28.120 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****R1eQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Wl1Q","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000067-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:28.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:28.120 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"Sk1OT1c4X2VzcXJjWEVYUGkxMlViM1JvbGdmbWdBV3EybmNBWkpZbmcyYWtt","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:28.967 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:28.970 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:28.970 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:28.970 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:28.970 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:28.971 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:28.971 +02:00 [DBG] Start discovery request
2020-08-12 14:28:28.984 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:29.976 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:29.979 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:29.979 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:29.980 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:29.980 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:29.980 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:29.980 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:30.152 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:30.152 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:30.153 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:30.153 +02:00 [DBG] Start authorize request
2020-08-12 14:28:30.153 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:30.153 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:30.194 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:30.195 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:30.200 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:30.220 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:30.224 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:30.225 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:30.225 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:30.225 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"NWZ4cG50NVNTMFhSTktDUmY1MDFzaklHOGRBQ2lrVlBNbWVsY3kuNFhFS09r","UiLocales":null,"Nonce":"NWZ4cG50NVNTMFhSTktDUmY1MDFzaklHOGRBQ2lrVlBNbWVsY3kuNFhFS09r","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"NWZ4cG50NVNTMFhSTktDUmY1MDFzaklHOGRBQ2lrVlBNbWVsY3kuNFhFS09r","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"NWZ4cG50NVNTMFhSTktDUmY1MDFzaklHOGRBQ2lrVlBNbWVsY3kuNFhFS09r"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:30.228 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:30.228 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:30.228 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:30.228 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:30.233 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:30.233 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:30.235 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****VpQQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****kHXA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000068-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:30.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:30.235 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"NWZ4cG50NVNTMFhSTktDUmY1MDFzaklHOGRBQ2lrVlBNbWVsY3kuNFhFS09r","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:31.123 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:31.126 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:31.127 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:31.127 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:31.127 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:31.127 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:31.127 +02:00 [DBG] Start discovery request
2020-08-12 14:28:31.149 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:31.428 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:31.432 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:31.432 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:31.432 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:31.433 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:31.433 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:31.433 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:31.599 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:31.599 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:31.599 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:31.599 +02:00 [DBG] Start authorize request
2020-08-12 14:28:31.599 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:31.599 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:31.632 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:31.632 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:31.640 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:31.661 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:31.666 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:31.690 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:31.690 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:31.690 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"b2FMYlFuNWx5X3MyQjFKZjVSMkV6WX5LMDZ2bX5kMERaUXl0RWxBcHNmemM5","UiLocales":null,"Nonce":"b2FMYlFuNWx5X3MyQjFKZjVSMkV6WX5LMDZ2bX5kMERaUXl0RWxBcHNmemM5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"b2FMYlFuNWx5X3MyQjFKZjVSMkV6WX5LMDZ2bX5kMERaUXl0RWxBcHNmemM5","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"b2FMYlFuNWx5X3MyQjFKZjVSMkV6WX5LMDZ2bX5kMERaUXl0RWxBcHNmemM5"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:31.696 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:31.696 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:31.696 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:31.696 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:31.707 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:31.707 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:31.709 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****--BA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****L6Jg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000069-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:31.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:31.710 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"b2FMYlFuNWx5X3MyQjFKZjVSMkV6WX5LMDZ2bX5kMERaUXl0RWxBcHNmemM5","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:32.773 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:32.777 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:32.777 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:32.777 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:32.777 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:32.777 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:32.777 +02:00 [DBG] Start discovery request
2020-08-12 14:28:32.792 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:33.097 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:33.100 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:33.101 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:33.101 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:33.101 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:33.101 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:33.101 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:33.259 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:33.260 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:33.260 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:33.260 +02:00 [DBG] Start authorize request
2020-08-12 14:28:33.260 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:33.260 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:33.293 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:33.293 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:33.298 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:33.313 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:33.315 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:33.316 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:33.316 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:33.316 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"N2xLdEZmUGVGUDhUWHhPcEhxUloxUFU5VWx3MURKeWpmUXNIdzNyOUhlalBH","UiLocales":null,"Nonce":"N2xLdEZmUGVGUDhUWHhPcEhxUloxUFU5VWx3MURKeWpmUXNIdzNyOUhlalBH","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"N2xLdEZmUGVGUDhUWHhPcEhxUloxUFU5VWx3MURKeWpmUXNIdzNyOUhlalBH","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"N2xLdEZmUGVGUDhUWHhPcEhxUloxUFU5VWx3MURKeWpmUXNIdzNyOUhlalBH"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:33.320 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:33.320 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:33.320 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:33.320 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:33.327 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:33.327 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:33.328 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****CdKA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****7-xg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000006a-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:33.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:33.329 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"N2xLdEZmUGVGUDhUWHhPcEhxUloxUFU5VWx3MURKeWpmUXNIdzNyOUhlalBH","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:33.872 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:33.875 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:33.875 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:33.875 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:33.876 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:33.876 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:33.876 +02:00 [DBG] Start discovery request
2020-08-12 14:28:33.888 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:34.131 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:34.134 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:34.135 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:34.135 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:34.135 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:34.135 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:34.135 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:34.324 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:34.325 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:34.325 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:34.325 +02:00 [DBG] Start authorize request
2020-08-12 14:28:34.325 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:34.325 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:34.862 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:34.862 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:34.867 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:34.885 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:34.889 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:34.901 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:34.902 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:34.902 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"WjVQZFotbnV5OU52cms1ckZtZXZRVjhfb2ZzUjZaMkRKQzV-U01BcGlrcHJq","UiLocales":null,"Nonce":"WjVQZFotbnV5OU52cms1ckZtZXZRVjhfb2ZzUjZaMkRKQzV-U01BcGlrcHJq","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"WjVQZFotbnV5OU52cms1ckZtZXZRVjhfb2ZzUjZaMkRKQzV-U01BcGlrcHJq","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"WjVQZFotbnV5OU52cms1ckZtZXZRVjhfb2ZzUjZaMkRKQzV-U01BcGlrcHJq"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:34.939 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:34.939 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:34.939 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:34.939 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:34.957 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:34.957 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:34.958 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****sexA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****EieA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000006b-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:34.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:34.958 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"WjVQZFotbnV5OU52cms1ckZtZXZRVjhfb2ZzUjZaMkRKQzV-U01BcGlrcHJq","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:38.076 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:38.079 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:38.079 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:38.079 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:38.079 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:38.079 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:38.080 +02:00 [DBG] Start discovery request
2020-08-12 14:28:38.097 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:38.302 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:38.306 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:38.306 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:38.306 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:38.307 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:38.307 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:38.307 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:38.678 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:38.678 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:38.678 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:38.678 +02:00 [DBG] Start authorize request
2020-08-12 14:28:38.678 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:38.678 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:38.707 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:38.707 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:38.712 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:38.723 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:38.725 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:38.727 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:38.727 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:38.728 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"VHBKcmhQMk1NRGhQcW41SVk0WE1ZMENGRTVYNUNzSVFhazRRdFJyQWdVS3pZ","UiLocales":null,"Nonce":"VHBKcmhQMk1NRGhQcW41SVk0WE1ZMENGRTVYNUNzSVFhazRRdFJyQWdVS3pZ","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"VHBKcmhQMk1NRGhQcW41SVk0WE1ZMENGRTVYNUNzSVFhazRRdFJyQWdVS3pZ","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"VHBKcmhQMk1NRGhQcW41SVk0WE1ZMENGRTVYNUNzSVFhazRRdFJyQWdVS3pZ"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:38.730 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:38.731 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:38.731 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:38.731 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:38.738 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:38.738 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:38.739 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****bE5Q","$type":"Token"},{"TokenType":"access_token","TokenValue":"****b3ig","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000006c-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:38.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:38.739 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"VHBKcmhQMk1NRGhQcW41SVk0WE1ZMENGRTVYNUNzSVFhazRRdFJyQWdVS3pZ","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:39.093 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:39.097 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:39.097 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:39.097 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:39.097 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:39.097 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:39.097 +02:00 [DBG] Start discovery request
2020-08-12 14:28:39.110 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:39.299 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:39.304 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:39.304 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:39.304 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:39.304 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:39.304 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:39.304 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:39.419 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:39.419 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:39.419 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:39.419 +02:00 [DBG] Start authorize request
2020-08-12 14:28:39.420 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:39.420 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:39.452 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:39.452 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:39.456 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:39.472 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:39.474 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:39.476 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:39.476 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:39.477 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"Z200bFF5aHd1dWMwM294S1lnMTBpSmVObmkuMGxDS1hrU0RiZG1SY3FLOWp6","UiLocales":null,"Nonce":"Z200bFF5aHd1dWMwM294S1lnMTBpSmVObmkuMGxDS1hrU0RiZG1SY3FLOWp6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"Z200bFF5aHd1dWMwM294S1lnMTBpSmVObmkuMGxDS1hrU0RiZG1SY3FLOWp6","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"Z200bFF5aHd1dWMwM294S1lnMTBpSmVObmkuMGxDS1hrU0RiZG1SY3FLOWp6"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:39.482 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:39.483 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:39.483 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:39.483 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:39.492 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:39.493 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:39.494 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****ZMJA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****7wYw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000006d-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:39.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:39.495 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"Z200bFF5aHd1dWMwM294S1lnMTBpSmVObmkuMGxDS1hrU0RiZG1SY3FLOWp6","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:39.905 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:39.908 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:39.908 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:39.909 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:39.909 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:39.909 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:39.909 +02:00 [DBG] Start discovery request
2020-08-12 14:28:39.922 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:39.989 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:39.992 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:39.992 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:39.992 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:39.993 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:39.993 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:39.993 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:42.319 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:42.319 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:42.319 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:42.319 +02:00 [DBG] Start authorize request
2020-08-12 14:28:42.319 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:42.319 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:42.360 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:42.360 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:42.372 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:42.388 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:42.390 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:42.392 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:42.392 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:42.392 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"QnBkd2NOU3czMFRGVlFIVGhuLU1xSWNRMnppY1JSc3pZYmhLeVcuVExIZn4u","UiLocales":null,"Nonce":"QnBkd2NOU3czMFRGVlFIVGhuLU1xSWNRMnppY1JSc3pZYmhLeVcuVExIZn4u","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"QnBkd2NOU3czMFRGVlFIVGhuLU1xSWNRMnppY1JSc3pZYmhLeVcuVExIZn4u","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"QnBkd2NOU3czMFRGVlFIVGhuLU1xSWNRMnppY1JSc3pZYmhLeVcuVExIZn4u"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:42.395 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:42.396 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:42.396 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:42.396 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:42.404 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:42.404 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:42.405 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****aKxA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****LZRw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000006e-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:42.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:42.405 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"QnBkd2NOU3czMFRGVlFIVGhuLU1xSWNRMnppY1JSc3pZYmhLeVcuVExIZn4u","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:43.558 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:43.561 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:43.561 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:43.561 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:43.562 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:43.562 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:43.562 +02:00 [DBG] Start discovery request
2020-08-12 14:28:43.575 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:43.654 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:43.658 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:43.658 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:43.658 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:43.658 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:43.658 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:43.658 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:43.738 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:43.738 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:43.738 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:43.738 +02:00 [DBG] Start authorize request
2020-08-12 14:28:43.738 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:43.738 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:43.770 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:43.770 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:43.774 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:43.789 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:43.794 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:43.818 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:43.819 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:43.819 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"aHZWRWpCRFNPMTJYOW1lanpfV3V-U25rQUtIb09ycG9kS3VBeFNvbX5FTi1K","UiLocales":null,"Nonce":"aHZWRWpCRFNPMTJYOW1lanpfV3V-U25rQUtIb09ycG9kS3VBeFNvbX5FTi1K","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"aHZWRWpCRFNPMTJYOW1lanpfV3V-U25rQUtIb09ycG9kS3VBeFNvbX5FTi1K","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"aHZWRWpCRFNPMTJYOW1lanpfV3V-U25rQUtIb09ycG9kS3VBeFNvbX5FTi1K"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:43.825 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:43.825 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:43.825 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:43.825 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:43.833 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:43.834 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:43.836 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****juKg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****UQXg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000006f-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:43.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:43.836 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"aHZWRWpCRFNPMTJYOW1lanpfV3V-U25rQUtIb09ycG9kS3VBeFNvbX5FTi1K","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:44.187 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:44.191 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:44.191 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:44.191 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:44.191 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:44.191 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:44.191 +02:00 [DBG] Start discovery request
2020-08-12 14:28:44.206 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:44.643 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:44.647 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:44.647 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:44.647 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:44.647 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:44.647 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:44.647 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:44.811 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:44.811 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:44.811 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:44.811 +02:00 [DBG] Start authorize request
2020-08-12 14:28:44.811 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:44.811 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:44.864 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:44.864 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:44.873 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:44.893 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:44.897 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:44.914 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:44.915 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:44.915 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"RUZkNFV0QlNwcDFWUGFRdC5MU1piY0lNVDFZWXp-cld3QWVNWDdZeDJRQkxX","UiLocales":null,"Nonce":"RUZkNFV0QlNwcDFWUGFRdC5MU1piY0lNVDFZWXp-cld3QWVNWDdZeDJRQkxX","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"RUZkNFV0QlNwcDFWUGFRdC5MU1piY0lNVDFZWXp-cld3QWVNWDdZeDJRQkxX","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"RUZkNFV0QlNwcDFWUGFRdC5MU1piY0lNVDFZWXp-cld3QWVNWDdZeDJRQkxX"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:44.921 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:44.921 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:44.921 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:44.922 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:44.930 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:44.930 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:44.931 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****a0Lg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****2BQw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000070-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:44.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:44.932 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"RUZkNFV0QlNwcDFWUGFRdC5MU1piY0lNVDFZWXp-cld3QWVNWDdZeDJRQkxX","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:45.320 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:45.323 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:45.323 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:45.323 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:45.324 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:45.324 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:45.324 +02:00 [DBG] Start discovery request
2020-08-12 14:28:45.340 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:46.044 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:46.048 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:46.048 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:46.048 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:46.048 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:46.048 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:46.048 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:46.524 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:46.524 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:46.524 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:46.524 +02:00 [DBG] Start authorize request
2020-08-12 14:28:46.524 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:46.524 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:46.556 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:46.556 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:46.561 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:46.579 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:46.580 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:46.582 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:46.582 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:46.582 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"N0ttRlFLNWtQcTBSZnhMNkR4WndhLURldmFBSFdxNkZORk1YTmYtVlMxSVho","UiLocales":null,"Nonce":"N0ttRlFLNWtQcTBSZnhMNkR4WndhLURldmFBSFdxNkZORk1YTmYtVlMxSVho","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"N0ttRlFLNWtQcTBSZnhMNkR4WndhLURldmFBSFdxNkZORk1YTmYtVlMxSVho","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"N0ttRlFLNWtQcTBSZnhMNkR4WndhLURldmFBSFdxNkZORk1YTmYtVlMxSVho"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:46.588 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:46.588 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:46.588 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:46.588 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:46.594 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:46.595 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:46.596 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****deJw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****JLGQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000071-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:46.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:46.596 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"N0ttRlFLNWtQcTBSZnhMNkR4WndhLURldmFBSFdxNkZORk1YTmYtVlMxSVho","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:47.725 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:47.731 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:47.731 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:47.731 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:47.732 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:47.732 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:47.732 +02:00 [DBG] Start discovery request
2020-08-12 14:28:47.753 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:47.868 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:47.875 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:47.875 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:47.875 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:47.875 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:47.875 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:47.875 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:48.032 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:48.032 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:48.032 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:48.032 +02:00 [DBG] Start authorize request
2020-08-12 14:28:48.032 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:48.032 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:48.073 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:48.073 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:48.080 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:48.100 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:48.102 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:48.103 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:48.103 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:48.104 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"aEktZVhjVlhtVklJbnlPVEI2d3lZM19GWGZvNVZZdlowTzhBdjdBekdVM2tM","UiLocales":null,"Nonce":"aEktZVhjVlhtVklJbnlPVEI2d3lZM19GWGZvNVZZdlowTzhBdjdBekdVM2tM","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"aEktZVhjVlhtVklJbnlPVEI2d3lZM19GWGZvNVZZdlowTzhBdjdBekdVM2tM","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"aEktZVhjVlhtVklJbnlPVEI2d3lZM19GWGZvNVZZdlowTzhBdjdBekdVM2tM"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:48.108 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:48.108 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:48.108 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:48.108 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:48.114 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:48.114 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:48.115 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****ft-g","$type":"Token"},{"TokenType":"access_token","TokenValue":"****FEqw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000072-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:48.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:48.116 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"aEktZVhjVlhtVklJbnlPVEI2d3lZM19GWGZvNVZZdlowTzhBdjdBekdVM2tM","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:48.630 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:48.634 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:48.634 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:48.634 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:48.634 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:48.634 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:48.634 +02:00 [DBG] Start discovery request
2020-08-12 14:28:48.649 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:48.946 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:48.949 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:48.949 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:48.950 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:48.950 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:48.950 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:48.950 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:49.225 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:49.225 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:49.225 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:49.225 +02:00 [DBG] Start authorize request
2020-08-12 14:28:49.225 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:49.225 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:49.259 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:49.259 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:49.264 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:49.284 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:49.292 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:49.314 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:49.314 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:49.314 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"d3VTT3B3Y3RYUDdHNH43VEpXUDB4Zn4yRlBUR21kdFItSTNOYW9hTlozVzQ0","UiLocales":null,"Nonce":"d3VTT3B3Y3RYUDdHNH43VEpXUDB4Zn4yRlBUR21kdFItSTNOYW9hTlozVzQ0","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"d3VTT3B3Y3RYUDdHNH43VEpXUDB4Zn4yRlBUR21kdFItSTNOYW9hTlozVzQ0","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"d3VTT3B3Y3RYUDdHNH43VEpXUDB4Zn4yRlBUR21kdFItSTNOYW9hTlozVzQ0"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:49.317 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:49.317 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:49.317 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:49.317 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:49.326 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:49.326 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:49.327 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****fruA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****KoTw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000073-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:49.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:49.327 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"d3VTT3B3Y3RYUDdHNH43VEpXUDB4Zn4yRlBUR21kdFItSTNOYW9hTlozVzQ0","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:49.908 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:49.913 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:49.913 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:49.913 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:49.913 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:49.913 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:49.913 +02:00 [DBG] Start discovery request
2020-08-12 14:28:49.926 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:50.188 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:50.192 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:50.192 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:50.193 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:50.193 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:50.193 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:50.193 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:50.360 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:50.361 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:50.361 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:50.361 +02:00 [DBG] Start authorize request
2020-08-12 14:28:50.361 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:50.361 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:50.401 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:50.401 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:50.410 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:50.428 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:50.430 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:50.431 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:50.432 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:50.432 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"bn5HS202U05PMi1HSmYwNllyQ1BucXR0VnV2cmJjc0tQWlE5SFdKLW13REUx","UiLocales":null,"Nonce":"bn5HS202U05PMi1HSmYwNllyQ1BucXR0VnV2cmJjc0tQWlE5SFdKLW13REUx","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"bn5HS202U05PMi1HSmYwNllyQ1BucXR0VnV2cmJjc0tQWlE5SFdKLW13REUx","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"bn5HS202U05PMi1HSmYwNllyQ1BucXR0VnV2cmJjc0tQWlE5SFdKLW13REUx"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:50.435 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:50.435 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:50.435 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:50.435 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:50.446 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:50.446 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:50.448 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****NYXA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****ieRQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000074-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:50.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:50.448 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"bn5HS202U05PMi1HSmYwNllyQ1BucXR0VnV2cmJjc0tQWlE5SFdKLW13REUx","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:50.846 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:51.125 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:51.125 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:51.125 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:51.126 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:51.126 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:51.126 +02:00 [DBG] Start discovery request
2020-08-12 14:28:51.257 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:51.551 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:51.556 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:51.556 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:51.556 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:51.557 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:51.557 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:51.557 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:51.687 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:51.687 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:51.687 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:51.687 +02:00 [DBG] Start authorize request
2020-08-12 14:28:51.687 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:51.687 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:51.840 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:51.840 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:51.845 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:51.863 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:51.867 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:51.906 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:51.907 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:51.907 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"Zmw1ZDd-Q0RjeGxZOS5JLmJ5blhaOVhJSnZ3cXdZUVVOQUpUUHg4QTRHYXRS","UiLocales":null,"Nonce":"Zmw1ZDd-Q0RjeGxZOS5JLmJ5blhaOVhJSnZ3cXdZUVVOQUpUUHg4QTRHYXRS","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"Zmw1ZDd-Q0RjeGxZOS5JLmJ5blhaOVhJSnZ3cXdZUVVOQUpUUHg4QTRHYXRS","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"Zmw1ZDd-Q0RjeGxZOS5JLmJ5blhaOVhJSnZ3cXdZUVVOQUpUUHg4QTRHYXRS"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:51.958 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:51.958 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:51.958 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:51.958 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:51.976 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:51.976 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:51.977 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****1MGg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****skVQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000075-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:51.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:51.977 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"Zmw1ZDd-Q0RjeGxZOS5JLmJ5blhaOVhJSnZ3cXdZUVVOQUpUUHg4QTRHYXRS","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:52.591 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:52.595 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:52.595 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:52.595 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:52.596 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:52.596 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:52.596 +02:00 [DBG] Start discovery request
2020-08-12 14:28:52.608 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:52.944 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:52.947 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:52.947 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:52.948 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:52.948 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:52.948 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:52.948 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:53.077 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:53.078 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:53.078 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:53.078 +02:00 [DBG] Start authorize request
2020-08-12 14:28:53.078 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:53.078 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:53.129 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:53.129 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:53.136 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:53.163 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:53.169 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:53.171 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:53.171 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:53.171 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"Q2hsZ0g1VG9hcXdWQmprQW9jYmhPN3lYZTlqc1VaMXVXWkZNakQ1TDMyMXUx","UiLocales":null,"Nonce":"Q2hsZ0g1VG9hcXdWQmprQW9jYmhPN3lYZTlqc1VaMXVXWkZNakQ1TDMyMXUx","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"Q2hsZ0g1VG9hcXdWQmprQW9jYmhPN3lYZTlqc1VaMXVXWkZNakQ1TDMyMXUx","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"Q2hsZ0g1VG9hcXdWQmprQW9jYmhPN3lYZTlqc1VaMXVXWkZNakQ1TDMyMXUx"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:53.178 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:53.178 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:53.178 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:53.178 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:53.186 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:53.186 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:53.187 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****zh-Q","$type":"Token"},{"TokenType":"access_token","TokenValue":"****1UDg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000076-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:53.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:53.187 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"Q2hsZ0g1VG9hcXdWQmprQW9jYmhPN3lYZTlqc1VaMXVXWkZNakQ1TDMyMXUx","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:53.517 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:53.521 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:53.521 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:53.521 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:53.521 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:53.521 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:53.521 +02:00 [DBG] Start discovery request
2020-08-12 14:28:53.542 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:53.800 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:53.804 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:53.804 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:53.805 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:53.805 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:53.805 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:53.805 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:54.042 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:54.042 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:54.042 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:54.042 +02:00 [DBG] Start authorize request
2020-08-12 14:28:54.043 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:54.043 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:54.122 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:54.123 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:54.131 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:54.153 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:54.157 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:54.160 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:54.160 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:54.160 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"bTVodVkyZjRtUk1MRTV4N0d-T28wazVPclduN0N3M3h1alUuNDVfNGpJcHV0","UiLocales":null,"Nonce":"bTVodVkyZjRtUk1MRTV4N0d-T28wazVPclduN0N3M3h1alUuNDVfNGpJcHV0","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"bTVodVkyZjRtUk1MRTV4N0d-T28wazVPclduN0N3M3h1alUuNDVfNGpJcHV0","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"bTVodVkyZjRtUk1MRTV4N0d-T28wazVPclduN0N3M3h1alUuNDVfNGpJcHV0"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:54.164 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:54.164 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:54.164 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:54.164 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:54.170 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:54.171 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:54.172 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****G9bg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****MXWw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000077-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:54.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:54.172 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"bTVodVkyZjRtUk1MRTV4N0d-T28wazVPclduN0N3M3h1alUuNDVfNGpJcHV0","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:54.628 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:54.631 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:54.631 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:54.632 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:54.632 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:54.632 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:54.632 +02:00 [DBG] Start discovery request
2020-08-12 14:28:54.646 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:54.854 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:54.857 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:54.858 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:54.858 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:54.858 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:54.858 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:54.858 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:55.342 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:55.342 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:55.342 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:55.342 +02:00 [DBG] Start authorize request
2020-08-12 14:28:55.342 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:55.342 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:55.380 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:55.380 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:55.385 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:55.405 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:55.410 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:55.412 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:55.412 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:55.412 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"ZVFENTBOcHJ4SHQzZ0NaUG1ac3d4VmxVQ2ZHUWh3dVV-QUJ6Q24wMnJ6NDNl","UiLocales":null,"Nonce":"ZVFENTBOcHJ4SHQzZ0NaUG1ac3d4VmxVQ2ZHUWh3dVV-QUJ6Q24wMnJ6NDNl","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"ZVFENTBOcHJ4SHQzZ0NaUG1ac3d4VmxVQ2ZHUWh3dVV-QUJ6Q24wMnJ6NDNl","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"ZVFENTBOcHJ4SHQzZ0NaUG1ac3d4VmxVQ2ZHUWh3dVV-QUJ6Q24wMnJ6NDNl"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:55.416 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:55.416 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:55.416 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:55.416 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:55.422 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:55.422 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:55.423 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****RlsA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Vkpg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000078-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:55.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:55.423 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"ZVFENTBOcHJ4SHQzZ0NaUG1ac3d4VmxVQ2ZHUWh3dVV-QUJ6Q24wMnJ6NDNl","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:55.882 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:55.886 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:55.886 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:55.886 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:55.886 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:55.886 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:55.886 +02:00 [DBG] Start discovery request
2020-08-12 14:28:55.904 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:56.083 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:56.088 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:56.088 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:56.088 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:56.088 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:56.088 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:56.088 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:56.288 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:56.289 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:56.289 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:56.289 +02:00 [DBG] Start authorize request
2020-08-12 14:28:56.289 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:56.289 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:56.328 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:56.328 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:56.333 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:56.357 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:56.362 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:56.381 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:56.381 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:56.382 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"SlliakouS0VVYm1GMnBQRnI5b3lSTVRMOGRoQndhWGx-eTNDSVhGMXJGS2Rp","UiLocales":null,"Nonce":"SlliakouS0VVYm1GMnBQRnI5b3lSTVRMOGRoQndhWGx-eTNDSVhGMXJGS2Rp","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"SlliakouS0VVYm1GMnBQRnI5b3lSTVRMOGRoQndhWGx-eTNDSVhGMXJGS2Rp","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"SlliakouS0VVYm1GMnBQRnI5b3lSTVRMOGRoQndhWGx-eTNDSVhGMXJGS2Rp"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:56.387 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:56.387 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:56.387 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:56.387 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:56.396 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:56.396 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:56.397 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Ee1w","$type":"Token"},{"TokenType":"access_token","TokenValue":"****2qtw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000079-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:56.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:56.397 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"SlliakouS0VVYm1GMnBQRnI5b3lSTVRMOGRoQndhWGx-eTNDSVhGMXJGS2Rp","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:57.167 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:57.174 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:57.174 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:57.174 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:57.174 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:57.174 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:57.174 +02:00 [DBG] Start discovery request
2020-08-12 14:28:57.207 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:57.702 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:57.706 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:57.706 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:57.706 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:57.706 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:57.706 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:57.706 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:57.961 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:57.961 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:57.961 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:57.961 +02:00 [DBG] Start authorize request
2020-08-12 14:28:57.962 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:57.962 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:58.010 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:58.010 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:58.020 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:58.043 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:58.046 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:58.049 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:58.049 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:58.050 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"V1cuRlVhbnBKNHZpdUg2eTNwZ2Q2a3VuR1RKWjU2WWN3Q3ZBNkpBdlJhQ0R3","UiLocales":null,"Nonce":"V1cuRlVhbnBKNHZpdUg2eTNwZ2Q2a3VuR1RKWjU2WWN3Q3ZBNkpBdlJhQ0R3","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"V1cuRlVhbnBKNHZpdUg2eTNwZ2Q2a3VuR1RKWjU2WWN3Q3ZBNkpBdlJhQ0R3","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"V1cuRlVhbnBKNHZpdUg2eTNwZ2Q2a3VuR1RKWjU2WWN3Q3ZBNkpBdlJhQ0R3"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:58.054 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:58.054 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:58.054 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:58.054 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:58.061 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:58.061 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:58.063 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****F5tA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****_qNQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000007a-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:58.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:58.063 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"V1cuRlVhbnBKNHZpdUg2eTNwZ2Q2a3VuR1RKWjU2WWN3Q3ZBNkpBdlJhQ0R3","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:58.491 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:58.494 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:58.494 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:58.494 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:58.495 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:58.495 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:58.495 +02:00 [DBG] Start discovery request
2020-08-12 14:28:58.507 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:28:58.688 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:28:58.692 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:58.692 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:58.692 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:28:58.692 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:28:58.692 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:28:58.692 +02:00 [DBG] Start key discovery request
2020-08-12 14:28:59.277 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:28:59.277 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:28:59.277 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:28:59.277 +02:00 [DBG] Start authorize request
2020-08-12 14:28:59.277 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:59.277 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:28:59.359 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:28:59.359 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:28:59.364 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:59.380 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:59.382 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:28:59.384 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:28:59.384 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:28:59.384 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"eFU2LWdZVHFYNXpuX29kNjJaTFJVa3d2TjU3cWtLb1dBVnk0aHNWMFQyVTdP","UiLocales":null,"Nonce":"eFU2LWdZVHFYNXpuX29kNjJaTFJVa3d2TjU3cWtLb1dBVnk0aHNWMFQyVTdP","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"eFU2LWdZVHFYNXpuX29kNjJaTFJVa3d2TjU3cWtLb1dBVnk0aHNWMFQyVTdP","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"eFU2LWdZVHFYNXpuX29kNjJaTFJVa3d2TjU3cWtLb1dBVnk0aHNWMFQyVTdP"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:28:59.387 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:28:59.387 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:28:59.387 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:28:59.387 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:28:59.393 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:28:59.393 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:28:59.394 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****ww2w","$type":"Token"},{"TokenType":"access_token","TokenValue":"****dLng","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000007b-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:28:59.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:28:59.394 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"eFU2LWdZVHFYNXpuX29kNjJaTFJVa3d2TjU3cWtLb1dBVnk0aHNWMFQyVTdP","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:28:59.850 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:28:59.854 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:28:59.854 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:28:59.854 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:28:59.854 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:28:59.854 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:28:59.854 +02:00 [DBG] Start discovery request
2020-08-12 14:28:59.871 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:29:00.158 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:29:00.162 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:00.162 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:00.163 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:29:00.164 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:29:00.164 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:29:00.164 +02:00 [DBG] Start key discovery request
2020-08-12 14:29:00.307 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:29:00.307 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:29:00.307 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:29:00.307 +02:00 [DBG] Start authorize request
2020-08-12 14:29:00.307 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:00.307 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:29:00.336 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:29:00.336 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:29:00.340 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:00.354 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:00.356 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:00.358 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:00.358 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:29:00.358 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"Z3p-SG03eVczSi5uflhWZHFRUlVZdzY1U2d4STQzVHVDaW10bzFLUmhvWmVr","UiLocales":null,"Nonce":"Z3p-SG03eVczSi5uflhWZHFRUlVZdzY1U2d4STQzVHVDaW10bzFLUmhvWmVr","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"Z3p-SG03eVczSi5uflhWZHFRUlVZdzY1U2d4STQzVHVDaW10bzFLUmhvWmVr","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"Z3p-SG03eVczSi5uflhWZHFRUlVZdzY1U2d4STQzVHVDaW10bzFLUmhvWmVr"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:29:00.362 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:29:00.362 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:29:00.362 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:29:00.362 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:00.371 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:29:00.371 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:29:00.372 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****qTgA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****uHfw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000007c-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:29:00.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:29:00.373 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"Z3p-SG03eVczSi5uflhWZHFRUlVZdzY1U2d4STQzVHVDaW10bzFLUmhvWmVr","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:29:00.849 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:29:00.853 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:00.853 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:00.854 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:29:00.854 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:29:00.854 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:29:00.854 +02:00 [DBG] Start discovery request
2020-08-12 14:29:00.871 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:29:01.076 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:29:01.079 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:01.079 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:01.079 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:29:01.079 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:29:01.079 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:29:01.079 +02:00 [DBG] Start key discovery request
2020-08-12 14:29:01.223 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:29:01.223 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:29:01.224 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:29:01.224 +02:00 [DBG] Start authorize request
2020-08-12 14:29:01.224 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:01.224 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:29:01.548 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:29:01.548 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:29:01.632 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:01.686 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:01.691 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:01.704 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:01.704 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:29:01.704 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"bEhMQUVTam9PdlJDM0ZJMTlWeEEzcDBRbUhHTkZJWGx3SUFlaTZsaTFndVpu","UiLocales":null,"Nonce":"bEhMQUVTam9PdlJDM0ZJMTlWeEEzcDBRbUhHTkZJWGx3SUFlaTZsaTFndVpu","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"bEhMQUVTam9PdlJDM0ZJMTlWeEEzcDBRbUhHTkZJWGx3SUFlaTZsaTFndVpu","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"bEhMQUVTam9PdlJDM0ZJMTlWeEEzcDBRbUhHTkZJWGx3SUFlaTZsaTFndVpu"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:29:01.707 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:29:01.707 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:29:01.707 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:29:01.707 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:01.713 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:29:01.713 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:29:01.714 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****l2Sw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****mHAQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000007d-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:29:01.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:29:01.714 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"bEhMQUVTam9PdlJDM0ZJMTlWeEEzcDBRbUhHTkZJWGx3SUFlaTZsaTFndVpu","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:29:02.055 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:29:02.060 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:02.060 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:02.060 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:29:02.061 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:29:02.061 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:29:02.061 +02:00 [DBG] Start discovery request
2020-08-12 14:29:02.078 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:29:02.310 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:29:02.314 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:02.314 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:02.314 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:29:02.314 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:29:02.314 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:29:02.314 +02:00 [DBG] Start key discovery request
2020-08-12 14:29:02.577 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:29:02.577 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:29:02.577 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:29:02.577 +02:00 [DBG] Start authorize request
2020-08-12 14:29:02.577 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:02.577 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:29:02.627 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:29:02.627 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:29:02.635 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:02.666 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:02.782 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:02.804 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:02.804 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:29:02.805 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"SDVlYjQ1bkpkTXFlUVFFV1FEN09NcHVHNlREal9LajdXMFl4ZENieVBCWFV-","UiLocales":null,"Nonce":"SDVlYjQ1bkpkTXFlUVFFV1FEN09NcHVHNlREal9LajdXMFl4ZENieVBCWFV-","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"SDVlYjQ1bkpkTXFlUVFFV1FEN09NcHVHNlREal9LajdXMFl4ZENieVBCWFV-","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"SDVlYjQ1bkpkTXFlUVFFV1FEN09NcHVHNlREal9LajdXMFl4ZENieVBCWFV-"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:29:02.809 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:29:02.809 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:29:02.809 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:29:02.809 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:02.817 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:29:02.817 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:29:02.819 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****zNDg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****vNZA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000007e-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:29:02.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:29:02.819 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"SDVlYjQ1bkpkTXFlUVFFV1FEN09NcHVHNlREal9LajdXMFl4ZENieVBCWFV-","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:29:03.559 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:29:03.564 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:03.564 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:03.564 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:29:03.564 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:29:03.564 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:29:03.564 +02:00 [DBG] Start discovery request
2020-08-12 14:29:03.582 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:29:03.827 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:29:03.831 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:03.831 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:03.831 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:29:03.831 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:29:03.831 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:29:03.832 +02:00 [DBG] Start key discovery request
2020-08-12 14:29:04.163 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:29:04.165 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:29:04.165 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:29:04.165 +02:00 [DBG] Start authorize request
2020-08-12 14:29:04.165 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:04.165 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:29:04.247 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:29:04.248 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:29:04.257 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:04.283 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:04.290 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:04.306 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:04.306 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:29:04.306 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"aVVHTWRFb2Q2LmVhQXZWbU5JajJDemhKOEJpWldIUWtOcWFJRDRWQmlWM0NR","UiLocales":null,"Nonce":"aVVHTWRFb2Q2LmVhQXZWbU5JajJDemhKOEJpWldIUWtOcWFJRDRWQmlWM0NR","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"aVVHTWRFb2Q2LmVhQXZWbU5JajJDemhKOEJpWldIUWtOcWFJRDRWQmlWM0NR","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"aVVHTWRFb2Q2LmVhQXZWbU5JajJDemhKOEJpWldIUWtOcWFJRDRWQmlWM0NR"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:29:04.309 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:29:04.310 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:29:04.310 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:29:04.310 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:04.317 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:29:04.317 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:29:04.318 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****FAUw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****h7iw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000007f-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:29:04.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:29:04.318 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"aVVHTWRFb2Q2LmVhQXZWbU5JajJDemhKOEJpWldIUWtOcWFJRDRWQmlWM0NR","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:29:05.106 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:29:05.213 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:05.213 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:05.213 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:29:05.213 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:29:05.213 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:29:05.213 +02:00 [DBG] Start discovery request
2020-08-12 14:29:05.242 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:29:05.764 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:29:05.773 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:05.773 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:05.774 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:29:05.774 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:29:05.775 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:29:05.775 +02:00 [DBG] Start key discovery request
2020-08-12 14:29:06.048 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:29:06.049 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:29:06.049 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:29:06.049 +02:00 [DBG] Start authorize request
2020-08-12 14:29:06.049 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:06.049 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:29:06.118 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:29:06.119 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:29:06.127 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:06.153 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:06.161 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:06.181 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:06.181 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:29:06.182 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"eG5pZGZlVHRDNEhXajR6bn5qS0ZUYTFUaWhaNmRvOWV0eC5ncVk2dGJtcDRi","UiLocales":null,"Nonce":"eG5pZGZlVHRDNEhXajR6bn5qS0ZUYTFUaWhaNmRvOWV0eC5ncVk2dGJtcDRi","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"eG5pZGZlVHRDNEhXajR6bn5qS0ZUYTFUaWhaNmRvOWV0eC5ncVk2dGJtcDRi","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"eG5pZGZlVHRDNEhXajR6bn5qS0ZUYTFUaWhaNmRvOWV0eC5ncVk2dGJtcDRi"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:29:06.188 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:29:06.188 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:29:06.188 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:29:06.188 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:06.197 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:29:06.197 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:29:06.199 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****GcHg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****hSbA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000080-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:29:06.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:29:06.200 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"eG5pZGZlVHRDNEhXajR6bn5qS0ZUYTFUaWhaNmRvOWV0eC5ncVk2dGJtcDRi","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:29:09.876 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:29:09.880 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:09.880 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:09.880 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:29:09.880 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:29:09.880 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:29:09.880 +02:00 [DBG] Start discovery request
2020-08-12 14:29:09.894 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:29:10.102 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:29:10.105 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:10.105 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:10.105 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:29:10.105 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:29:10.105 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:29:10.105 +02:00 [DBG] Start key discovery request
2020-08-12 14:29:10.266 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:29:10.267 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:29:10.267 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:29:10.267 +02:00 [DBG] Start authorize request
2020-08-12 14:29:10.267 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:10.267 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:29:10.302 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:29:10.302 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:29:10.309 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:10.333 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:10.340 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:10.361 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:10.361 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:29:10.361 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"Sm45Sl9YVUEwUW5BLXBWY2tXUnNmZklzcE1lZXhWfjZ5cWFkNFM1aGRweTNX","UiLocales":null,"Nonce":"Sm45Sl9YVUEwUW5BLXBWY2tXUnNmZklzcE1lZXhWfjZ5cWFkNFM1aGRweTNX","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"Sm45Sl9YVUEwUW5BLXBWY2tXUnNmZklzcE1lZXhWfjZ5cWFkNFM1aGRweTNX","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"Sm45Sl9YVUEwUW5BLXBWY2tXUnNmZklzcE1lZXhWfjZ5cWFkNFM1aGRweTNX"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:29:10.367 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:29:10.367 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:29:10.367 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:29:10.367 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:10.373 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:29:10.374 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:29:10.377 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****ib1A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****QhmA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000081-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:29:10.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:29:10.377 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"Sm45Sl9YVUEwUW5BLXBWY2tXUnNmZklzcE1lZXhWfjZ5cWFkNFM1aGRweTNX","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:29:10.793 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:29:10.797 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:10.797 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:10.798 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:29:10.798 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:29:10.798 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:29:10.798 +02:00 [DBG] Start discovery request
2020-08-12 14:29:10.814 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:29:11.071 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:29:11.076 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:11.077 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:11.077 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:29:11.077 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:29:11.077 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:29:11.077 +02:00 [DBG] Start key discovery request
2020-08-12 14:29:11.287 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:29:11.288 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:29:11.288 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:29:11.288 +02:00 [DBG] Start authorize request
2020-08-12 14:29:11.288 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:11.288 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:29:11.335 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:29:11.335 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:29:11.344 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:11.368 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:11.374 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:11.396 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:11.396 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:29:11.396 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"TThGTnVpb080SH5Lc2IwU2FadEpLV09UTGZxQjd5T2I4bnpCUVJpd0tXcThH","UiLocales":null,"Nonce":"TThGTnVpb080SH5Lc2IwU2FadEpLV09UTGZxQjd5T2I4bnpCUVJpd0tXcThH","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"TThGTnVpb080SH5Lc2IwU2FadEpLV09UTGZxQjd5T2I4bnpCUVJpd0tXcThH","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"TThGTnVpb080SH5Lc2IwU2FadEpLV09UTGZxQjd5T2I4bnpCUVJpd0tXcThH"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:29:11.401 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:29:11.401 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:29:11.401 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:29:11.401 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:11.410 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:29:11.410 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:29:11.412 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Z2gQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****2_BA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000082-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:29:11.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:29:11.412 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"TThGTnVpb080SH5Lc2IwU2FadEpLV09UTGZxQjd5T2I4bnpCUVJpd0tXcThH","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:29:11.915 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:29:11.921 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:11.921 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:11.921 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:29:11.921 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:29:11.921 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:29:11.921 +02:00 [DBG] Start discovery request
2020-08-12 14:29:11.941 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:29:12.138 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:29:12.142 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:12.142 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:12.142 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:29:12.143 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:29:12.143 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:29:12.143 +02:00 [DBG] Start key discovery request
2020-08-12 14:29:12.401 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:29:12.401 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:29:12.401 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:29:12.401 +02:00 [DBG] Start authorize request
2020-08-12 14:29:12.401 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:12.401 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:29:12.450 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:29:12.450 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:29:12.456 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:12.479 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:12.484 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:12.487 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:12.487 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:29:12.488 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"dWVMYlotZkYySnZuSkxyQ2RMdm5IMi5zSX4zSHAyQXAta0d0c2tiSVhlOWU3","UiLocales":null,"Nonce":"dWVMYlotZkYySnZuSkxyQ2RMdm5IMi5zSX4zSHAyQXAta0d0c2tiSVhlOWU3","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"dWVMYlotZkYySnZuSkxyQ2RMdm5IMi5zSX4zSHAyQXAta0d0c2tiSVhlOWU3","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"dWVMYlotZkYySnZuSkxyQ2RMdm5IMi5zSX4zSHAyQXAta0d0c2tiSVhlOWU3"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:29:12.491 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:29:12.492 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:29:12.492 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:29:12.492 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:12.504 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:29:12.504 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:29:12.506 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****qXng","$type":"Token"},{"TokenType":"access_token","TokenValue":"****B9Ww","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000083-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:29:12.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:29:12.506 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"dWVMYlotZkYySnZuSkxyQ2RMdm5IMi5zSX4zSHAyQXAta0d0c2tiSVhlOWU3","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:29:13.079 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:29:13.084 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:13.084 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:13.084 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:29:13.084 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:29:13.084 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:29:13.084 +02:00 [DBG] Start discovery request
2020-08-12 14:29:13.099 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:29:13.352 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:29:13.357 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:13.357 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:13.357 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:29:13.357 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:29:13.357 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:29:13.357 +02:00 [DBG] Start key discovery request
2020-08-12 14:29:13.471 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:29:13.471 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:29:13.471 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:29:13.471 +02:00 [DBG] Start authorize request
2020-08-12 14:29:13.471 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:13.471 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:29:13.518 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:29:13.518 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:29:13.525 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:13.547 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:13.554 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:13.577 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:13.577 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:29:13.578 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"MFg0X21BVWV2bktBfjBSUi5RbVVyTi52alRQcFlHTmJ2TzNVeS5hbX5lY2t5","UiLocales":null,"Nonce":"MFg0X21BVWV2bktBfjBSUi5RbVVyTi52alRQcFlHTmJ2TzNVeS5hbX5lY2t5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"MFg0X21BVWV2bktBfjBSUi5RbVVyTi52alRQcFlHTmJ2TzNVeS5hbX5lY2t5","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"MFg0X21BVWV2bktBfjBSUi5RbVVyTi52alRQcFlHTmJ2TzNVeS5hbX5lY2t5"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:29:13.585 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:29:13.585 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:29:13.585 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:29:13.585 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:13.593 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:29:13.593 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:29:13.596 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****lCbw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****WsQg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000084-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:29:13.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:29:13.596 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"MFg0X21BVWV2bktBfjBSUi5RbVVyTi52alRQcFlHTmJ2TzNVeS5hbX5lY2t5","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:29:14.031 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:29:14.035 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:14.035 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:14.036 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:29:14.036 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:29:14.036 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:29:14.036 +02:00 [DBG] Start discovery request
2020-08-12 14:29:14.055 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:29:14.308 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:29:14.314 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:14.314 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:14.314 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:29:14.315 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:29:14.315 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:29:14.315 +02:00 [DBG] Start key discovery request
2020-08-12 14:29:14.523 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:29:14.523 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:29:14.523 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:29:14.523 +02:00 [DBG] Start authorize request
2020-08-12 14:29:14.524 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:14.524 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:29:14.571 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:29:14.571 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:29:14.576 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:14.599 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:14.607 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:14.628 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:14.628 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:29:14.629 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"UFNvTjJaU0tVSFVGSVp0bmNScWtKZ0hvVzd-UHVIU1hJOTFRYWlJSH5lVmYx","UiLocales":null,"Nonce":"UFNvTjJaU0tVSFVGSVp0bmNScWtKZ0hvVzd-UHVIU1hJOTFRYWlJSH5lVmYx","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"UFNvTjJaU0tVSFVGSVp0bmNScWtKZ0hvVzd-UHVIU1hJOTFRYWlJSH5lVmYx","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"UFNvTjJaU0tVSFVGSVp0bmNScWtKZ0hvVzd-UHVIU1hJOTFRYWlJSH5lVmYx"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:29:14.635 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:29:14.635 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:29:14.635 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:29:14.635 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:14.642 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:29:14.642 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:29:14.644 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****EMhA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****7Dng","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000085-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:29:14.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:29:14.644 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"UFNvTjJaU0tVSFVGSVp0bmNScWtKZ0hvVzd-UHVIU1hJOTFRYWlJSH5lVmYx","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:29:15.041 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:29:15.045 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:15.045 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:15.045 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:29:15.046 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:29:15.046 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:29:15.046 +02:00 [DBG] Start discovery request
2020-08-12 14:29:15.066 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:29:15.256 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:29:15.261 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:15.261 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:15.261 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:29:15.261 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:29:15.261 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:29:15.261 +02:00 [DBG] Start key discovery request
2020-08-12 14:29:15.426 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:29:15.426 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:29:15.426 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:29:15.426 +02:00 [DBG] Start authorize request
2020-08-12 14:29:15.426 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:15.426 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:29:15.466 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:29:15.466 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:29:15.472 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:15.490 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:15.492 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:15.494 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:15.494 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:29:15.494 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"QW9KYXgzZHVlSmZzam4yM1J3WlcxZHZ0SjhNN2J6MG9aUVdqY1dIRnViQ1FG","UiLocales":null,"Nonce":"QW9KYXgzZHVlSmZzam4yM1J3WlcxZHZ0SjhNN2J6MG9aUVdqY1dIRnViQ1FG","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"QW9KYXgzZHVlSmZzam4yM1J3WlcxZHZ0SjhNN2J6MG9aUVdqY1dIRnViQ1FG","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"QW9KYXgzZHVlSmZzam4yM1J3WlcxZHZ0SjhNN2J6MG9aUVdqY1dIRnViQ1FG"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:29:15.501 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:29:15.501 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:29:15.501 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:29:15.501 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:15.511 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:29:15.511 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:29:15.514 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****wXfw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****2x-w","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000086-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:29:15.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:29:15.515 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"QW9KYXgzZHVlSmZzam4yM1J3WlcxZHZ0SjhNN2J6MG9aUVdqY1dIRnViQ1FG","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:29:16.428 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:29:16.440 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:16.440 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:16.440 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:29:16.441 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:29:16.441 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:29:16.441 +02:00 [DBG] Start discovery request
2020-08-12 14:29:16.493 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:29:16.993 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:29:16.997 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:16.997 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:16.997 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:29:16.997 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:29:16.998 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:29:16.998 +02:00 [DBG] Start key discovery request
2020-08-12 14:29:17.285 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:29:17.286 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:29:17.286 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:29:17.286 +02:00 [DBG] Start authorize request
2020-08-12 14:29:17.286 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:17.286 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:29:17.316 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:29:17.316 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:29:17.321 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:17.343 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:17.349 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:17.374 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:17.374 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:29:17.375 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"YWVQN0R-VH4zd3JxRVlhQ1VKU09KZVp3ZDVtbExUMlBhcURuMWVVWUFiUDBL","UiLocales":null,"Nonce":"YWVQN0R-VH4zd3JxRVlhQ1VKU09KZVp3ZDVtbExUMlBhcURuMWVVWUFiUDBL","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"YWVQN0R-VH4zd3JxRVlhQ1VKU09KZVp3ZDVtbExUMlBhcURuMWVVWUFiUDBL","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"YWVQN0R-VH4zd3JxRVlhQ1VKU09KZVp3ZDVtbExUMlBhcURuMWVVWUFiUDBL"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:29:17.379 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:29:17.379 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:29:17.379 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:29:17.379 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:17.388 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:29:17.388 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:29:17.389 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****wAGA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****-DbA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000087-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:29:17.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:29:17.389 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"YWVQN0R-VH4zd3JxRVlhQ1VKU09KZVp3ZDVtbExUMlBhcURuMWVVWUFiUDBL","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:29:17.802 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:29:17.825 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:17.825 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:17.826 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:29:17.826 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:29:17.826 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:29:17.826 +02:00 [DBG] Start discovery request
2020-08-12 14:29:17.846 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:29:18.111 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:29:18.116 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:18.117 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:18.117 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:29:18.117 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:29:18.117 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:29:18.117 +02:00 [DBG] Start key discovery request
2020-08-12 14:29:18.674 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:29:18.674 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:29:18.674 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:29:18.674 +02:00 [DBG] Start authorize request
2020-08-12 14:29:18.674 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:18.674 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:29:18.706 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:29:18.706 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:29:18.710 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:18.722 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:18.727 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:18.747 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:18.747 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:29:18.747 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"SkFWemxuZWViMTFtUUp-Z09fOXI4V1VWVWJSemNXT3prYld1NH4yQ05VR09s","UiLocales":null,"Nonce":"SkFWemxuZWViMTFtUUp-Z09fOXI4V1VWVWJSemNXT3prYld1NH4yQ05VR09s","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"SkFWemxuZWViMTFtUUp-Z09fOXI4V1VWVWJSemNXT3prYld1NH4yQ05VR09s","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"SkFWemxuZWViMTFtUUp-Z09fOXI4V1VWVWJSemNXT3prYld1NH4yQ05VR09s"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:29:18.749 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:29:18.749 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:29:18.749 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:29:18.750 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:18.756 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:29:18.756 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:29:18.757 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****zLqA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****ETXQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000088-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:29:18.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:29:18.757 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"SkFWemxuZWViMTFtUUp-Z09fOXI4V1VWVWJSemNXT3prYld1NH4yQ05VR09s","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:29:19.234 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:29:19.303 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:19.304 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:19.304 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:29:19.304 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:29:19.304 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:29:19.304 +02:00 [DBG] Start discovery request
2020-08-12 14:29:19.323 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:29:19.475 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:29:19.479 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:19.479 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:19.479 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:29:19.479 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:29:19.479 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:29:19.479 +02:00 [DBG] Start key discovery request
2020-08-12 14:29:19.723 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:29:19.723 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:29:19.723 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:29:19.723 +02:00 [DBG] Start authorize request
2020-08-12 14:29:19.724 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:19.724 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:29:19.755 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:29:19.755 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:29:19.761 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:19.776 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:19.783 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:19.806 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:19.806 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:29:19.806 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"MDZLbDNBelMzcHBBNy1HZlhXMXBkRnpPNndpa3FfOHhDVk5tcjM1RXdfci5j","UiLocales":null,"Nonce":"MDZLbDNBelMzcHBBNy1HZlhXMXBkRnpPNndpa3FfOHhDVk5tcjM1RXdfci5j","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"MDZLbDNBelMzcHBBNy1HZlhXMXBkRnpPNndpa3FfOHhDVk5tcjM1RXdfci5j","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"MDZLbDNBelMzcHBBNy1HZlhXMXBkRnpPNndpa3FfOHhDVk5tcjM1RXdfci5j"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:29:19.810 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:29:19.810 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:29:19.810 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:29:19.810 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:19.816 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:29:19.816 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:29:19.818 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****HNZg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****7OcQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000089-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:29:19.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:29:19.818 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"MDZLbDNBelMzcHBBNy1HZlhXMXBkRnpPNndpa3FfOHhDVk5tcjM1RXdfci5j","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:29:20.322 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:29:20.482 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:20.482 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:20.482 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:29:20.482 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:29:20.482 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:29:20.482 +02:00 [DBG] Start discovery request
2020-08-12 14:29:20.550 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:29:21.610 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:29:21.613 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:21.614 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:21.614 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:29:21.614 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:29:21.614 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:29:21.614 +02:00 [DBG] Start key discovery request
2020-08-12 14:29:22.012 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:29:22.013 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:29:22.013 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:29:22.013 +02:00 [DBG] Start authorize request
2020-08-12 14:29:22.013 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:22.013 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:29:22.092 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:29:22.092 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:29:22.109 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:22.135 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:22.140 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:22.145 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:22.145 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:29:22.146 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"Nkx3VXMuaWFPYmFTUXZzZzZPMi5oRUNFUG9tTlRFc1hsYkQwa0I5UU5kckZY","UiLocales":null,"Nonce":"Nkx3VXMuaWFPYmFTUXZzZzZPMi5oRUNFUG9tTlRFc1hsYkQwa0I5UU5kckZY","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"Nkx3VXMuaWFPYmFTUXZzZzZPMi5oRUNFUG9tTlRFc1hsYkQwa0I5UU5kckZY","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"Nkx3VXMuaWFPYmFTUXZzZzZPMi5oRUNFUG9tTlRFc1hsYkQwa0I5UU5kckZY"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:29:22.152 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:29:22.153 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:29:22.153 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:29:22.153 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:22.164 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:29:22.164 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:29:22.166 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****bhIw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****ZMfw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000008a-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:29:22.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:29:22.166 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"Nkx3VXMuaWFPYmFTUXZzZzZPMi5oRUNFUG9tTlRFc1hsYkQwa0I5UU5kckZY","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:29:25.598 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:29:25.601 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:25.601 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:25.602 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:29:25.602 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:29:25.602 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:29:25.602 +02:00 [DBG] Start discovery request
2020-08-12 14:29:25.617 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:29:25.737 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:29:25.739 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:25.739 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:25.740 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:29:25.740 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:29:25.740 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:29:25.740 +02:00 [DBG] Start key discovery request
2020-08-12 14:29:25.897 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:29:25.897 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:29:25.898 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:29:25.898 +02:00 [DBG] Start authorize request
2020-08-12 14:29:25.898 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:25.898 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:29:25.934 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:29:25.934 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:29:25.939 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:25.951 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:25.955 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:25.957 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:25.957 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:29:25.958 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"SHA1aklKTHBnckpLQWdUWEdCMFpVcHVfZXZJUDYyR356NUFrZUVPT25FS0o3","UiLocales":null,"Nonce":"SHA1aklKTHBnckpLQWdUWEdCMFpVcHVfZXZJUDYyR356NUFrZUVPT25FS0o3","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"SHA1aklKTHBnckpLQWdUWEdCMFpVcHVfZXZJUDYyR356NUFrZUVPT25FS0o3","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"SHA1aklKTHBnckpLQWdUWEdCMFpVcHVfZXZJUDYyR356NUFrZUVPT25FS0o3"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:29:25.963 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:29:25.963 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:29:25.963 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:29:25.963 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:25.970 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:29:25.970 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:29:25.971 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****X0zg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****1pOA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000008b-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:29:25.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:29:25.971 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"SHA1aklKTHBnckpLQWdUWEdCMFpVcHVfZXZJUDYyR356NUFrZUVPT25FS0o3","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:29:26.429 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:29:26.433 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:26.433 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:26.433 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:29:26.433 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:29:26.433 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:29:26.433 +02:00 [DBG] Start discovery request
2020-08-12 14:29:26.446 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:29:26.684 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:29:26.689 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:26.689 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:26.689 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:29:26.689 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:29:26.690 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:29:26.690 +02:00 [DBG] Start key discovery request
2020-08-12 14:29:27.588 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:29:27.588 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:29:27.588 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:29:27.588 +02:00 [DBG] Start authorize request
2020-08-12 14:29:27.589 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:27.589 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:29:27.633 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:29:27.633 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:29:27.639 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:27.657 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:27.659 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:27.661 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:27.661 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:29:27.661 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"VnBnMkRFdnhaV05MZ29TSnFqcWMtek9UMzR5Z2NIRXJSVUZsSVF0QkxzdVZq","UiLocales":null,"Nonce":"VnBnMkRFdnhaV05MZ29TSnFqcWMtek9UMzR5Z2NIRXJSVUZsSVF0QkxzdVZq","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"VnBnMkRFdnhaV05MZ29TSnFqcWMtek9UMzR5Z2NIRXJSVUZsSVF0QkxzdVZq","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"VnBnMkRFdnhaV05MZ29TSnFqcWMtek9UMzR5Z2NIRXJSVUZsSVF0QkxzdVZq"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:29:27.665 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:29:27.665 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:29:27.665 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:29:27.665 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:27.671 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:29:27.671 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:29:27.672 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****RsuQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****akdQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000008c-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:29:27.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:29:27.672 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"VnBnMkRFdnhaV05MZ29TSnFqcWMtek9UMzR5Z2NIRXJSVUZsSVF0QkxzdVZq","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:29:28.936 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:29:28.940 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:28.940 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:28.940 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:29:28.940 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:29:28.940 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:29:28.940 +02:00 [DBG] Start discovery request
2020-08-12 14:29:28.956 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:29:29.163 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:29:29.167 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:29.167 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:29.168 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:29:29.168 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:29:29.168 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:29:29.168 +02:00 [DBG] Start key discovery request
2020-08-12 14:29:29.620 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:29:29.620 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:29:29.620 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:29:29.620 +02:00 [DBG] Start authorize request
2020-08-12 14:29:29.621 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:29.621 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:29:29.668 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:29:29.668 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:29:29.674 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:29.696 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:29.704 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:29.724 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:29.724 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:29:29.724 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"ZDZZY0NpZUlTdUlpX1NBQS1pR0RpY2hxa3FNTVhkc3JhZnlyYzQuSDJ6eVhC","UiLocales":null,"Nonce":"ZDZZY0NpZUlTdUlpX1NBQS1pR0RpY2hxa3FNTVhkc3JhZnlyYzQuSDJ6eVhC","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"ZDZZY0NpZUlTdUlpX1NBQS1pR0RpY2hxa3FNTVhkc3JhZnlyYzQuSDJ6eVhC","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"ZDZZY0NpZUlTdUlpX1NBQS1pR0RpY2hxa3FNTVhkc3JhZnlyYzQuSDJ6eVhC"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:29:29.729 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:29:29.729 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:29:29.729 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:29:29.729 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:29.737 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:29:29.737 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:29:29.739 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****FOww","$type":"Token"},{"TokenType":"access_token","TokenValue":"****uPAg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000008d-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:29:29.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:29:29.739 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"ZDZZY0NpZUlTdUlpX1NBQS1pR0RpY2hxa3FNTVhkc3JhZnlyYzQuSDJ6eVhC","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:29:30.347 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:29:30.352 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:30.352 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:30.353 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:29:30.353 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:29:30.353 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:29:30.353 +02:00 [DBG] Start discovery request
2020-08-12 14:29:30.374 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:29:31.519 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:29:31.522 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:31.522 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:31.522 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:29:31.522 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:29:31.522 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:29:31.523 +02:00 [DBG] Start key discovery request
2020-08-12 14:29:31.572 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:29:31.572 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:29:31.572 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:29:31.572 +02:00 [DBG] Start authorize request
2020-08-12 14:29:31.572 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:31.572 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:29:31.620 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:29:31.620 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:29:31.627 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:31.650 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:31.656 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:31.676 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:31.677 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:29:31.677 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"Q0lobmIzcXl1Q3ZSM0tDS0RCU0lKOGdtZGxjMGtBWE1sUV9URldVeHdUa3dX","UiLocales":null,"Nonce":"Q0lobmIzcXl1Q3ZSM0tDS0RCU0lKOGdtZGxjMGtBWE1sUV9URldVeHdUa3dX","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"Q0lobmIzcXl1Q3ZSM0tDS0RCU0lKOGdtZGxjMGtBWE1sUV9URldVeHdUa3dX","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"Q0lobmIzcXl1Q3ZSM0tDS0RCU0lKOGdtZGxjMGtBWE1sUV9URldVeHdUa3dX"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:29:31.684 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:29:31.684 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:29:31.684 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:29:31.684 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:31.693 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:29:31.693 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:29:31.694 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****tAaQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****pDEw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000008e-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:29:31.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:29:31.694 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"Q0lobmIzcXl1Q3ZSM0tDS0RCU0lKOGdtZGxjMGtBWE1sUV9URldVeHdUa3dX","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:29:32.619 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:29:32.624 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:32.624 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:32.624 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:29:32.624 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:29:32.625 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:29:32.625 +02:00 [DBG] Start discovery request
2020-08-12 14:29:32.640 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:29:32.930 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:29:32.944 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:32.944 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:32.945 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:29:32.945 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:29:32.945 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:29:32.945 +02:00 [DBG] Start key discovery request
2020-08-12 14:29:33.178 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:29:33.178 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:29:33.178 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:29:33.178 +02:00 [DBG] Start authorize request
2020-08-12 14:29:33.179 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:33.179 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:29:33.249 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:29:33.249 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:29:33.260 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:33.306 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:33.320 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:33.341 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:33.341 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:29:33.342 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"OE02TW9BbDVzaURDaDhFMVUtNllDR3hJM0dsTk85MUtXejBsTUNpcVFMdndt","UiLocales":null,"Nonce":"OE02TW9BbDVzaURDaDhFMVUtNllDR3hJM0dsTk85MUtXejBsTUNpcVFMdndt","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"OE02TW9BbDVzaURDaDhFMVUtNllDR3hJM0dsTk85MUtXejBsTUNpcVFMdndt","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"OE02TW9BbDVzaURDaDhFMVUtNllDR3hJM0dsTk85MUtXejBsTUNpcVFMdndt"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:29:33.347 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:29:33.347 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:29:33.347 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:29:33.347 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:33.363 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:29:33.364 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:29:33.366 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****8v-A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****zBFA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000008f-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:29:33.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:29:33.366 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"OE02TW9BbDVzaURDaDhFMVUtNllDR3hJM0dsTk85MUtXejBsTUNpcVFMdndt","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:29:34.020 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:29:34.023 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:34.023 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:34.023 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:29:34.024 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:29:34.024 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:29:34.024 +02:00 [DBG] Start discovery request
2020-08-12 14:29:34.050 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:29:34.378 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:29:34.384 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:34.384 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:34.385 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:29:34.385 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:29:34.385 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:29:34.385 +02:00 [DBG] Start key discovery request
2020-08-12 14:29:36.095 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:29:36.096 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:29:36.096 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:29:36.096 +02:00 [DBG] Start authorize request
2020-08-12 14:29:36.096 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:36.096 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:29:36.129 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:29:36.129 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:29:36.134 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:36.153 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:36.157 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:36.159 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:36.159 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:29:36.159 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"bXhVR3cyV1FDT0FTc0hnTHhRRm45UWNpWlpUVDNpb0lJenFxbVhkaGpRZH4w","UiLocales":null,"Nonce":"bXhVR3cyV1FDT0FTc0hnTHhRRm45UWNpWlpUVDNpb0lJenFxbVhkaGpRZH4w","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"bXhVR3cyV1FDT0FTc0hnTHhRRm45UWNpWlpUVDNpb0lJenFxbVhkaGpRZH4w","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"bXhVR3cyV1FDT0FTc0hnTHhRRm45UWNpWlpUVDNpb0lJenFxbVhkaGpRZH4w"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:29:36.161 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:29:36.162 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:29:36.162 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:29:36.162 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:36.498 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:29:36.498 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:29:36.500 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****4v7w","$type":"Token"},{"TokenType":"access_token","TokenValue":"****zi-g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000090-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:29:36.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:29:36.500 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"bXhVR3cyV1FDT0FTc0hnTHhRRm45UWNpWlpUVDNpb0lJenFxbVhkaGpRZH4w","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:29:37.207 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:29:37.214 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:37.214 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:37.214 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:29:37.215 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:29:37.215 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:29:37.215 +02:00 [DBG] Start discovery request
2020-08-12 14:29:37.235 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:29:37.427 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:29:37.433 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:37.433 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:37.433 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:29:37.433 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:29:37.434 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:29:37.434 +02:00 [DBG] Start key discovery request
2020-08-12 14:29:37.507 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:29:37.508 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:29:37.508 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:29:37.508 +02:00 [DBG] Start authorize request
2020-08-12 14:29:37.508 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:37.508 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:29:37.540 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:29:37.540 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:29:37.547 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:37.563 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:37.569 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:37.595 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:37.636 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:29:37.637 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"Q2JQWnouUVlOYn52cmlzVlVPTzlRNjVhRS1fbGU2ZnRZSk1IZTQySkFmU0Yw","UiLocales":null,"Nonce":"Q2JQWnouUVlOYn52cmlzVlVPTzlRNjVhRS1fbGU2ZnRZSk1IZTQySkFmU0Yw","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"Q2JQWnouUVlOYn52cmlzVlVPTzlRNjVhRS1fbGU2ZnRZSk1IZTQySkFmU0Yw","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"Q2JQWnouUVlOYn52cmlzVlVPTzlRNjVhRS1fbGU2ZnRZSk1IZTQySkFmU0Yw"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:29:37.641 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:29:37.641 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:29:37.641 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:29:37.641 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:37.649 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:29:37.649 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:29:37.650 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****MK1Q","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Kg-A","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000091-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:29:37.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:29:37.651 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"Q2JQWnouUVlOYn52cmlzVlVPTzlRNjVhRS1fbGU2ZnRZSk1IZTQySkFmU0Yw","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:29:38.254 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:29:38.258 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:38.258 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:38.258 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:29:38.258 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:29:38.258 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:29:38.258 +02:00 [DBG] Start discovery request
2020-08-12 14:29:38.271 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:29:38.549 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:29:38.557 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:38.557 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:38.557 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:29:38.558 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:29:38.558 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:29:38.558 +02:00 [DBG] Start key discovery request
2020-08-12 14:29:39.176 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:29:39.177 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:29:39.177 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:29:39.177 +02:00 [DBG] Start authorize request
2020-08-12 14:29:39.177 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:39.177 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:29:39.856 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:29:39.857 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:29:39.863 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:39.908 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:39.913 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:39.928 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:39.928 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:29:39.928 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"flRkSk9jZ2xmUVZRemlBMVA0cS5iQzVUNEFHLXJrfmVVZmR5THRSVnJYUHNu","UiLocales":null,"Nonce":"flRkSk9jZ2xmUVZRemlBMVA0cS5iQzVUNEFHLXJrfmVVZmR5THRSVnJYUHNu","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"flRkSk9jZ2xmUVZRemlBMVA0cS5iQzVUNEFHLXJrfmVVZmR5THRSVnJYUHNu","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"flRkSk9jZ2xmUVZRemlBMVA0cS5iQzVUNEFHLXJrfmVVZmR5THRSVnJYUHNu"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:29:39.932 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:29:39.932 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:29:39.932 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:29:39.932 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:39.940 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:29:39.940 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:29:39.942 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****bFfA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Yutg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000092-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:29:39.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:29:39.942 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"flRkSk9jZ2xmUVZRemlBMVA0cS5iQzVUNEFHLXJrfmVVZmR5THRSVnJYUHNu","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:29:40.849 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:29:40.856 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:40.856 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:40.856 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:29:40.856 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:29:40.856 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:29:40.857 +02:00 [DBG] Start discovery request
2020-08-12 14:29:40.877 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:29:41.047 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:29:41.052 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:41.052 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:41.052 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:29:41.052 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:29:41.052 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:29:41.052 +02:00 [DBG] Start key discovery request
2020-08-12 14:29:41.170 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:29:41.170 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:29:41.170 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:29:41.170 +02:00 [DBG] Start authorize request
2020-08-12 14:29:41.170 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:41.170 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:29:41.225 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:29:41.225 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:29:41.233 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:41.252 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:41.255 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:41.257 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:41.258 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:29:41.258 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"TlhnQ2V2dlRqdHpEYUtlWkw2VXY4bnlJa0JmMUdGfmYzSllBaGlDQUNvcThG","UiLocales":null,"Nonce":"TlhnQ2V2dlRqdHpEYUtlWkw2VXY4bnlJa0JmMUdGfmYzSllBaGlDQUNvcThG","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"TlhnQ2V2dlRqdHpEYUtlWkw2VXY4bnlJa0JmMUdGfmYzSllBaGlDQUNvcThG","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"TlhnQ2V2dlRqdHpEYUtlWkw2VXY4bnlJa0JmMUdGfmYzSllBaGlDQUNvcThG"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:29:41.262 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:29:41.262 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:29:41.262 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:29:41.262 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:41.268 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:29:41.268 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:29:41.269 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****weKQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****dCUQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000093-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:29:41.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:29:41.270 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"TlhnQ2V2dlRqdHpEYUtlWkw2VXY4bnlJa0JmMUdGfmYzSllBaGlDQUNvcThG","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:29:41.623 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:29:41.627 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:41.627 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:41.627 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:29:41.627 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:29:41.627 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:29:41.627 +02:00 [DBG] Start discovery request
2020-08-12 14:29:41.715 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:29:42.035 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:29:42.069 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:42.070 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:42.070 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:29:42.070 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:29:42.070 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:29:42.070 +02:00 [DBG] Start key discovery request
2020-08-12 14:29:42.245 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:29:42.245 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:29:42.245 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:29:42.246 +02:00 [DBG] Start authorize request
2020-08-12 14:29:42.246 +02:00 [DBG] User in authorize request: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:42.246 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:29:42.292 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:29:42.292 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:29:42.297 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:42.319 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:42.327 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:29:42.346 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:29:42.346 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:29:42.346 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"azljfm9tM0FwWmxkTEZZd2VlaG1XYmVGbXB0VTcyVExiRjVfREhMb0ZXLXpa","UiLocales":null,"Nonce":"azljfm9tM0FwWmxkTEZZd2VlaG1XYmVGbXB0VTcyVExiRjVfREhMb0ZXLXpa","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6DdPmFAdkBhpGmD0Pl958A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"azljfm9tM0FwWmxkTEZZd2VlaG1XYmVGbXB0VTcyVExiRjVfREhMb0ZXLXpa","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"azljfm9tM0FwWmxkTEZZd2VlaG1XYmVGbXB0VTcyVExiRjVfREhMb0ZXLXpa"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:29:42.351 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:29:42.351 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:29:42.351 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:29:42.351 +02:00 [DBG] Getting claims for access token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a
2020-08-12 14:29:42.363 +02:00 [DBG] Getting claims for identity token for subject: fbdff3ca-e06f-4580-85e8-da01e1b2f33a and client: listify.webapp
2020-08-12 14:29:42.363 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:29:42.365 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****wWwg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****qFEA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000094-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:29:42.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:29:42.365 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"fbdff3ca-e06f-4580-85e8-da01e1b2f33a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"azljfm9tM0FwWmxkTEZZd2VlaG1XYmVGbXB0VTcyVExiRjVfREhMb0ZXLXpa","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:29:42.857 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:29:42.860 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:29:42.861 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:29:42.861 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:29:42.861 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:29:42.861 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:29:42.861 +02:00 [DBG] Start discovery request
2020-08-12 14:29:42.877 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:29:54.609 +02:00 [INF] Removing 0 grants
2020-08-12 14:29:54.613 +02:00 [INF] Removing 0 device flow codes
2020-08-12 14:31:11.285 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:31:11.303 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:31:11.303 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:31:11.304 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:31:11.312 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:31:11.312 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:31:11.312 +02:00 [DBG] Start key discovery request
2020-08-12 14:32:45.098 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:32:45.181 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:32:45.181 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:32:45.181 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:32:45.182 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:32:45.182 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:32:45.182 +02:00 [DBG] Start discovery request
2020-08-12 14:32:45.198 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:32:46.628 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:32:46.633 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:32:46.634 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:32:46.634 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:32:46.634 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:32:46.634 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:32:46.634 +02:00 [DBG] Start key discovery request
2020-08-12 14:32:47.355 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:32:47.356 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:32:47.356 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:32:47.356 +02:00 [DBG] Start authorize request
2020-08-12 14:32:47.357 +02:00 [DBG] No user present in authorize request
2020-08-12 14:32:47.357 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:32:47.878 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:32:47.878 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:32:47.882 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:32:47.894 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:32:47.980 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:32:47.982 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:32:47.982 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:32:47.982 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"X3FhLWtCUFJPMFNQV2FlQlZZX2o3VFpXNTgyeDl0RHdUWW01VkdxZEdGR3du","UiLocales":null,"Nonce":"X3FhLWtCUFJPMFNQV2FlQlZZX2o3VFpXNTgyeDl0RHdUWW01VkdxZEdGR3du","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"X3FhLWtCUFJPMFNQV2FlQlZZX2o3VFpXNTgyeDl0RHdUWW01VkdxZEdGR3du","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"X3FhLWtCUFJPMFNQV2FlQlZZX2o3VFpXNTgyeDl0RHdUWW01VkdxZEdGR3du"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:32:47.982 +02:00 [INF] Showing login: User is not authenticated
2020-08-12 14:32:56.041 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:32:56.068 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:32:56.068 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:32:56.074 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:32:56.091 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:32:56.095 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:32:56.117 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:32:56.117 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:32:56.420 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:32:56.420 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:33:53.221 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:33:53.385 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:33:53.385 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:33:53.385 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:33:53.385 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:33:53.385 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:33:53.385 +02:00 [DBG] Start key discovery request
2020-08-12 14:33:53.781 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:33:53.781 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:33:53.781 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:33:53.781 +02:00 [DBG] Start authorize request
2020-08-12 14:33:53.781 +02:00 [DBG] No user present in authorize request
2020-08-12 14:33:53.824 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:33:54.001 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:33:54.001 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:33:54.007 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:33:54.028 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:33:54.075 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:33:54.147 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:33:54.147 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:33:54.147 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"dVVkWW51RXlvT2hxV3dEeEh0RFhFSXhsbmpqWGJHR3h2Y1FvR2czLmVzVVNp","UiLocales":null,"Nonce":"dVVkWW51RXlvT2hxV3dEeEh0RFhFSXhsbmpqWGJHR3h2Y1FvR2czLmVzVVNp","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"dVVkWW51RXlvT2hxV3dEeEh0RFhFSXhsbmpqWGJHR3h2Y1FvR2czLmVzVVNp","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"dVVkWW51RXlvT2hxV3dEeEh0RFhFSXhsbmpqWGJHR3h2Y1FvR2czLmVzVVNp"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:33:54.147 +02:00 [INF] Showing login: User is not authenticated
2020-08-12 14:33:55.159 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:33:55.164 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:33:55.164 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:33:55.164 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:33:55.164 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:33:55.165 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:33:55.165 +02:00 [DBG] Start discovery request
2020-08-12 14:33:55.221 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:33:55.331 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:33:55.333 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:33:55.333 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:33:55.333 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:33:55.333 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:33:55.333 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:33:55.333 +02:00 [DBG] Start key discovery request
2020-08-12 14:33:57.003 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:33:57.006 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:33:57.006 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:33:57.006 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:33:57.006 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:33:57.006 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:33:57.006 +02:00 [DBG] Start discovery request
2020-08-12 14:33:57.023 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:33:57.133 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:33:57.136 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:33:57.136 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:33:57.136 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:33:57.136 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:33:57.136 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:33:57.136 +02:00 [DBG] Start key discovery request
2020-08-12 14:33:59.518 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:33:59.518 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:33:59.518 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:33:59.518 +02:00 [DBG] Start authorize request
2020-08-12 14:33:59.518 +02:00 [DBG] No user present in authorize request
2020-08-12 14:33:59.518 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:33:59.599 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:33:59.599 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:33:59.601 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:33:59.603 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:33:59.605 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:33:59.606 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:33:59.607 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:33:59.607 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"ZnNQbWkxSVJUTldQQlg1b0VGQnRCNH5-QXp0dENDczMzQkRiZ0FjVGpqcG45","UiLocales":null,"Nonce":"ZnNQbWkxSVJUTldQQlg1b0VGQnRCNH5-QXp0dENDczMzQkRiZ0FjVGpqcG45","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"ZnNQbWkxSVJUTldQQlg1b0VGQnRCNH5-QXp0dENDczMzQkRiZ0FjVGpqcG45","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"ZnNQbWkxSVJUTldQQlg1b0VGQnRCNH5-QXp0dENDczMzQkRiZ0FjVGpqcG45"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:33:59.607 +02:00 [INF] Showing login: User is not authenticated
2020-08-12 14:33:59.758 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:33:59.771 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:33:59.771 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:33:59.772 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:33:59.774 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:33:59.775 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:33:59.776 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:33:59.776 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:33:59.786 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:33:59.786 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:34:17.701 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:34:17.821 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:34:17.822 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:34:17.823 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:34:17.825 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:34:17.826 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:34:17.827 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:34:17.827 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:34:17.836 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:34:17.836 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:34:26.935 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-12 14:34:40.913 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-12 14:34:43.727 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"44bcfbb6-3ca8-4845-8f3e-62f4e487275a","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000027-0004-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:34:43.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-12 14:34:43.881 +02:00 [DBG] Augmenting SignInContext
2020-08-12 14:34:43.882 +02:00 [DBG] Adding amr claim with value: external
2020-08-12 14:34:43.884 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-12 14:34:43.885 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-12 14:34:43.897 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-12 14:34:43.898 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-12 14:34:43.898 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-12 14:34:43.924 +02:00 [DBG] Start authorize callback request
2020-08-12 14:34:43.930 +02:00 [DBG] User in authorize request: 44bcfbb6-3ca8-4845-8f3e-62f4e487275a
2020-08-12 14:34:43.930 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:34:44.052 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:34:44.052 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:34:44.054 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:34:44.111 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:34:44.113 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:34:44.115 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:34:44.115 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:34:44.115 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"44bcfbb6-3ca8-4845-8f3e-62f4e487275a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"ZnNQbWkxSVJUTldQQlg1b0VGQnRCNH5-QXp0dENDczMzQkRiZ0FjVGpqcG45","UiLocales":null,"Nonce":"ZnNQbWkxSVJUTldQQlg1b0VGQnRCNH5-QXp0dENDczMzQkRiZ0FjVGpqcG45","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"kdVPxvBHydVs1yTgg17Lcg","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"ZnNQbWkxSVJUTldQQlg1b0VGQnRCNH5-QXp0dENDczMzQkRiZ0FjVGpqcG45","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"ZnNQbWkxSVJUTldQQlg1b0VGQnRCNH5-QXp0dENDczMzQkRiZ0FjVGpqcG45"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:34:44.117 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:34:44.117 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:34:44.117 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:34:44.117 +02:00 [DBG] Getting claims for access token for subject: 44bcfbb6-3ca8-4845-8f3e-62f4e487275a
2020-08-12 14:34:44.186 +02:00 [DBG] Getting claims for identity token for subject: 44bcfbb6-3ca8-4845-8f3e-62f4e487275a and client: listify.webapp
2020-08-12 14:34:44.186 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:34:44.187 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"44bcfbb6-3ca8-4845-8f3e-62f4e487275a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****kFeA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****YAuQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000028-0004-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:34:44.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:34:44.187 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"44bcfbb6-3ca8-4845-8f3e-62f4e487275a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"ZnNQbWkxSVJUTldQQlg1b0VGQnRCNH5-QXp0dENDczMzQkRiZ0FjVGpqcG45","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:34:44.189 +02:00 [DBG] Augmenting SignInContext
2020-08-12 14:34:44.190 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-12 14:34:44.427 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:34:44.429 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:34:44.429 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:34:44.430 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:34:44.430 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:34:44.430 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:34:44.430 +02:00 [DBG] Start discovery request
2020-08-12 14:34:44.433 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:34:44.654 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:34:44.656 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:34:44.656 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:34:44.657 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:34:44.657 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:34:44.657 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:34:44.657 +02:00 [DBG] Start key discovery request
2020-08-12 14:34:50.432 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:34:50.432 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:34:50.432 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:34:50.432 +02:00 [DBG] Start authorize request
2020-08-12 14:34:50.432 +02:00 [DBG] User in authorize request: 44bcfbb6-3ca8-4845-8f3e-62f4e487275a
2020-08-12 14:34:50.432 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:34:50.444 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:34:50.444 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:34:50.446 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:34:50.449 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:34:50.452 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:34:50.521 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:34:50.521 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:34:50.521 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"44bcfbb6-3ca8-4845-8f3e-62f4e487275a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"ckVZd0xJVFhFRS5BZi5XUDFCTk5VYnFVajRKVGludHBqSVNGMURaN3lBUnll","UiLocales":null,"Nonce":"ckVZd0xJVFhFRS5BZi5XUDFCTk5VYnFVajRKVGludHBqSVNGMURaN3lBUnll","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"kdVPxvBHydVs1yTgg17Lcg","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"ckVZd0xJVFhFRS5BZi5XUDFCTk5VYnFVajRKVGludHBqSVNGMURaN3lBUnll","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"ckVZd0xJVFhFRS5BZi5XUDFCTk5VYnFVajRKVGludHBqSVNGMURaN3lBUnll"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:34:50.523 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:34:50.523 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:34:50.523 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:34:50.523 +02:00 [DBG] Getting claims for access token for subject: 44bcfbb6-3ca8-4845-8f3e-62f4e487275a
2020-08-12 14:34:50.528 +02:00 [DBG] Getting claims for identity token for subject: 44bcfbb6-3ca8-4845-8f3e-62f4e487275a and client: listify.webapp
2020-08-12 14:34:50.528 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:34:50.529 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"44bcfbb6-3ca8-4845-8f3e-62f4e487275a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****s6Xw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Wh3g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000029-0004-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:34:50.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:34:50.529 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"44bcfbb6-3ca8-4845-8f3e-62f4e487275a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"ckVZd0xJVFhFRS5BZi5XUDFCTk5VYnFVajRKVGludHBqSVNGMURaN3lBUnll","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:34:50.755 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:34:50.757 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:34:50.757 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:34:50.757 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:34:50.757 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:34:50.757 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:34:50.757 +02:00 [DBG] Start discovery request
2020-08-12 14:34:50.761 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:34:50.924 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:34:50.926 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:34:50.926 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:34:50.926 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:34:50.938 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:34:50.938 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:34:50.938 +02:00 [DBG] Start key discovery request
2020-08-12 14:34:51.292 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:34:51.293 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:34:51.293 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:34:51.293 +02:00 [DBG] Start authorize request
2020-08-12 14:34:51.293 +02:00 [DBG] User in authorize request: 44bcfbb6-3ca8-4845-8f3e-62f4e487275a
2020-08-12 14:34:51.293 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:34:51.333 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:34:51.333 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:34:51.335 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:34:51.336 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:34:51.338 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:34:51.339 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:34:51.339 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:34:51.339 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"44bcfbb6-3ca8-4845-8f3e-62f4e487275a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"bVZVdFEycnh3OG04WGpvS2x3a3hfdXE2WjV2YlpjZlpfLXd3UDlPZ2YwUH5N","UiLocales":null,"Nonce":"bVZVdFEycnh3OG04WGpvS2x3a3hfdXE2WjV2YlpjZlpfLXd3UDlPZ2YwUH5N","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"kdVPxvBHydVs1yTgg17Lcg","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"bVZVdFEycnh3OG04WGpvS2x3a3hfdXE2WjV2YlpjZlpfLXd3UDlPZ2YwUH5N","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"bVZVdFEycnh3OG04WGpvS2x3a3hfdXE2WjV2YlpjZlpfLXd3UDlPZ2YwUH5N"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:34:51.341 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:34:51.341 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:34:51.341 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:34:51.341 +02:00 [DBG] Getting claims for access token for subject: 44bcfbb6-3ca8-4845-8f3e-62f4e487275a
2020-08-12 14:34:51.345 +02:00 [DBG] Getting claims for identity token for subject: 44bcfbb6-3ca8-4845-8f3e-62f4e487275a and client: listify.webapp
2020-08-12 14:34:51.345 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:34:51.346 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"44bcfbb6-3ca8-4845-8f3e-62f4e487275a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****5sTg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Jwow","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000002a-0004-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:34:51.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:34:51.346 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"44bcfbb6-3ca8-4845-8f3e-62f4e487275a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"bVZVdFEycnh3OG04WGpvS2x3a3hfdXE2WjV2YlpjZlpfLXd3UDlPZ2YwUH5N","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:34:51.526 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:34:51.528 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:34:51.528 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:34:51.528 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:34:51.528 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:34:51.528 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:34:51.528 +02:00 [DBG] Start discovery request
2020-08-12 14:34:51.533 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:34:51.672 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:34:51.674 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:34:51.674 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:34:51.675 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:34:51.675 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:34:51.675 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:34:51.675 +02:00 [DBG] Start key discovery request
2020-08-12 14:34:52.061 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:34:52.061 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:34:52.061 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:34:52.061 +02:00 [DBG] Start authorize request
2020-08-12 14:34:52.061 +02:00 [DBG] User in authorize request: 44bcfbb6-3ca8-4845-8f3e-62f4e487275a
2020-08-12 14:34:52.061 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:34:52.122 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:34:52.122 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:34:52.127 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:34:52.129 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:34:52.131 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:34:52.132 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:34:52.132 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:34:52.133 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"44bcfbb6-3ca8-4845-8f3e-62f4e487275a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"Y0NIbFFwdklUYTlVY3ZkUTVuZEdSYnk1T2lZOXBlVmt5RUkwdlAuZzRHR2It","UiLocales":null,"Nonce":"Y0NIbFFwdklUYTlVY3ZkUTVuZEdSYnk1T2lZOXBlVmt5RUkwdlAuZzRHR2It","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"kdVPxvBHydVs1yTgg17Lcg","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"Y0NIbFFwdklUYTlVY3ZkUTVuZEdSYnk1T2lZOXBlVmt5RUkwdlAuZzRHR2It","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"Y0NIbFFwdklUYTlVY3ZkUTVuZEdSYnk1T2lZOXBlVmt5RUkwdlAuZzRHR2It"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:34:52.135 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:34:52.135 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:34:52.135 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:34:52.135 +02:00 [DBG] Getting claims for access token for subject: 44bcfbb6-3ca8-4845-8f3e-62f4e487275a
2020-08-12 14:34:52.139 +02:00 [DBG] Getting claims for identity token for subject: 44bcfbb6-3ca8-4845-8f3e-62f4e487275a and client: listify.webapp
2020-08-12 14:34:52.139 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:34:52.141 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"44bcfbb6-3ca8-4845-8f3e-62f4e487275a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****tgDw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****WHsA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000002b-0004-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:34:52.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:34:52.141 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"44bcfbb6-3ca8-4845-8f3e-62f4e487275a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"Y0NIbFFwdklUYTlVY3ZkUTVuZEdSYnk1T2lZOXBlVmt5RUkwdlAuZzRHR2It","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:34:52.318 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:34:52.327 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:34:52.327 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:34:52.355 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:34:52.355 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:34:52.355 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:34:52.355 +02:00 [DBG] Start discovery request
2020-08-12 14:34:52.420 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:34:52.475 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:34:52.476 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:34:52.477 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:34:52.477 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:34:52.477 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:34:52.477 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:34:52.477 +02:00 [DBG] Start key discovery request
2020-08-12 14:34:53.816 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:34:53.816 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:34:53.816 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:34:53.816 +02:00 [DBG] Start authorize request
2020-08-12 14:34:53.817 +02:00 [DBG] User in authorize request: 44bcfbb6-3ca8-4845-8f3e-62f4e487275a
2020-08-12 14:34:53.817 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:34:53.877 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:34:53.877 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:34:53.879 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:34:53.880 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:34:53.905 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:34:53.918 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:34:53.918 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:34:53.918 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"44bcfbb6-3ca8-4845-8f3e-62f4e487275a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"V09zZWR2OXBmVFNpd2JxOGFkXzB2eFdifjJsflpidUswM01pQ2stQUZ2ZmVQ","UiLocales":null,"Nonce":"V09zZWR2OXBmVFNpd2JxOGFkXzB2eFdifjJsflpidUswM01pQ2stQUZ2ZmVQ","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"kdVPxvBHydVs1yTgg17Lcg","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"V09zZWR2OXBmVFNpd2JxOGFkXzB2eFdifjJsflpidUswM01pQ2stQUZ2ZmVQ","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"V09zZWR2OXBmVFNpd2JxOGFkXzB2eFdifjJsflpidUswM01pQ2stQUZ2ZmVQ"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:34:53.921 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:34:53.921 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:34:53.921 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:34:53.921 +02:00 [DBG] Getting claims for access token for subject: 44bcfbb6-3ca8-4845-8f3e-62f4e487275a
2020-08-12 14:34:53.926 +02:00 [DBG] Getting claims for identity token for subject: 44bcfbb6-3ca8-4845-8f3e-62f4e487275a and client: listify.webapp
2020-08-12 14:34:53.926 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:34:53.927 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"44bcfbb6-3ca8-4845-8f3e-62f4e487275a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****ht3g","$type":"Token"},{"TokenType":"access_token","TokenValue":"****E6Gg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000002c-0004-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:34:53.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:34:53.927 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"44bcfbb6-3ca8-4845-8f3e-62f4e487275a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"V09zZWR2OXBmVFNpd2JxOGFkXzB2eFdifjJsflpidUswM01pQ2stQUZ2ZmVQ","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:34:54.224 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:34:54.227 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:34:54.227 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:34:54.227 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:34:54.227 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:34:54.227 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:34:54.227 +02:00 [DBG] Start discovery request
2020-08-12 14:34:54.266 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:34:54.444 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:34:54.447 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:34:54.447 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:34:54.447 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:34:54.448 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:34:54.448 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:34:54.448 +02:00 [DBG] Start key discovery request
2020-08-12 14:34:54.743 +02:00 [INF] Removing 0 grants
2020-08-12 14:34:54.769 +02:00 [INF] Removing 0 device flow codes
2020-08-12 14:34:54.839 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-12 14:34:54.840 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-12 14:34:54.840 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-12 14:34:54.840 +02:00 [DBG] Start authorize request
2020-08-12 14:34:54.840 +02:00 [DBG] User in authorize request: 44bcfbb6-3ca8-4845-8f3e-62f4e487275a
2020-08-12 14:34:54.840 +02:00 [DBG] Start authorize request protocol validation
2020-08-12 14:34:54.879 +02:00 [DBG] listify.webapp found in database: true
2020-08-12 14:34:54.879 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-12 14:34:54.883 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:34:54.896 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:34:54.929 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-12 14:34:55.036 +02:00 [DBG] Found ["ListifyWebAPI"] API scopes in database
2020-08-12 14:34:55.036 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-12 14:34:55.036 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"44bcfbb6-3ca8-4845-8f3e-62f4e487275a","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"VzJUeG1PSkMtfnhaY1g3WkNYRkhVNDUtNG9JbGRLZC5HdGhBbXlJamNYSGx4","UiLocales":null,"Nonce":"VzJUeG1PSkMtfnhaY1g3WkNYRkhVNDUtNG9JbGRLZC5HdGhBbXlJamNYSGx4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"kdVPxvBHydVs1yTgg17Lcg","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"VzJUeG1PSkMtfnhaY1g3WkNYRkhVNDUtNG9JbGRLZC5HdGhBbXlJamNYSGx4","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"VzJUeG1PSkMtfnhaY1g3WkNYRkhVNDUtNG9JbGRLZC5HdGhBbXlJamNYSGx4"},"$type":"AuthorizeRequestValidationLog"}
2020-08-12 14:34:55.050 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-12 14:34:55.051 +02:00 [DBG] Creating Implicit Flow response.
2020-08-12 14:34:55.051 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-12 14:34:55.051 +02:00 [DBG] Getting claims for access token for subject: 44bcfbb6-3ca8-4845-8f3e-62f4e487275a
2020-08-12 14:34:55.128 +02:00 [DBG] Getting claims for identity token for subject: 44bcfbb6-3ca8-4845-8f3e-62f4e487275a and client: listify.webapp
2020-08-12 14:34:55.128 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-12 14:34:55.129 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"44bcfbb6-3ca8-4845-8f3e-62f4e487275a","Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****qw6Q","$type":"Token"},{"TokenType":"access_token","TokenValue":"****EOtQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000002d-0004-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:34:55.0000000Z","ProcessId":18060,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-12 14:34:55.129 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"44bcfbb6-3ca8-4845-8f3e-62f4e487275a","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"VzJUeG1PSkMtfnhaY1g3WkNYRkhVNDUtNG9JbGRLZC5HdGhBbXlJamNYSGx4","Scope":"openid profile roles ListifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-12 14:34:55.519 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-12 14:34:55.549 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:34:55.549 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:34:55.574 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-12 14:34:55.574 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-12 14:34:55.574 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-12 14:34:55.574 +02:00 [DBG] Start discovery request
2020-08-12 14:34:55.588 +02:00 [DBG] Found ["profile","openid","roles","ListifyWebAPI"] as all scopes in database
2020-08-12 14:34:55.697 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-12 14:34:55.701 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-12 14:34:55.701 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-12 14:34:55.701 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-12 14:34:55.701 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-12 14:34:55.701 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-12 14:34:55.702 +02:00 [DBG] Start key discovery request
2020-08-12 14:43:49.190 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-12 14:43:49.238 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-12 14:43:49.238 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-12 14:43:49.238 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-12 14:43:49.238 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-12 14:43:49.238 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-12 14:43:49.238 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-12 14:43:49.503 +02:00 [DBG] Login Url: /Account/Login
2020-08-12 14:43:49.505 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-12 14:43:49.505 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-12 14:43:49.505 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-12 14:43:49.505 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-12 14:43:49.505 +02:00 [DBG] Error Url: /home/error
2020-08-12 14:43:49.505 +02:00 [DBG] Error Id Parameter: errorId
2020-08-12 14:43:58.493 +02:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2020-08-12 14:43:58.588 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-12 14:43:58.589 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-12 14:43:58.590 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-12 14:43:58.601 +02:00 [INF] {"SubjectId":"44bcfbb6-3ca8-4845-8f3e-62f4e487275a","DisplayName":"Mohamed Abd Elrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"80000029-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-12T12:43:58.0000000Z","ProcessId":20040,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-12 14:43:59.304 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Value cannot be null or empty. (Parameter 'url')
   at Microsoft.AspNetCore.Mvc.ControllerBase.Redirect(String url)
   at IdentityServer4.Quickstart.UI.AccountController.Logout(LogoutInputModel model) in E:\programming\Projects\Listify\Listify.Backend\Listify.Identity\Quickstart\Account\AccountController.cs:line 257
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-08-13 14:30:02.872 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-13 14:30:02.921 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-13 14:30:02.923 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-13 14:30:02.956 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-13 14:30:02.956 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-13 14:30:02.956 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-13 14:30:02.957 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-13 14:37:07.741 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-13 14:37:07.786 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-13 14:37:07.786 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-13 14:37:07.787 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-13 14:37:07.787 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-13 14:37:07.787 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-13 14:37:07.788 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-13 14:37:40.140 +02:00 [DBG] Login Url: /Account/Login
2020-08-13 14:37:40.142 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-13 14:37:40.143 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-13 14:37:40.143 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-13 14:37:40.143 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-13 14:37:40.144 +02:00 [DBG] Error Url: /home/error
2020-08-13 14:37:40.144 +02:00 [DBG] Error Id Parameter: errorId
2020-08-13 14:37:42.135 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 14:37:42.151 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 14:37:42.152 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 14:37:42.167 +02:00 [DBG] Start discovery request
2020-08-13 14:37:42.481 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 14:40:20.228 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-13 14:40:20.310 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-13 14:40:20.310 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-13 14:40:20.310 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-13 14:40:20.310 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-13 14:40:20.310 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-13 14:40:20.310 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-13 14:40:20.912 +02:00 [DBG] Login Url: /Account/Login
2020-08-13 14:40:20.915 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-13 14:40:20.915 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-13 14:40:20.915 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-13 14:40:20.915 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-13 14:40:20.915 +02:00 [DBG] Error Url: /home/error
2020-08-13 14:40:20.916 +02:00 [DBG] Error Id Parameter: errorId
2020-08-13 14:40:43.496 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Endpoint IdentityServer4.Quickstart.UI.GrantsController.Index (Listify.Identity) contains authorization metadata, but a middleware was not found that supports authorization.
Configure your application startup by adding app.UseAuthorization() inside the call to Configure(..) in the application startup code. The call to app.UseAuthorization() must appear between app.UseRouting() and app.UseEndpoints(...).
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.ThrowMissingAuthMiddlewareException(Endpoint endpoint)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-08-13 14:45:20.991 +02:00 [INF] Removing 0 grants
2020-08-13 14:45:21.117 +02:00 [INF] Removing 0 device flow codes
2020-08-13 14:45:49.116 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 14:45:49.271 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 14:45:49.272 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 14:45:49.283 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 14:45:49.319 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 14:45:49.320 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 14:45:49.369 +02:00 [DBG] Start discovery request
2020-08-13 14:45:49.902 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 14:45:51.278 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 14:45:51.292 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 14:45:51.293 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 14:45:51.295 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 14:45:51.301 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 14:45:51.301 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 14:45:51.303 +02:00 [DBG] Start key discovery request
2020-08-13 14:45:57.010 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-13 14:45:57.014 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-13 14:45:57.014 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-13 14:45:57.016 +02:00 [DBG] Start authorize request
2020-08-13 14:45:57.026 +02:00 [DBG] No user present in authorize request
2020-08-13 14:45:57.043 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 14:45:57.482 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 14:45:57.490 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 14:45:57.670 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 14:45:57.713 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 14:45:57.716 +02:00 [ERR] Invalid scope: ListifyWebAPI
2020-08-13 14:45:57.720 +02:00 [ERR] Request validation failed
2020-08-13 14:45:57.731 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles ListifyWebAPI","State":"cWJIWGIzM35DLmxXNHd5ZnJlR2FEemZ2X3NkczV4dH5jeXVkVklEdGl2VEhT","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"cWJIWGIzM35DLmxXNHd5ZnJlR2FEemZ2X3NkczV4dH5jeXVkVklEdGl2VEhT","redirect_uri":"http://localhost:4200","scope":"openid profile roles ListifyWebAPI","nonce":"cWJIWGIzM35DLmxXNHd5ZnJlR2FEemZ2X3NkczV4dH5jeXVkVklEdGl2VEhT"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 14:45:57.744 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid profile roles ListifyWebAPI","GrantType":"implicit","Error":"invalid_scope","ErrorDescription":"Invalid scope","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"8000003c-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-13T12:45:57.0000000Z","ProcessId":9920,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2020-08-13 14:46:23.583 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 14:46:23.598 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 14:46:23.599 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 14:46:23.602 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 14:46:23.604 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 14:46:23.605 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 14:46:23.605 +02:00 [DBG] Start key discovery request
2020-08-13 14:46:26.818 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 14:46:26.820 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 14:46:26.820 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 14:46:26.820 +02:00 [DBG] Start discovery request
2020-08-13 14:46:26.852 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 14:48:42.941 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-13 14:48:43.107 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-13 14:48:43.108 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-13 14:48:43.108 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-13 14:48:43.108 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-13 14:48:43.108 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-13 14:48:43.108 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-13 14:48:43.472 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 14:48:43.472 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 14:48:43.547 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 14:48:43.553 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 14:48:43.554 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 14:48:43.554 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 14:48:43.621 +02:00 [DBG] Login Url: /Account/Login
2020-08-13 14:48:43.621 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-13 14:48:43.621 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-13 14:48:43.621 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-13 14:48:43.621 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-13 14:48:43.621 +02:00 [DBG] Error Url: /home/error
2020-08-13 14:48:43.621 +02:00 [DBG] Error Id Parameter: errorId
2020-08-13 14:48:43.632 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 14:48:43.632 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 14:48:43.646 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 14:48:43.646 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 14:48:43.646 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 14:48:43.646 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 14:48:43.648 +02:00 [DBG] Start discovery request
2020-08-13 14:48:43.648 +02:00 [DBG] Start discovery request
2020-08-13 14:48:44.651 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 14:48:44.651 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 14:48:44.904 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 14:48:44.911 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 14:48:44.911 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 14:48:44.917 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 14:48:44.918 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 14:48:44.918 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 14:48:44.920 +02:00 [DBG] Start key discovery request
2020-08-13 14:48:55.320 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-13 14:48:55.330 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-13 14:48:55.331 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-13 14:48:55.334 +02:00 [DBG] Start authorize request
2020-08-13 14:48:55.341 +02:00 [DBG] No user present in authorize request
2020-08-13 14:48:55.343 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 14:48:56.022 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 14:48:56.079 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 14:48:56.163 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 14:48:56.244 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 14:48:56.257 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 14:48:56.271 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 14:48:56.275 +02:00 [ERR] Requested scope not allowed: listifyWebAPI
2020-08-13 14:48:56.278 +02:00 [ERR] Request validation failed
2020-08-13 14:48:56.290 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles listifyWebAPI","State":"VTVwa1JEc1FHdUFVbEQ4ZjQweDE1eGtlLnByc2hocVlYdGN3bmpMNC1FbmJ6","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"VTVwa1JEc1FHdUFVbEQ4ZjQweDE1eGtlLnByc2hocVlYdGN3bmpMNC1FbmJ6","redirect_uri":"http://localhost:4200","scope":"openid profile roles listifyWebAPI","nonce":"VTVwa1JEc1FHdUFVbEQ4ZjQweDE1eGtlLnByc2hocVlYdGN3bmpMNC1FbmJ6"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 14:48:56.305 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid profile roles listifyWebAPI","GrantType":"implicit","Error":"unauthorized_client","ErrorDescription":"Invalid scope for client","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"8000000e-0006-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-13T12:48:56.0000000Z","ProcessId":22204,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2020-08-13 14:49:21.225 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 14:49:21.239 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 14:49:21.239 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 14:49:21.239 +02:00 [DBG] Start discovery request
2020-08-13 14:49:21.255 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 14:50:16.336 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 14:50:16.366 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 14:50:16.367 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 14:50:16.368 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 14:50:16.369 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 14:50:16.369 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 14:50:16.369 +02:00 [DBG] Start discovery request
2020-08-13 14:50:16.382 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 14:50:16.628 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 14:50:16.639 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 14:50:16.640 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 14:50:16.642 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 14:50:16.644 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 14:50:16.645 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 14:50:16.646 +02:00 [DBG] Start key discovery request
2020-08-13 14:50:24.991 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 14:50:24.996 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 14:50:24.996 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 14:50:24.997 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 14:50:24.998 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 14:50:24.998 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 14:50:24.999 +02:00 [DBG] Start discovery request
2020-08-13 14:50:25.018 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 14:50:25.363 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 14:50:25.369 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 14:50:25.369 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 14:50:25.372 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 14:50:25.375 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 14:50:25.375 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 14:50:25.375 +02:00 [DBG] Start key discovery request
2020-08-13 14:50:29.362 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-13 14:50:29.364 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-13 14:50:29.364 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-13 14:50:29.364 +02:00 [DBG] Start authorize request
2020-08-13 14:50:29.364 +02:00 [DBG] No user present in authorize request
2020-08-13 14:50:29.364 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 14:50:29.406 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 14:50:29.406 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 14:50:29.414 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 14:50:29.430 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 14:50:29.438 +02:00 [ERR] offline_access is not allowed for this client: listify.webapp
2020-08-13 14:50:29.438 +02:00 [ERR] Request validation failed
2020-08-13 14:50:29.439 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles offline_access listifyWebAPI","State":"QzlTbUN5VFZ1V3g1RE12dzNUM1dZekhadExPa21VR00tVEE0MW8xVl9PanBl","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"QzlTbUN5VFZ1V3g1RE12dzNUM1dZekhadExPa21VR00tVEE0MW8xVl9PanBl","redirect_uri":"http://localhost:4200","scope":"openid profile roles offline_access listifyWebAPI","nonce":"QzlTbUN5VFZ1V3g1RE12dzNUM1dZekhadExPa21VR00tVEE0MW8xVl9PanBl"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 14:50:29.439 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid profile roles offline_access listifyWebAPI","GrantType":"implicit","Error":"unauthorized_client","ErrorDescription":"Invalid scope for client","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"80000016-0005-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-13T12:50:29.0000000Z","ProcessId":22204,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2020-08-13 14:51:04.171 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 14:51:04.185 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 14:51:04.193 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 14:51:04.194 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 14:51:04.195 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 14:51:04.195 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 14:51:04.195 +02:00 [DBG] Start discovery request
2020-08-13 14:51:04.209 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 14:51:04.449 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 14:51:04.455 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 14:51:04.455 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 14:51:04.456 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 14:51:04.457 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 14:51:04.457 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 14:51:04.457 +02:00 [DBG] Start key discovery request
2020-08-13 14:51:06.230 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 14:51:06.235 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 14:51:06.235 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 14:51:06.236 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 14:51:06.236 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 14:51:06.237 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 14:51:06.238 +02:00 [DBG] Start discovery request
2020-08-13 14:51:06.265 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 14:51:06.470 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 14:51:06.474 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 14:51:06.474 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 14:51:06.475 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 14:51:06.477 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 14:51:06.477 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 14:51:06.477 +02:00 [DBG] Start key discovery request
2020-08-13 14:51:07.951 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-13 14:51:07.957 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-13 14:51:07.957 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-13 14:51:07.957 +02:00 [DBG] Start authorize request
2020-08-13 14:51:07.958 +02:00 [DBG] No user present in authorize request
2020-08-13 14:51:07.958 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 14:51:07.990 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 14:51:07.990 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 14:51:07.996 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 14:51:08.010 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 14:51:08.014 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 14:51:08.017 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 14:51:08.017 +02:00 [ERR] Requested scope not allowed: listifyWebAPI
2020-08-13 14:51:08.017 +02:00 [ERR] Request validation failed
2020-08-13 14:51:08.017 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles listifyWebAPI","State":"UElrRnp4X2VGY3dmRUxCMzRrM0tOalc4eFNKSFExQktLa1A1SDBULmV4a19C","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"UElrRnp4X2VGY3dmRUxCMzRrM0tOalc4eFNKSFExQktLa1A1SDBULmV4a19C","redirect_uri":"http://localhost:4200","scope":"openid profile roles listifyWebAPI","nonce":"UElrRnp4X2VGY3dmRUxCMzRrM0tOalc4eFNKSFExQktLa1A1SDBULmV4a19C"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 14:51:08.018 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid profile roles listifyWebAPI","GrantType":"implicit","Error":"unauthorized_client","ErrorDescription":"Invalid scope for client","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"8000009f-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-13T12:51:08.0000000Z","ProcessId":22204,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2020-08-13 14:51:23.665 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 14:51:23.668 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 14:51:23.669 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 14:51:23.669 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 14:51:23.669 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 14:51:23.669 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 14:51:23.669 +02:00 [DBG] Start discovery request
2020-08-13 14:51:23.685 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 14:51:23.889 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 14:51:23.893 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 14:51:23.893 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 14:51:23.894 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 14:51:23.894 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 14:51:23.894 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 14:51:23.894 +02:00 [DBG] Start key discovery request
2020-08-13 14:53:43.649 +02:00 [INF] Removing 0 grants
2020-08-13 14:53:43.683 +02:00 [INF] Removing 0 device flow codes
2020-08-13 14:54:12.620 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 14:54:12.626 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 14:54:12.626 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 14:54:12.627 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 14:54:12.628 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 14:54:12.628 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 14:54:12.628 +02:00 [DBG] Start discovery request
2020-08-13 14:54:12.681 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 14:54:13.032 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 14:54:13.131 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 14:54:13.131 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 14:54:13.132 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 14:54:13.132 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 14:54:13.132 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 14:54:13.133 +02:00 [DBG] Start key discovery request
2020-08-13 14:54:15.954 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 14:54:15.958 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 14:54:15.958 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 14:54:15.959 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 14:54:15.959 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 14:54:15.960 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 14:54:15.960 +02:00 [DBG] Start discovery request
2020-08-13 14:54:15.976 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 14:54:16.364 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 14:54:16.379 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 14:54:16.379 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 14:54:16.380 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 14:54:16.380 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 14:54:16.380 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 14:54:16.380 +02:00 [DBG] Start key discovery request
2020-08-13 14:54:29.967 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 14:54:29.971 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 14:54:29.971 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 14:54:29.972 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 14:54:29.972 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 14:54:29.972 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 14:54:29.972 +02:00 [DBG] Start discovery request
2020-08-13 14:54:29.988 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 14:54:30.207 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 14:54:30.212 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 14:54:30.212 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 14:54:30.214 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 14:54:30.215 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 14:54:30.216 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 14:54:30.216 +02:00 [DBG] Start key discovery request
2020-08-13 14:57:53.714 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 14:57:53.717 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 14:57:53.717 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 14:57:53.718 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 14:57:53.718 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 14:57:53.718 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 14:57:53.718 +02:00 [DBG] Start discovery request
2020-08-13 14:57:53.729 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 14:57:54.007 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 14:57:54.011 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 14:57:54.011 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 14:57:54.011 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 14:57:54.011 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 14:57:54.011 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 14:57:54.012 +02:00 [DBG] Start key discovery request
2020-08-13 14:57:59.121 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-13 14:57:59.122 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-13 14:57:59.122 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-13 14:57:59.122 +02:00 [DBG] Start authorize request
2020-08-13 14:57:59.122 +02:00 [DBG] No user present in authorize request
2020-08-13 14:57:59.122 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 14:57:59.604 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 14:57:59.604 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 14:57:59.611 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 14:57:59.631 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 14:57:59.635 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 14:57:59.651 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 14:57:59.651 +02:00 [ERR] Requested scope not allowed: listifyWebAPI
2020-08-13 14:57:59.651 +02:00 [ERR] Request validation failed
2020-08-13 14:57:59.652 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles listifyWebAPI","State":"TDRPVURGLWxMM0tzeG1uUG4uQWdCaFJVUW1NLTlOamhFWHhCUXh4cmtXTU14","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"TDRPVURGLWxMM0tzeG1uUG4uQWdCaFJVUW1NLTlOamhFWHhCUXh4cmtXTU14","redirect_uri":"http://localhost:4200","scope":"openid profile roles listifyWebAPI","nonce":"TDRPVURGLWxMM0tzeG1uUG4uQWdCaFJVUW1NLTlOamhFWHhCUXh4cmtXTU14"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 14:57:59.652 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid profile roles listifyWebAPI","GrantType":"implicit","Error":"unauthorized_client","ErrorDescription":"Invalid scope for client","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"80000015-0006-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-13T12:57:59.0000000Z","ProcessId":22204,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2020-08-13 14:58:43.699 +02:00 [INF] Removing 0 grants
2020-08-13 14:58:43.703 +02:00 [INF] Removing 0 device flow codes
2020-08-13 15:00:21.088 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:00:21.124 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:00:21.124 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:00:21.124 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:00:21.125 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:00:21.125 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:00:21.125 +02:00 [DBG] Start discovery request
2020-08-13 15:00:21.158 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:00:21.373 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:00:21.378 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:00:21.380 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:00:21.381 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:00:21.381 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:00:21.394 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:00:21.394 +02:00 [DBG] Start key discovery request
2020-08-13 15:00:23.429 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:00:23.477 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:00:23.478 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:00:23.478 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:00:23.479 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:00:23.479 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:00:23.479 +02:00 [DBG] Start discovery request
2020-08-13 15:00:23.529 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:00:23.765 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:00:23.772 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:00:23.773 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:00:23.773 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:00:23.773 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:00:23.773 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:00:23.773 +02:00 [DBG] Start key discovery request
2020-08-13 15:00:24.610 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-13 15:00:24.611 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-13 15:00:24.611 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-13 15:00:24.611 +02:00 [DBG] Start authorize request
2020-08-13 15:00:24.611 +02:00 [DBG] No user present in authorize request
2020-08-13 15:00:24.611 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 15:00:24.966 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:00:24.967 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:00:25.024 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:00:25.045 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:00:25.051 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:00:25.068 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:00:25.068 +02:00 [ERR] Requested scope not allowed: listifyWebAPI
2020-08-13 15:00:25.069 +02:00 [ERR] Request validation failed
2020-08-13 15:00:25.069 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles listifyWebAPI","State":"RUFUM3EtMnhPMl9yOXBxVVAtU05ENFBYSkYtWnlfZzR1VWpEVXV6TGpZTVZ3","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"RUFUM3EtMnhPMl9yOXBxVVAtU05ENFBYSkYtWnlfZzR1VWpEVXV6TGpZTVZ3","redirect_uri":"http://localhost:4200","scope":"openid profile roles listifyWebAPI","nonce":"RUFUM3EtMnhPMl9yOXBxVVAtU05ENFBYSkYtWnlfZzR1VWpEVXV6TGpZTVZ3"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 15:00:25.070 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid profile roles listifyWebAPI","GrantType":"implicit","Error":"unauthorized_client","ErrorDescription":"Invalid scope for client","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"800000ab-0000-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-13T13:00:25.0000000Z","ProcessId":22204,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2020-08-13 15:00:29.784 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:00:29.788 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:00:29.788 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:00:29.789 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:00:29.789 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:00:30.079 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:00:30.080 +02:00 [DBG] Start discovery request
2020-08-13 15:00:30.102 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:00:30.144 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:00:30.147 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:00:30.147 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:00:30.147 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:00:30.148 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:00:30.148 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:00:30.148 +02:00 [DBG] Start key discovery request
2020-08-13 15:00:32.370 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:00:32.374 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:00:32.374 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:00:32.374 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:00:32.375 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:00:32.375 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:00:32.375 +02:00 [DBG] Start discovery request
2020-08-13 15:00:32.389 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:00:32.670 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:00:32.673 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:00:32.674 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:00:32.674 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:00:32.674 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:00:32.674 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:00:32.674 +02:00 [DBG] Start key discovery request
2020-08-13 15:00:34.517 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-13 15:00:34.517 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-13 15:00:34.518 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-13 15:00:34.518 +02:00 [DBG] Start authorize request
2020-08-13 15:00:34.518 +02:00 [DBG] No user present in authorize request
2020-08-13 15:00:34.518 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 15:00:34.550 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:00:34.550 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:00:34.556 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:00:34.576 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:00:34.580 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:00:34.584 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:00:34.584 +02:00 [ERR] Requested scope not allowed: listifyWebAPI
2020-08-13 15:00:34.584 +02:00 [ERR] Request validation failed
2020-08-13 15:00:34.585 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile roles listifyWebAPI","State":"elY1WGpoMU1JQkpqb2ZwUkY1Qm1Na0tzTHdrNVRLTVplbmZkYlRoRW5ZSWlh","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"elY1WGpoMU1JQkpqb2ZwUkY1Qm1Na0tzTHdrNVRLTVplbmZkYlRoRW5ZSWlh","redirect_uri":"http://localhost:4200","scope":"openid profile roles listifyWebAPI","nonce":"elY1WGpoMU1JQkpqb2ZwUkY1Qm1Na0tzTHdrNVRLTVplbmZkYlRoRW5ZSWlh"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 15:00:34.585 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid profile roles listifyWebAPI","GrantType":"implicit","Error":"unauthorized_client","ErrorDescription":"Invalid scope for client","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"80000017-0007-fa00-b63f-84710c7967bb","TimeStamp":"2020-08-13T13:00:34.0000000Z","ProcessId":22204,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2020-08-13 15:00:50.053 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:00:50.057 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:00:50.057 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:00:50.058 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:00:50.058 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:00:50.058 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:00:50.058 +02:00 [DBG] Start discovery request
2020-08-13 15:00:50.072 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:00:50.352 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:00:50.356 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:00:50.357 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:00:50.357 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:00:50.357 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:00:50.357 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:00:50.358 +02:00 [DBG] Start key discovery request
2020-08-13 15:00:52.806 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:00:52.806 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:00:52.806 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:00:52.806 +02:00 [DBG] Start discovery request
2020-08-13 15:00:52.833 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:00:56.379 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:00:56.717 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:00:56.717 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:00:56.717 +02:00 [DBG] Start key discovery request
2020-08-13 15:01:11.746 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-13 15:01:11.747 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-13 15:01:11.747 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-13 15:01:11.747 +02:00 [DBG] Start authorize request
2020-08-13 15:01:11.748 +02:00 [DBG] No user present in authorize request
2020-08-13 15:01:11.748 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 15:01:11.825 +02:00 [ERR] client_id is missing or too long
{"ClientId":null,"ClientName":null,"RedirectUri":null,"AllowedRedirectUris":null,"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 15:01:11.825 +02:00 [ERR] Request validation failed
2020-08-13 15:01:11.825 +02:00 [INF] {"ClientId":null,"ClientName":null,"RedirectUri":null,"AllowedRedirectUris":null,"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 15:01:11.826 +02:00 [INF] {"ClientId":null,"ClientName":null,"RedirectUri":null,"Endpoint":"Authorize","SubjectId":null,"Scopes":"","GrantType":null,"Error":"invalid_request","ErrorDescription":"Invalid client_id","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"8000001d-0007-fa00-b63f-84710c7967bb","TimeStamp":"2020-08-13T13:01:11.0000000Z","ProcessId":22204,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2020-08-13 15:01:51.048 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:01:51.063 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:01:51.063 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:01:51.080 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:01:51.080 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:01:51.080 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:01:51.080 +02:00 [DBG] Start discovery request
2020-08-13 15:01:51.103 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:01:51.309 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:01:51.315 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:01:51.315 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:01:51.315 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:01:51.315 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:01:51.315 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:01:51.315 +02:00 [DBG] Start key discovery request
2020-08-13 15:02:14.592 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-13 15:02:14.592 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-13 15:02:14.592 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-13 15:02:14.593 +02:00 [DBG] Start authorize request
2020-08-13 15:02:14.593 +02:00 [DBG] No user present in authorize request
2020-08-13 15:02:14.593 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 15:02:14.644 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:02:14.644 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:02:14.651 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:02:14.671 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:02:14.678 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:02:14.690 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:02:14.690 +02:00 [ERR] Requested scope not allowed: listifyWebAPI
2020-08-13 15:02:14.690 +02:00 [ERR] Request validation failed
2020-08-13 15:02:14.690 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"eTIzTy1MfmNzNUwzejI5Sk1OMk1mcFNvakltSVQ5VU94MDlhMlBpU29hSmRD","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"eTIzTy1MfmNzNUwzejI5Sk1OMk1mcFNvakltSVQ5VU94MDlhMlBpU29hSmRD","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"eTIzTy1MfmNzNUwzejI5Sk1OMk1mcFNvakltSVQ5VU94MDlhMlBpU29hSmRD"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 15:02:14.691 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":null,"Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Error":"unauthorized_client","ErrorDescription":"Invalid scope for client","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"8000001f-0007-fa00-b63f-84710c7967bb","TimeStamp":"2020-08-13T13:02:14.0000000Z","ProcessId":22204,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2020-08-13 15:03:43.725 +02:00 [INF] Removing 0 grants
2020-08-13 15:03:44.326 +02:00 [INF] Removing 0 device flow codes
2020-08-13 15:04:50.870 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:04:50.873 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:04:50.873 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:04:50.873 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:04:50.873 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:04:50.874 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:04:50.874 +02:00 [DBG] Start discovery request
2020-08-13 15:04:50.898 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:04:51.114 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:04:51.116 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:04:51.116 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:04:51.116 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:04:51.116 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:04:51.116 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:04:51.116 +02:00 [DBG] Start key discovery request
2020-08-13 15:04:57.017 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-13 15:04:57.017 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-13 15:04:57.017 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-13 15:04:57.017 +02:00 [DBG] Start authorize request
2020-08-13 15:04:57.017 +02:00 [DBG] No user present in authorize request
2020-08-13 15:04:57.017 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 15:04:57.045 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:04:57.046 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:04:57.050 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:04:57.063 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:04:57.063 +02:00 [ERR] offline_access is not allowed for this client: listify.webapp
2020-08-13 15:04:57.063 +02:00 [ERR] Request validation failed
2020-08-13 15:04:57.063 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI offline_access","State":"TkpHNDNxMU9PYnphVEV-YTJ2VUdLdjl-cXJ5bGpBUlpFdTAzS1F2c0h5QnBF","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"TkpHNDNxMU9PYnphVEV-YTJ2VUdLdjl-cXJ5bGpBUlpFdTAzS1F2c0h5QnBF","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI offline_access","nonce":"TkpHNDNxMU9PYnphVEV-YTJ2VUdLdjl-cXJ5bGpBUlpFdTAzS1F2c0h5QnBF"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 15:04:57.064 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":null,"Scopes":"profile openid roles listifyWebAPI offline_access","GrantType":"implicit","Error":"unauthorized_client","ErrorDescription":"Invalid scope for client","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"80000020-0006-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-13T13:04:57.0000000Z","ProcessId":22204,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2020-08-13 15:07:03.938 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:07:03.993 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:07:03.993 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:07:04.041 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:07:04.041 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:07:04.041 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:07:04.041 +02:00 [DBG] Start discovery request
2020-08-13 15:07:04.065 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:07:04.199 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:07:04.239 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:07:04.239 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:07:04.239 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:07:04.239 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:07:04.239 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:07:04.239 +02:00 [DBG] Start key discovery request
2020-08-13 15:08:12.557 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-13 15:08:12.558 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-13 15:08:12.558 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-13 15:08:12.558 +02:00 [DBG] Start authorize request
2020-08-13 15:08:12.558 +02:00 [DBG] No user present in authorize request
2020-08-13 15:08:12.558 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 15:08:12.855 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:08:12.855 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:08:12.860 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:08:12.872 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:08:12.874 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:08:12.889 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:08:12.889 +02:00 [ERR] Requested scope not allowed: listifyWebAPI
2020-08-13 15:08:12.889 +02:00 [ERR] Request validation failed
2020-08-13 15:08:12.889 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"endQYnJOcHFSa1FsSXZXYUcxS1NFWXlNc3p6QVBlclFxWWRqSEpiNm5ERFpC","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"endQYnJOcHFSa1FsSXZXYUcxS1NFWXlNc3p6QVBlclFxWWRqSEpiNm5ERFpC","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"endQYnJOcHFSa1FsSXZXYUcxS1NFWXlNc3p6QVBlclFxWWRqSEpiNm5ERFpC"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 15:08:12.890 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":null,"Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Error":"unauthorized_client","ErrorDescription":"Invalid scope for client","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"80000067-0001-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-13T13:08:12.0000000Z","ProcessId":22204,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2020-08-13 15:08:44.386 +02:00 [INF] Removing 0 grants
2020-08-13 15:08:44.390 +02:00 [INF] Removing 0 device flow codes
2020-08-13 15:10:32.841 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-13 15:10:32.962 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-13 15:10:32.962 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-13 15:10:32.962 +02:00 [DBG] Start authorize request
2020-08-13 15:10:32.963 +02:00 [DBG] No user present in authorize request
2020-08-13 15:10:32.963 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 15:10:33.217 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:10:33.217 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:10:33.224 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:10:33.314 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:10:33.402 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:10:33.414 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:10:33.414 +02:00 [ERR] Requested scope not allowed: listifyWebAPI
2020-08-13 15:10:33.414 +02:00 [ERR] Request validation failed
2020-08-13 15:10:33.415 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"endQYnJOcHFSa1FsSXZXYUcxS1NFWXlNc3p6QVBlclFxWWRqSEpiNm5ERFpC","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"response_type":"id_token","client_id":"listify.webapp","state":"endQYnJOcHFSa1FsSXZXYUcxS1NFWXlNc3p6QVBlclFxWWRqSEpiNm5ERFpC","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"endQYnJOcHFSa1FsSXZXYUcxS1NFWXlNc3p6QVBlclFxWWRqSEpiNm5ERFpC"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 15:10:33.416 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":null,"Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Error":"unauthorized_client","ErrorDescription":"Invalid scope for client","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"80000048-0004-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-13T13:10:33.0000000Z","ProcessId":22204,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2020-08-13 15:11:23.573 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-13 15:11:23.573 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-13 15:11:23.573 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-13 15:11:23.573 +02:00 [DBG] Start authorize request
2020-08-13 15:11:23.573 +02:00 [DBG] No user present in authorize request
2020-08-13 15:11:23.573 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 15:11:25.657 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:11:25.657 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:11:25.661 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:11:25.753 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:11:25.757 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:11:25.770 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:11:25.770 +02:00 [ERR] Requested scope not allowed: listifyWebAPI
2020-08-13 15:11:25.770 +02:00 [ERR] Request validation failed
2020-08-13 15:11:25.770 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"endQYnJOcHFSa1FsSXZXYUcxS1NFWXlNc3p6QVBlclFxWWRqSEpiNm5ERFpC","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"response_type":"id_token","client_id":"listify.webapp","state":"endQYnJOcHFSa1FsSXZXYUcxS1NFWXlNc3p6QVBlclFxWWRqSEpiNm5ERFpC","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"endQYnJOcHFSa1FsSXZXYUcxS1NFWXlNc3p6QVBlclFxWWRqSEpiNm5ERFpC"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 15:11:25.771 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":null,"Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Error":"unauthorized_client","ErrorDescription":"Invalid scope for client","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"8000006b-0001-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-13T13:11:25.0000000Z","ProcessId":22204,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2020-08-13 15:11:50.858 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:11:50.858 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:11:50.858 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:11:50.858 +02:00 [DBG] Start discovery request
2020-08-13 15:11:50.884 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:13:44.444 +02:00 [INF] Removing 0 grants
2020-08-13 15:13:44.447 +02:00 [INF] Removing 0 device flow codes
2020-08-13 15:18:45.984 +02:00 [INF] Removing 0 grants
2020-08-13 15:18:45.987 +02:00 [INF] Removing 0 device flow codes
2020-08-13 15:22:59.030 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-13 15:22:59.063 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-13 15:22:59.063 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-13 15:22:59.063 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-13 15:22:59.063 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-13 15:22:59.063 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-13 15:22:59.063 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-13 15:22:59.367 +02:00 [DBG] Login Url: /Account/Login
2020-08-13 15:22:59.368 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-13 15:22:59.368 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-13 15:22:59.368 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-13 15:22:59.369 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-13 15:22:59.369 +02:00 [DBG] Error Url: /home/error
2020-08-13 15:22:59.369 +02:00 [DBG] Error Id Parameter: errorId
2020-08-13 15:23:15.752 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:23:15.838 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:23:15.843 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:23:15.848 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:23:15.857 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:23:15.857 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:23:15.859 +02:00 [DBG] Start discovery request
2020-08-13 15:23:16.753 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:23:16.941 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:23:16.945 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:23:16.945 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:23:16.954 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:23:16.955 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:23:16.955 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:23:16.957 +02:00 [DBG] Start key discovery request
2020-08-13 15:23:17.868 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-13 15:23:17.874 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-13 15:23:17.874 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-13 15:23:17.877 +02:00 [DBG] Start authorize request
2020-08-13 15:23:17.884 +02:00 [DBG] No user present in authorize request
2020-08-13 15:23:17.886 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 15:23:18.206 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:23:18.214 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:23:18.363 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:23:18.420 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:23:18.434 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:23:18.449 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:23:18.456 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-13 15:23:18.470 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"b1JJSW5jc1RIdklSV01rWHZ6eVdHVDdHX0hveTBtY1dRMERRb3RpMmt4Skd6","UiLocales":null,"Nonce":"b1JJSW5jc1RIdklSV01rWHZ6eVdHVDdHX0hveTBtY1dRMERRb3RpMmt4Skd6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"b1JJSW5jc1RIdklSV01rWHZ6eVdHVDdHX0hveTBtY1dRMERRb3RpMmt4Skd6","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"b1JJSW5jc1RIdklSV01rWHZ6eVdHVDdHX0hveTBtY1dRMERRb3RpMmt4Skd6"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 15:23:18.519 +02:00 [INF] Showing login: User is not authenticated
2020-08-13 15:23:18.645 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 15:23:18.762 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:23:18.762 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:23:18.768 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:23:18.787 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:23:18.793 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:23:18.810 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:23:18.811 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-13 15:23:18.852 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:23:18.852 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:23:39.120 +02:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2020-08-13 15:23:39.315 +02:00 [WRN] Invalid password for user 598738a9-a451-4183-a345-2bcf44f4ae50.
2020-08-13 15:23:39.316 +02:00 [WRN] User 598738a9-a451-4183-a345-2bcf44f4ae50 failed to provide the correct password.
2020-08-13 15:23:39.578 +02:00 [INF] {"Username":"aboelkassem","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"80000020-0005-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-13T13:23:39.0000000Z","ProcessId":20604,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginFailureEvent"}
2020-08-13 15:23:39.582 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 15:23:39.640 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:23:39.641 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:23:39.652 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:23:39.685 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:23:39.688 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:23:39.690 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:23:39.691 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-13 15:23:39.725 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:23:39.725 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:23:47.266 +02:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2020-08-13 15:23:47.729 +02:00 [DBG] Augmenting SignInContext
2020-08-13 15:23:47.731 +02:00 [DBG] Adding idp claim with value: local
2020-08-13 15:23:47.731 +02:00 [DBG] Adding auth_time claim with value: 1597325027
2020-08-13 15:23:47.748 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-13 15:23:47.754 +02:00 [INF] {"Username":"aboelkassem","Provider":null,"ProviderUserId":null,"SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","DisplayName":"aboelkassem","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000021-0005-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-13T13:23:47.0000000Z","ProcessId":20604,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-13 15:23:47.774 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-13 15:23:47.775 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-13 15:23:47.775 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-13 15:23:47.778 +02:00 [DBG] Start authorize callback request
2020-08-13 15:23:47.781 +02:00 [DBG] User in authorize request: 598738a9-a451-4183-a345-2bcf44f4ae50
2020-08-13 15:23:47.781 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 15:23:47.810 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:23:47.811 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:23:47.815 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:23:47.830 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:23:47.832 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:23:47.834 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:23:47.834 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-13 15:23:47.834 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"b1JJSW5jc1RIdklSV01rWHZ6eVdHVDdHX0hveTBtY1dRMERRb3RpMmt4Skd6","UiLocales":null,"Nonce":"b1JJSW5jc1RIdklSV01rWHZ6eVdHVDdHX0hveTBtY1dRMERRb3RpMmt4Skd6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"DNH0M5yJgK5Y_b1rsLUxqQ","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"b1JJSW5jc1RIdklSV01rWHZ6eVdHVDdHX0hveTBtY1dRMERRb3RpMmt4Skd6","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"b1JJSW5jc1RIdklSV01rWHZ6eVdHVDdHX0hveTBtY1dRMERRb3RpMmt4Skd6"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 15:23:47.861 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-13 15:23:47.864 +02:00 [DBG] Creating Implicit Flow response.
2020-08-13 15:23:47.951 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-13 15:23:47.952 +02:00 [DBG] Getting claims for access token for subject: 598738a9-a451-4183-a345-2bcf44f4ae50
2020-08-13 15:23:48.935 +02:00 [DBG] Getting claims for identity token for subject: 598738a9-a451-4183-a345-2bcf44f4ae50 and client: listify.webapp
2020-08-13 15:23:48.935 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-13 15:23:48.945 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Ao0g","$type":"Token"},{"TokenType":"access_token","TokenValue":"****pkLQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000022-0005-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-13T13:23:48.0000000Z","ProcessId":20604,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-13 15:23:48.946 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"b1JJSW5jc1RIdklSV01rWHZ6eVdHVDdHX0hveTBtY1dRMERRb3RpMmt4Skd6","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-13 15:23:48.981 +02:00 [DBG] Augmenting SignInContext
2020-08-13 15:23:48.983 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-13 15:23:49.410 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:23:49.418 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:23:49.419 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:23:49.420 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:23:49.422 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:23:49.423 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:23:49.424 +02:00 [DBG] Start discovery request
2020-08-13 15:23:49.468 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:23:50.186 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:23:50.198 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:23:50.198 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:23:50.199 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:23:50.201 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:23:50.201 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:23:50.201 +02:00 [DBG] Start key discovery request
2020-08-13 15:24:08.176 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-13 15:24:08.178 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-13 15:24:08.178 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-13 15:24:08.179 +02:00 [DBG] Start authorize request
2020-08-13 15:24:08.179 +02:00 [DBG] User in authorize request: 598738a9-a451-4183-a345-2bcf44f4ae50
2020-08-13 15:24:08.179 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 15:24:08.211 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:24:08.211 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:24:08.216 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:24:08.230 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:24:08.232 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:24:08.234 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:24:08.235 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-13 15:24:08.235 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"fnZrcVpvRlJwdHV5dmZDYklaaH50WUtaNW45c2FFZDFHQmszWkk3dUh3TlRQ","UiLocales":null,"Nonce":"fnZrcVpvRlJwdHV5dmZDYklaaH50WUtaNW45c2FFZDFHQmszWkk3dUh3TlRQ","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"DNH0M5yJgK5Y_b1rsLUxqQ","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"fnZrcVpvRlJwdHV5dmZDYklaaH50WUtaNW45c2FFZDFHQmszWkk3dUh3TlRQ","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"fnZrcVpvRlJwdHV5dmZDYklaaH50WUtaNW45c2FFZDFHQmszWkk3dUh3TlRQ"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 15:24:08.239 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-13 15:24:08.239 +02:00 [DBG] Creating Implicit Flow response.
2020-08-13 15:24:08.239 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-13 15:24:08.239 +02:00 [DBG] Getting claims for access token for subject: 598738a9-a451-4183-a345-2bcf44f4ae50
2020-08-13 15:24:08.248 +02:00 [DBG] Getting claims for identity token for subject: 598738a9-a451-4183-a345-2bcf44f4ae50 and client: listify.webapp
2020-08-13 15:24:08.248 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-13 15:24:08.250 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****jdUQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****-InQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000023-0005-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-13T13:24:08.0000000Z","ProcessId":20604,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-13 15:24:08.250 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"fnZrcVpvRlJwdHV5dmZDYklaaH50WUtaNW45c2FFZDFHQmszWkk3dUh3TlRQ","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-13 15:24:10.590 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:24:10.601 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:24:10.601 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:24:10.602 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:24:10.604 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:24:10.604 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:24:10.604 +02:00 [DBG] Start discovery request
2020-08-13 15:24:10.620 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:24:10.986 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:24:10.993 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:24:10.994 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:24:10.996 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:24:11.002 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:24:11.002 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:24:11.002 +02:00 [DBG] Start key discovery request
2020-08-13 15:28:00.262 +02:00 [INF] Removing 0 grants
2020-08-13 15:28:00.277 +02:00 [INF] Removing 0 device flow codes
2020-08-13 15:28:11.285 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:28:11.293 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:28:11.293 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:28:11.301 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:28:11.306 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:28:11.306 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:28:11.306 +02:00 [DBG] Start discovery request
2020-08-13 15:28:11.350 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:28:11.558 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:28:11.573 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:28:11.573 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:28:11.574 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:28:11.574 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:28:11.575 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:28:11.575 +02:00 [DBG] Start key discovery request
2020-08-13 15:30:18.565 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:30:18.840 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:30:18.840 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:30:18.919 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:30:18.920 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:30:18.920 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:30:18.921 +02:00 [DBG] Start discovery request
2020-08-13 15:30:18.968 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:30:19.008 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:30:19.012 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:30:19.012 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:30:19.013 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:30:19.013 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:30:19.013 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:30:19.013 +02:00 [DBG] Start key discovery request
2020-08-13 15:30:26.808 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-13 15:30:26.891 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-13 15:30:26.891 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-13 15:30:26.891 +02:00 [DBG] Start authorize request
2020-08-13 15:30:26.894 +02:00 [DBG] User in authorize request: 598738a9-a451-4183-a345-2bcf44f4ae50
2020-08-13 15:30:26.894 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 15:30:27.020 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:30:27.021 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:30:27.059 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:30:27.091 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:30:27.096 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:30:27.110 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:30:27.111 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-13 15:30:27.113 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"aWt3eVBEMmkybmhPa0hlVzNJdjhKNnBZX2EtZFRWUVBuM0g4ZUFVZjJBY2RV","UiLocales":null,"Nonce":"aWt3eVBEMmkybmhPa0hlVzNJdjhKNnBZX2EtZFRWUVBuM0g4ZUFVZjJBY2RV","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"DNH0M5yJgK5Y_b1rsLUxqQ","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"aWt3eVBEMmkybmhPa0hlVzNJdjhKNnBZX2EtZFRWUVBuM0g4ZUFVZjJBY2RV","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"aWt3eVBEMmkybmhPa0hlVzNJdjhKNnBZX2EtZFRWUVBuM0g4ZUFVZjJBY2RV"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 15:30:27.215 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-13 15:30:27.215 +02:00 [DBG] Creating Implicit Flow response.
2020-08-13 15:30:27.215 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-13 15:30:27.215 +02:00 [DBG] Getting claims for access token for subject: 598738a9-a451-4183-a345-2bcf44f4ae50
2020-08-13 15:30:27.234 +02:00 [DBG] Getting claims for identity token for subject: 598738a9-a451-4183-a345-2bcf44f4ae50 and client: listify.webapp
2020-08-13 15:30:27.234 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-13 15:30:27.239 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****o-IA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****KwwQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000004a-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-13T13:30:27.0000000Z","ProcessId":20604,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-13 15:30:27.240 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"aWt3eVBEMmkybmhPa0hlVzNJdjhKNnBZX2EtZFRWUVBuM0g4ZUFVZjJBY2RV","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-13 15:30:27.757 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:30:27.761 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:30:27.761 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:30:27.762 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:30:27.762 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:30:27.762 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:30:27.762 +02:00 [DBG] Start discovery request
2020-08-13 15:30:27.776 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:30:28.203 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:30:28.215 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:30:28.216 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:30:28.216 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:30:28.217 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:30:28.217 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:30:28.217 +02:00 [DBG] Start key discovery request
2020-08-13 15:30:56.607 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:30:56.626 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:30:56.626 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:30:56.627 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:30:56.628 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:30:56.628 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:30:56.628 +02:00 [DBG] Start discovery request
2020-08-13 15:30:56.661 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:30:56.880 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:30:56.894 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:30:56.894 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:30:56.895 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:30:56.895 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:30:56.895 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:30:56.895 +02:00 [DBG] Start key discovery request
2020-08-13 15:30:59.092 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-13 15:30:59.092 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-13 15:30:59.092 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-13 15:30:59.092 +02:00 [DBG] Start authorize request
2020-08-13 15:30:59.093 +02:00 [DBG] No user present in authorize request
2020-08-13 15:30:59.093 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 15:30:59.131 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:30:59.131 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:30:59.138 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:30:59.292 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:30:59.315 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:30:59.332 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:30:59.333 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-13 15:30:59.333 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"enhjdlZqR28uaHk2cE5qUFJJLlJZNDBlSHBicjJKN2hzZzdOMVN0S3dDNnpO","UiLocales":null,"Nonce":"enhjdlZqR28uaHk2cE5qUFJJLlJZNDBlSHBicjJKN2hzZzdOMVN0S3dDNnpO","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"enhjdlZqR28uaHk2cE5qUFJJLlJZNDBlSHBicjJKN2hzZzdOMVN0S3dDNnpO","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"enhjdlZqR28uaHk2cE5qUFJJLlJZNDBlSHBicjJKN2hzZzdOMVN0S3dDNnpO"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 15:30:59.402 +02:00 [INF] Showing login: User is not authenticated
2020-08-13 15:30:59.984 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 15:31:00.017 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:31:00.017 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:31:00.023 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:31:00.040 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:31:00.045 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:31:00.059 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:31:00.059 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-13 15:31:00.087 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:31:00.087 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:31:08.244 +02:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2020-08-13 15:31:08.345 +02:00 [DBG] Augmenting SignInContext
2020-08-13 15:31:08.345 +02:00 [DBG] Adding idp claim with value: local
2020-08-13 15:31:08.345 +02:00 [DBG] Adding auth_time claim with value: 1597325468
2020-08-13 15:31:08.348 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-13 15:31:08.352 +02:00 [INF] {"Username":"aboelkassem","Provider":null,"ProviderUserId":null,"SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","DisplayName":"aboelkassem","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"8000004e-0004-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-13T13:31:08.0000000Z","ProcessId":20604,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-13 15:31:08.481 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-13 15:31:08.482 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-13 15:31:08.482 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-13 15:31:08.482 +02:00 [DBG] Start authorize callback request
2020-08-13 15:31:08.482 +02:00 [DBG] User in authorize request: 598738a9-a451-4183-a345-2bcf44f4ae50
2020-08-13 15:31:08.483 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 15:31:08.516 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:31:08.516 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:31:08.522 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:31:08.549 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:31:08.554 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:31:08.569 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:31:08.570 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-13 15:31:08.570 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"enhjdlZqR28uaHk2cE5qUFJJLlJZNDBlSHBicjJKN2hzZzdOMVN0S3dDNnpO","UiLocales":null,"Nonce":"enhjdlZqR28uaHk2cE5qUFJJLlJZNDBlSHBicjJKN2hzZzdOMVN0S3dDNnpO","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"MJT53s2KzxEF6-y6q-ajeA","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"enhjdlZqR28uaHk2cE5qUFJJLlJZNDBlSHBicjJKN2hzZzdOMVN0S3dDNnpO","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"enhjdlZqR28uaHk2cE5qUFJJLlJZNDBlSHBicjJKN2hzZzdOMVN0S3dDNnpO"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 15:31:08.574 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-13 15:31:08.574 +02:00 [DBG] Creating Implicit Flow response.
2020-08-13 15:31:08.574 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-13 15:31:08.574 +02:00 [DBG] Getting claims for access token for subject: 598738a9-a451-4183-a345-2bcf44f4ae50
2020-08-13 15:31:08.583 +02:00 [DBG] Getting claims for identity token for subject: 598738a9-a451-4183-a345-2bcf44f4ae50 and client: listify.webapp
2020-08-13 15:31:08.584 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-13 15:31:08.586 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****b2IA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****gKKA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000004f-0004-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-13T13:31:08.0000000Z","ProcessId":20604,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-13 15:31:08.586 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"enhjdlZqR28uaHk2cE5qUFJJLlJZNDBlSHBicjJKN2hzZzdOMVN0S3dDNnpO","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-13 15:31:08.587 +02:00 [DBG] Augmenting SignInContext
2020-08-13 15:31:08.588 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-13 15:31:09.047 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:31:09.052 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:31:09.053 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:31:09.053 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:31:09.053 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:31:09.053 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:31:09.053 +02:00 [DBG] Start discovery request
2020-08-13 15:31:09.068 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:31:09.275 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:31:09.287 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:31:09.287 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:31:09.288 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:31:09.288 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:31:09.288 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:31:09.289 +02:00 [DBG] Start key discovery request
2020-08-13 15:31:19.895 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:31:19.900 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:31:19.900 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:31:19.901 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:31:19.901 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:31:19.901 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:31:19.901 +02:00 [DBG] Start discovery request
2020-08-13 15:31:19.917 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:31:20.346 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:31:20.353 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:31:20.353 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:31:20.354 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:31:20.354 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:31:20.354 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:31:20.354 +02:00 [DBG] Start key discovery request
2020-08-13 15:31:44.667 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:31:52.568 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:31:52.568 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:31:52.568 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:31:52.569 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:31:52.569 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:31:52.569 +02:00 [DBG] Start discovery request
2020-08-13 15:31:52.580 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:31:52.862 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:31:52.865 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:31:52.865 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:31:52.865 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:31:52.866 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:31:52.866 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:31:52.866 +02:00 [DBG] Start key discovery request
2020-08-13 15:32:03.067 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:32:03.071 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:32:03.071 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:32:03.072 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:32:03.072 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:32:03.072 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:32:03.072 +02:00 [DBG] Start discovery request
2020-08-13 15:32:03.086 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:32:03.357 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:32:03.396 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:32:03.396 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:32:03.396 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:32:03.397 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:32:03.397 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:32:03.397 +02:00 [DBG] Start key discovery request
2020-08-13 15:33:00.314 +02:00 [INF] Removing 0 grants
2020-08-13 15:33:00.317 +02:00 [INF] Removing 0 device flow codes
2020-08-13 15:34:37.316 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:34:37.828 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:34:37.828 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:34:37.829 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:34:37.861 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:34:37.861 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:34:37.861 +02:00 [DBG] Start discovery request
2020-08-13 15:34:38.064 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:34:38.072 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:34:38.075 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:34:38.075 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:34:38.076 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:34:38.076 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:34:38.076 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:34:38.076 +02:00 [DBG] Start key discovery request
2020-08-13 15:35:13.283 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:35:15.404 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:35:15.404 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:35:15.405 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:35:15.405 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:35:15.405 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:35:15.405 +02:00 [DBG] Start discovery request
2020-08-13 15:35:16.152 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:35:16.225 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:35:16.234 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:35:16.234 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:35:16.235 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:35:16.281 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:35:16.281 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:35:16.281 +02:00 [DBG] Start key discovery request
2020-08-13 15:35:56.157 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:35:56.312 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:35:56.312 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:35:56.368 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:35:56.369 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:35:56.369 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:35:56.369 +02:00 [DBG] Start discovery request
2020-08-13 15:35:56.419 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:35:56.576 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:35:56.606 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:35:56.606 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:35:56.607 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:35:56.607 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:35:56.608 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:35:56.608 +02:00 [DBG] Start key discovery request
2020-08-13 15:36:17.312 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:36:17.328 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:36:17.328 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:36:17.329 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:36:17.329 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:36:17.329 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:36:17.329 +02:00 [DBG] Start discovery request
2020-08-13 15:36:17.364 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:36:17.458 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:36:17.469 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:36:17.469 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:36:17.469 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:36:17.469 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:36:17.469 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:36:17.469 +02:00 [DBG] Start key discovery request
2020-08-13 15:38:00.353 +02:00 [INF] Removing 0 grants
2020-08-13 15:38:00.362 +02:00 [INF] Removing 0 device flow codes
2020-08-13 15:41:09.986 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:41:10.267 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:41:10.267 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:41:10.267 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:41:10.268 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:41:10.268 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:41:10.268 +02:00 [DBG] Start discovery request
2020-08-13 15:41:10.367 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:41:11.746 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:41:11.749 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:41:11.749 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:41:11.750 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:41:11.750 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:41:11.750 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:41:11.750 +02:00 [DBG] Start key discovery request
2020-08-13 15:41:14.102 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:41:14.104 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:41:14.104 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:41:14.104 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:41:14.104 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:41:14.104 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:41:14.105 +02:00 [DBG] Start discovery request
2020-08-13 15:41:14.158 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:41:14.240 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:41:14.242 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:41:14.243 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:41:14.243 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:41:14.243 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:41:14.243 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:41:14.243 +02:00 [DBG] Start key discovery request
2020-08-13 15:41:35.865 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:41:35.877 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:41:35.877 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:41:35.877 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:41:35.885 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:41:35.885 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:41:35.886 +02:00 [DBG] Start discovery request
2020-08-13 15:41:36.078 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:41:36.196 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:41:36.198 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:41:36.198 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:41:36.198 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:41:36.199 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:41:36.199 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:41:36.199 +02:00 [DBG] Start key discovery request
2020-08-13 15:41:38.188 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-13 15:41:38.191 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-13 15:41:38.191 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-13 15:41:38.191 +02:00 [DBG] Start authorize request
2020-08-13 15:41:38.192 +02:00 [DBG] No user present in authorize request
2020-08-13 15:41:38.192 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 15:41:38.260 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:41:38.260 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:41:38.266 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:41:38.321 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:41:38.324 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:41:38.375 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:41:38.375 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-13 15:41:38.376 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"eUljV0ZHcUE3RUZnZmdPMk1zUm1NRVpQYVZnRER3QlJ6UDJiR2gxamhzdHhJ","UiLocales":null,"Nonce":"eUljV0ZHcUE3RUZnZmdPMk1zUm1NRVpQYVZnRER3QlJ6UDJiR2gxamhzdHhJ","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"eUljV0ZHcUE3RUZnZmdPMk1zUm1NRVpQYVZnRER3QlJ6UDJiR2gxamhzdHhJ","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"eUljV0ZHcUE3RUZnZmdPMk1zUm1NRVpQYVZnRER3QlJ6UDJiR2gxamhzdHhJ"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 15:41:38.376 +02:00 [INF] Showing login: User is not authenticated
2020-08-13 15:41:38.540 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 15:41:38.592 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:41:38.592 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:41:38.595 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:41:38.596 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:41:38.599 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:41:38.668 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:41:38.668 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-13 15:41:38.716 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:41:38.717 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:41:46.955 +02:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2020-08-13 15:41:47.557 +02:00 [DBG] Augmenting SignInContext
2020-08-13 15:41:47.559 +02:00 [DBG] Adding idp claim with value: local
2020-08-13 15:41:47.559 +02:00 [DBG] Adding auth_time claim with value: 1597326107
2020-08-13 15:41:47.560 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-13 15:41:47.563 +02:00 [INF] {"Username":"aboelkassem","Provider":null,"ProviderUserId":null,"SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","DisplayName":"aboelkassem","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"8000002d-0003-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-13T13:41:47.0000000Z","ProcessId":20604,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-13 15:41:47.573 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-13 15:41:47.578 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-13 15:41:47.578 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-13 15:41:47.579 +02:00 [DBG] Start authorize callback request
2020-08-13 15:41:47.579 +02:00 [DBG] User in authorize request: 598738a9-a451-4183-a345-2bcf44f4ae50
2020-08-13 15:41:47.579 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 15:41:47.854 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:41:47.854 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:41:47.869 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:41:48.246 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:41:48.250 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:41:48.253 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:41:48.253 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-13 15:41:48.253 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"eUljV0ZHcUE3RUZnZmdPMk1zUm1NRVpQYVZnRER3QlJ6UDJiR2gxamhzdHhJ","UiLocales":null,"Nonce":"eUljV0ZHcUE3RUZnZmdPMk1zUm1NRVpQYVZnRER3QlJ6UDJiR2gxamhzdHhJ","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"_jNj5nlfD6fhJyKE9tHqsQ","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"eUljV0ZHcUE3RUZnZmdPMk1zUm1NRVpQYVZnRER3QlJ6UDJiR2gxamhzdHhJ","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"eUljV0ZHcUE3RUZnZmdPMk1zUm1NRVpQYVZnRER3QlJ6UDJiR2gxamhzdHhJ"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 15:41:48.379 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-13 15:41:48.379 +02:00 [DBG] Creating Implicit Flow response.
2020-08-13 15:41:48.379 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-13 15:41:48.379 +02:00 [DBG] Getting claims for access token for subject: 598738a9-a451-4183-a345-2bcf44f4ae50
2020-08-13 15:41:48.390 +02:00 [DBG] Getting claims for identity token for subject: 598738a9-a451-4183-a345-2bcf44f4ae50 and client: listify.webapp
2020-08-13 15:41:48.390 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-13 15:41:48.392 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****njeQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****n3PQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000002e-0003-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-13T13:41:48.0000000Z","ProcessId":20604,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-13 15:41:48.393 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"eUljV0ZHcUE3RUZnZmdPMk1zUm1NRVpQYVZnRER3QlJ6UDJiR2gxamhzdHhJ","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-13 15:41:48.394 +02:00 [DBG] Augmenting SignInContext
2020-08-13 15:41:48.394 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-13 15:41:48.804 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:41:48.807 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:41:48.807 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:41:48.807 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:41:48.807 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:41:48.807 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:41:48.807 +02:00 [DBG] Start discovery request
2020-08-13 15:41:48.819 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:41:49.044 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:41:49.047 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:41:49.048 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:41:49.048 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:41:49.048 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:41:49.048 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:41:49.048 +02:00 [DBG] Start key discovery request
2020-08-13 15:42:14.211 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:42:14.217 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:42:14.217 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:42:14.229 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:42:14.268 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:42:14.268 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:42:14.268 +02:00 [DBG] Start discovery request
2020-08-13 15:42:14.343 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:42:14.580 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:42:14.584 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:42:14.584 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:42:14.584 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:42:14.585 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:42:14.585 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:42:14.585 +02:00 [DBG] Start key discovery request
2020-08-13 15:42:37.822 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:42:37.828 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:42:37.828 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:42:37.830 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:42:37.830 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:42:37.830 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:42:37.830 +02:00 [DBG] Start discovery request
2020-08-13 15:42:38.720 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:42:38.989 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:42:38.991 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:42:38.992 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:42:38.992 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:42:38.992 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:42:38.992 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:42:38.992 +02:00 [DBG] Start key discovery request
2020-08-13 15:42:41.928 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-08-13 15:42:42.915 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-08-13 15:42:42.916 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-08-13 15:42:42.918 +02:00 [DBG] Processing signout request for 598738a9-a451-4183-a345-2bcf44f4ae50
2020-08-13 15:42:43.235 +02:00 [DBG] Start end session request validation
2020-08-13 15:42:43.238 +02:00 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:4200"},"$type":"EndSessionRequestValidationLog"}
2020-08-13 15:42:43.238 +02:00 [DBG] Success validating end session request from null
2020-08-13 15:42:59.801 +02:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2020-08-13 15:43:00.030 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-13 15:43:00.037 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-13 15:43:00.038 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-13 15:43:00.040 +02:00 [INF] {"SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","DisplayName":"Mohamed Abdelrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"80000032-0003-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-13T13:43:00.0000000Z","ProcessId":20604,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-13 15:43:15.586 +02:00 [INF] Removing 0 grants
2020-08-13 15:43:15.604 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Value cannot be null or empty. (Parameter 'url')
   at Microsoft.AspNetCore.Mvc.ControllerBase.Redirect(String url)
   at IdentityServer4.Quickstart.UI.AccountController.Logout(LogoutInputModel model) in E:\programming\Projects\Listify\Listify.Backend\Listify.Identity\Quickstart\Account\AccountController.cs:line 257
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-08-13 15:43:15.647 +02:00 [INF] Removing 0 device flow codes
2020-08-13 15:43:27.218 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:43:27.222 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:43:27.222 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:43:27.222 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:43:27.222 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:43:27.222 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:43:27.222 +02:00 [DBG] Start discovery request
2020-08-13 15:43:27.299 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:43:27.591 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:43:27.645 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:43:27.645 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:43:27.646 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:43:27.646 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:43:27.646 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:43:27.646 +02:00 [DBG] Start key discovery request
2020-08-13 15:43:28.527 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:43:28.529 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:43:28.550 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:43:28.550 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:43:28.550 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:43:28.550 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:43:28.550 +02:00 [DBG] Start discovery request
2020-08-13 15:43:28.619 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:43:28.907 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:43:28.971 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:43:28.971 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:43:28.971 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:43:28.972 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:43:28.972 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:43:28.972 +02:00 [DBG] Start key discovery request
2020-08-13 15:43:30.746 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-08-13 15:43:30.747 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-08-13 15:43:30.747 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-08-13 15:43:30.747 +02:00 [DBG] Processing signout request for 598738a9-a451-4183-a345-2bcf44f4ae50
2020-08-13 15:43:30.747 +02:00 [DBG] Start end session request validation
2020-08-13 15:43:30.747 +02:00 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:4200"},"$type":"EndSessionRequestValidationLog"}
2020-08-13 15:43:30.748 +02:00 [DBG] Success validating end session request from null
2020-08-13 15:43:51.696 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:43:51.699 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:43:51.700 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:43:51.700 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:43:51.700 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:43:51.700 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:43:51.700 +02:00 [DBG] Start discovery request
2020-08-13 15:43:52.194 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:43:52.230 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:43:52.232 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:43:52.233 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:43:52.233 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:43:52.233 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:43:52.233 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:43:52.233 +02:00 [DBG] Start key discovery request
2020-08-13 15:43:57.786 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:43:57.790 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:43:57.790 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:43:57.790 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:43:57.791 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:43:57.791 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:43:57.791 +02:00 [DBG] Start discovery request
2020-08-13 15:43:57.818 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:43:58.074 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:43:58.139 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:43:58.140 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:43:58.140 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:43:58.140 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:43:58.140 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:43:58.140 +02:00 [DBG] Start key discovery request
2020-08-13 15:48:16.677 +02:00 [INF] Removing 0 grants
2020-08-13 15:48:16.834 +02:00 [INF] Removing 0 device flow codes
2020-08-13 15:50:27.209 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:50:27.272 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:50:27.272 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:50:27.272 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:50:27.308 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:50:27.317 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:50:27.317 +02:00 [DBG] Start discovery request
2020-08-13 15:50:27.343 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:50:27.860 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:50:27.865 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:50:27.865 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:50:27.996 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:50:27.996 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:50:27.996 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:50:27.996 +02:00 [DBG] Start key discovery request
2020-08-13 15:52:03.456 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:52:03.490 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:52:03.490 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:52:03.507 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:52:03.507 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:52:03.507 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:52:03.507 +02:00 [DBG] Start discovery request
2020-08-13 15:52:03.577 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:52:03.743 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:52:03.746 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:52:03.746 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:52:03.747 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:52:03.782 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:52:03.782 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:52:03.782 +02:00 [DBG] Start key discovery request
2020-08-13 15:52:11.051 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:52:11.088 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:52:11.088 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:52:11.089 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:52:11.091 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:52:11.092 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:52:11.092 +02:00 [DBG] Start discovery request
2020-08-13 15:52:11.279 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:52:11.543 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:52:11.573 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:52:11.573 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:52:11.573 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:52:11.574 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:52:11.574 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:52:11.574 +02:00 [DBG] Start key discovery request
2020-08-13 15:52:16.566 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:52:16.671 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:52:16.671 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:52:16.671 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:52:16.672 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:52:16.672 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:52:16.672 +02:00 [DBG] Start discovery request
2020-08-13 15:52:16.702 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:52:16.832 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:52:16.840 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:52:16.840 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:52:16.840 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:52:16.840 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:52:16.840 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:52:16.840 +02:00 [DBG] Start key discovery request
2020-08-13 15:52:19.550 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:52:19.554 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:52:19.554 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:52:19.554 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:52:19.561 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:52:19.561 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:52:19.561 +02:00 [DBG] Start discovery request
2020-08-13 15:52:19.573 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:52:19.758 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:52:19.763 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:52:19.763 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:52:19.763 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:52:19.764 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:52:19.764 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:52:19.764 +02:00 [DBG] Start key discovery request
2020-08-13 15:52:23.550 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-13 15:52:23.550 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-13 15:52:23.550 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-13 15:52:23.550 +02:00 [DBG] Start authorize request
2020-08-13 15:52:23.551 +02:00 [DBG] User in authorize request: 598738a9-a451-4183-a345-2bcf44f4ae50
2020-08-13 15:52:23.551 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 15:52:23.623 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:52:23.623 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:52:23.629 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:52:23.644 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:52:23.647 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:52:23.649 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:52:23.649 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-13 15:52:23.650 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"ZzEtRERRTnJpd2xCV1JmSUFXSmd6QW9SekNhTXQ5QnN2OWxBb2tLUTNMMHhU","UiLocales":null,"Nonce":"ZzEtRERRTnJpd2xCV1JmSUFXSmd6QW9SekNhTXQ5QnN2OWxBb2tLUTNMMHhU","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"_jNj5nlfD6fhJyKE9tHqsQ","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"ZzEtRERRTnJpd2xCV1JmSUFXSmd6QW9SekNhTXQ5QnN2OWxBb2tLUTNMMHhU","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"ZzEtRERRTnJpd2xCV1JmSUFXSmd6QW9SekNhTXQ5QnN2OWxBb2tLUTNMMHhU"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 15:52:23.740 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-13 15:52:23.740 +02:00 [DBG] Creating Implicit Flow response.
2020-08-13 15:52:23.740 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-13 15:52:23.740 +02:00 [DBG] Getting claims for access token for subject: 598738a9-a451-4183-a345-2bcf44f4ae50
2020-08-13 15:52:23.820 +02:00 [DBG] Getting claims for identity token for subject: 598738a9-a451-4183-a345-2bcf44f4ae50 and client: listify.webapp
2020-08-13 15:52:23.820 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-13 15:52:23.823 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****2FEA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****9Wpw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000051-0004-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-13T13:52:23.0000000Z","ProcessId":20604,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-13 15:52:23.824 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"ZzEtRERRTnJpd2xCV1JmSUFXSmd6QW9SekNhTXQ5QnN2OWxBb2tLUTNMMHhU","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-13 15:52:24.132 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:52:24.135 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:52:24.135 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:52:24.136 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:52:24.136 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:52:24.136 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:52:24.136 +02:00 [DBG] Start discovery request
2020-08-13 15:52:24.172 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:52:24.450 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:52:24.491 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:52:24.492 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:52:24.493 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:52:24.493 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:52:24.493 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:52:24.493 +02:00 [DBG] Start key discovery request
2020-08-13 15:53:16.861 +02:00 [INF] Removing 0 grants
2020-08-13 15:53:16.897 +02:00 [INF] Removing 0 device flow codes
2020-08-13 15:55:54.205 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:55:54.403 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:55:54.403 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:55:54.403 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:55:54.405 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:55:54.405 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:55:54.405 +02:00 [DBG] Start discovery request
2020-08-13 15:55:54.453 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:55:54.589 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:55:54.591 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:55:54.593 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:55:54.605 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:55:54.605 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:55:54.605 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:55:54.605 +02:00 [DBG] Start key discovery request
2020-08-13 15:56:05.537 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:56:05.540 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:56:05.540 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:56:05.540 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:56:05.540 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:56:05.541 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:56:05.541 +02:00 [DBG] Start discovery request
2020-08-13 15:56:05.553 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:56:05.720 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:56:05.724 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:56:05.724 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:56:05.724 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:56:05.725 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:56:05.725 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:56:05.725 +02:00 [DBG] Start key discovery request
2020-08-13 15:56:08.114 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:56:08.118 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:56:08.118 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:56:08.118 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:56:08.119 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:56:08.119 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:56:08.119 +02:00 [DBG] Start discovery request
2020-08-13 15:56:08.132 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:56:08.354 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:56:08.359 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:56:08.359 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:56:08.359 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:56:08.360 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:56:08.360 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:56:08.360 +02:00 [DBG] Start key discovery request
2020-08-13 15:56:10.820 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-13 15:56:10.821 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-13 15:56:10.821 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-13 15:56:10.821 +02:00 [DBG] Start authorize request
2020-08-13 15:56:10.821 +02:00 [DBG] No user present in authorize request
2020-08-13 15:56:10.821 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 15:56:11.280 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:56:11.281 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:56:11.286 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:56:11.574 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:56:11.582 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:56:11.595 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:56:11.647 +02:00 [ERR] Requests for id_token response type only must not include resource scopes
2020-08-13 15:56:11.718 +02:00 [ERR] Request validation failed
2020-08-13 15:56:11.718 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"aVVCajFRSFFSa25xRnE1QS5oOERRTkljdDZBTXZlb05xM1g3RFJ6d01HV0Jk","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"response_type":"id_token","client_id":"listify.webapp","state":"aVVCajFRSFFSa25xRnE1QS5oOERRTkljdDZBTXZlb05xM1g3RFJ6d01HV0Jk","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"aVVCajFRSFFSa25xRnE1QS5oOERRTkljdDZBTXZlb05xM1g3RFJ6d01HV0Jk"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 15:56:11.720 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":null,"Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Error":"invalid_scope","ErrorDescription":"Invalid scope for response type","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"80000096-0001-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-13T13:56:11.0000000Z","ProcessId":20604,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2020-08-13 15:56:27.136 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:56:27.139 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:56:27.139 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:56:27.140 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:56:27.140 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:56:27.140 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:56:27.140 +02:00 [DBG] Start discovery request
2020-08-13 15:56:27.151 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:56:27.337 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:56:27.339 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:56:27.339 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:56:27.340 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:56:27.340 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:56:27.340 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:56:27.340 +02:00 [DBG] Start key discovery request
2020-08-13 15:56:28.649 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:56:28.653 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:56:28.653 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:56:28.654 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:56:28.654 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:56:28.654 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:56:28.654 +02:00 [DBG] Start discovery request
2020-08-13 15:56:28.670 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:56:28.878 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:56:28.884 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:56:28.884 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:56:28.884 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:56:28.885 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:56:28.885 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:56:28.885 +02:00 [DBG] Start key discovery request
2020-08-13 15:56:30.730 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-13 15:56:30.730 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-13 15:56:30.730 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-13 15:56:30.730 +02:00 [DBG] Start authorize request
2020-08-13 15:56:30.730 +02:00 [DBG] No user present in authorize request
2020-08-13 15:56:30.731 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 15:56:30.760 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:56:30.760 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:56:30.765 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:56:31.016 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:56:31.023 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:56:31.037 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:56:31.037 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-13 15:56:31.038 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"cTZrRDJOMzBNWnFlZTdUWmZ-YkhxZ292aXdOdWFGMmNHVWRXVWZFVHlaY1BU","UiLocales":null,"Nonce":"cTZrRDJOMzBNWnFlZTdUWmZ-YkhxZ292aXdOdWFGMmNHVWRXVWZFVHlaY1BU","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"cTZrRDJOMzBNWnFlZTdUWmZ-YkhxZ292aXdOdWFGMmNHVWRXVWZFVHlaY1BU","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"cTZrRDJOMzBNWnFlZTdUWmZ-YkhxZ292aXdOdWFGMmNHVWRXVWZFVHlaY1BU"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 15:56:31.038 +02:00 [INF] Showing login: User is not authenticated
2020-08-13 15:56:31.064 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 15:56:31.122 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:56:31.122 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:56:31.127 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:56:31.224 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:56:31.229 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:56:31.230 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:56:31.283 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-13 15:56:31.384 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:56:31.384 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:56:41.367 +02:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2020-08-13 15:56:41.420 +02:00 [DBG] Augmenting SignInContext
2020-08-13 15:56:41.420 +02:00 [DBG] Adding idp claim with value: local
2020-08-13 15:56:41.420 +02:00 [DBG] Adding auth_time claim with value: 1597327001
2020-08-13 15:56:41.421 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-13 15:56:41.446 +02:00 [INF] {"Username":"aboelkassem","Provider":null,"ProviderUserId":null,"SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","DisplayName":"aboelkassem","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000064-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-13T13:56:41.0000000Z","ProcessId":20604,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-13 15:56:41.485 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-13 15:56:41.485 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-13 15:56:41.486 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-13 15:56:41.486 +02:00 [DBG] Start authorize callback request
2020-08-13 15:56:41.486 +02:00 [DBG] User in authorize request: 598738a9-a451-4183-a345-2bcf44f4ae50
2020-08-13 15:56:41.486 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 15:56:41.516 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:56:41.516 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:56:41.544 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:56:41.588 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:56:41.657 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:56:41.784 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:56:41.785 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-13 15:56:41.785 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"cTZrRDJOMzBNWnFlZTdUWmZ-YkhxZ292aXdOdWFGMmNHVWRXVWZFVHlaY1BU","UiLocales":null,"Nonce":"cTZrRDJOMzBNWnFlZTdUWmZ-YkhxZ292aXdOdWFGMmNHVWRXVWZFVHlaY1BU","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"eONldokaRKfxFcm_mu28bA","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"cTZrRDJOMzBNWnFlZTdUWmZ-YkhxZ292aXdOdWFGMmNHVWRXVWZFVHlaY1BU","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"cTZrRDJOMzBNWnFlZTdUWmZ-YkhxZ292aXdOdWFGMmNHVWRXVWZFVHlaY1BU"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 15:56:41.835 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-13 15:56:41.896 +02:00 [DBG] Creating Implicit Flow response.
2020-08-13 15:56:41.896 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-13 15:56:41.896 +02:00 [DBG] Getting claims for access token for subject: 598738a9-a451-4183-a345-2bcf44f4ae50
2020-08-13 15:56:41.903 +02:00 [DBG] Getting claims for identity token for subject: 598738a9-a451-4183-a345-2bcf44f4ae50 and client: listify.webapp
2020-08-13 15:56:41.903 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-13 15:56:41.905 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****xXUQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****bFRA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000065-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-13T13:56:41.0000000Z","ProcessId":20604,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-13 15:56:41.905 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"cTZrRDJOMzBNWnFlZTdUWmZ-YkhxZ292aXdOdWFGMmNHVWRXVWZFVHlaY1BU","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-13 15:56:41.905 +02:00 [DBG] Augmenting SignInContext
2020-08-13 15:56:41.906 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-13 15:56:42.267 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:56:42.270 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:56:42.270 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:56:42.270 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:56:42.271 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:56:42.271 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:56:42.271 +02:00 [DBG] Start discovery request
2020-08-13 15:56:42.317 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:56:42.564 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:56:42.605 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:56:42.605 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:56:42.605 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:56:42.605 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:56:42.605 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:56:42.605 +02:00 [DBG] Start key discovery request
2020-08-13 15:57:20.538 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:57:20.824 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:57:20.838 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:57:20.838 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:57:20.890 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:57:20.891 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:57:20.891 +02:00 [DBG] Start discovery request
2020-08-13 15:57:20.929 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:57:21.027 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:57:21.029 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:57:21.030 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:57:21.030 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:57:21.089 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:57:21.089 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:57:21.089 +02:00 [DBG] Start key discovery request
2020-08-13 15:57:28.770 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:57:28.772 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:57:28.772 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:57:28.772 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:57:28.773 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:57:28.773 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:57:28.773 +02:00 [DBG] Start discovery request
2020-08-13 15:57:28.777 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:57:28.964 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:57:28.967 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:57:28.967 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:57:28.967 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:57:28.967 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:57:28.967 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:57:28.967 +02:00 [DBG] Start key discovery request
2020-08-13 15:57:29.896 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-13 15:57:29.897 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-13 15:57:29.897 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-13 15:57:29.897 +02:00 [DBG] Start authorize request
2020-08-13 15:57:29.897 +02:00 [DBG] No user present in authorize request
2020-08-13 15:57:29.897 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 15:57:30.036 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:57:30.036 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:57:30.078 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:57:30.154 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:57:30.156 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:57:30.174 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:57:30.174 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-13 15:57:30.175 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"TzIwNmJYUWJNMzRhV3hYc2hFQllOQUVMRXQ1MXd2QU81OTNsUVI1YkdEYlhk","UiLocales":null,"Nonce":"TzIwNmJYUWJNMzRhV3hYc2hFQllOQUVMRXQ1MXd2QU81OTNsUVI1YkdEYlhk","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"TzIwNmJYUWJNMzRhV3hYc2hFQllOQUVMRXQ1MXd2QU81OTNsUVI1YkdEYlhk","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"TzIwNmJYUWJNMzRhV3hYc2hFQllOQUVMRXQ1MXd2QU81OTNsUVI1YkdEYlhk"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 15:57:30.175 +02:00 [INF] Showing login: User is not authenticated
2020-08-13 15:57:30.370 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 15:57:30.385 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:57:30.385 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:57:30.388 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:57:30.390 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:57:30.394 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:57:30.396 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:57:30.396 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-13 15:57:30.406 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:57:30.406 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:57:36.056 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-13 15:57:40.110 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-13 15:57:42.024 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"8000006a-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-13T13:57:42.0000000Z","ProcessId":20604,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-13 15:57:42.070 +02:00 [DBG] Augmenting SignInContext
2020-08-13 15:57:42.070 +02:00 [DBG] Adding amr claim with value: external
2020-08-13 15:57:42.070 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-13 15:57:42.071 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-13 15:57:42.079 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-13 15:57:42.079 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-13 15:57:42.079 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-13 15:57:42.079 +02:00 [DBG] Start authorize callback request
2020-08-13 15:57:42.079 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-13 15:57:42.079 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 15:57:42.106 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:57:42.106 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:57:42.110 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:57:42.121 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:57:42.123 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:57:42.124 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:57:42.125 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-13 15:57:42.125 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"TzIwNmJYUWJNMzRhV3hYc2hFQllOQUVMRXQ1MXd2QU81OTNsUVI1YkdEYlhk","UiLocales":null,"Nonce":"TzIwNmJYUWJNMzRhV3hYc2hFQllOQUVMRXQ1MXd2QU81OTNsUVI1YkdEYlhk","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"So8wZqlB1fuzSsugClu2MQ","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"TzIwNmJYUWJNMzRhV3hYc2hFQllOQUVMRXQ1MXd2QU81OTNsUVI1YkdEYlhk","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"TzIwNmJYUWJNMzRhV3hYc2hFQllOQUVMRXQ1MXd2QU81OTNsUVI1YkdEYlhk"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 15:57:42.127 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-13 15:57:42.128 +02:00 [DBG] Creating Implicit Flow response.
2020-08-13 15:57:42.128 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-13 15:57:42.155 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-13 15:57:42.161 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-13 15:57:42.161 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-13 15:57:42.163 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****aU_w","$type":"Token"},{"TokenType":"access_token","TokenValue":"****GgEQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000006b-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-13T13:57:42.0000000Z","ProcessId":20604,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-13 15:57:42.163 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"TzIwNmJYUWJNMzRhV3hYc2hFQllOQUVMRXQ1MXd2QU81OTNsUVI1YkdEYlhk","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-13 15:57:42.163 +02:00 [DBG] Augmenting SignInContext
2020-08-13 15:57:42.163 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-13 15:57:42.444 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:57:42.447 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:57:42.447 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:57:42.447 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:57:42.448 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:57:42.448 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:57:42.448 +02:00 [DBG] Start discovery request
2020-08-13 15:57:42.458 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:57:42.665 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:57:42.668 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:57:42.668 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:57:42.668 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:57:42.668 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:57:42.668 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:57:42.669 +02:00 [DBG] Start key discovery request
2020-08-13 15:57:50.119 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-13 15:57:50.120 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-13 15:57:50.120 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-13 15:57:50.120 +02:00 [DBG] Start authorize request
2020-08-13 15:57:50.120 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-13 15:57:50.120 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 15:57:50.156 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:57:50.157 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:57:50.166 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:57:50.186 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:57:50.190 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:57:50.210 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:57:50.210 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-13 15:57:50.210 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"THcxV2ZyanMyTEdIS3ZVXzlENURxcXNKN0hnYlhnOHQzMlAwZEZGdmdvT1Vy","UiLocales":null,"Nonce":"THcxV2ZyanMyTEdIS3ZVXzlENURxcXNKN0hnYlhnOHQzMlAwZEZGdmdvT1Vy","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"So8wZqlB1fuzSsugClu2MQ","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"THcxV2ZyanMyTEdIS3ZVXzlENURxcXNKN0hnYlhnOHQzMlAwZEZGdmdvT1Vy","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"THcxV2ZyanMyTEdIS3ZVXzlENURxcXNKN0hnYlhnOHQzMlAwZEZGdmdvT1Vy"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 15:57:50.217 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-13 15:57:50.217 +02:00 [DBG] Creating Implicit Flow response.
2020-08-13 15:57:50.217 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-13 15:57:50.217 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-13 15:57:50.224 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-13 15:57:50.224 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-13 15:57:50.225 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****JitA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****HwEw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000006c-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-13T13:57:50.0000000Z","ProcessId":20604,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-13 15:57:50.225 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"THcxV2ZyanMyTEdIS3ZVXzlENURxcXNKN0hnYlhnOHQzMlAwZEZGdmdvT1Vy","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-13 15:57:50.563 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:57:50.568 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:57:50.568 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:57:50.568 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:57:50.581 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:57:50.581 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:57:50.581 +02:00 [DBG] Start discovery request
2020-08-13 15:57:50.633 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:57:50.907 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:57:50.911 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:57:50.911 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:57:50.911 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:57:50.912 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:57:50.912 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:57:50.912 +02:00 [DBG] Start key discovery request
2020-08-13 15:57:57.996 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:57:57.999 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:57:58.000 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:57:58.000 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:57:58.000 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:57:58.000 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:57:58.000 +02:00 [DBG] Start discovery request
2020-08-13 15:57:58.017 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:57:58.417 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:57:58.428 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:57:58.428 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:57:58.428 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:57:58.429 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:57:58.429 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:57:58.429 +02:00 [DBG] Start key discovery request
2020-08-13 15:58:16.901 +02:00 [INF] Removing 0 grants
2020-08-13 15:58:16.905 +02:00 [INF] Removing 0 device flow codes
2020-08-13 15:58:51.244 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:58:51.249 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:58:51.249 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:58:51.249 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:58:51.250 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:58:51.250 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:58:51.250 +02:00 [DBG] Start discovery request
2020-08-13 15:58:51.564 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:58:51.583 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:58:51.620 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:58:51.620 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:58:51.620 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:58:51.621 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:58:51.621 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:58:51.621 +02:00 [DBG] Start key discovery request
2020-08-13 15:59:06.342 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:59:06.346 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:59:06.346 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:59:06.346 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:59:06.346 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:59:06.346 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:59:06.346 +02:00 [DBG] Start discovery request
2020-08-13 15:59:06.360 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:59:06.550 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:59:06.552 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:59:06.553 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:59:06.553 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:59:06.553 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:59:06.553 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:59:06.553 +02:00 [DBG] Start key discovery request
2020-08-13 15:59:12.604 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:59:12.606 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:59:12.606 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:59:12.606 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:59:12.606 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:59:12.606 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:59:12.606 +02:00 [DBG] Start discovery request
2020-08-13 15:59:12.610 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:59:13.230 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:59:13.233 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:59:13.233 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:59:13.233 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:59:13.234 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:59:13.234 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:59:13.234 +02:00 [DBG] Start key discovery request
2020-08-13 15:59:13.690 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-13 15:59:13.690 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-13 15:59:13.690 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-13 15:59:13.690 +02:00 [DBG] Start authorize request
2020-08-13 15:59:13.691 +02:00 [DBG] No user present in authorize request
2020-08-13 15:59:13.691 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 15:59:13.718 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:59:13.719 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:59:13.722 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:59:13.735 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:59:13.737 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:59:13.738 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:59:13.739 +02:00 [ERR] Requests for token response type only must include resource scopes, but no identity scopes.
2020-08-13 15:59:13.739 +02:00 [ERR] Request validation failed
2020-08-13 15:59:13.739 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"a1hYcX5CaTJpWGF1OUhJcWJyN0VTQjFrTH5ZMDJkOFZGc1NkWk1iaX5weVBM","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"response_type":"token","client_id":"listify.webapp","state":"a1hYcX5CaTJpWGF1OUhJcWJyN0VTQjFrTH5ZMDJkOFZGc1NkWk1iaX5weVBM","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 15:59:13.739 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":null,"Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Error":"invalid_scope","ErrorDescription":"Invalid scope for response type","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"8000006d-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-13T13:59:13.0000000Z","ProcessId":20604,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2020-08-13 15:59:16.367 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:59:16.369 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:59:16.370 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:59:16.370 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:59:16.370 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:59:16.370 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:59:16.370 +02:00 [DBG] Start discovery request
2020-08-13 15:59:16.374 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:59:16.590 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:59:16.593 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:59:16.593 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:59:16.593 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:59:16.593 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:59:16.593 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:59:16.593 +02:00 [DBG] Start key discovery request
2020-08-13 15:59:20.079 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:59:20.081 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:59:20.081 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:59:20.081 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:59:20.081 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:59:20.081 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:59:20.081 +02:00 [DBG] Start discovery request
2020-08-13 15:59:20.088 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:59:20.494 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:59:20.516 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:59:20.517 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:59:20.517 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:59:20.517 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:59:20.518 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:59:20.518 +02:00 [DBG] Start key discovery request
2020-08-13 15:59:22.385 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-13 15:59:22.385 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-13 15:59:22.386 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-13 15:59:22.386 +02:00 [DBG] Start authorize request
2020-08-13 15:59:22.386 +02:00 [DBG] No user present in authorize request
2020-08-13 15:59:22.386 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 15:59:22.423 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:59:22.423 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:59:22.428 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:59:22.440 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:59:22.442 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:59:22.450 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:59:22.451 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-13 15:59:22.451 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"SENNNFEwYnBZZ09MWlpRSTRXV19rWk0zUE5zNXRwVy5ER1d0aElpb0Rsby5l","UiLocales":null,"Nonce":"SENNNFEwYnBZZ09MWlpRSTRXV19rWk0zUE5zNXRwVy5ER1d0aElpb0Rsby5l","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"SENNNFEwYnBZZ09MWlpRSTRXV19rWk0zUE5zNXRwVy5ER1d0aElpb0Rsby5l","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"SENNNFEwYnBZZ09MWlpRSTRXV19rWk0zUE5zNXRwVy5ER1d0aElpb0Rsby5l"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 15:59:22.451 +02:00 [INF] Showing login: User is not authenticated
2020-08-13 15:59:22.477 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 15:59:22.508 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:59:22.508 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:59:22.550 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:59:22.566 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:59:22.573 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:59:22.592 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:59:22.592 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-13 15:59:22.671 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:59:22.671 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:59:23.731 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-13 15:59:24.737 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-13 15:59:24.987 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000073-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-13T13:59:24.0000000Z","ProcessId":20604,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-13 15:59:24.987 +02:00 [DBG] Augmenting SignInContext
2020-08-13 15:59:24.987 +02:00 [DBG] Adding amr claim with value: external
2020-08-13 15:59:24.988 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-13 15:59:24.988 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-13 15:59:24.997 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-13 15:59:24.997 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-13 15:59:24.997 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-13 15:59:24.997 +02:00 [DBG] Start authorize callback request
2020-08-13 15:59:24.997 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-13 15:59:24.997 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 15:59:25.045 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 15:59:25.045 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 15:59:25.049 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:59:25.064 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:59:25.069 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 15:59:25.120 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 15:59:25.120 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-13 15:59:25.120 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"SENNNFEwYnBZZ09MWlpRSTRXV19rWk0zUE5zNXRwVy5ER1d0aElpb0Rsby5l","UiLocales":null,"Nonce":"SENNNFEwYnBZZ09MWlpRSTRXV19rWk0zUE5zNXRwVy5ER1d0aElpb0Rsby5l","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"OE9RspK6pigBDQyzVGXaKg","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"SENNNFEwYnBZZ09MWlpRSTRXV19rWk0zUE5zNXRwVy5ER1d0aElpb0Rsby5l","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"SENNNFEwYnBZZ09MWlpRSTRXV19rWk0zUE5zNXRwVy5ER1d0aElpb0Rsby5l"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 15:59:25.151 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-13 15:59:25.151 +02:00 [DBG] Creating Implicit Flow response.
2020-08-13 15:59:25.151 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-13 15:59:25.151 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-13 15:59:25.159 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-13 15:59:25.160 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-13 15:59:25.161 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****pAow","$type":"Token"},{"TokenType":"access_token","TokenValue":"****HSJQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000074-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-13T13:59:25.0000000Z","ProcessId":20604,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-13 15:59:25.161 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"SENNNFEwYnBZZ09MWlpRSTRXV19rWk0zUE5zNXRwVy5ER1d0aElpb0Rsby5l","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-13 15:59:25.162 +02:00 [DBG] Augmenting SignInContext
2020-08-13 15:59:25.162 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-13 15:59:25.476 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 15:59:25.479 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:59:25.479 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:59:25.479 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 15:59:25.480 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 15:59:25.480 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 15:59:25.480 +02:00 [DBG] Start discovery request
2020-08-13 15:59:25.493 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 15:59:25.671 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 15:59:25.674 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 15:59:25.674 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 15:59:25.674 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 15:59:25.675 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 15:59:25.675 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 15:59:25.675 +02:00 [DBG] Start key discovery request
2020-08-13 16:00:16.444 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 16:00:16.566 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:00:16.566 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:00:16.566 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 16:00:16.568 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 16:00:16.568 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 16:00:16.568 +02:00 [DBG] Start discovery request
2020-08-13 16:00:17.106 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 16:00:17.352 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 16:00:17.356 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:00:17.356 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:00:17.357 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 16:00:17.357 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 16:00:17.357 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 16:00:17.357 +02:00 [DBG] Start key discovery request
2020-08-13 16:00:22.790 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 16:00:22.794 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:00:22.794 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:00:22.794 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 16:00:22.794 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 16:00:22.794 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 16:00:22.794 +02:00 [DBG] Start discovery request
2020-08-13 16:00:22.805 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 16:00:23.056 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 16:00:23.060 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:00:23.060 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:00:23.060 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 16:00:23.060 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 16:00:23.060 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 16:00:23.060 +02:00 [DBG] Start key discovery request
2020-08-13 16:00:24.384 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 16:00:24.388 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:00:24.388 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:00:24.388 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 16:00:24.389 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 16:00:24.389 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 16:00:24.389 +02:00 [DBG] Start discovery request
2020-08-13 16:00:24.403 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 16:00:24.627 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 16:00:24.630 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:00:24.630 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:00:24.630 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 16:00:24.630 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 16:00:24.630 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 16:00:24.630 +02:00 [DBG] Start key discovery request
2020-08-13 16:00:25.126 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-13 16:00:25.126 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-13 16:00:25.127 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-13 16:00:25.127 +02:00 [DBG] Start authorize request
2020-08-13 16:00:25.127 +02:00 [DBG] No user present in authorize request
2020-08-13 16:00:25.127 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 16:00:25.176 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 16:00:25.177 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 16:00:25.205 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 16:00:25.228 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 16:00:25.234 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 16:00:25.238 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 16:00:25.238 +02:00 [ERR] Requests for id_token response type only must not include resource scopes
2020-08-13 16:00:25.238 +02:00 [ERR] Request validation failed
2020-08-13 16:00:25.238 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"RG1Ga3c2SkZwNzN5d1cyflBFai1QNHNCdkNmcFpuZXB2THdMTVgzOTJYWUgx","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"response_type":"id_token","client_id":"listify.webapp","state":"RG1Ga3c2SkZwNzN5d1cyflBFai1QNHNCdkNmcFpuZXB2THdMTVgzOTJYWUgx","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"RG1Ga3c2SkZwNzN5d1cyflBFai1QNHNCdkNmcFpuZXB2THdMTVgzOTJYWUgx"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 16:00:25.239 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":null,"Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Error":"invalid_scope","ErrorDescription":"Invalid scope for response type","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"80000075-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-13T14:00:25.0000000Z","ProcessId":20604,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2020-08-13 16:00:33.014 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 16:00:33.017 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:00:33.018 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:00:33.018 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 16:00:33.018 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 16:00:33.018 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 16:00:33.018 +02:00 [DBG] Start discovery request
2020-08-13 16:00:33.029 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 16:00:33.306 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 16:00:33.311 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:00:33.311 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:00:33.312 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 16:00:33.313 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 16:00:33.313 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 16:00:33.313 +02:00 [DBG] Start key discovery request
2020-08-13 16:00:34.413 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 16:00:34.454 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:00:34.454 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:00:34.455 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 16:00:34.455 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 16:00:34.455 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 16:00:34.455 +02:00 [DBG] Start discovery request
2020-08-13 16:00:34.470 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 16:00:34.722 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 16:00:34.729 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:00:34.729 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:00:34.731 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 16:00:34.731 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 16:00:34.732 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 16:00:34.732 +02:00 [DBG] Start key discovery request
2020-08-13 16:00:35.228 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-13 16:00:35.229 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-13 16:00:35.229 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-13 16:00:35.229 +02:00 [DBG] Start authorize request
2020-08-13 16:00:35.229 +02:00 [DBG] No user present in authorize request
2020-08-13 16:00:35.229 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 16:00:35.272 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 16:00:35.272 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 16:00:35.282 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 16:00:35.299 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 16:00:35.302 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 16:00:35.303 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 16:00:35.304 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-13 16:00:35.304 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"MTQtV2hjVX4xd2hiQ2FKWUJSY355Z0w3eX5hZmp3TGdSZURRWmRMY3FBWjln","UiLocales":null,"Nonce":"MTQtV2hjVX4xd2hiQ2FKWUJSY355Z0w3eX5hZmp3TGdSZURRWmRMY3FBWjln","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"MTQtV2hjVX4xd2hiQ2FKWUJSY355Z0w3eX5hZmp3TGdSZURRWmRMY3FBWjln","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"MTQtV2hjVX4xd2hiQ2FKWUJSY355Z0w3eX5hZmp3TGdSZURRWmRMY3FBWjln"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 16:00:35.304 +02:00 [INF] Showing login: User is not authenticated
2020-08-13 16:00:35.388 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 16:00:35.431 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 16:00:35.431 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 16:00:35.437 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 16:00:35.459 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 16:00:35.467 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 16:00:35.484 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 16:00:35.484 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-13 16:00:35.575 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 16:00:35.575 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 16:00:36.915 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-13 16:00:38.564 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-13 16:00:38.607 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"8000007b-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-13T14:00:38.0000000Z","ProcessId":20604,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-13 16:00:38.607 +02:00 [DBG] Augmenting SignInContext
2020-08-13 16:00:38.607 +02:00 [DBG] Adding amr claim with value: external
2020-08-13 16:00:38.607 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-13 16:00:38.607 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-13 16:00:38.616 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-13 16:00:38.616 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-13 16:00:38.616 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-13 16:00:38.616 +02:00 [DBG] Start authorize callback request
2020-08-13 16:00:38.616 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-13 16:00:38.616 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 16:00:38.646 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 16:00:38.646 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 16:00:38.652 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 16:00:38.668 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 16:00:38.674 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 16:00:38.688 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 16:00:38.688 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-13 16:00:38.688 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"MTQtV2hjVX4xd2hiQ2FKWUJSY355Z0w3eX5hZmp3TGdSZURRWmRMY3FBWjln","UiLocales":null,"Nonce":"MTQtV2hjVX4xd2hiQ2FKWUJSY355Z0w3eX5hZmp3TGdSZURRWmRMY3FBWjln","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"epKcT-gse6jeTDjgf3SvVg","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"MTQtV2hjVX4xd2hiQ2FKWUJSY355Z0w3eX5hZmp3TGdSZURRWmRMY3FBWjln","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"MTQtV2hjVX4xd2hiQ2FKWUJSY355Z0w3eX5hZmp3TGdSZURRWmRMY3FBWjln"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 16:00:38.692 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-13 16:00:38.692 +02:00 [DBG] Creating Implicit Flow response.
2020-08-13 16:00:38.692 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-13 16:00:38.693 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-13 16:00:38.700 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-13 16:00:38.700 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-13 16:00:38.702 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****bW5w","$type":"Token"},{"TokenType":"access_token","TokenValue":"****w1og","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000007c-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-13T14:00:38.0000000Z","ProcessId":20604,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-13 16:00:38.702 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"MTQtV2hjVX4xd2hiQ2FKWUJSY355Z0w3eX5hZmp3TGdSZURRWmRMY3FBWjln","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-13 16:00:38.703 +02:00 [DBG] Augmenting SignInContext
2020-08-13 16:00:38.703 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-13 16:00:39.103 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 16:00:39.106 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:00:39.106 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:00:39.106 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 16:00:39.106 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 16:00:39.106 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 16:00:39.106 +02:00 [DBG] Start discovery request
2020-08-13 16:00:39.116 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 16:00:39.461 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 16:00:39.467 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:00:39.467 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:00:39.467 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 16:00:39.468 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 16:00:39.468 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 16:00:39.469 +02:00 [DBG] Start key discovery request
2020-08-13 16:00:45.870 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 16:00:45.877 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:00:45.877 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:00:45.877 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 16:00:45.878 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 16:00:45.878 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 16:00:45.878 +02:00 [DBG] Start discovery request
2020-08-13 16:00:45.891 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 16:00:46.332 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 16:00:46.376 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:00:46.376 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:00:46.376 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 16:00:46.377 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 16:00:46.377 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 16:00:46.377 +02:00 [DBG] Start key discovery request
2020-08-13 16:01:59.020 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 16:01:59.025 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:01:59.026 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:01:59.058 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 16:01:59.059 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 16:01:59.059 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 16:01:59.059 +02:00 [DBG] Start discovery request
2020-08-13 16:01:59.072 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 16:01:59.520 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 16:01:59.524 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:01:59.525 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:01:59.525 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 16:01:59.525 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 16:01:59.525 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 16:01:59.525 +02:00 [DBG] Start key discovery request
2020-08-13 16:02:06.243 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 16:02:06.247 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:02:06.247 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:02:06.247 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 16:02:06.247 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 16:02:06.247 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 16:02:06.247 +02:00 [DBG] Start discovery request
2020-08-13 16:02:06.291 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 16:02:06.509 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 16:02:06.512 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:02:06.513 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:02:06.513 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 16:02:06.513 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 16:02:06.513 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 16:02:06.513 +02:00 [DBG] Start key discovery request
2020-08-13 16:02:07.254 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-13 16:02:07.255 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-13 16:02:07.255 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-13 16:02:07.255 +02:00 [DBG] Start authorize request
2020-08-13 16:02:07.255 +02:00 [DBG] No user present in authorize request
2020-08-13 16:02:07.255 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 16:02:07.295 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 16:02:07.295 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 16:02:07.300 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 16:02:07.316 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 16:02:07.323 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 16:02:07.340 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 16:02:07.340 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-13 16:02:07.341 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"UlNPVnRpMzB6eWhTVHFkTnRGWGJ2N2xlM21obWNfbHVobGN3Z29mTEJDbDBU","UiLocales":null,"Nonce":"UlNPVnRpMzB6eWhTVHFkTnRGWGJ2N2xlM21obWNfbHVobGN3Z29mTEJDbDBU","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"UlNPVnRpMzB6eWhTVHFkTnRGWGJ2N2xlM21obWNfbHVobGN3Z29mTEJDbDBU","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"UlNPVnRpMzB6eWhTVHFkTnRGWGJ2N2xlM21obWNfbHVobGN3Z29mTEJDbDBU"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 16:02:07.341 +02:00 [INF] Showing login: User is not authenticated
2020-08-13 16:02:07.531 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 16:02:07.595 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 16:02:07.595 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 16:02:07.599 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 16:02:07.614 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 16:02:07.619 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 16:02:07.633 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 16:02:07.634 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-13 16:02:07.671 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 16:02:07.672 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 16:02:09.076 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-13 16:02:10.426 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-13 16:02:10.574 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000081-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-13T14:02:10.0000000Z","ProcessId":20604,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-13 16:02:10.575 +02:00 [DBG] Augmenting SignInContext
2020-08-13 16:02:10.575 +02:00 [DBG] Adding amr claim with value: external
2020-08-13 16:02:10.575 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-13 16:02:10.575 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-13 16:02:10.592 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-13 16:02:10.592 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-13 16:02:10.592 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-13 16:02:10.592 +02:00 [DBG] Start authorize callback request
2020-08-13 16:02:10.592 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-13 16:02:10.592 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 16:02:10.676 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 16:02:10.676 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 16:02:10.681 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 16:02:10.756 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 16:02:10.761 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 16:02:10.775 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 16:02:10.776 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-13 16:02:10.776 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"UlNPVnRpMzB6eWhTVHFkTnRGWGJ2N2xlM21obWNfbHVobGN3Z29mTEJDbDBU","UiLocales":null,"Nonce":"UlNPVnRpMzB6eWhTVHFkTnRGWGJ2N2xlM21obWNfbHVobGN3Z29mTEJDbDBU","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"UFu1F5oSXa8ZNXWF2oVRpA","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"UlNPVnRpMzB6eWhTVHFkTnRGWGJ2N2xlM21obWNfbHVobGN3Z29mTEJDbDBU","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"UlNPVnRpMzB6eWhTVHFkTnRGWGJ2N2xlM21obWNfbHVobGN3Z29mTEJDbDBU"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 16:02:10.779 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-13 16:02:10.780 +02:00 [DBG] Creating Implicit Flow response.
2020-08-13 16:02:10.780 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-13 16:02:10.780 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-13 16:02:10.831 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-13 16:02:10.831 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-13 16:02:10.833 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Giag","$type":"Token"},{"TokenType":"access_token","TokenValue":"****UWmw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000082-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-13T14:02:10.0000000Z","ProcessId":20604,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-13 16:02:10.834 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"UlNPVnRpMzB6eWhTVHFkTnRGWGJ2N2xlM21obWNfbHVobGN3Z29mTEJDbDBU","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-13 16:02:10.834 +02:00 [DBG] Augmenting SignInContext
2020-08-13 16:02:10.834 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-13 16:02:11.163 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 16:02:11.166 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:02:11.166 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:02:11.166 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 16:02:11.166 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 16:02:11.166 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 16:02:11.166 +02:00 [DBG] Start discovery request
2020-08-13 16:02:11.177 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 16:02:11.567 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 16:02:11.571 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:02:11.571 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:02:11.571 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 16:02:11.572 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 16:02:11.572 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 16:02:11.572 +02:00 [DBG] Start key discovery request
2020-08-13 16:02:20.078 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 16:02:20.088 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:02:20.089 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:02:20.089 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 16:02:20.089 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 16:02:20.089 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 16:02:20.089 +02:00 [DBG] Start discovery request
2020-08-13 16:02:20.107 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 16:02:20.496 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 16:02:20.510 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:02:20.510 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:02:20.510 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 16:02:20.511 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 16:02:20.511 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 16:02:20.511 +02:00 [DBG] Start key discovery request
2020-08-13 16:03:16.982 +02:00 [INF] Removing 0 grants
2020-08-13 16:03:16.992 +02:00 [INF] Removing 0 device flow codes
2020-08-13 16:03:47.227 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 16:03:47.231 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:03:47.231 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:03:47.231 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 16:03:47.231 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 16:03:47.231 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 16:03:47.231 +02:00 [DBG] Start discovery request
2020-08-13 16:03:47.641 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 16:03:47.680 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 16:03:47.684 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:03:47.685 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:03:47.686 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 16:03:47.686 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 16:03:47.687 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 16:03:47.687 +02:00 [DBG] Start key discovery request
2020-08-13 16:03:59.315 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 16:03:59.319 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:03:59.319 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:03:59.319 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 16:03:59.319 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 16:03:59.319 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 16:03:59.319 +02:00 [DBG] Start discovery request
2020-08-13 16:03:59.330 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 16:03:59.640 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 16:03:59.643 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:03:59.644 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:03:59.645 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 16:03:59.645 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 16:03:59.658 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 16:03:59.658 +02:00 [DBG] Start key discovery request
2020-08-13 16:04:09.375 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 16:04:09.379 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:04:09.379 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:04:09.379 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 16:04:09.380 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 16:04:09.380 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 16:04:09.380 +02:00 [DBG] Start discovery request
2020-08-13 16:04:09.394 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 16:04:09.636 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 16:04:09.639 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:04:09.640 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:04:09.640 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 16:04:09.640 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 16:04:09.640 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 16:04:09.640 +02:00 [DBG] Start key discovery request
2020-08-13 16:04:11.876 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-13 16:04:11.877 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-13 16:04:11.878 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-13 16:04:11.878 +02:00 [DBG] Start authorize request
2020-08-13 16:04:11.878 +02:00 [DBG] No user present in authorize request
2020-08-13 16:04:11.878 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 16:04:12.272 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 16:04:12.279 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 16:04:12.280 +02:00 [ERR] Invalid redirect_uri: http://localhost:4200/home
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"OXZ6bV9aZHVwRkFpMncuNHBCTGxUREZRMFg3bk5NZXZ1WWxOSi5heWNYfmsz","redirect_uri":"http://localhost:4200/home","scope":"profile openid roles listifyWebAPI","nonce":"OXZ6bV9aZHVwRkFpMncuNHBCTGxUREZRMFg3bk5NZXZ1WWxOSi5heWNYfmsz"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 16:04:12.280 +02:00 [ERR] Request validation failed
2020-08-13 16:04:12.281 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"OXZ6bV9aZHVwRkFpMncuNHBCTGxUREZRMFg3bk5NZXZ1WWxOSi5heWNYfmsz","redirect_uri":"http://localhost:4200/home","scope":"profile openid roles listifyWebAPI","nonce":"OXZ6bV9aZHVwRkFpMncuNHBCTGxUREZRMFg3bk5NZXZ1WWxOSi5heWNYfmsz"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 16:04:12.281 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":null,"Endpoint":"Authorize","SubjectId":null,"Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"80000038-0003-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-13T14:04:12.0000000Z","ProcessId":20604,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2020-08-13 16:04:22.205 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 16:04:22.208 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:04:22.208 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:04:22.208 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 16:04:22.208 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 16:04:22.208 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 16:04:22.208 +02:00 [DBG] Start discovery request
2020-08-13 16:04:22.220 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 16:04:22.566 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 16:04:22.578 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:04:22.578 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:04:22.579 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 16:04:22.579 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 16:04:22.579 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 16:04:22.579 +02:00 [DBG] Start key discovery request
2020-08-13 16:04:26.829 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 16:04:26.832 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:04:26.832 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:04:26.832 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 16:04:26.832 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 16:04:26.832 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 16:04:26.832 +02:00 [DBG] Start discovery request
2020-08-13 16:04:26.853 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 16:04:27.470 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 16:04:27.475 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:04:27.475 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:04:27.476 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 16:04:27.476 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 16:04:27.476 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 16:04:27.476 +02:00 [DBG] Start key discovery request
2020-08-13 16:04:28.422 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-13 16:04:28.422 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-13 16:04:28.422 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-13 16:04:28.423 +02:00 [DBG] Start authorize request
2020-08-13 16:04:28.423 +02:00 [DBG] No user present in authorize request
2020-08-13 16:04:28.423 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 16:04:28.458 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 16:04:28.458 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 16:04:28.458 +02:00 [ERR] Invalid redirect_uri: http://localhost:4200/index.html
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"blVwQ0RBV3FWeU0zYlZjVE44UGJ2WjExR05hNmJBVWlNUnRJMjNoc2JWb0Vr","redirect_uri":"http://localhost:4200/index.html","scope":"profile openid roles listifyWebAPI","nonce":"blVwQ0RBV3FWeU0zYlZjVE44UGJ2WjExR05hNmJBVWlNUnRJMjNoc2JWb0Vr"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 16:04:28.458 +02:00 [ERR] Request validation failed
2020-08-13 16:04:28.458 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"blVwQ0RBV3FWeU0zYlZjVE44UGJ2WjExR05hNmJBVWlNUnRJMjNoc2JWb0Vr","redirect_uri":"http://localhost:4200/index.html","scope":"profile openid roles listifyWebAPI","nonce":"blVwQ0RBV3FWeU0zYlZjVE44UGJ2WjExR05hNmJBVWlNUnRJMjNoc2JWb0Vr"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 16:04:28.459 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":null,"Endpoint":"Authorize","SubjectId":null,"Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"8000003a-0003-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-13T14:04:28.0000000Z","ProcessId":20604,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2020-08-13 16:04:35.626 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 16:04:35.629 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:04:35.629 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:04:35.629 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 16:04:35.630 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 16:04:35.630 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 16:04:35.630 +02:00 [DBG] Start key discovery request
2020-08-13 16:04:36.672 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 16:04:36.675 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:04:36.675 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:04:36.675 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 16:04:36.676 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 16:04:36.676 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 16:04:36.676 +02:00 [DBG] Start discovery request
2020-08-13 16:04:36.690 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 16:04:36.948 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 16:04:36.957 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:04:36.957 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:04:36.958 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 16:04:36.958 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 16:04:36.958 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 16:04:36.958 +02:00 [DBG] Start key discovery request
2020-08-13 16:04:37.684 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-13 16:04:37.684 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-13 16:04:37.684 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-13 16:04:37.684 +02:00 [DBG] Start authorize request
2020-08-13 16:04:37.684 +02:00 [DBG] No user present in authorize request
2020-08-13 16:04:37.684 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 16:04:37.716 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 16:04:37.716 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 16:04:37.723 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 16:04:37.739 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 16:04:37.741 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 16:04:37.744 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 16:04:37.744 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-13 16:04:37.744 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"X3BHZ1JieEFMaTR0TW96Tm14VEdZbkl0MnFBb1l1dGNHN2tzSjRkeXVUQ05Z","UiLocales":null,"Nonce":"X3BHZ1JieEFMaTR0TW96Tm14VEdZbkl0MnFBb1l1dGNHN2tzSjRkeXVUQ05Z","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"X3BHZ1JieEFMaTR0TW96Tm14VEdZbkl0MnFBb1l1dGNHN2tzSjRkeXVUQ05Z","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"X3BHZ1JieEFMaTR0TW96Tm14VEdZbkl0MnFBb1l1dGNHN2tzSjRkeXVUQ05Z"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 16:04:37.744 +02:00 [INF] Showing login: User is not authenticated
2020-08-13 16:04:37.820 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 16:04:37.832 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 16:04:37.832 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 16:04:37.834 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 16:04:37.836 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 16:04:37.840 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 16:04:37.842 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 16:04:37.842 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-13 16:04:37.850 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 16:04:37.850 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 16:04:46.870 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 16:04:46.874 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:04:46.874 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:04:46.874 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 16:04:46.874 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 16:04:46.874 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 16:04:46.874 +02:00 [DBG] Start key discovery request
2020-08-13 16:06:10.887 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 16:06:10.909 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:06:10.910 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:06:10.910 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 16:06:10.910 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 16:06:10.910 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 16:06:10.910 +02:00 [DBG] Start discovery request
2020-08-13 16:06:10.936 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 16:06:11.304 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 16:06:11.309 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:06:11.309 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:06:11.309 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 16:06:11.309 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 16:06:11.309 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 16:06:11.354 +02:00 [DBG] Start key discovery request
2020-08-13 16:06:13.504 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 16:06:13.507 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:06:13.508 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:06:13.508 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 16:06:13.508 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 16:06:13.508 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 16:06:13.508 +02:00 [DBG] Start discovery request
2020-08-13 16:06:13.521 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 16:06:13.824 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 16:06:13.831 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:06:13.831 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:06:13.832 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 16:06:13.832 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 16:06:13.832 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 16:06:13.832 +02:00 [DBG] Start key discovery request
2020-08-13 16:06:15.316 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-13 16:06:15.319 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-13 16:06:15.320 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-13 16:06:15.320 +02:00 [DBG] Start authorize request
2020-08-13 16:06:15.320 +02:00 [DBG] No user present in authorize request
2020-08-13 16:06:15.320 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 16:06:15.364 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 16:06:15.364 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 16:06:15.374 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 16:06:15.396 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 16:06:15.398 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 16:06:15.402 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 16:06:15.403 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-13 16:06:15.403 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"a0tjWHV1N0dBRzJnakF1dFVqMV9mMnZVMG53YXAxdG9WWnpVREJQZX5hMS4w","UiLocales":null,"Nonce":"a0tjWHV1N0dBRzJnakF1dFVqMV9mMnZVMG53YXAxdG9WWnpVREJQZX5hMS4w","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"a0tjWHV1N0dBRzJnakF1dFVqMV9mMnZVMG53YXAxdG9WWnpVREJQZX5hMS4w","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"a0tjWHV1N0dBRzJnakF1dFVqMV9mMnZVMG53YXAxdG9WWnpVREJQZX5hMS4w"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 16:06:15.403 +02:00 [INF] Showing login: User is not authenticated
2020-08-13 16:06:15.821 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 16:06:15.845 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 16:06:15.845 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 16:06:15.848 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 16:06:15.861 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 16:06:15.905 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 16:06:15.917 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 16:06:15.917 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-13 16:06:15.947 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 16:06:15.947 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 16:06:18.548 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-13 16:06:21.321 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-13 16:06:21.481 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"8000009e-0001-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-13T14:06:21.0000000Z","ProcessId":20604,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-13 16:06:21.481 +02:00 [DBG] Augmenting SignInContext
2020-08-13 16:06:21.481 +02:00 [DBG] Adding amr claim with value: external
2020-08-13 16:06:21.482 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-13 16:06:21.482 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-13 16:06:21.491 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-13 16:06:21.491 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-13 16:06:21.491 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-13 16:06:21.491 +02:00 [DBG] Start authorize callback request
2020-08-13 16:06:21.492 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-13 16:06:21.492 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 16:06:21.519 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 16:06:21.519 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 16:06:21.524 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 16:06:21.539 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 16:06:21.784 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 16:06:21.797 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 16:06:21.797 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-13 16:06:21.797 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"a0tjWHV1N0dBRzJnakF1dFVqMV9mMnZVMG53YXAxdG9WWnpVREJQZX5hMS4w","UiLocales":null,"Nonce":"a0tjWHV1N0dBRzJnakF1dFVqMV9mMnZVMG53YXAxdG9WWnpVREJQZX5hMS4w","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"OkJFq6OzhslqrMutfTbWMg","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"a0tjWHV1N0dBRzJnakF1dFVqMV9mMnZVMG53YXAxdG9WWnpVREJQZX5hMS4w","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"a0tjWHV1N0dBRzJnakF1dFVqMV9mMnZVMG53YXAxdG9WWnpVREJQZX5hMS4w"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 16:06:21.802 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-13 16:06:21.802 +02:00 [DBG] Creating Implicit Flow response.
2020-08-13 16:06:21.802 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-13 16:06:21.802 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-13 16:06:21.964 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-13 16:06:21.964 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-13 16:06:21.965 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****LssQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****I0OA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000009f-0001-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-13T14:06:21.0000000Z","ProcessId":20604,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-13 16:06:21.966 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"a0tjWHV1N0dBRzJnakF1dFVqMV9mMnZVMG53YXAxdG9WWnpVREJQZX5hMS4w","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-13 16:06:21.966 +02:00 [DBG] Augmenting SignInContext
2020-08-13 16:06:21.966 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-13 16:06:22.362 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 16:06:22.366 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:06:22.366 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:06:22.367 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 16:06:22.367 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 16:06:22.367 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 16:06:22.367 +02:00 [DBG] Start discovery request
2020-08-13 16:06:22.383 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 16:06:22.803 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 16:06:22.806 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:06:22.806 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:06:22.806 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 16:06:22.807 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 16:06:22.807 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 16:06:22.807 +02:00 [DBG] Start key discovery request
2020-08-13 16:06:23.091 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-13 16:06:23.096 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:06:23.096 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:06:23.336 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-13 16:06:23.341 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:06:23.341 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:06:23.341 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-13 16:06:23.365 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-13 16:06:23.365 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-13 16:06:23.489 +02:00 [DBG] Start userinfo request
2020-08-13 16:06:23.491 +02:00 [DBG] Bearer token found in header
2020-08-13 16:06:25.039 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 16:06:25.039 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 16:06:25.194 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 16:06:25.194 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 16:06:25.244 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-13 16:06:25.245 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597327581,"exp":1597331181,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597327581,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-13 16:06:25.378 +02:00 [DBG] Creating userinfo response
2020-08-13 16:06:25.438 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-13 16:06:25.439 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-13 16:06:25.444 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 16:06:25.456 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-13 16:06:25.457 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-13 16:06:25.459 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 16:06:25.464 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-13 16:06:25.464 +02:00 [DBG] End userinfo request
2020-08-13 16:06:48.727 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 16:06:48.737 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:06:48.737 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:06:48.738 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 16:06:48.738 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 16:06:48.738 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 16:06:48.738 +02:00 [DBG] Start discovery request
2020-08-13 16:06:48.757 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 16:06:49.636 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 16:06:49.639 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:06:49.639 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:06:49.639 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 16:06:49.639 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 16:06:49.639 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 16:06:49.639 +02:00 [DBG] Start key discovery request
2020-08-13 16:08:17.005 +02:00 [INF] Removing 0 grants
2020-08-13 16:08:17.123 +02:00 [INF] Removing 0 device flow codes
2020-08-13 16:13:17.127 +02:00 [INF] Removing 0 grants
2020-08-13 16:13:17.360 +02:00 [INF] Removing 0 device flow codes
2020-08-13 16:15:38.708 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 16:15:38.927 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:15:38.928 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:15:38.928 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 16:15:38.928 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 16:15:38.928 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 16:15:38.928 +02:00 [DBG] Start discovery request
2020-08-13 16:15:39.040 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 16:15:39.316 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 16:15:39.338 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:15:39.338 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:15:39.338 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 16:15:39.339 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 16:15:39.339 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 16:15:39.339 +02:00 [DBG] Start key discovery request
2020-08-13 16:16:17.407 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-13 16:16:17.409 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-13 16:16:17.409 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-13 16:16:17.409 +02:00 [DBG] Start authorize request
2020-08-13 16:16:17.491 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-13 16:16:17.491 +02:00 [DBG] Start authorize request protocol validation
2020-08-13 16:16:18.767 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 16:16:18.767 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 16:16:18.799 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 16:16:18.818 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 16:16:18.827 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 16:16:18.846 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-13 16:16:18.846 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-13 16:16:18.847 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"aUkxVk11dGNqaWxYVWkxUk5FRUpROC11SjJmeGJZRzBKU0xlOUJUTEtTZzFa","UiLocales":null,"Nonce":"aUkxVk11dGNqaWxYVWkxUk5FRUpROC11SjJmeGJZRzBKU0xlOUJUTEtTZzFa","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"OkJFq6OzhslqrMutfTbWMg","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"aUkxVk11dGNqaWxYVWkxUk5FRUpROC11SjJmeGJZRzBKU0xlOUJUTEtTZzFa","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"aUkxVk11dGNqaWxYVWkxUk5FRUpROC11SjJmeGJZRzBKU0xlOUJUTEtTZzFa"},"$type":"AuthorizeRequestValidationLog"}
2020-08-13 16:16:18.942 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-13 16:16:18.943 +02:00 [DBG] Creating Implicit Flow response.
2020-08-13 16:16:18.944 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-13 16:16:18.944 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-13 16:16:19.095 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-13 16:16:19.095 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-13 16:16:19.097 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****C3rg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****vh3g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000053-0004-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-13T14:16:19.0000000Z","ProcessId":20604,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-13 16:16:19.097 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"aUkxVk11dGNqaWxYVWkxUk5FRUpROC11SjJmeGJZRzBKU0xlOUJUTEtTZzFa","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-13 16:16:19.440 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-13 16:16:19.444 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:16:19.445 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:16:19.445 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-13 16:16:19.445 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-13 16:16:19.446 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-13 16:16:19.446 +02:00 [DBG] Start discovery request
2020-08-13 16:16:19.465 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-13 16:16:19.626 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-13 16:16:19.632 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:16:19.632 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:16:19.632 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-13 16:16:19.633 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-13 16:16:19.633 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-13 16:16:19.633 +02:00 [DBG] Start key discovery request
2020-08-13 16:16:19.779 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-13 16:16:19.825 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:16:19.826 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:16:19.829 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-13 16:16:19.835 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-13 16:16:19.835 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-13 16:16:19.865 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-13 16:16:19.872 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-13 16:16:19.873 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-13 16:16:19.874 +02:00 [DBG] Start userinfo request
2020-08-13 16:16:19.875 +02:00 [DBG] Bearer token found in header
2020-08-13 16:16:19.983 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 16:16:19.983 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 16:16:20.033 +02:00 [DBG] listify.webapp found in database: true
2020-08-13 16:16:20.033 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-13 16:16:20.049 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-13 16:16:20.050 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597328179,"exp":1597331779,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597327581,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-13 16:16:20.050 +02:00 [DBG] Creating userinfo response
2020-08-13 16:16:20.050 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-13 16:16:20.051 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-13 16:16:20.066 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 16:16:20.066 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-13 16:16:20.066 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-13 16:16:20.075 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-13 16:16:20.098 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-13 16:16:20.098 +02:00 [DBG] End userinfo request
2020-08-13 16:18:17.516 +02:00 [INF] Removing 0 grants
2020-08-13 16:18:17.654 +02:00 [INF] Removing 0 device flow codes
2020-08-16 13:41:41.405 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-16 13:41:41.455 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-16 13:41:41.455 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-16 13:41:41.455 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-16 13:41:41.455 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-16 13:41:41.455 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-16 13:41:41.455 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-16 13:41:41.660 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 13:41:41.660 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 13:41:41.716 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:41:41.723 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:41:41.723 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:41:41.723 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:41:41.812 +02:00 [DBG] Login Url: /Account/Login
2020-08-16 13:41:41.812 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-16 13:41:41.812 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-16 13:41:41.812 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-16 13:41:41.812 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-16 13:41:41.812 +02:00 [DBG] Error Url: /home/error
2020-08-16 13:41:41.812 +02:00 [DBG] Error Id Parameter: errorId
2020-08-16 13:41:41.824 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 13:41:41.824 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 13:41:41.828 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 13:41:41.828 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 13:41:41.828 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 13:41:41.828 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 13:41:41.829 +02:00 [DBG] Start discovery request
2020-08-16 13:41:41.829 +02:00 [DBG] Start discovery request
2020-08-16 13:41:42.398 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 13:41:42.398 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 13:41:42.603 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 13:41:42.607 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:41:42.607 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:41:42.616 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 13:41:42.618 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 13:41:42.618 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 13:41:42.619 +02:00 [DBG] Start key discovery request
2020-08-16 13:41:42.732 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-16 13:41:42.743 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-16 13:41:42.743 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-16 13:41:42.748 +02:00 [DBG] Start authorize request
2020-08-16 13:41:42.757 +02:00 [DBG] No user present in authorize request
2020-08-16 13:41:42.759 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 13:41:43.117 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 13:41:43.125 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 13:41:43.223 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 13:41:43.269 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 13:41:43.282 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 13:41:43.284 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 13:41:43.289 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 13:41:43.302 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"VGdCdEc5QUU1TFppTWlQMFJUNDdIRkhLSlEwQ09XUnpQOTVpYURWcXY1c2It","UiLocales":null,"Nonce":"VGdCdEc5QUU1TFppTWlQMFJUNDdIRkhLSlEwQ09XUnpQOTVpYURWcXY1c2It","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"VGdCdEc5QUU1TFppTWlQMFJUNDdIRkhLSlEwQ09XUnpQOTVpYURWcXY1c2It","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"VGdCdEc5QUU1TFppTWlQMFJUNDdIRkhLSlEwQ09XUnpQOTVpYURWcXY1c2It"},"$type":"AuthorizeRequestValidationLog"}
2020-08-16 13:41:43.307 +02:00 [INF] Showing login: User is not authenticated
2020-08-16 13:41:44.474 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 13:41:44.519 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 13:41:44.520 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 13:41:44.526 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 13:41:44.549 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 13:41:44.556 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 13:41:44.573 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 13:41:44.573 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 13:41:44.618 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 13:41:44.618 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 13:41:49.744 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-16 13:41:52.395 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-16 13:41:52.639 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000006-0003-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-16T11:41:52.0000000Z","ProcessId":21284,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-16 13:41:52.646 +02:00 [DBG] Augmenting SignInContext
2020-08-16 13:41:52.647 +02:00 [DBG] Adding amr claim with value: external
2020-08-16 13:41:52.649 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-16 13:41:52.652 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-16 13:41:52.682 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-16 13:41:52.683 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-16 13:41:52.683 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-16 13:41:52.686 +02:00 [DBG] Start authorize callback request
2020-08-16 13:41:52.710 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 13:41:52.710 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 13:41:52.736 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 13:41:52.737 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 13:41:52.743 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 13:41:52.756 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 13:41:52.759 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 13:41:52.761 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 13:41:52.761 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 13:41:52.761 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"VGdCdEc5QUU1TFppTWlQMFJUNDdIRkhLSlEwQ09XUnpQOTVpYURWcXY1c2It","UiLocales":null,"Nonce":"VGdCdEc5QUU1TFppTWlQMFJUNDdIRkhLSlEwQ09XUnpQOTVpYURWcXY1c2It","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"RX2Ronctt1tv2-ETmELvHw","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"VGdCdEc5QUU1TFppTWlQMFJUNDdIRkhLSlEwQ09XUnpQOTVpYURWcXY1c2It","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"VGdCdEc5QUU1TFppTWlQMFJUNDdIRkhLSlEwQ09XUnpQOTVpYURWcXY1c2It"},"$type":"AuthorizeRequestValidationLog"}
2020-08-16 13:41:52.780 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-16 13:41:52.782 +02:00 [DBG] Creating Implicit Flow response.
2020-08-16 13:41:52.824 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-16 13:41:52.825 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 13:41:54.053 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-16 13:41:54.055 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-16 13:41:54.061 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****sfrA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****DWoQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000007-0003-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-16T11:41:54.0000000Z","ProcessId":21284,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-16 13:41:54.063 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"VGdCdEc5QUU1TFppTWlQMFJUNDdIRkhLSlEwQ09XUnpQOTVpYURWcXY1c2It","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-16 13:41:54.070 +02:00 [DBG] Augmenting SignInContext
2020-08-16 13:41:54.071 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-16 13:41:55.431 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 13:41:55.437 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:41:55.438 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:41:55.439 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 13:41:55.442 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 13:41:55.443 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 13:41:55.443 +02:00 [DBG] Start discovery request
2020-08-16 13:41:55.471 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 13:41:55.580 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 13:41:55.585 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:41:55.585 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:41:55.585 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 13:41:55.586 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 13:41:55.586 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 13:41:55.586 +02:00 [DBG] Start key discovery request
2020-08-16 13:41:55.706 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-16 13:41:55.711 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:41:55.712 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:41:55.861 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-16 13:41:55.867 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:41:55.868 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:41:55.870 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-16 13:41:55.877 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-16 13:41:55.877 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-16 13:41:55.881 +02:00 [DBG] Start userinfo request
2020-08-16 13:41:55.884 +02:00 [DBG] Bearer token found in header
2020-08-16 13:41:56.219 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 13:41:56.219 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 13:41:56.252 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 13:41:56.252 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 13:41:56.259 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 13:41:56.260 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597578113,"exp":1597581713,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597578112,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 13:41:56.264 +02:00 [DBG] Creating userinfo response
2020-08-16 13:41:56.267 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 13:41:56.268 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 13:41:56.273 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 13:41:56.276 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-16 13:41:56.276 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 13:41:56.278 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 13:41:56.283 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-16 13:41:56.284 +02:00 [DBG] End userinfo request
2020-08-16 13:41:58.791 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-08-16 13:41:58.794 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-08-16 13:41:58.794 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-08-16 13:41:58.798 +02:00 [DBG] Processing signout request for 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 13:41:58.800 +02:00 [DBG] Start end session request validation
2020-08-16 13:41:58.802 +02:00 [DBG] Start identity token validation
2020-08-16 13:41:58.838 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 13:41:58.838 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 13:41:58.839 +02:00 [DBG] Client found: listify.webapp / The Listify WebApplication
2020-08-16 13:41:58.846 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 13:41:58.847 +02:00 [DBG] Token validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597578114,"exp":1597578414,"iss":"http://localhost:5000","aud":"listify.webapp","nonce":"VGdCdEc5QUU1TFppTWlQMFJUNDdIRkhLSlEwQ09XUnpQOTVpYURWcXY1c2It","iat":1597578114,"at_hash":"t7gVj27IrywNXWFl2yhG8A","s_hash":"no45MlIQWhHW0eH2uH0Y-Q","sid":"RX2Ronctt1tv2-ETmELvHw","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597578112,"idp":"Facebook","amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 13:41:58.853 +02:00 [INF] End session request validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","PostLogOutUri":"http://localhost:4200","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200"},"$type":"EndSessionRequestValidationLog"}
2020-08-16 13:41:58.854 +02:00 [DBG] Success validating end session request from listify.webapp
2020-08-16 13:41:58.923 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-16 13:41:58.923 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-16 13:41:58.924 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-16 13:41:58.925 +02:00 [INF] {"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"80000009-0003-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-16T11:41:58.0000000Z","ProcessId":21284,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-16 13:41:59.483 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 13:41:59.487 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:41:59.487 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:41:59.488 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 13:41:59.489 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 13:41:59.489 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 13:41:59.489 +02:00 [DBG] Start discovery request
2020-08-16 13:41:59.505 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 13:41:59.635 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 13:41:59.639 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:41:59.639 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:41:59.639 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 13:41:59.642 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 13:41:59.642 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 13:41:59.642 +02:00 [DBG] Start key discovery request
2020-08-16 13:42:00.305 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-16 13:42:00.306 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-16 13:42:00.306 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-16 13:42:00.306 +02:00 [DBG] Start authorize request
2020-08-16 13:42:00.306 +02:00 [DBG] No user present in authorize request
2020-08-16 13:42:00.306 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 13:42:00.333 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 13:42:00.334 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 13:42:00.338 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 13:42:00.351 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 13:42:00.353 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 13:42:00.355 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 13:42:00.355 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 13:42:00.356 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"THEwSS5mUE9DeVl2S0gxS21BRjJKejhZdDRLUmV0dWQ4VFpreWpOeF95OTdx","UiLocales":null,"Nonce":"THEwSS5mUE9DeVl2S0gxS21BRjJKejhZdDRLUmV0dWQ4VFpreWpOeF95OTdx","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"THEwSS5mUE9DeVl2S0gxS21BRjJKejhZdDRLUmV0dWQ4VFpreWpOeF95OTdx","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"THEwSS5mUE9DeVl2S0gxS21BRjJKejhZdDRLUmV0dWQ4VFpreWpOeF95OTdx"},"$type":"AuthorizeRequestValidationLog"}
2020-08-16 13:42:00.356 +02:00 [INF] Showing login: User is not authenticated
2020-08-16 13:42:00.383 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 13:42:00.411 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 13:42:00.411 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 13:42:00.417 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 13:42:00.437 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 13:42:00.442 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 13:42:00.458 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 13:42:00.458 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 13:42:00.493 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 13:42:00.493 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 13:42:01.758 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-16 13:42:02.689 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-16 13:42:02.773 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"8000000e-0003-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-16T11:42:02.0000000Z","ProcessId":21284,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-16 13:42:02.774 +02:00 [DBG] Augmenting SignInContext
2020-08-16 13:42:02.774 +02:00 [DBG] Adding amr claim with value: external
2020-08-16 13:42:02.775 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-16 13:42:02.775 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-16 13:42:02.790 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-16 13:42:02.791 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-16 13:42:02.791 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-16 13:42:02.791 +02:00 [DBG] Start authorize callback request
2020-08-16 13:42:02.792 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 13:42:02.792 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 13:42:02.833 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 13:42:02.834 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 13:42:02.840 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 13:42:02.858 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 13:42:02.862 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 13:42:02.876 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 13:42:02.876 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 13:42:02.876 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"THEwSS5mUE9DeVl2S0gxS21BRjJKejhZdDRLUmV0dWQ4VFpreWpOeF95OTdx","UiLocales":null,"Nonce":"THEwSS5mUE9DeVl2S0gxS21BRjJKejhZdDRLUmV0dWQ4VFpreWpOeF95OTdx","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"_iSqvJvWb9uweeXeJ_WM9Q","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"THEwSS5mUE9DeVl2S0gxS21BRjJKejhZdDRLUmV0dWQ4VFpreWpOeF95OTdx","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"THEwSS5mUE9DeVl2S0gxS21BRjJKejhZdDRLUmV0dWQ4VFpreWpOeF95OTdx"},"$type":"AuthorizeRequestValidationLog"}
2020-08-16 13:42:02.880 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-16 13:42:02.880 +02:00 [DBG] Creating Implicit Flow response.
2020-08-16 13:42:02.880 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-16 13:42:02.880 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 13:42:02.888 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-16 13:42:02.888 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-16 13:42:02.889 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****iVXw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****6Yfg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000000f-0003-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-16T11:42:02.0000000Z","ProcessId":21284,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-16 13:42:02.890 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"THEwSS5mUE9DeVl2S0gxS21BRjJKejhZdDRLUmV0dWQ4VFpreWpOeF95OTdx","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-16 13:42:02.890 +02:00 [DBG] Augmenting SignInContext
2020-08-16 13:42:02.891 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-16 13:42:03.101 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 13:42:03.105 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:42:03.105 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:42:03.106 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 13:42:03.106 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 13:42:03.106 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 13:42:03.106 +02:00 [DBG] Start discovery request
2020-08-16 13:42:03.122 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 13:42:03.260 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 13:42:03.265 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:42:03.265 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:42:03.266 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 13:42:03.267 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 13:42:03.267 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 13:42:03.267 +02:00 [DBG] Start key discovery request
2020-08-16 13:42:03.346 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-16 13:42:03.354 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:42:03.355 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:42:03.359 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-16 13:42:03.365 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:42:03.365 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:42:03.368 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-16 13:42:03.368 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-16 13:42:03.368 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-16 13:42:03.368 +02:00 [DBG] Start userinfo request
2020-08-16 13:42:03.369 +02:00 [DBG] Bearer token found in header
2020-08-16 13:42:03.460 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 13:42:03.461 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 13:42:03.495 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 13:42:03.495 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 13:42:03.504 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 13:42:03.505 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597578122,"exp":1597581722,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597578122,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 13:42:03.506 +02:00 [DBG] Creating userinfo response
2020-08-16 13:42:03.506 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 13:42:03.506 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 13:42:03.513 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 13:42:03.517 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-16 13:42:03.517 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 13:42:03.528 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 13:42:03.546 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-16 13:42:03.546 +02:00 [DBG] End userinfo request
2020-08-16 13:42:54.011 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 13:42:54.092 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:42:54.092 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:42:54.093 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 13:42:54.094 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 13:42:54.094 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 13:42:54.094 +02:00 [DBG] Start discovery request
2020-08-16 13:42:54.151 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 13:42:54.206 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 13:42:54.209 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:42:54.210 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:42:54.210 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 13:42:54.210 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 13:42:54.210 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 13:42:54.210 +02:00 [DBG] Start key discovery request
2020-08-16 13:47:13.214 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-16 13:47:13.297 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-16 13:47:13.297 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-16 13:47:13.297 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-16 13:47:13.297 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-16 13:47:13.297 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-16 13:47:13.297 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-16 13:47:13.686 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 13:47:13.743 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:47:13.746 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:47:13.806 +02:00 [DBG] Login Url: /Account/Login
2020-08-16 13:47:13.806 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-16 13:47:13.806 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-16 13:47:13.806 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-16 13:47:13.806 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-16 13:47:13.806 +02:00 [DBG] Error Url: /home/error
2020-08-16 13:47:13.806 +02:00 [DBG] Error Id Parameter: errorId
2020-08-16 13:47:13.819 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 13:47:13.823 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 13:47:13.823 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 13:47:13.825 +02:00 [DBG] Start discovery request
2020-08-16 13:47:14.956 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 13:47:15.161 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 13:47:15.166 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:47:15.166 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:47:15.168 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 13:47:15.170 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 13:47:15.170 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 13:47:15.172 +02:00 [DBG] Start key discovery request
2020-08-16 13:47:18.679 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-08-16 13:47:18.683 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-08-16 13:47:18.683 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-08-16 13:47:18.689 +02:00 [DBG] Processing signout request for 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 13:47:18.691 +02:00 [DBG] Start end session request validation
2020-08-16 13:47:18.760 +02:00 [DBG] Start identity token validation
2020-08-16 13:47:19.500 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 13:47:19.507 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 13:47:19.509 +02:00 [DBG] Client found: listify.webapp / The Listify WebApplication
2020-08-16 13:47:19.587 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 13:47:19.594 +02:00 [DBG] Token validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597578122,"exp":1597578422,"iss":"http://localhost:5000","aud":"listify.webapp","nonce":"THEwSS5mUE9DeVl2S0gxS21BRjJKejhZdDRLUmV0dWQ4VFpreWpOeF95OTdx","iat":1597578122,"at_hash":"evZ0O7z5VFHK5F5RsdxpIQ","s_hash":"k-EOgomhTuWzpoNuCOb7sQ","sid":"_iSqvJvWb9uweeXeJ_WM9Q","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597578122,"idp":"Facebook","amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 13:47:19.610 +02:00 [INF] End session request validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","PostLogOutUri":"http://localhost:4200","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200"},"$type":"EndSessionRequestValidationLog"}
2020-08-16 13:47:19.611 +02:00 [DBG] Success validating end session request from listify.webapp
2020-08-16 13:47:19.932 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-16 13:47:19.935 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-16 13:47:19.935 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-16 13:47:19.943 +02:00 [INF] {"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"80000008-0004-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-16T11:47:19.0000000Z","ProcessId":11196,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-16 13:47:20.426 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 13:47:20.442 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:47:20.443 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:47:20.446 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 13:47:20.449 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 13:47:20.449 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 13:47:20.450 +02:00 [DBG] Start discovery request
2020-08-16 13:47:20.473 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 13:47:20.728 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 13:47:20.741 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:47:20.741 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:47:20.744 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 13:47:20.745 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 13:47:20.746 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 13:47:20.746 +02:00 [DBG] Start key discovery request
2020-08-16 13:47:24.175 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-16 13:47:24.179 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-16 13:47:24.180 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-16 13:47:24.182 +02:00 [DBG] Start authorize request
2020-08-16 13:47:24.186 +02:00 [DBG] No user present in authorize request
2020-08-16 13:47:24.237 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 13:47:24.313 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 13:47:24.313 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 13:47:24.462 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 13:47:24.541 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 13:47:24.559 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 13:47:24.578 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 13:47:24.588 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 13:47:24.595 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"LXRwWDN1RmdqY3RWYzF4dS1pXzlndjNYZW01RURDUENwMlh2T2d-Q0dCamk1","UiLocales":null,"Nonce":"LXRwWDN1RmdqY3RWYzF4dS1pXzlndjNYZW01RURDUENwMlh2T2d-Q0dCamk1","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"LXRwWDN1RmdqY3RWYzF4dS1pXzlndjNYZW01RURDUENwMlh2T2d-Q0dCamk1","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"LXRwWDN1RmdqY3RWYzF4dS1pXzlndjNYZW01RURDUENwMlh2T2d-Q0dCamk1"},"$type":"AuthorizeRequestValidationLog"}
2020-08-16 13:47:24.632 +02:00 [INF] Showing login: User is not authenticated
2020-08-16 13:47:24.868 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 13:47:24.913 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 13:47:24.914 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 13:47:24.919 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 13:47:24.934 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 13:47:24.939 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 13:47:24.941 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 13:47:24.941 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 13:47:24.973 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 13:47:24.974 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 13:47:29.752 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-16 13:47:31.311 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-16 13:47:31.707 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000010-0004-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-16T11:47:31.0000000Z","ProcessId":11196,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-16 13:47:31.713 +02:00 [DBG] Augmenting SignInContext
2020-08-16 13:47:31.714 +02:00 [DBG] Adding amr claim with value: external
2020-08-16 13:47:31.716 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-16 13:47:31.716 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-16 13:47:31.729 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-16 13:47:31.730 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-16 13:47:31.730 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-16 13:47:31.732 +02:00 [DBG] Start authorize callback request
2020-08-16 13:47:31.734 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 13:47:31.734 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 13:47:31.770 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 13:47:31.770 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 13:47:31.776 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 13:47:31.799 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 13:47:31.804 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 13:47:31.819 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 13:47:31.819 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 13:47:31.820 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"LXRwWDN1RmdqY3RWYzF4dS1pXzlndjNYZW01RURDUENwMlh2T2d-Q0dCamk1","UiLocales":null,"Nonce":"LXRwWDN1RmdqY3RWYzF4dS1pXzlndjNYZW01RURDUENwMlh2T2d-Q0dCamk1","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"Hx70BC38hrA1Ob2XFisOjQ","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"LXRwWDN1RmdqY3RWYzF4dS1pXzlndjNYZW01RURDUENwMlh2T2d-Q0dCamk1","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"LXRwWDN1RmdqY3RWYzF4dS1pXzlndjNYZW01RURDUENwMlh2T2d-Q0dCamk1"},"$type":"AuthorizeRequestValidationLog"}
2020-08-16 13:47:31.829 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-16 13:47:31.831 +02:00 [DBG] Creating Implicit Flow response.
2020-08-16 13:47:32.573 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-16 13:47:32.574 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 13:47:32.645 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-16 13:47:32.646 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-16 13:47:32.652 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****QNng","$type":"Token"},{"TokenType":"access_token","TokenValue":"****tqyg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000011-0004-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-16T11:47:32.0000000Z","ProcessId":11196,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-16 13:47:32.654 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"LXRwWDN1RmdqY3RWYzF4dS1pXzlndjNYZW01RURDUENwMlh2T2d-Q0dCamk1","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-16 13:47:32.660 +02:00 [DBG] Augmenting SignInContext
2020-08-16 13:47:32.661 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-16 13:47:33.015 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 13:47:33.020 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:47:33.020 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:47:33.021 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 13:47:33.024 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 13:47:33.024 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 13:47:33.024 +02:00 [DBG] Start discovery request
2020-08-16 13:47:33.042 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 13:47:33.413 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 13:47:33.425 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:47:33.425 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:47:33.426 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 13:47:33.430 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 13:47:33.430 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 13:47:33.430 +02:00 [DBG] Start key discovery request
2020-08-16 13:47:33.858 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-16 13:47:33.863 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:47:33.863 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:47:34.073 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-16 13:47:34.077 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:47:34.078 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:47:34.080 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-16 13:47:34.084 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-16 13:47:34.084 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-16 13:47:34.089 +02:00 [DBG] Start userinfo request
2020-08-16 13:47:34.093 +02:00 [DBG] Bearer token found in header
2020-08-16 13:47:34.137 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 13:47:34.137 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 13:47:34.178 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 13:47:34.178 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 13:47:34.184 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 13:47:34.185 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597578452,"exp":1597582052,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597578451,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 13:47:34.191 +02:00 [DBG] Creating userinfo response
2020-08-16 13:47:34.195 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 13:47:34.198 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 13:47:34.206 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 13:47:34.210 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-16 13:47:34.210 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 13:47:34.219 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 13:47:34.228 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-16 13:47:34.229 +02:00 [DBG] End userinfo request
2020-08-16 13:50:41.045 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 13:50:41.081 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:50:41.081 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:50:41.082 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 13:50:41.083 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 13:50:41.083 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 13:50:41.083 +02:00 [DBG] Start discovery request
2020-08-16 13:50:41.098 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 13:50:42.050 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 13:50:42.059 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:50:42.059 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:50:42.060 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 13:50:42.061 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 13:50:42.061 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 13:50:42.061 +02:00 [DBG] Start key discovery request
2020-08-16 13:52:13.828 +02:00 [INF] Removing 0 grants
2020-08-16 13:52:13.844 +02:00 [INF] Removing 0 device flow codes
2020-08-16 13:53:49.053 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 13:53:49.094 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:53:49.094 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:53:49.097 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 13:53:49.098 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 13:53:49.099 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 13:53:49.099 +02:00 [DBG] Start discovery request
2020-08-16 13:53:49.345 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 13:53:50.935 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 13:53:50.999 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:53:50.999 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:53:51.001 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 13:53:51.002 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 13:53:51.003 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 13:53:51.003 +02:00 [DBG] Start key discovery request
2020-08-16 13:54:43.145 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 13:54:43.171 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:54:43.172 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:54:43.183 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 13:54:43.183 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 13:54:43.183 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 13:54:43.183 +02:00 [DBG] Start discovery request
2020-08-16 13:54:43.226 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 13:54:44.258 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 13:54:44.272 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:54:44.272 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:54:44.273 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 13:54:44.274 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 13:54:44.275 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 13:54:44.275 +02:00 [DBG] Start key discovery request
2020-08-16 13:55:14.566 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 13:55:14.598 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:55:14.598 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:55:14.598 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 13:55:14.599 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 13:55:14.599 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 13:55:14.599 +02:00 [DBG] Start discovery request
2020-08-16 13:55:14.633 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 13:55:15.294 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 13:55:15.299 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:55:15.300 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:55:15.300 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 13:55:15.301 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 13:55:15.301 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 13:55:15.301 +02:00 [DBG] Start key discovery request
2020-08-16 13:55:35.313 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 13:55:35.317 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:55:35.317 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:55:35.317 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 13:55:35.318 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 13:55:35.318 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 13:55:35.318 +02:00 [DBG] Start discovery request
2020-08-16 13:55:35.364 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 13:55:35.607 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 13:55:35.610 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:55:35.610 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:55:35.610 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 13:55:35.610 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 13:55:35.611 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 13:55:35.611 +02:00 [DBG] Start key discovery request
2020-08-16 13:57:13.863 +02:00 [INF] Removing 0 grants
2020-08-16 13:57:13.882 +02:00 [INF] Removing 0 device flow codes
2020-08-16 13:57:42.425 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 13:57:42.449 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:57:42.449 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:57:42.450 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 13:57:42.450 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 13:57:42.450 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 13:57:42.450 +02:00 [DBG] Start discovery request
2020-08-16 13:57:42.559 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 13:57:42.724 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 13:57:42.729 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:57:42.737 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:57:42.739 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 13:57:42.740 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 13:57:42.741 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 13:57:42.741 +02:00 [DBG] Start key discovery request
2020-08-16 13:57:44.460 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-08-16 13:57:44.460 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-08-16 13:57:44.460 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-08-16 13:57:44.460 +02:00 [DBG] Processing signout request for 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 13:57:44.461 +02:00 [DBG] Start end session request validation
2020-08-16 13:57:44.461 +02:00 [DBG] Start identity token validation
2020-08-16 13:57:44.535 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 13:57:44.535 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 13:57:44.536 +02:00 [DBG] Client found: listify.webapp / The Listify WebApplication
2020-08-16 13:57:44.551 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 13:57:44.551 +02:00 [DBG] Token validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597578452,"exp":1597578752,"iss":"http://localhost:5000","aud":"listify.webapp","nonce":"LXRwWDN1RmdqY3RWYzF4dS1pXzlndjNYZW01RURDUENwMlh2T2d-Q0dCamk1","iat":1597578452,"at_hash":"0SrdXdTLMwqNcM7-NUObMA","s_hash":"6pV6MzcyY90F4bbLYjZr3w","sid":"Hx70BC38hrA1Ob2XFisOjQ","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597578451,"idp":"Facebook","amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 13:57:44.552 +02:00 [INF] End session request validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","PostLogOutUri":"http://localhost:4200","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200"},"$type":"EndSessionRequestValidationLog"}
2020-08-16 13:57:44.552 +02:00 [DBG] Success validating end session request from listify.webapp
2020-08-16 13:57:44.731 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-16 13:57:44.732 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-16 13:57:44.732 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-16 13:57:44.732 +02:00 [INF] {"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"8000000f-0006-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-16T11:57:44.0000000Z","ProcessId":11196,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-16 13:57:44.973 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 13:57:44.976 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:57:44.976 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:57:44.977 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 13:57:44.977 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 13:57:44.977 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 13:57:44.977 +02:00 [DBG] Start discovery request
2020-08-16 13:57:44.982 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 13:57:45.111 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 13:57:45.113 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:57:45.114 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:57:45.114 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 13:57:45.114 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 13:57:45.114 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 13:57:45.114 +02:00 [DBG] Start key discovery request
2020-08-16 13:57:45.536 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-16 13:57:45.537 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-16 13:57:45.537 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-16 13:57:45.537 +02:00 [DBG] Start authorize request
2020-08-16 13:57:45.537 +02:00 [DBG] No user present in authorize request
2020-08-16 13:57:45.538 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 13:57:45.550 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 13:57:45.550 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 13:57:45.558 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 13:57:45.576 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 13:57:45.579 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 13:57:45.581 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 13:57:45.582 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 13:57:45.582 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"dVRONzFtYmR-QjJNLVRBZE9GbHhLTzJKeURoQ3BORlp-ZGI4V3ZGOU5CbmVZ","UiLocales":null,"Nonce":"dVRONzFtYmR-QjJNLVRBZE9GbHhLTzJKeURoQ3BORlp-ZGI4V3ZGOU5CbmVZ","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"dVRONzFtYmR-QjJNLVRBZE9GbHhLTzJKeURoQ3BORlp-ZGI4V3ZGOU5CbmVZ","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"dVRONzFtYmR-QjJNLVRBZE9GbHhLTzJKeURoQ3BORlp-ZGI4V3ZGOU5CbmVZ"},"$type":"AuthorizeRequestValidationLog"}
2020-08-16 13:57:45.583 +02:00 [INF] Showing login: User is not authenticated
2020-08-16 13:57:45.612 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 13:57:45.621 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 13:57:45.621 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 13:57:45.623 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 13:57:45.625 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 13:57:45.628 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 13:57:45.630 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 13:57:45.630 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 13:57:45.637 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 13:57:45.637 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 13:57:47.250 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-16 13:57:48.911 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-16 13:57:48.955 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000016-0006-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-16T11:57:48.0000000Z","ProcessId":11196,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-16 13:57:48.955 +02:00 [DBG] Augmenting SignInContext
2020-08-16 13:57:48.955 +02:00 [DBG] Adding amr claim with value: external
2020-08-16 13:57:48.956 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-16 13:57:48.956 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-16 13:57:48.961 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-16 13:57:48.962 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-16 13:57:48.962 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-16 13:57:48.962 +02:00 [DBG] Start authorize callback request
2020-08-16 13:57:48.962 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 13:57:48.962 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 13:57:48.972 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 13:57:48.973 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 13:57:48.974 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 13:57:48.977 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 13:57:48.979 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 13:57:48.981 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 13:57:48.981 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 13:57:48.981 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"dVRONzFtYmR-QjJNLVRBZE9GbHhLTzJKeURoQ3BORlp-ZGI4V3ZGOU5CbmVZ","UiLocales":null,"Nonce":"dVRONzFtYmR-QjJNLVRBZE9GbHhLTzJKeURoQ3BORlp-ZGI4V3ZGOU5CbmVZ","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"VopTjUF38HPUuPnID25wzw","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"dVRONzFtYmR-QjJNLVRBZE9GbHhLTzJKeURoQ3BORlp-ZGI4V3ZGOU5CbmVZ","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"dVRONzFtYmR-QjJNLVRBZE9GbHhLTzJKeURoQ3BORlp-ZGI4V3ZGOU5CbmVZ"},"$type":"AuthorizeRequestValidationLog"}
2020-08-16 13:57:48.984 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-16 13:57:48.984 +02:00 [DBG] Creating Implicit Flow response.
2020-08-16 13:57:48.984 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-16 13:57:48.984 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 13:57:48.989 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-16 13:57:48.989 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-16 13:57:48.990 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****s-nw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****lnQQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000017-0006-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-16T11:57:48.0000000Z","ProcessId":11196,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-16 13:57:48.990 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"dVRONzFtYmR-QjJNLVRBZE9GbHhLTzJKeURoQ3BORlp-ZGI4V3ZGOU5CbmVZ","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-16 13:57:48.990 +02:00 [DBG] Augmenting SignInContext
2020-08-16 13:57:48.990 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-16 13:57:49.194 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 13:57:49.196 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:57:49.196 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:57:49.197 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 13:57:49.197 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 13:57:49.197 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 13:57:49.197 +02:00 [DBG] Start discovery request
2020-08-16 13:57:49.201 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 13:57:49.322 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 13:57:49.325 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:57:49.325 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:57:49.325 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 13:57:49.326 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 13:57:49.326 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 13:57:49.326 +02:00 [DBG] Start key discovery request
2020-08-16 13:57:49.389 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-16 13:57:49.392 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:57:49.392 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:57:49.398 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-16 13:57:49.400 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 13:57:49.400 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 13:57:49.400 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-16 13:57:49.401 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-16 13:57:49.401 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-16 13:57:49.401 +02:00 [DBG] Start userinfo request
2020-08-16 13:57:49.401 +02:00 [DBG] Bearer token found in header
2020-08-16 13:57:49.418 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 13:57:49.418 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 13:57:49.431 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 13:57:49.432 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 13:57:49.434 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 13:57:49.434 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597579068,"exp":1597582668,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597579068,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 13:57:49.435 +02:00 [DBG] Creating userinfo response
2020-08-16 13:57:49.435 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 13:57:49.435 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 13:57:49.438 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 13:57:49.438 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-16 13:57:49.438 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 13:57:49.440 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 13:57:49.447 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-16 13:57:49.447 +02:00 [DBG] End userinfo request
2020-08-16 14:02:10.392 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 14:02:10.396 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 14:02:10.396 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 14:02:10.403 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 14:02:10.403 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 14:02:10.403 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 14:02:10.404 +02:00 [DBG] Start discovery request
2020-08-16 14:02:10.416 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 14:02:10.933 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 14:02:10.936 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 14:02:10.936 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 14:02:10.936 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 14:02:10.936 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 14:02:10.936 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 14:02:10.936 +02:00 [DBG] Start key discovery request
2020-08-16 14:02:13.887 +02:00 [INF] Removing 0 grants
2020-08-16 14:02:13.890 +02:00 [INF] Removing 0 device flow codes
2020-08-16 14:02:40.665 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-08-16 14:02:40.668 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-08-16 14:02:40.668 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-08-16 14:02:40.668 +02:00 [DBG] Processing signout request for 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 14:02:40.668 +02:00 [DBG] Start end session request validation
2020-08-16 14:02:40.668 +02:00 [DBG] Start identity token validation
2020-08-16 14:02:40.729 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 14:02:40.729 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 14:02:40.729 +02:00 [DBG] Client found: listify.webapp / The Listify WebApplication
2020-08-16 14:02:40.734 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 14:02:40.734 +02:00 [DBG] Token validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597579068,"exp":1597579368,"iss":"http://localhost:5000","aud":"listify.webapp","nonce":"dVRONzFtYmR-QjJNLVRBZE9GbHhLTzJKeURoQ3BORlp-ZGI4V3ZGOU5CbmVZ","iat":1597579068,"at_hash":"7yoV_PwJN98OXp8lm3wxNA","s_hash":"A1s_kGg8NUftdxxVLf0-mg","sid":"VopTjUF38HPUuPnID25wzw","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597579068,"idp":"Facebook","amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 14:02:40.735 +02:00 [INF] End session request validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","PostLogOutUri":"http://localhost:4200","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200"},"$type":"EndSessionRequestValidationLog"}
2020-08-16 14:02:40.735 +02:00 [DBG] Success validating end session request from listify.webapp
2020-08-16 14:02:40.768 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-16 14:02:40.769 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-16 14:02:40.770 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-16 14:02:40.770 +02:00 [INF] {"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"80000009-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-16T12:02:40.0000000Z","ProcessId":11196,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-16 14:02:41.120 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 14:02:41.123 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 14:02:41.123 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 14:02:41.123 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 14:02:41.123 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 14:02:41.123 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 14:02:41.123 +02:00 [DBG] Start discovery request
2020-08-16 14:02:41.134 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 14:02:41.311 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 14:02:41.316 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 14:02:41.316 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 14:02:41.317 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 14:02:41.319 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 14:02:41.320 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 14:02:41.320 +02:00 [DBG] Start key discovery request
2020-08-16 14:02:41.734 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-16 14:02:41.740 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-16 14:02:41.740 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-16 14:02:41.740 +02:00 [DBG] Start authorize request
2020-08-16 14:02:41.740 +02:00 [DBG] No user present in authorize request
2020-08-16 14:02:41.740 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 14:02:41.752 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 14:02:41.752 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 14:02:41.759 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 14:02:41.773 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 14:02:41.775 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 14:02:41.777 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 14:02:41.777 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 14:02:41.778 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"bnYtMUVVN2o5ZjdEcVFmZG01dFJndUotTi5iSld-YzFmZEhWeWNlY1d-ZnM4","UiLocales":null,"Nonce":"bnYtMUVVN2o5ZjdEcVFmZG01dFJndUotTi5iSld-YzFmZEhWeWNlY1d-ZnM4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"bnYtMUVVN2o5ZjdEcVFmZG01dFJndUotTi5iSld-YzFmZEhWeWNlY1d-ZnM4","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"bnYtMUVVN2o5ZjdEcVFmZG01dFJndUotTi5iSld-YzFmZEhWeWNlY1d-ZnM4"},"$type":"AuthorizeRequestValidationLog"}
2020-08-16 14:02:41.778 +02:00 [INF] Showing login: User is not authenticated
2020-08-16 14:02:41.815 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 14:02:41.828 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 14:02:41.828 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 14:02:41.830 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 14:02:41.831 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 14:02:41.833 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 14:02:41.834 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 14:02:41.835 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 14:02:41.845 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 14:02:41.845 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 14:02:43.239 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-16 14:02:44.501 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-16 14:02:44.547 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"8000000f-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-16T12:02:44.0000000Z","ProcessId":11196,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-16 14:02:44.547 +02:00 [DBG] Augmenting SignInContext
2020-08-16 14:02:44.547 +02:00 [DBG] Adding amr claim with value: external
2020-08-16 14:02:44.548 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-16 14:02:44.548 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-16 14:02:44.565 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-16 14:02:44.573 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-16 14:02:44.573 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-16 14:02:44.573 +02:00 [DBG] Start authorize callback request
2020-08-16 14:02:44.574 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 14:02:44.574 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 14:02:44.585 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 14:02:44.585 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 14:02:44.588 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 14:02:44.591 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 14:02:44.595 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 14:02:44.598 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 14:02:44.598 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 14:02:44.598 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"bnYtMUVVN2o5ZjdEcVFmZG01dFJndUotTi5iSld-YzFmZEhWeWNlY1d-ZnM4","UiLocales":null,"Nonce":"bnYtMUVVN2o5ZjdEcVFmZG01dFJndUotTi5iSld-YzFmZEhWeWNlY1d-ZnM4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"p7QcNlPPwOtASWXYe7CsyA","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"bnYtMUVVN2o5ZjdEcVFmZG01dFJndUotTi5iSld-YzFmZEhWeWNlY1d-ZnM4","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"bnYtMUVVN2o5ZjdEcVFmZG01dFJndUotTi5iSld-YzFmZEhWeWNlY1d-ZnM4"},"$type":"AuthorizeRequestValidationLog"}
2020-08-16 14:02:44.601 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-16 14:02:44.601 +02:00 [DBG] Creating Implicit Flow response.
2020-08-16 14:02:44.601 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-16 14:02:44.601 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 14:02:44.607 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-16 14:02:44.607 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-16 14:02:44.609 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****ilZg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****V9NQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000010-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-16T12:02:44.0000000Z","ProcessId":11196,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-16 14:02:44.609 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"bnYtMUVVN2o5ZjdEcVFmZG01dFJndUotTi5iSld-YzFmZEhWeWNlY1d-ZnM4","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-16 14:02:44.610 +02:00 [DBG] Augmenting SignInContext
2020-08-16 14:02:44.610 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-16 14:02:44.960 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 14:02:44.962 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 14:02:44.962 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 14:02:44.963 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 14:02:44.963 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 14:02:44.963 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 14:02:44.963 +02:00 [DBG] Start discovery request
2020-08-16 14:02:44.967 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 14:02:45.159 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 14:02:45.163 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 14:02:45.163 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 14:02:45.163 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 14:02:45.164 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 14:02:45.164 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 14:02:45.164 +02:00 [DBG] Start key discovery request
2020-08-16 14:02:45.300 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-16 14:02:45.303 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 14:02:45.303 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 14:02:45.317 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-16 14:02:45.319 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 14:02:45.319 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 14:02:45.319 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-16 14:02:45.325 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-16 14:02:45.325 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-16 14:02:45.325 +02:00 [DBG] Start userinfo request
2020-08-16 14:02:45.325 +02:00 [DBG] Bearer token found in header
2020-08-16 14:02:45.381 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 14:02:45.381 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 14:02:45.403 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 14:02:45.403 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 14:02:45.406 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 14:02:45.407 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597579364,"exp":1597582964,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597579364,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 14:02:45.408 +02:00 [DBG] Creating userinfo response
2020-08-16 14:02:45.408 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 14:02:45.408 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 14:02:45.412 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 14:02:45.412 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-16 14:02:45.412 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 14:02:45.414 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 14:02:45.418 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-16 14:02:45.418 +02:00 [DBG] End userinfo request
2020-08-16 14:05:18.562 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 14:05:18.874 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 14:05:18.874 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 14:05:18.875 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 14:05:18.875 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 14:05:18.875 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 14:05:18.875 +02:00 [DBG] Start discovery request
2020-08-16 14:05:19.606 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 14:05:20.151 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 14:05:20.338 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 14:05:20.338 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 14:05:20.338 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 14:05:20.339 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 14:05:20.339 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 14:05:20.339 +02:00 [DBG] Start key discovery request
2020-08-16 14:06:17.189 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-08-16 14:06:17.216 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-08-16 14:06:17.216 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-08-16 14:06:17.216 +02:00 [DBG] Processing signout request for 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 14:06:17.216 +02:00 [DBG] Start end session request validation
2020-08-16 14:06:17.216 +02:00 [DBG] Start identity token validation
2020-08-16 14:06:17.344 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 14:06:17.345 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 14:06:17.345 +02:00 [DBG] Client found: listify.webapp / The Listify WebApplication
2020-08-16 14:06:17.372 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 14:06:17.372 +02:00 [DBG] Token validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597579364,"exp":1597579664,"iss":"http://localhost:5000","aud":"listify.webapp","nonce":"bnYtMUVVN2o5ZjdEcVFmZG01dFJndUotTi5iSld-YzFmZEhWeWNlY1d-ZnM4","iat":1597579364,"at_hash":"CV8ww8RXfK9iQjyuTa3rYA","s_hash":"BRwFGcFSels5ggulax6xag","sid":"p7QcNlPPwOtASWXYe7CsyA","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597579364,"idp":"Facebook","amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 14:06:17.372 +02:00 [INF] End session request validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","PostLogOutUri":"http://localhost:4200","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200"},"$type":"EndSessionRequestValidationLog"}
2020-08-16 14:06:17.372 +02:00 [DBG] Success validating end session request from listify.webapp
2020-08-16 14:06:17.464 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-16 14:06:17.464 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-16 14:06:17.464 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-16 14:06:17.464 +02:00 [INF] {"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"80000028-0002-fc00-b63f-84710c7967bb","TimeStamp":"2020-08-16T12:06:17.0000000Z","ProcessId":11196,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-16 14:06:17.852 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 14:06:17.858 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 14:06:17.858 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 14:06:17.859 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 14:06:17.859 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 14:06:17.859 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 14:06:17.859 +02:00 [DBG] Start discovery request
2020-08-16 14:06:17.932 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 14:06:18.112 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 14:06:18.126 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 14:06:18.126 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 14:06:18.127 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 14:06:18.127 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 14:06:18.127 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 14:06:18.128 +02:00 [DBG] Start key discovery request
2020-08-16 14:06:18.395 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-16 14:06:18.395 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-16 14:06:18.395 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-16 14:06:18.395 +02:00 [DBG] Start authorize request
2020-08-16 14:06:18.395 +02:00 [DBG] No user present in authorize request
2020-08-16 14:06:18.395 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 14:06:18.427 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 14:06:18.427 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 14:06:18.431 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 14:06:18.446 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 14:06:18.450 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 14:06:18.496 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 14:06:18.497 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 14:06:18.497 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"c2lMZHJOR2RRRDNBWHRBRWNhd0xCMy5sZlQ1enkyZS1MMjFhOFlwYW0xTktP","UiLocales":null,"Nonce":"c2lMZHJOR2RRRDNBWHRBRWNhd0xCMy5sZlQ1enkyZS1MMjFhOFlwYW0xTktP","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"c2lMZHJOR2RRRDNBWHRBRWNhd0xCMy5sZlQ1enkyZS1MMjFhOFlwYW0xTktP","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"c2lMZHJOR2RRRDNBWHRBRWNhd0xCMy5sZlQ1enkyZS1MMjFhOFlwYW0xTktP"},"$type":"AuthorizeRequestValidationLog"}
2020-08-16 14:06:18.497 +02:00 [INF] Showing login: User is not authenticated
2020-08-16 14:06:18.524 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 14:06:18.549 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 14:06:18.549 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 14:06:18.555 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 14:06:18.566 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 14:06:18.577 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 14:06:18.579 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 14:06:18.579 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 14:06:18.594 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 14:06:18.594 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 14:06:19.816 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-16 14:06:21.150 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-16 14:06:21.398 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"8000002e-0002-fc00-b63f-84710c7967bb","TimeStamp":"2020-08-16T12:06:21.0000000Z","ProcessId":11196,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-16 14:06:21.398 +02:00 [DBG] Augmenting SignInContext
2020-08-16 14:06:21.398 +02:00 [DBG] Adding amr claim with value: external
2020-08-16 14:06:21.398 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-16 14:06:21.398 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-16 14:06:21.406 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-16 14:06:21.406 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-16 14:06:21.406 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-16 14:06:21.406 +02:00 [DBG] Start authorize callback request
2020-08-16 14:06:21.406 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 14:06:21.406 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 14:06:21.431 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 14:06:21.431 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 14:06:21.435 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 14:06:21.447 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 14:06:21.449 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 14:06:21.450 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 14:06:21.450 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 14:06:21.451 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"c2lMZHJOR2RRRDNBWHRBRWNhd0xCMy5sZlQ1enkyZS1MMjFhOFlwYW0xTktP","UiLocales":null,"Nonce":"c2lMZHJOR2RRRDNBWHRBRWNhd0xCMy5sZlQ1enkyZS1MMjFhOFlwYW0xTktP","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"5s7WlaB4qHWDUH9fWg6riA","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"c2lMZHJOR2RRRDNBWHRBRWNhd0xCMy5sZlQ1enkyZS1MMjFhOFlwYW0xTktP","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"c2lMZHJOR2RRRDNBWHRBRWNhd0xCMy5sZlQ1enkyZS1MMjFhOFlwYW0xTktP"},"$type":"AuthorizeRequestValidationLog"}
2020-08-16 14:06:21.453 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-16 14:06:21.453 +02:00 [DBG] Creating Implicit Flow response.
2020-08-16 14:06:21.453 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-16 14:06:21.454 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 14:06:21.460 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-16 14:06:21.460 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-16 14:06:21.461 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Kj5A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****rDwQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000002f-0002-fc00-b63f-84710c7967bb","TimeStamp":"2020-08-16T12:06:21.0000000Z","ProcessId":11196,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-16 14:06:21.461 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"c2lMZHJOR2RRRDNBWHRBRWNhd0xCMy5sZlQ1enkyZS1MMjFhOFlwYW0xTktP","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-16 14:06:21.462 +02:00 [DBG] Augmenting SignInContext
2020-08-16 14:06:21.462 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-16 14:06:21.731 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 14:06:21.813 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 14:06:21.813 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 14:06:21.814 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 14:06:21.814 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 14:06:21.814 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 14:06:21.814 +02:00 [DBG] Start discovery request
2020-08-16 14:06:21.934 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 14:06:22.163 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 14:06:22.232 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 14:06:22.232 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 14:06:22.233 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 14:06:22.233 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 14:06:22.233 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 14:06:22.233 +02:00 [DBG] Start key discovery request
2020-08-16 14:06:22.277 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-16 14:06:22.281 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 14:06:22.281 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 14:06:22.284 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-16 14:06:22.286 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 14:06:22.286 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 14:06:22.287 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-16 14:06:22.287 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-16 14:06:22.287 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-16 14:06:22.287 +02:00 [DBG] Start userinfo request
2020-08-16 14:06:22.287 +02:00 [DBG] Bearer token found in header
2020-08-16 14:06:22.346 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 14:06:22.346 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 14:06:22.380 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 14:06:22.380 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 14:06:22.406 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 14:06:22.406 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597579581,"exp":1597583181,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597579581,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 14:06:22.406 +02:00 [DBG] Creating userinfo response
2020-08-16 14:06:22.406 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 14:06:22.407 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 14:06:22.455 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 14:06:22.455 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-16 14:06:22.456 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 14:06:22.457 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 14:06:22.473 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-16 14:06:22.473 +02:00 [DBG] End userinfo request
2020-08-16 14:08:03.982 +02:00 [INF] Removing 0 grants
2020-08-16 14:08:04.006 +02:00 [INF] Removing 0 device flow codes
2020-08-16 14:09:14.555 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 14:09:15.030 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 14:09:15.030 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 14:09:15.030 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 14:09:15.039 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 14:09:15.039 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 14:09:15.039 +02:00 [DBG] Start discovery request
2020-08-16 14:09:15.326 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 14:09:15.635 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 14:09:15.943 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 14:09:15.943 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 14:09:15.943 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 14:09:15.943 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 14:09:15.943 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 14:09:15.944 +02:00 [DBG] Start key discovery request
2020-08-16 14:09:35.171 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 14:09:35.184 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 14:09:35.184 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 14:09:35.185 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 14:09:35.185 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 14:09:35.185 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 14:09:35.185 +02:00 [DBG] Start discovery request
2020-08-16 14:09:35.199 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 14:09:35.608 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 14:09:35.611 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 14:09:35.611 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 14:09:35.611 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 14:09:35.612 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 14:09:35.612 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 14:09:35.612 +02:00 [DBG] Start key discovery request
2020-08-16 15:06:31.347 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-16 15:06:31.404 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-16 15:06:31.404 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-16 15:06:31.404 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-16 15:06:31.404 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-16 15:06:31.404 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-16 15:06:31.404 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-16 15:06:32.055 +02:00 [DBG] Login Url: /Account/Login
2020-08-16 15:06:32.057 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-16 15:06:32.057 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-16 15:06:32.057 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-16 15:06:32.057 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-16 15:06:32.057 +02:00 [DBG] Error Url: /home/error
2020-08-16 15:06:32.057 +02:00 [DBG] Error Id Parameter: errorId
2020-08-16 15:06:41.851 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 15:06:41.854 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 15:06:41.854 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 15:06:41.872 +02:00 [DBG] Start discovery request
2020-08-16 15:06:43.034 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 17:13:25.023 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-16 17:13:25.133 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-16 17:13:25.133 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-16 17:13:25.133 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-16 17:13:25.133 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-16 17:13:25.133 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-16 17:13:25.133 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-16 17:13:25.461 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 17:13:25.461 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 17:13:25.461 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 17:13:25.461 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 17:13:25.567 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 17:13:25.571 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 17:13:25.623 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 17:13:25.623 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 17:13:25.623 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 17:13:25.623 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 17:13:25.629 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 17:13:25.629 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 17:13:25.660 +02:00 [DBG] Login Url: /Account/Login
2020-08-16 17:13:25.660 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-16 17:13:25.660 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-16 17:13:25.660 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-16 17:13:25.661 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-16 17:13:25.661 +02:00 [DBG] Error Url: /home/error
2020-08-16 17:13:25.661 +02:00 [DBG] Error Id Parameter: errorId
2020-08-16 17:13:25.672 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 17:13:25.672 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 17:13:25.672 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 17:13:25.672 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 17:13:25.678 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 17:13:25.678 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 17:13:25.678 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 17:13:25.678 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 17:13:25.678 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 17:13:25.678 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 17:13:25.678 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 17:13:25.678 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 17:13:25.679 +02:00 [DBG] Start discovery request
2020-08-16 17:13:25.679 +02:00 [DBG] Start discovery request
2020-08-16 17:13:25.680 +02:00 [DBG] Start discovery request
2020-08-16 17:13:25.680 +02:00 [DBG] Start discovery request
2020-08-16 17:13:26.272 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 17:13:26.272 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 17:13:26.272 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 17:13:26.272 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 17:13:26.440 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 17:13:26.444 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 17:13:26.444 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 17:13:26.448 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 17:13:26.450 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 17:13:26.450 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 17:13:26.451 +02:00 [DBG] Start key discovery request
2020-08-16 17:13:26.718 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-16 17:13:26.728 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-16 17:13:26.728 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-16 17:13:26.729 +02:00 [DBG] Start authorize request
2020-08-16 17:13:26.736 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 17:13:26.738 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 17:13:26.971 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 17:13:26.980 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 17:13:27.039 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 17:13:27.083 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 17:13:27.092 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 17:13:27.095 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 17:13:27.101 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 17:13:27.111 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"RFdhN3lma25LcWtmN3ZxZ0VqdnZVUC1mZ1ZzUmVyR0QxOVhMUWRkQkxxOFEy","UiLocales":null,"Nonce":"RFdhN3lma25LcWtmN3ZxZ0VqdnZVUC1mZ1ZzUmVyR0QxOVhMUWRkQkxxOFEy","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"5s7WlaB4qHWDUH9fWg6riA","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"RFdhN3lma25LcWtmN3ZxZ0VqdnZVUC1mZ1ZzUmVyR0QxOVhMUWRkQkxxOFEy","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"RFdhN3lma25LcWtmN3ZxZ0VqdnZVUC1mZ1ZzUmVyR0QxOVhMUWRkQkxxOFEy"},"$type":"AuthorizeRequestValidationLog"}
2020-08-16 17:13:27.120 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-16 17:13:27.123 +02:00 [DBG] Creating Implicit Flow response.
2020-08-16 17:13:27.133 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-16 17:13:27.134 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 17:13:27.374 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-16 17:13:27.374 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-16 17:13:27.386 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****9jfA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****9Sqw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000014-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-16T15:13:27.0000000Z","ProcessId":15872,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-16 17:13:27.389 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"RFdhN3lma25LcWtmN3ZxZ0VqdnZVUC1mZ1ZzUmVyR0QxOVhMUWRkQkxxOFEy","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-16 17:13:27.895 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 17:13:27.903 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 17:13:27.903 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 17:13:27.905 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 17:13:27.918 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 17:13:27.918 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 17:13:27.919 +02:00 [DBG] Start discovery request
2020-08-16 17:13:27.928 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 17:13:28.252 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 17:13:28.258 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 17:13:28.258 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 17:13:28.259 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 17:13:28.259 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 17:13:28.259 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 17:13:28.259 +02:00 [DBG] Start key discovery request
2020-08-16 17:13:28.481 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-16 17:13:28.484 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 17:13:28.484 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 17:13:28.486 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-16 17:13:28.489 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 17:13:28.489 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 17:13:28.489 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-16 17:13:28.491 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-16 17:13:28.491 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-16 17:13:28.493 +02:00 [DBG] Start userinfo request
2020-08-16 17:13:28.495 +02:00 [DBG] Bearer token found in header
2020-08-16 17:13:28.554 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 17:13:28.554 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 17:13:28.565 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 17:13:28.565 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 17:13:28.569 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 17:13:28.570 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597590807,"exp":1597594407,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597579581,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 17:13:28.573 +02:00 [DBG] Creating userinfo response
2020-08-16 17:13:28.576 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 17:13:28.577 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 17:13:28.580 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 17:13:28.584 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-16 17:13:28.584 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 17:13:28.586 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 17:13:28.590 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-16 17:13:28.591 +02:00 [DBG] End userinfo request
2020-08-16 17:13:38.499 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-08-16 17:13:38.501 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-08-16 17:13:38.501 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-08-16 17:13:38.503 +02:00 [DBG] Processing signout request for 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 17:13:38.506 +02:00 [DBG] Start end session request validation
2020-08-16 17:13:38.508 +02:00 [DBG] Start identity token validation
2020-08-16 17:13:38.522 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 17:13:38.522 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 17:13:38.524 +02:00 [DBG] Client found: listify.webapp / The Listify WebApplication
2020-08-16 17:13:38.528 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 17:13:38.528 +02:00 [DBG] Token validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597590807,"exp":1597591107,"iss":"http://localhost:5000","aud":"listify.webapp","nonce":"RFdhN3lma25LcWtmN3ZxZ0VqdnZVUC1mZ1ZzUmVyR0QxOVhMUWRkQkxxOFEy","iat":1597590807,"at_hash":"WzsA2ZKXSAt66UH8BjJonA","s_hash":"LCrIJfCFela_EY5Z2TQThw","sid":"5s7WlaB4qHWDUH9fWg6riA","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597579581,"idp":"Facebook","amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 17:13:38.531 +02:00 [INF] End session request validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","PostLogOutUri":"http://localhost:4200","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200"},"$type":"EndSessionRequestValidationLog"}
2020-08-16 17:13:38.531 +02:00 [DBG] Success validating end session request from listify.webapp
2020-08-16 17:13:39.173 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-16 17:13:39.174 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-16 17:13:39.174 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-16 17:13:39.175 +02:00 [INF] {"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"80000016-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-16T15:13:39.0000000Z","ProcessId":15872,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-16 17:13:39.408 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 17:13:39.442 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 17:13:39.443 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 17:13:39.444 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 17:13:39.446 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 17:13:39.446 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 17:13:39.446 +02:00 [DBG] Start discovery request
2020-08-16 17:13:39.479 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 17:13:39.585 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 17:13:39.588 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 17:13:39.588 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 17:13:39.589 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 17:13:39.592 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 17:13:39.592 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 17:13:39.592 +02:00 [DBG] Start key discovery request
2020-08-16 17:13:40.593 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-16 17:13:40.596 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-16 17:13:40.596 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-16 17:13:40.596 +02:00 [DBG] Start authorize request
2020-08-16 17:13:40.597 +02:00 [DBG] No user present in authorize request
2020-08-16 17:13:40.597 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 17:13:40.627 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 17:13:40.627 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 17:13:40.631 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 17:13:40.647 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 17:13:40.649 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 17:13:40.651 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 17:13:40.651 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 17:13:40.651 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"eXlkWU1yU01QaF9CMXNRYk9qVm1VflpOTGxjT29GcU1tRzFMUkh3amJnOHRK","UiLocales":null,"Nonce":"eXlkWU1yU01QaF9CMXNRYk9qVm1VflpOTGxjT29GcU1tRzFMUkh3amJnOHRK","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"eXlkWU1yU01QaF9CMXNRYk9qVm1VflpOTGxjT29GcU1tRzFMUkh3amJnOHRK","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"eXlkWU1yU01QaF9CMXNRYk9qVm1VflpOTGxjT29GcU1tRzFMUkh3amJnOHRK"},"$type":"AuthorizeRequestValidationLog"}
2020-08-16 17:13:40.651 +02:00 [INF] Showing login: User is not authenticated
2020-08-16 17:13:40.938 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 17:13:40.957 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 17:13:40.957 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 17:13:40.968 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 17:13:40.973 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 17:13:40.977 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 17:13:40.980 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 17:13:40.980 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 17:13:40.999 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 17:13:40.999 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 17:13:45.003 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-16 17:13:48.219 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-16 17:13:48.980 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"8000001b-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-16T15:13:48.0000000Z","ProcessId":15872,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-16 17:13:48.986 +02:00 [DBG] Augmenting SignInContext
2020-08-16 17:13:48.987 +02:00 [DBG] Adding amr claim with value: external
2020-08-16 17:13:48.989 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-16 17:13:48.989 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-16 17:13:49.130 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-16 17:13:49.132 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-16 17:13:49.132 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-16 17:13:49.135 +02:00 [DBG] Start authorize callback request
2020-08-16 17:13:49.137 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 17:13:49.138 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 17:13:49.329 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 17:13:49.329 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 17:13:49.400 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 17:13:49.673 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 17:13:50.011 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 17:13:50.108 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 17:13:50.109 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 17:13:50.110 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"eXlkWU1yU01QaF9CMXNRYk9qVm1VflpOTGxjT29GcU1tRzFMUkh3amJnOHRK","UiLocales":null,"Nonce":"eXlkWU1yU01QaF9CMXNRYk9qVm1VflpOTGxjT29GcU1tRzFMUkh3amJnOHRK","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"nEsEMu5tHXazw1IpYHA9nw","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"eXlkWU1yU01QaF9CMXNRYk9qVm1VflpOTGxjT29GcU1tRzFMUkh3amJnOHRK","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"eXlkWU1yU01QaF9CMXNRYk9qVm1VflpOTGxjT29GcU1tRzFMUkh3amJnOHRK"},"$type":"AuthorizeRequestValidationLog"}
2020-08-16 17:13:50.327 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-16 17:13:50.327 +02:00 [DBG] Creating Implicit Flow response.
2020-08-16 17:13:50.327 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-16 17:13:50.327 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 17:13:50.601 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-16 17:13:50.602 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-16 17:13:50.604 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****flqw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****ccPg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000001c-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-16T15:13:50.0000000Z","ProcessId":15872,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-16 17:13:50.604 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"eXlkWU1yU01QaF9CMXNRYk9qVm1VflpOTGxjT29GcU1tRzFMUkh3amJnOHRK","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-16 17:13:50.608 +02:00 [DBG] Augmenting SignInContext
2020-08-16 17:13:50.608 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-16 17:13:50.810 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 17:13:51.070 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 17:13:51.070 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 17:13:51.071 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 17:13:51.072 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 17:13:51.072 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 17:13:51.072 +02:00 [DBG] Start discovery request
2020-08-16 17:13:51.230 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 17:13:51.253 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 17:13:51.258 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 17:13:51.258 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 17:13:51.259 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 17:13:51.259 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 17:13:51.260 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 17:13:51.260 +02:00 [DBG] Start key discovery request
2020-08-16 17:13:51.642 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-16 17:13:51.891 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 17:13:51.892 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 17:13:51.980 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-16 17:13:52.235 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 17:13:52.235 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 17:13:52.236 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-16 17:13:52.237 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-16 17:13:52.237 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-16 17:13:52.237 +02:00 [DBG] Start userinfo request
2020-08-16 17:13:52.237 +02:00 [DBG] Bearer token found in header
2020-08-16 17:13:52.401 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 17:13:52.401 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 17:13:52.431 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 17:13:52.431 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 17:13:52.651 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 17:13:52.651 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597590830,"exp":1597594430,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597590828,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 17:13:52.652 +02:00 [DBG] Creating userinfo response
2020-08-16 17:13:52.652 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 17:13:52.652 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 17:13:52.774 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 17:13:52.774 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-16 17:13:52.774 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 17:13:52.777 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 17:13:52.806 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-16 17:13:52.806 +02:00 [DBG] End userinfo request
2020-08-16 17:14:42.154 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 17:14:42.154 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 17:14:42.154 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 17:14:42.154 +02:00 [DBG] Start discovery request
2020-08-16 17:14:42.186 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 17:14:45.390 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 17:14:45.390 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 17:14:45.390 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 17:14:45.390 +02:00 [DBG] Start key discovery request
2020-08-16 17:14:58.701 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-16 17:14:58.704 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-16 17:14:58.704 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-16 17:14:58.704 +02:00 [DBG] Start userinfo request
2020-08-16 17:14:58.704 +02:00 [DBG] Bearer token found in header
2020-08-16 17:14:58.763 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 17:14:58.763 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 17:14:58.773 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 17:14:58.773 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 17:14:58.777 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 17:14:58.777 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597590830,"exp":1597594430,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597590828,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 17:14:58.777 +02:00 [DBG] Creating userinfo response
2020-08-16 17:14:58.777 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 17:14:58.777 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 17:14:58.781 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 17:14:58.781 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-16 17:14:58.781 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 17:14:58.783 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 17:14:58.790 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-16 17:14:58.790 +02:00 [DBG] End userinfo request
2020-08-16 17:17:54.713 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 17:17:54.726 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 17:17:54.735 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 17:17:54.745 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 17:17:54.745 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 17:17:54.745 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 17:17:54.745 +02:00 [DBG] Start discovery request
2020-08-16 17:17:54.784 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 17:17:55.434 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 17:17:55.436 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 17:17:55.436 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 17:17:55.437 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 17:17:55.437 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 17:17:55.437 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 17:17:55.437 +02:00 [DBG] Start key discovery request
2020-08-16 17:18:48.743 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 17:18:48.743 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 17:18:48.743 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 17:18:48.744 +02:00 [DBG] Start discovery request
2020-08-16 17:18:48.751 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 17:18:48.754 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 17:18:48.754 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 17:18:48.755 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 17:18:48.755 +02:00 [DBG] Start key discovery request
2020-08-16 17:18:48.767 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-16 17:18:48.767 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-16 17:18:48.768 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-16 17:18:48.768 +02:00 [DBG] Start userinfo request
2020-08-16 17:18:48.768 +02:00 [DBG] Bearer token found in header
2020-08-16 17:18:48.787 +02:00 [INF] Removing 0 grants
2020-08-16 17:18:48.822 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 17:18:48.822 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 17:18:48.824 +02:00 [INF] Removing 0 device flow codes
2020-08-16 17:18:48.830 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 17:18:48.830 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 17:18:48.833 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 17:18:48.834 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597590830,"exp":1597594430,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597590828,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 17:18:48.834 +02:00 [DBG] Creating userinfo response
2020-08-16 17:18:48.834 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 17:18:48.834 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 17:18:48.838 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 17:18:48.838 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-16 17:18:48.838 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 17:18:48.839 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 17:18:48.843 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-16 17:18:48.844 +02:00 [DBG] End userinfo request
2020-08-16 19:51:19.325 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-16 19:51:19.517 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-16 19:51:19.517 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-16 19:51:19.517 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-16 19:51:19.517 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-16 19:51:19.517 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-16 19:51:19.518 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-16 19:51:20.519 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 19:51:20.519 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 19:51:20.519 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 19:51:20.519 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 19:51:20.832 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 19:51:20.836 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 19:51:20.960 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 19:51:20.961 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 19:51:20.962 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 19:51:20.963 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 19:51:20.976 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 19:51:20.976 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 19:51:20.999 +02:00 [DBG] Login Url: /Account/Login
2020-08-16 19:51:20.999 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-16 19:51:20.999 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-16 19:51:20.999 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-16 19:51:20.999 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-16 19:51:20.999 +02:00 [DBG] Error Url: /home/error
2020-08-16 19:51:20.999 +02:00 [DBG] Error Id Parameter: errorId
2020-08-16 19:51:21.010 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 19:51:21.010 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 19:51:21.010 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 19:51:21.010 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 19:51:21.015 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 19:51:21.015 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 19:51:21.015 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 19:51:21.015 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 19:51:21.015 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 19:51:21.015 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 19:51:21.015 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 19:51:21.015 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 19:51:21.016 +02:00 [DBG] Start discovery request
2020-08-16 19:51:21.016 +02:00 [DBG] Start discovery request
2020-08-16 19:51:21.016 +02:00 [DBG] Start discovery request
2020-08-16 19:51:21.016 +02:00 [DBG] Start discovery request
2020-08-16 19:51:21.526 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 19:51:21.526 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 19:51:21.526 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 19:51:21.526 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 19:51:21.693 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 19:51:21.700 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 19:51:21.700 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 19:51:21.703 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 19:51:21.704 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 19:51:21.704 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 19:51:21.705 +02:00 [DBG] Start key discovery request
2020-08-16 19:51:21.748 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-16 19:51:21.756 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-16 19:51:21.756 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-16 19:51:21.758 +02:00 [DBG] Start authorize request
2020-08-16 19:51:21.763 +02:00 [DBG] No user present in authorize request
2020-08-16 19:51:21.765 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 19:51:21.976 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 19:51:21.984 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 19:51:22.042 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 19:51:22.085 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 19:51:22.095 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 19:51:22.098 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 19:51:22.103 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 19:51:22.114 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"VWpycUMxT1VWRjFRb3pUTjNKVVNwQ0gyenpSRXlJaTJFYjJFWW5ldDJteUNZ","UiLocales":null,"Nonce":"VWpycUMxT1VWRjFRb3pUTjNKVVNwQ0gyenpSRXlJaTJFYjJFWW5ldDJteUNZ","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"VWpycUMxT1VWRjFRb3pUTjNKVVNwQ0gyenpSRXlJaTJFYjJFWW5ldDJteUNZ","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"VWpycUMxT1VWRjFRb3pUTjNKVVNwQ0gyenpSRXlJaTJFYjJFWW5ldDJteUNZ"},"$type":"AuthorizeRequestValidationLog"}
2020-08-16 19:51:22.120 +02:00 [INF] Showing login: User is not authenticated
2020-08-16 19:51:22.339 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 19:51:22.353 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 19:51:22.353 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 19:51:22.355 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 19:51:22.358 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 19:51:22.361 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 19:51:22.365 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 19:51:22.365 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 19:51:22.382 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 19:51:22.383 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 19:51:27.844 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-16 19:51:29.597 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-16 19:51:30.147 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"8000000d-0004-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-16T17:51:30.0000000Z","ProcessId":24240,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-16 19:51:30.154 +02:00 [DBG] Augmenting SignInContext
2020-08-16 19:51:30.155 +02:00 [DBG] Adding amr claim with value: external
2020-08-16 19:51:30.158 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-16 19:51:30.160 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-16 19:51:30.175 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-16 19:51:30.176 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-16 19:51:30.176 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-16 19:51:30.178 +02:00 [DBG] Start authorize callback request
2020-08-16 19:51:30.181 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 19:51:30.181 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 19:51:30.210 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 19:51:30.210 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 19:51:30.215 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 19:51:30.229 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 19:51:30.231 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 19:51:30.233 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 19:51:30.233 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 19:51:30.233 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"VWpycUMxT1VWRjFRb3pUTjNKVVNwQ0gyenpSRXlJaTJFYjJFWW5ldDJteUNZ","UiLocales":null,"Nonce":"VWpycUMxT1VWRjFRb3pUTjNKVVNwQ0gyenpSRXlJaTJFYjJFWW5ldDJteUNZ","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"a-AW7e6jspBnwhZM8_V3uQ","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"VWpycUMxT1VWRjFRb3pUTjNKVVNwQ0gyenpSRXlJaTJFYjJFWW5ldDJteUNZ","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"VWpycUMxT1VWRjFRb3pUTjNKVVNwQ0gyenpSRXlJaTJFYjJFWW5ldDJteUNZ"},"$type":"AuthorizeRequestValidationLog"}
2020-08-16 19:51:30.266 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-16 19:51:30.269 +02:00 [DBG] Creating Implicit Flow response.
2020-08-16 19:51:30.279 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-16 19:51:30.280 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 19:51:31.858 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-16 19:51:31.859 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-16 19:51:31.865 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****TRPg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****inHQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000000e-0004-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-16T17:51:31.0000000Z","ProcessId":24240,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-16 19:51:31.866 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"VWpycUMxT1VWRjFRb3pUTjNKVVNwQ0gyenpSRXlJaTJFYjJFWW5ldDJteUNZ","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-16 19:51:31.873 +02:00 [DBG] Augmenting SignInContext
2020-08-16 19:51:31.874 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-16 19:51:32.090 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 19:51:32.097 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 19:51:32.098 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 19:51:32.099 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 19:51:32.103 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 19:51:32.103 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 19:51:32.104 +02:00 [DBG] Start discovery request
2020-08-16 19:51:32.137 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 19:51:32.234 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 19:51:32.242 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 19:51:32.242 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 19:51:32.243 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 19:51:32.244 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 19:51:32.244 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 19:51:32.244 +02:00 [DBG] Start key discovery request
2020-08-16 19:51:32.299 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-16 19:51:32.302 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 19:51:32.302 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 19:51:32.304 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-16 19:51:32.310 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 19:51:32.310 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 19:51:32.311 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-16 19:51:32.314 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-16 19:51:32.314 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-16 19:51:32.317 +02:00 [DBG] Start userinfo request
2020-08-16 19:51:32.319 +02:00 [DBG] Bearer token found in header
2020-08-16 19:51:32.509 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 19:51:32.510 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 19:51:32.550 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 19:51:32.550 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 19:51:32.558 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 19:51:32.560 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597600291,"exp":1597603891,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597600290,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 19:51:32.566 +02:00 [DBG] Creating userinfo response
2020-08-16 19:51:32.569 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 19:51:32.570 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 19:51:32.580 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 19:51:32.583 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-16 19:51:32.583 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 19:51:32.588 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 19:51:32.597 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-16 19:51:32.597 +02:00 [DBG] End userinfo request
2020-08-16 19:52:10.428 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 19:52:10.428 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 19:52:10.428 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 19:52:10.429 +02:00 [DBG] Start discovery request
2020-08-16 19:52:10.441 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 19:52:10.758 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 19:52:10.761 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 19:52:10.761 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 19:52:10.761 +02:00 [DBG] Start key discovery request
2020-08-16 19:52:12.282 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-16 19:52:12.283 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-16 19:52:12.283 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-16 19:52:12.283 +02:00 [DBG] Start userinfo request
2020-08-16 19:52:12.283 +02:00 [DBG] Bearer token found in header
2020-08-16 19:52:12.324 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 19:52:12.324 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 19:52:12.333 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 19:52:12.334 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 19:52:12.337 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 19:52:12.338 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597600291,"exp":1597603891,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597600290,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 19:52:12.338 +02:00 [DBG] Creating userinfo response
2020-08-16 19:52:12.338 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 19:52:12.338 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 19:52:12.342 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 19:52:12.342 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-16 19:52:12.342 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 19:52:12.345 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 19:52:12.352 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-16 19:52:12.352 +02:00 [DBG] End userinfo request
2020-08-16 19:56:20.344 +02:00 [INF] Removing 0 grants
2020-08-16 19:56:20.376 +02:00 [INF] Removing 0 device flow codes
2020-08-16 20:24:50.060 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-16 20:24:50.149 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-16 20:24:50.149 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-16 20:24:50.149 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-16 20:24:50.149 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-16 20:24:50.149 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-16 20:24:50.150 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-16 20:24:50.503 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 20:24:50.558 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:24:50.561 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:24:50.625 +02:00 [DBG] Login Url: /Account/Login
2020-08-16 20:24:50.625 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-16 20:24:50.625 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-16 20:24:50.625 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-16 20:24:50.625 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-16 20:24:50.625 +02:00 [DBG] Error Url: /home/error
2020-08-16 20:24:50.625 +02:00 [DBG] Error Id Parameter: errorId
2020-08-16 20:24:50.639 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 20:24:50.646 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 20:24:50.646 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 20:24:50.648 +02:00 [DBG] Start discovery request
2020-08-16 20:24:51.346 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 20:24:53.992 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 20:24:54.000 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:24:54.000 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:24:54.003 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 20:24:54.006 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 20:24:54.007 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 20:24:54.007 +02:00 [DBG] Start discovery request
2020-08-16 20:24:54.031 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 20:24:54.249 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 20:24:54.257 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:24:54.258 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:24:54.266 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 20:24:54.268 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 20:24:54.268 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 20:24:54.270 +02:00 [DBG] Start key discovery request
2020-08-16 20:24:58.521 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-16 20:24:58.532 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-16 20:24:58.532 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-16 20:24:58.534 +02:00 [DBG] Start authorize request
2020-08-16 20:24:58.540 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 20:24:58.541 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 20:24:58.857 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:24:58.865 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:24:58.932 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:24:58.991 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 20:24:59.009 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:24:59.023 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 20:24:59.028 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 20:24:59.039 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"WkFiaGFkZkxodlNvaGNYQ25yYnFzMTlQdlFSN1Z1ODFfQXEwa09ILlQ2X2NM","UiLocales":null,"Nonce":"WkFiaGFkZkxodlNvaGNYQ25yYnFzMTlQdlFSN1Z1ODFfQXEwa09ILlQ2X2NM","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"a-AW7e6jspBnwhZM8_V3uQ","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"WkFiaGFkZkxodlNvaGNYQ25yYnFzMTlQdlFSN1Z1ODFfQXEwa09ILlQ2X2NM","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"WkFiaGFkZkxodlNvaGNYQ25yYnFzMTlQdlFSN1Z1ODFfQXEwa09ILlQ2X2NM"},"$type":"AuthorizeRequestValidationLog"}
2020-08-16 20:24:59.051 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-16 20:24:59.053 +02:00 [DBG] Creating Implicit Flow response.
2020-08-16 20:24:59.061 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-16 20:24:59.062 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 20:24:59.407 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-16 20:24:59.407 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-16 20:24:59.421 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****-bMQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****42fA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000000d-0006-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-16T18:24:59.0000000Z","ProcessId":8644,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-16 20:24:59.423 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"WkFiaGFkZkxodlNvaGNYQ25yYnFzMTlQdlFSN1Z1ODFfQXEwa09ILlQ2X2NM","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-16 20:24:59.831 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 20:24:59.836 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:24:59.837 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:24:59.838 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 20:24:59.852 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 20:24:59.852 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 20:24:59.852 +02:00 [DBG] Start discovery request
2020-08-16 20:24:59.866 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 20:25:00.108 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 20:25:00.154 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:25:00.155 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:25:00.157 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 20:25:00.158 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 20:25:00.158 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 20:25:00.158 +02:00 [DBG] Start key discovery request
2020-08-16 20:25:00.554 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-16 20:25:00.561 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:25:00.561 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:25:00.565 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-16 20:25:00.567 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:25:00.567 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:25:00.568 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-16 20:25:00.570 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-16 20:25:00.570 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-16 20:25:00.573 +02:00 [DBG] Start userinfo request
2020-08-16 20:25:00.574 +02:00 [DBG] Bearer token found in header
2020-08-16 20:25:00.675 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:25:00.675 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:25:00.699 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:25:00.699 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:25:00.703 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 20:25:00.704 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597602299,"exp":1597605899,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597600290,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 20:25:00.708 +02:00 [DBG] Creating userinfo response
2020-08-16 20:25:00.711 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:25:00.711 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:25:00.717 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:25:00.719 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-16 20:25:00.719 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:25:00.721 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:25:00.726 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-16 20:25:00.726 +02:00 [DBG] End userinfo request
2020-08-16 20:25:11.546 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 20:25:11.547 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 20:25:11.547 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 20:25:11.547 +02:00 [DBG] Start discovery request
2020-08-16 20:25:11.559 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 20:25:11.711 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 20:25:11.714 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 20:25:11.714 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 20:25:11.714 +02:00 [DBG] Start key discovery request
2020-08-16 20:25:11.919 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-16 20:25:11.920 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-16 20:25:11.920 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-16 20:25:11.920 +02:00 [DBG] Start userinfo request
2020-08-16 20:25:11.920 +02:00 [DBG] Bearer token found in header
2020-08-16 20:25:11.961 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:25:11.961 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:25:11.999 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:25:11.999 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:25:12.003 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 20:25:12.004 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597602299,"exp":1597605899,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597600290,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 20:25:12.004 +02:00 [DBG] Creating userinfo response
2020-08-16 20:25:12.005 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:25:12.005 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:25:12.010 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:25:12.011 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-16 20:25:12.011 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:25:12.014 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:25:12.020 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-16 20:25:12.020 +02:00 [DBG] End userinfo request
2020-08-16 20:30:24.488 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-16 20:30:24.655 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-16 20:30:24.655 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-16 20:30:24.656 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-16 20:30:24.656 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-16 20:30:24.656 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-16 20:30:24.656 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-16 20:30:25.484 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 20:30:25.575 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:30:25.577 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:30:25.657 +02:00 [DBG] Login Url: /Account/Login
2020-08-16 20:30:25.657 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-16 20:30:25.658 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-16 20:30:25.658 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-16 20:30:25.658 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-16 20:30:25.658 +02:00 [DBG] Error Url: /home/error
2020-08-16 20:30:25.658 +02:00 [DBG] Error Id Parameter: errorId
2020-08-16 20:30:25.677 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 20:30:25.681 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 20:30:25.681 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 20:30:25.683 +02:00 [DBG] Start discovery request
2020-08-16 20:30:27.234 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 20:30:27.372 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 20:30:27.376 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:30:27.376 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:30:27.377 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 20:30:27.379 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 20:30:27.379 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 20:30:27.380 +02:00 [DBG] Start key discovery request
2020-08-16 20:32:21.354 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-16 20:32:21.364 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-16 20:32:21.364 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-16 20:32:21.365 +02:00 [DBG] Start authorize request
2020-08-16 20:32:21.375 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 20:32:21.590 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 20:32:21.900 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:32:21.907 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:32:22.131 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:32:22.180 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 20:32:22.190 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:32:22.192 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 20:32:22.197 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 20:32:22.207 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"SG1tLnlIb0Q0QlRRV290U05GM2YxY2o0aERXUGtDWVpIMkxRMDcwVUVYVXp4","UiLocales":null,"Nonce":"SG1tLnlIb0Q0QlRRV290U05GM2YxY2o0aERXUGtDWVpIMkxRMDcwVUVYVXp4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"a-AW7e6jspBnwhZM8_V3uQ","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"SG1tLnlIb0Q0QlRRV290U05GM2YxY2o0aERXUGtDWVpIMkxRMDcwVUVYVXp4","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"SG1tLnlIb0Q0QlRRV290U05GM2YxY2o0aERXUGtDWVpIMkxRMDcwVUVYVXp4"},"$type":"AuthorizeRequestValidationLog"}
2020-08-16 20:32:22.231 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-16 20:32:22.234 +02:00 [DBG] Creating Implicit Flow response.
2020-08-16 20:32:22.242 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-16 20:32:22.242 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 20:32:22.546 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-16 20:32:22.547 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-16 20:32:22.558 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****U-Jw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****fYKQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000000f-0006-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-16T18:32:22.0000000Z","ProcessId":8704,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-16 20:32:22.560 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"SG1tLnlIb0Q0QlRRV290U05GM2YxY2o0aERXUGtDWVpIMkxRMDcwVUVYVXp4","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-16 20:32:22.877 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 20:32:22.886 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:32:22.887 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:32:22.892 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 20:32:22.895 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 20:32:22.895 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 20:32:22.895 +02:00 [DBG] Start discovery request
2020-08-16 20:32:22.924 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 20:32:23.466 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 20:32:23.471 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:32:23.471 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:32:23.473 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 20:32:23.474 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 20:32:23.474 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 20:32:23.474 +02:00 [DBG] Start key discovery request
2020-08-16 20:32:23.761 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-16 20:32:23.765 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:32:23.765 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:32:23.769 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-16 20:32:23.771 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:32:23.772 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:32:23.773 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-16 20:32:23.776 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-16 20:32:23.776 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-16 20:32:23.779 +02:00 [DBG] Start userinfo request
2020-08-16 20:32:23.781 +02:00 [DBG] Bearer token found in header
2020-08-16 20:32:24.126 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:32:24.126 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:32:24.139 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:32:24.140 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:32:24.144 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 20:32:24.145 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597602742,"exp":1597606342,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597600290,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 20:32:24.149 +02:00 [DBG] Creating userinfo response
2020-08-16 20:32:24.152 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:32:24.152 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:32:24.155 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:32:24.160 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-16 20:32:24.160 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:32:24.162 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:32:24.167 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-16 20:32:24.167 +02:00 [DBG] End userinfo request
2020-08-16 20:32:29.921 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 20:32:29.932 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 20:32:29.932 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 20:32:29.932 +02:00 [DBG] Start discovery request
2020-08-16 20:32:29.939 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 20:32:30.066 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 20:32:30.068 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 20:32:30.068 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 20:32:30.068 +02:00 [DBG] Start key discovery request
2020-08-16 20:32:30.223 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-16 20:32:30.223 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-16 20:32:30.223 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-16 20:32:30.224 +02:00 [DBG] Start userinfo request
2020-08-16 20:32:30.224 +02:00 [DBG] Bearer token found in header
2020-08-16 20:32:30.236 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:32:30.236 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:32:30.243 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:32:30.243 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:32:30.245 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 20:32:30.246 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597602742,"exp":1597606342,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597600290,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 20:32:30.246 +02:00 [DBG] Creating userinfo response
2020-08-16 20:32:30.246 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:32:30.246 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:32:30.248 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:32:30.249 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-16 20:32:30.249 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:32:30.250 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:32:30.254 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-16 20:32:30.254 +02:00 [DBG] End userinfo request
2020-08-16 20:35:00.588 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-08-16 20:35:00.590 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-08-16 20:35:00.591 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-08-16 20:35:00.621 +02:00 [DBG] Processing signout request for 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 20:35:00.623 +02:00 [DBG] Start end session request validation
2020-08-16 20:35:00.626 +02:00 [DBG] Start identity token validation
2020-08-16 20:35:00.671 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:35:00.672 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:35:00.673 +02:00 [DBG] Client found: listify.webapp / The Listify WebApplication
2020-08-16 20:35:00.676 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 20:35:00.677 +02:00 [DBG] Token validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597602742,"exp":1597603042,"iss":"http://localhost:5000","aud":"listify.webapp","nonce":"SG1tLnlIb0Q0QlRRV290U05GM2YxY2o0aERXUGtDWVpIMkxRMDcwVUVYVXp4","iat":1597602742,"at_hash":"vEQsEKc_x9ayIxo3VRhMpQ","s_hash":"c8gut6H58yTHz9YYfTrRbA","sid":"a-AW7e6jspBnwhZM8_V3uQ","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597600290,"idp":"Facebook","amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 20:35:00.681 +02:00 [INF] End session request validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","PostLogOutUri":"http://localhost:4200","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200"},"$type":"EndSessionRequestValidationLog"}
2020-08-16 20:35:00.682 +02:00 [DBG] Success validating end session request from listify.webapp
2020-08-16 20:35:01.077 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-16 20:35:01.078 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-16 20:35:01.080 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-16 20:35:01.082 +02:00 [INF] {"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"80000012-0006-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-16T18:35:01.0000000Z","ProcessId":8704,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-16 20:35:01.514 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 20:35:01.520 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:35:01.520 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:35:01.521 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 20:35:01.522 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 20:35:01.522 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 20:35:01.522 +02:00 [DBG] Start discovery request
2020-08-16 20:35:01.541 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 20:35:02.056 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 20:35:02.060 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:35:02.060 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:35:02.061 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 20:35:02.061 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 20:35:02.062 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 20:35:02.062 +02:00 [DBG] Start key discovery request
2020-08-16 20:35:03.005 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-16 20:35:03.008 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-16 20:35:03.008 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-16 20:35:03.008 +02:00 [DBG] Start authorize request
2020-08-16 20:35:03.008 +02:00 [DBG] No user present in authorize request
2020-08-16 20:35:03.008 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 20:35:03.058 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:35:03.058 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:35:03.066 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:35:03.087 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 20:35:03.094 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:35:03.113 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 20:35:03.113 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 20:35:03.114 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"bDBJRk90UEIxcnRPc1hYdGdqWFJpSG9WWFFNdnJMWDMzU2lfakZCQXA4dlhW","UiLocales":null,"Nonce":"bDBJRk90UEIxcnRPc1hYdGdqWFJpSG9WWFFNdnJMWDMzU2lfakZCQXA4dlhW","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"bDBJRk90UEIxcnRPc1hYdGdqWFJpSG9WWFFNdnJMWDMzU2lfakZCQXA4dlhW","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"bDBJRk90UEIxcnRPc1hYdGdqWFJpSG9WWFFNdnJMWDMzU2lfakZCQXA4dlhW"},"$type":"AuthorizeRequestValidationLog"}
2020-08-16 20:35:03.114 +02:00 [INF] Showing login: User is not authenticated
2020-08-16 20:35:03.374 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 20:35:03.437 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:35:03.437 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:35:03.441 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:35:03.455 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 20:35:03.458 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:35:03.459 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 20:35:03.460 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 20:35:03.491 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:35:03.492 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:35:06.294 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-16 20:35:08.021 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-16 20:35:08.195 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"8000001a-0006-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-16T18:35:08.0000000Z","ProcessId":8704,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-16 20:35:08.201 +02:00 [DBG] Augmenting SignInContext
2020-08-16 20:35:08.202 +02:00 [DBG] Adding amr claim with value: external
2020-08-16 20:35:08.204 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-16 20:35:08.204 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-16 20:35:08.212 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-16 20:35:08.213 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-16 20:35:08.213 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-16 20:35:08.216 +02:00 [DBG] Start authorize callback request
2020-08-16 20:35:08.218 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 20:35:08.218 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 20:35:08.249 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:35:08.249 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:35:08.256 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:35:08.269 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 20:35:08.273 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:35:08.285 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 20:35:08.285 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 20:35:08.286 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"bDBJRk90UEIxcnRPc1hYdGdqWFJpSG9WWFFNdnJMWDMzU2lfakZCQXA4dlhW","UiLocales":null,"Nonce":"bDBJRk90UEIxcnRPc1hYdGdqWFJpSG9WWFFNdnJMWDMzU2lfakZCQXA4dlhW","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"9JRyRoni0HlBIrwWiHmq0Q","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"bDBJRk90UEIxcnRPc1hYdGdqWFJpSG9WWFFNdnJMWDMzU2lfakZCQXA4dlhW","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"bDBJRk90UEIxcnRPc1hYdGdqWFJpSG9WWFFNdnJMWDMzU2lfakZCQXA4dlhW"},"$type":"AuthorizeRequestValidationLog"}
2020-08-16 20:35:08.289 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-16 20:35:08.290 +02:00 [DBG] Creating Implicit Flow response.
2020-08-16 20:35:08.290 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-16 20:35:08.290 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 20:35:08.303 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-16 20:35:08.303 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-16 20:35:08.305 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Nbug","$type":"Token"},{"TokenType":"access_token","TokenValue":"****8QQg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000001b-0006-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-16T18:35:08.0000000Z","ProcessId":8704,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-16 20:35:08.305 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"bDBJRk90UEIxcnRPc1hYdGdqWFJpSG9WWFFNdnJMWDMzU2lfakZCQXA4dlhW","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-16 20:35:08.308 +02:00 [DBG] Augmenting SignInContext
2020-08-16 20:35:08.308 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-16 20:35:08.715 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 20:35:08.721 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:35:08.721 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:35:08.722 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 20:35:08.722 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 20:35:08.722 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 20:35:08.722 +02:00 [DBG] Start discovery request
2020-08-16 20:35:08.739 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 20:35:09.223 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 20:35:09.236 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:35:09.236 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:35:09.237 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 20:35:09.243 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 20:35:09.244 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 20:35:09.244 +02:00 [DBG] Start key discovery request
2020-08-16 20:35:09.650 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-16 20:35:09.654 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:35:09.654 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:35:09.657 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-16 20:35:09.660 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:35:09.660 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:35:09.661 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-16 20:35:09.664 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-16 20:35:09.664 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-16 20:35:09.664 +02:00 [DBG] Start userinfo request
2020-08-16 20:35:09.664 +02:00 [DBG] Bearer token found in header
2020-08-16 20:35:09.705 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:35:09.706 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:35:09.739 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:35:09.739 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:35:09.743 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 20:35:09.743 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597602908,"exp":1597606508,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597602908,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 20:35:09.744 +02:00 [DBG] Creating userinfo response
2020-08-16 20:35:09.744 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:35:09.744 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:35:09.751 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:35:09.751 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-16 20:35:09.752 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:35:09.754 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:35:09.763 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-16 20:35:09.763 +02:00 [DBG] End userinfo request
2020-08-16 20:35:09.855 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 20:35:09.855 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 20:35:09.855 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 20:35:09.855 +02:00 [DBG] Start discovery request
2020-08-16 20:35:09.866 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 20:35:09.869 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 20:35:09.870 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 20:35:09.870 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 20:35:09.870 +02:00 [DBG] Start key discovery request
2020-08-16 20:35:09.880 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-16 20:35:09.880 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-16 20:35:09.880 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-16 20:35:09.881 +02:00 [DBG] Start userinfo request
2020-08-16 20:35:09.881 +02:00 [DBG] Bearer token found in header
2020-08-16 20:35:09.905 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:35:09.905 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:35:09.913 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:35:09.913 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:35:09.916 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 20:35:09.916 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597602908,"exp":1597606508,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597602908,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 20:35:09.916 +02:00 [DBG] Creating userinfo response
2020-08-16 20:35:09.916 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:35:09.916 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:35:09.920 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:35:09.920 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-16 20:35:09.920 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:35:09.922 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:35:09.926 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-16 20:35:09.926 +02:00 [DBG] End userinfo request
2020-08-16 20:35:26.035 +02:00 [INF] Removing 0 grants
2020-08-16 20:35:26.048 +02:00 [INF] Removing 0 device flow codes
2020-08-16 20:36:20.431 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 20:36:20.465 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:36:20.465 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:36:20.466 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 20:36:20.466 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 20:36:20.466 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 20:36:20.466 +02:00 [DBG] Start discovery request
2020-08-16 20:36:20.485 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 20:36:20.619 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 20:36:20.623 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:36:20.623 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:36:20.623 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 20:36:20.627 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 20:36:20.627 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 20:36:20.627 +02:00 [DBG] Start key discovery request
2020-08-16 20:36:20.729 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 20:36:20.729 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 20:36:20.729 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 20:36:20.729 +02:00 [DBG] Start discovery request
2020-08-16 20:36:20.743 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 20:36:20.747 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 20:36:20.747 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 20:36:20.747 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 20:36:20.747 +02:00 [DBG] Start key discovery request
2020-08-16 20:36:20.756 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-16 20:36:20.756 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-16 20:36:20.756 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-16 20:36:20.756 +02:00 [DBG] Start userinfo request
2020-08-16 20:36:20.756 +02:00 [DBG] Bearer token found in header
2020-08-16 20:36:20.788 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:36:20.788 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:36:20.797 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:36:20.797 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:36:20.800 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 20:36:20.801 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597602908,"exp":1597606508,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597602908,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 20:36:20.801 +02:00 [DBG] Creating userinfo response
2020-08-16 20:36:20.801 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:36:20.801 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:36:20.805 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:36:20.805 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-16 20:36:20.805 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:36:20.807 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:36:20.815 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-16 20:36:20.815 +02:00 [DBG] End userinfo request
2020-08-16 20:36:41.815 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-08-16 20:36:41.816 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-08-16 20:36:41.816 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-08-16 20:36:41.817 +02:00 [DBG] Processing signout request for 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 20:36:41.817 +02:00 [DBG] Start end session request validation
2020-08-16 20:36:41.817 +02:00 [DBG] Start identity token validation
2020-08-16 20:36:41.879 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:36:41.879 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:36:41.880 +02:00 [DBG] Client found: listify.webapp / The Listify WebApplication
2020-08-16 20:36:41.889 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 20:36:41.890 +02:00 [DBG] Token validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597602908,"exp":1597603208,"iss":"http://localhost:5000","aud":"listify.webapp","nonce":"bDBJRk90UEIxcnRPc1hYdGdqWFJpSG9WWFFNdnJMWDMzU2lfakZCQXA4dlhW","iat":1597602908,"at_hash":"qxUX-IJTZpZvzG8CzK-cdQ","s_hash":"O7R4R_KfabickoLvrbAeFg","sid":"9JRyRoni0HlBIrwWiHmq0Q","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597602908,"idp":"Facebook","amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 20:36:41.890 +02:00 [INF] End session request validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","PostLogOutUri":"http://localhost:4200","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200"},"$type":"EndSessionRequestValidationLog"}
2020-08-16 20:36:41.890 +02:00 [DBG] Success validating end session request from listify.webapp
2020-08-16 20:36:41.961 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-16 20:36:41.961 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-16 20:36:41.961 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-16 20:36:41.962 +02:00 [INF] {"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"8000001d-0006-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-16T18:36:41.0000000Z","ProcessId":8704,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-16 20:36:42.289 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 20:36:42.292 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:36:42.292 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:36:42.292 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 20:36:42.292 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 20:36:42.293 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 20:36:42.293 +02:00 [DBG] Start discovery request
2020-08-16 20:36:42.307 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 20:36:42.477 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 20:36:42.480 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:36:42.480 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:36:42.481 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 20:36:42.482 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 20:36:42.482 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 20:36:42.482 +02:00 [DBG] Start key discovery request
2020-08-16 20:36:42.906 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-16 20:36:42.910 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-16 20:36:42.910 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-16 20:36:42.910 +02:00 [DBG] Start authorize request
2020-08-16 20:36:42.910 +02:00 [DBG] No user present in authorize request
2020-08-16 20:36:42.910 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 20:36:42.926 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:36:42.927 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:36:42.933 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:36:42.946 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 20:36:42.960 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:36:42.962 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 20:36:42.963 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 20:36:42.963 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"clBKWVFkVkdGYm54aWZKLlFzSGs0TjRweE5XV09tb28zflVSVU1JWUZBWkU0","UiLocales":null,"Nonce":"clBKWVFkVkdGYm54aWZKLlFzSGs0TjRweE5XV09tb28zflVSVU1JWUZBWkU0","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"clBKWVFkVkdGYm54aWZKLlFzSGs0TjRweE5XV09tb28zflVSVU1JWUZBWkU0","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"clBKWVFkVkdGYm54aWZKLlFzSGs0TjRweE5XV09tb28zflVSVU1JWUZBWkU0"},"$type":"AuthorizeRequestValidationLog"}
2020-08-16 20:36:42.964 +02:00 [INF] Showing login: User is not authenticated
2020-08-16 20:36:43.000 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 20:36:43.020 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:36:43.020 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:36:43.022 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:36:43.023 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 20:36:43.025 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:36:43.026 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 20:36:43.026 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 20:36:43.036 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:36:43.036 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:36:45.291 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-16 20:36:46.355 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-16 20:36:46.416 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000023-0006-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-16T18:36:46.0000000Z","ProcessId":8704,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-16 20:36:46.416 +02:00 [DBG] Augmenting SignInContext
2020-08-16 20:36:46.416 +02:00 [DBG] Adding amr claim with value: external
2020-08-16 20:36:46.417 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-16 20:36:46.417 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-16 20:36:46.444 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-16 20:36:46.445 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-16 20:36:46.445 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-16 20:36:46.445 +02:00 [DBG] Start authorize callback request
2020-08-16 20:36:46.445 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 20:36:46.445 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 20:36:46.472 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:36:46.472 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:36:46.476 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:36:46.489 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 20:36:46.491 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:36:46.493 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 20:36:46.493 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 20:36:46.493 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"clBKWVFkVkdGYm54aWZKLlFzSGs0TjRweE5XV09tb28zflVSVU1JWUZBWkU0","UiLocales":null,"Nonce":"clBKWVFkVkdGYm54aWZKLlFzSGs0TjRweE5XV09tb28zflVSVU1JWUZBWkU0","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"RpgktgGwDr7tp4LoD2Si3g","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"clBKWVFkVkdGYm54aWZKLlFzSGs0TjRweE5XV09tb28zflVSVU1JWUZBWkU0","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"clBKWVFkVkdGYm54aWZKLlFzSGs0TjRweE5XV09tb28zflVSVU1JWUZBWkU0"},"$type":"AuthorizeRequestValidationLog"}
2020-08-16 20:36:46.496 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-16 20:36:46.496 +02:00 [DBG] Creating Implicit Flow response.
2020-08-16 20:36:46.497 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-16 20:36:46.497 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 20:36:46.503 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-16 20:36:46.503 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-16 20:36:46.505 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****l9qg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****ysdw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000024-0006-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-16T18:36:46.0000000Z","ProcessId":8704,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-16 20:36:46.505 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"clBKWVFkVkdGYm54aWZKLlFzSGs0TjRweE5XV09tb28zflVSVU1JWUZBWkU0","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-16 20:36:46.506 +02:00 [DBG] Augmenting SignInContext
2020-08-16 20:36:46.506 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-16 20:36:46.979 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 20:36:46.981 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:36:46.982 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:36:46.982 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 20:36:46.982 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 20:36:46.982 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 20:36:46.982 +02:00 [DBG] Start discovery request
2020-08-16 20:36:46.994 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 20:36:47.196 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 20:36:47.200 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:36:47.200 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:36:47.201 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 20:36:47.201 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 20:36:47.201 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 20:36:47.201 +02:00 [DBG] Start key discovery request
2020-08-16 20:36:47.370 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-16 20:36:47.378 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:36:47.378 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:36:47.394 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-16 20:36:47.398 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:36:47.398 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:36:47.399 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-16 20:36:47.399 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-16 20:36:47.399 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-16 20:36:47.399 +02:00 [DBG] Start userinfo request
2020-08-16 20:36:47.399 +02:00 [DBG] Bearer token found in header
2020-08-16 20:36:47.446 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:36:47.446 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:36:47.487 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:36:47.487 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:36:47.492 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 20:36:47.492 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597603006,"exp":1597606606,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597603006,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 20:36:47.492 +02:00 [DBG] Creating userinfo response
2020-08-16 20:36:47.493 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:36:47.493 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:36:47.498 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:36:47.498 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-16 20:36:47.498 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:36:47.500 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:36:47.508 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-16 20:36:47.508 +02:00 [DBG] End userinfo request
2020-08-16 20:36:47.632 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 20:36:47.633 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 20:36:47.633 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 20:36:47.633 +02:00 [DBG] Start discovery request
2020-08-16 20:36:47.645 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 20:36:47.648 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 20:36:47.648 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 20:36:47.648 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 20:36:47.648 +02:00 [DBG] Start key discovery request
2020-08-16 20:36:47.651 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-16 20:36:47.652 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-16 20:36:47.652 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-16 20:36:47.652 +02:00 [DBG] Start userinfo request
2020-08-16 20:36:47.652 +02:00 [DBG] Bearer token found in header
2020-08-16 20:36:47.684 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:36:47.684 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:36:47.710 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:36:47.710 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:36:47.712 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 20:36:47.712 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597603006,"exp":1597606606,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597603006,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 20:36:47.713 +02:00 [DBG] Creating userinfo response
2020-08-16 20:36:47.713 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:36:47.713 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:36:47.716 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:36:47.716 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-16 20:36:47.716 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:36:47.718 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:36:47.723 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-16 20:36:47.723 +02:00 [DBG] End userinfo request
2020-08-16 20:37:42.269 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 20:37:42.276 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:37:42.276 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:37:42.284 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 20:37:42.284 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 20:37:42.284 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 20:37:42.284 +02:00 [DBG] Start discovery request
2020-08-16 20:37:42.308 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 20:37:42.829 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 20:37:42.829 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 20:37:42.829 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 20:37:42.829 +02:00 [DBG] Start discovery request
2020-08-16 20:37:42.834 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 20:37:42.839 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 20:37:42.839 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 20:37:42.839 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 20:37:42.839 +02:00 [DBG] Start key discovery request
2020-08-16 20:37:42.857 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-16 20:37:42.857 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-16 20:37:42.857 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-16 20:37:42.857 +02:00 [DBG] Start userinfo request
2020-08-16 20:37:42.857 +02:00 [DBG] Bearer token found in header
2020-08-16 20:37:42.871 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 20:37:42.917 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:37:42.917 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:37:42.927 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:37:42.927 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:37:42.930 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 20:37:42.930 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597603006,"exp":1597606606,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597603006,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 20:37:42.930 +02:00 [DBG] Creating userinfo response
2020-08-16 20:37:42.931 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:37:42.931 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:37:42.935 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:37:42.935 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-16 20:37:42.935 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:37:42.945 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:37:42.951 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-16 20:37:42.952 +02:00 [DBG] End userinfo request
2020-08-16 20:37:42.983 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:37:42.984 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:37:42.984 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 20:37:42.984 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 20:37:42.984 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 20:37:42.984 +02:00 [DBG] Start key discovery request
2020-08-16 20:38:03.756 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 20:38:03.760 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:38:03.761 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:38:03.761 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 20:38:03.761 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 20:38:03.761 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 20:38:03.761 +02:00 [DBG] Start discovery request
2020-08-16 20:38:03.774 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 20:38:04.167 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 20:38:04.175 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:38:04.175 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:38:04.175 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 20:38:04.176 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 20:38:04.176 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 20:38:04.176 +02:00 [DBG] Start key discovery request
2020-08-16 20:38:04.252 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 20:38:04.253 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 20:38:04.253 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 20:38:04.253 +02:00 [DBG] Start discovery request
2020-08-16 20:38:04.274 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 20:38:04.296 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 20:38:04.297 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 20:38:04.297 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 20:38:04.297 +02:00 [DBG] Start key discovery request
2020-08-16 20:38:04.302 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-16 20:38:04.311 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-16 20:38:04.311 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-16 20:38:04.311 +02:00 [DBG] Start userinfo request
2020-08-16 20:38:04.311 +02:00 [DBG] Bearer token found in header
2020-08-16 20:38:04.407 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:38:04.407 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:38:04.447 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:38:04.447 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:38:04.451 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 20:38:04.452 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597603006,"exp":1597606606,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597603006,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 20:38:04.452 +02:00 [DBG] Creating userinfo response
2020-08-16 20:38:04.452 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:38:04.452 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:38:04.458 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:38:04.458 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-16 20:38:04.458 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:38:04.460 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:38:04.467 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-16 20:38:04.467 +02:00 [DBG] End userinfo request
2020-08-16 20:38:16.817 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 20:38:16.821 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:38:16.821 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:38:16.822 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 20:38:16.822 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 20:38:16.822 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 20:38:16.822 +02:00 [DBG] Start discovery request
2020-08-16 20:38:16.846 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 20:38:17.567 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 20:38:17.568 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 20:38:17.568 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 20:38:17.568 +02:00 [DBG] Start discovery request
2020-08-16 20:38:17.597 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 20:38:17.620 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 20:38:17.621 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 20:38:17.629 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 20:38:17.629 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 20:38:17.630 +02:00 [DBG] Start key discovery request
2020-08-16 20:38:17.647 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-16 20:38:17.649 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-16 20:38:17.649 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-16 20:38:17.649 +02:00 [DBG] Start userinfo request
2020-08-16 20:38:17.649 +02:00 [DBG] Bearer token found in header
2020-08-16 20:38:17.698 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:38:17.698 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:38:17.699 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 20:38:17.699 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 20:38:17.699 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 20:38:17.699 +02:00 [DBG] Start key discovery request
2020-08-16 20:38:17.748 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:38:17.749 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:38:17.789 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:38:17.789 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:38:17.797 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 20:38:17.797 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597603006,"exp":1597606606,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597603006,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 20:38:17.797 +02:00 [DBG] Creating userinfo response
2020-08-16 20:38:17.797 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:38:17.797 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:38:17.802 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:38:17.802 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-16 20:38:17.802 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:38:17.804 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:38:17.810 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-16 20:38:17.810 +02:00 [DBG] End userinfo request
2020-08-16 20:38:27.818 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 20:38:28.183 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:38:28.183 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:38:28.183 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 20:38:28.184 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 20:38:28.184 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 20:38:28.184 +02:00 [DBG] Start discovery request
2020-08-16 20:38:28.397 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 20:38:28.793 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 20:38:28.983 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 20:38:28.984 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 20:38:28.984 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 20:38:28.984 +02:00 [DBG] Start discovery request
2020-08-16 20:38:29.025 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:38:29.025 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:38:29.025 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 20:38:29.025 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 20:38:29.025 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 20:38:29.025 +02:00 [DBG] Start key discovery request
2020-08-16 20:38:29.627 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 20:38:29.629 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 20:38:29.629 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 20:38:29.630 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 20:38:29.630 +02:00 [DBG] Start key discovery request
2020-08-16 20:38:29.632 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-16 20:38:29.633 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-16 20:38:29.633 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-16 20:38:29.633 +02:00 [DBG] Start userinfo request
2020-08-16 20:38:29.633 +02:00 [DBG] Bearer token found in header
2020-08-16 20:38:30.323 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:38:30.324 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:38:30.737 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:38:30.737 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:38:30.784 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 20:38:30.785 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597603006,"exp":1597606606,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597603006,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 20:38:30.785 +02:00 [DBG] Creating userinfo response
2020-08-16 20:38:30.785 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:38:30.785 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:38:30.860 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:38:30.860 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-16 20:38:30.860 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:38:30.862 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:38:31.288 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-16 20:38:31.289 +02:00 [DBG] End userinfo request
2020-08-16 20:47:36.931 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-16 20:47:37.024 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-16 20:47:37.024 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-16 20:47:37.024 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-16 20:47:37.024 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-16 20:47:37.024 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-16 20:47:37.024 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-16 20:47:37.458 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 20:47:37.502 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:47:37.505 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:47:37.572 +02:00 [DBG] Login Url: /Account/Login
2020-08-16 20:47:37.572 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-16 20:47:37.572 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-16 20:47:37.572 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-16 20:47:37.572 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-16 20:47:37.573 +02:00 [DBG] Error Url: /home/error
2020-08-16 20:47:37.573 +02:00 [DBG] Error Id Parameter: errorId
2020-08-16 20:47:37.583 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 20:47:37.601 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 20:47:37.601 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 20:47:37.602 +02:00 [DBG] Start discovery request
2020-08-16 20:47:38.024 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 20:47:38.209 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 20:47:38.211 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:47:38.211 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:47:38.212 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 20:47:38.214 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 20:47:38.214 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 20:47:38.215 +02:00 [DBG] Start key discovery request
2020-08-16 20:47:38.293 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-16 20:47:38.307 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-16 20:47:38.307 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-16 20:47:38.310 +02:00 [DBG] Start authorize request
2020-08-16 20:47:38.316 +02:00 [DBG] No user present in authorize request
2020-08-16 20:47:38.318 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 20:47:38.564 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:47:38.571 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:47:38.635 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:47:38.676 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 20:47:38.685 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:47:38.689 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 20:47:38.693 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 20:47:38.704 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"c3F6RXhCUTBDVE8wbXhnbzdwVmhwRW1Kb2NzNFZBUy5VVFR6ejdDV3AweDRS","UiLocales":null,"Nonce":"c3F6RXhCUTBDVE8wbXhnbzdwVmhwRW1Kb2NzNFZBUy5VVFR6ejdDV3AweDRS","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"c3F6RXhCUTBDVE8wbXhnbzdwVmhwRW1Kb2NzNFZBUy5VVFR6ejdDV3AweDRS","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"c3F6RXhCUTBDVE8wbXhnbzdwVmhwRW1Kb2NzNFZBUy5VVFR6ejdDV3AweDRS"},"$type":"AuthorizeRequestValidationLog"}
2020-08-16 20:47:38.709 +02:00 [INF] Showing login: User is not authenticated
2020-08-16 20:47:38.953 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 20:47:38.968 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:47:38.968 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:47:38.974 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:47:38.977 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 20:47:38.980 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:47:38.982 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 20:47:38.982 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 20:47:38.997 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:47:38.997 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:47:42.599 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-16 20:47:46.547 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 20:47:46.572 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:47:46.572 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:47:46.575 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:47:46.578 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 20:47:46.581 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:47:46.583 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 20:47:46.583 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 20:47:46.592 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:47:46.592 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:47:56.895 +02:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2020-08-16 20:47:57.519 +02:00 [DBG] Augmenting SignInContext
2020-08-16 20:47:57.520 +02:00 [DBG] Adding idp claim with value: local
2020-08-16 20:47:57.520 +02:00 [DBG] Adding auth_time claim with value: 1597603677
2020-08-16 20:47:57.532 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-16 20:47:57.547 +02:00 [INF] {"Username":"aboelkassem","Provider":null,"ProviderUserId":null,"SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","DisplayName":"aboelkassem","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000015-0005-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-16T18:47:57.0000000Z","ProcessId":12984,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2020-08-16 20:47:57.561 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-16 20:47:57.562 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-16 20:47:57.562 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-16 20:47:57.564 +02:00 [DBG] Start authorize callback request
2020-08-16 20:47:57.568 +02:00 [DBG] User in authorize request: 598738a9-a451-4183-a345-2bcf44f4ae50
2020-08-16 20:47:57.568 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 20:47:57.585 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:47:57.585 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:47:57.590 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:47:57.594 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 20:47:57.596 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:47:57.598 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 20:47:57.599 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 20:47:57.599 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"c3F6RXhCUTBDVE8wbXhnbzdwVmhwRW1Kb2NzNFZBUy5VVFR6ejdDV3AweDRS","UiLocales":null,"Nonce":"c3F6RXhCUTBDVE8wbXhnbzdwVmhwRW1Kb2NzNFZBUy5VVFR6ejdDV3AweDRS","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"7-QoU5zkbOPtluH1QyzRXw","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"c3F6RXhCUTBDVE8wbXhnbzdwVmhwRW1Kb2NzNFZBUy5VVFR6ejdDV3AweDRS","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"c3F6RXhCUTBDVE8wbXhnbzdwVmhwRW1Kb2NzNFZBUy5VVFR6ejdDV3AweDRS"},"$type":"AuthorizeRequestValidationLog"}
2020-08-16 20:47:57.622 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-16 20:47:57.625 +02:00 [DBG] Creating Implicit Flow response.
2020-08-16 20:47:57.645 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-16 20:47:57.646 +02:00 [DBG] Getting claims for access token for subject: 598738a9-a451-4183-a345-2bcf44f4ae50
2020-08-16 20:47:57.777 +02:00 [DBG] Getting claims for identity token for subject: 598738a9-a451-4183-a345-2bcf44f4ae50 and client: listify.webapp
2020-08-16 20:47:57.778 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-16 20:47:57.784 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****uOfQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****f8qA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000016-0005-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-16T18:47:57.0000000Z","ProcessId":12984,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2020-08-16 20:47:57.785 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"c3F6RXhCUTBDVE8wbXhnbzdwVmhwRW1Kb2NzNFZBUy5VVFR6ejdDV3AweDRS","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-16 20:47:57.792 +02:00 [DBG] Augmenting SignInContext
2020-08-16 20:47:57.792 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-16 20:47:58.793 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 20:47:58.802 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:47:58.803 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:47:58.804 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 20:47:58.806 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 20:47:58.806 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 20:47:58.807 +02:00 [DBG] Start discovery request
2020-08-16 20:47:58.824 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 20:47:58.858 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 20:47:58.865 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:47:58.865 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:47:58.867 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 20:47:58.868 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 20:47:58.868 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 20:47:58.868 +02:00 [DBG] Start key discovery request
2020-08-16 20:47:58.925 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-16 20:47:58.928 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:47:58.928 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:47:58.933 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-16 20:47:58.936 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:47:58.936 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:47:58.936 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-16 20:47:58.944 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-16 20:47:58.944 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-16 20:47:58.949 +02:00 [DBG] Start userinfo request
2020-08-16 20:47:58.952 +02:00 [DBG] Bearer token found in header
2020-08-16 20:47:59.129 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:47:59.129 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:47:59.167 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:47:59.167 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:47:59.173 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 20:47:59.174 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597603677,"exp":1597607277,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"598738a9-a451-4183-a345-2bcf44f4ae50","auth_time":1597603677,"idp":"local","scope":["profile","openid","roles","listifyWebAPI"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-08-16 20:47:59.179 +02:00 [DBG] Creating userinfo response
2020-08-16 20:47:59.182 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:47:59.184 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:47:59.193 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:47:59.197 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-16 20:47:59.197 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:47:59.200 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:47:59.209 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website role preferred_username
2020-08-16 20:47:59.209 +02:00 [DBG] End userinfo request
2020-08-16 20:48:03.322 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 20:48:03.325 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 20:48:03.325 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 20:48:03.325 +02:00 [DBG] Start discovery request
2020-08-16 20:48:03.338 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 20:48:03.470 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 20:48:03.471 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 20:48:03.471 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 20:48:03.471 +02:00 [DBG] Start key discovery request
2020-08-16 20:48:03.608 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-16 20:48:03.608 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-16 20:48:03.608 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-16 20:48:03.608 +02:00 [DBG] Start userinfo request
2020-08-16 20:48:03.609 +02:00 [DBG] Bearer token found in header
2020-08-16 20:48:03.644 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:48:03.645 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:48:03.674 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:48:03.674 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:48:03.678 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 20:48:03.678 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597603677,"exp":1597607277,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"598738a9-a451-4183-a345-2bcf44f4ae50","auth_time":1597603677,"idp":"local","scope":["profile","openid","roles","listifyWebAPI"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-08-16 20:48:03.678 +02:00 [DBG] Creating userinfo response
2020-08-16 20:48:03.678 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:48:03.678 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:48:03.683 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:48:03.683 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-16 20:48:03.683 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:48:03.685 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:48:03.690 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website role preferred_username
2020-08-16 20:48:03.690 +02:00 [DBG] End userinfo request
2020-08-16 20:56:01.729 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-16 20:56:01.773 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-16 20:56:01.773 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-16 20:56:01.773 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-16 20:56:01.773 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-16 20:56:01.773 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-16 20:56:01.773 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-16 20:56:02.130 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 20:56:02.130 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 20:56:02.199 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:56:02.210 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:56:02.212 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:56:02.212 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:56:02.266 +02:00 [DBG] Login Url: /Account/Login
2020-08-16 20:56:02.266 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-16 20:56:02.266 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-16 20:56:02.266 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-16 20:56:02.266 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-16 20:56:02.266 +02:00 [DBG] Error Url: /home/error
2020-08-16 20:56:02.266 +02:00 [DBG] Error Id Parameter: errorId
2020-08-16 20:56:02.284 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 20:56:02.284 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 20:56:02.295 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 20:56:02.295 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 20:56:02.295 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 20:56:02.295 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 20:56:02.297 +02:00 [DBG] Start discovery request
2020-08-16 20:56:02.297 +02:00 [DBG] Start discovery request
2020-08-16 20:56:02.759 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 20:56:02.759 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 20:56:02.928 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 20:56:02.932 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:56:02.932 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:56:02.937 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 20:56:02.939 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 20:56:02.939 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 20:56:02.940 +02:00 [DBG] Start key discovery request
2020-08-16 20:56:03.028 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-16 20:56:03.037 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-16 20:56:03.037 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-16 20:56:03.038 +02:00 [DBG] Start authorize request
2020-08-16 20:56:03.047 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 20:56:03.049 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 20:56:03.458 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:56:04.387 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:56:04.474 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:56:04.536 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 20:56:04.549 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:56:04.564 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 20:56:04.571 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 20:56:04.582 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"aXQyNXlPcjlCYjFvaXY1T01DaVl0MzVFUFcwOEhBcGdsT35kX0R1Y0VZdDR4","UiLocales":null,"Nonce":"aXQyNXlPcjlCYjFvaXY1T01DaVl0MzVFUFcwOEhBcGdsT35kX0R1Y0VZdDR4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"RpgktgGwDr7tp4LoD2Si3g","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"aXQyNXlPcjlCYjFvaXY1T01DaVl0MzVFUFcwOEhBcGdsT35kX0R1Y0VZdDR4","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"aXQyNXlPcjlCYjFvaXY1T01DaVl0MzVFUFcwOEhBcGdsT35kX0R1Y0VZdDR4"},"$type":"AuthorizeRequestValidationLog"}
2020-08-16 20:56:04.606 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-16 20:56:04.609 +02:00 [DBG] Creating Implicit Flow response.
2020-08-16 20:56:04.618 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-16 20:56:04.618 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 20:56:04.830 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-16 20:56:04.830 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-16 20:56:04.840 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****E8dg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****81yw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000025-0001-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-16T18:56:04.0000000Z","ProcessId":2764,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-16 20:56:04.841 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"aXQyNXlPcjlCYjFvaXY1T01DaVl0MzVFUFcwOEhBcGdsT35kX0R1Y0VZdDR4","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-16 20:56:05.410 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 20:56:05.416 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:56:05.417 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:56:05.419 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 20:56:05.431 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 20:56:05.431 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 20:56:05.431 +02:00 [DBG] Start discovery request
2020-08-16 20:56:05.444 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 20:56:05.622 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 20:56:05.624 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:56:05.625 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:56:05.625 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 20:56:05.626 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 20:56:05.626 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 20:56:05.626 +02:00 [DBG] Start key discovery request
2020-08-16 20:56:05.944 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-16 20:56:05.952 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:56:05.953 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:56:05.961 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-16 20:56:05.965 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:56:05.966 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:56:05.966 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-16 20:56:05.969 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-16 20:56:05.969 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-16 20:56:05.971 +02:00 [DBG] Start userinfo request
2020-08-16 20:56:05.973 +02:00 [DBG] Bearer token found in header
2020-08-16 20:56:06.068 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:56:06.068 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:56:06.083 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:56:06.083 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:56:06.087 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 20:56:06.088 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597604164,"exp":1597607764,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597603006,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 20:56:06.092 +02:00 [DBG] Creating userinfo response
2020-08-16 20:56:06.095 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:56:06.096 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:56:06.102 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:56:06.105 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-16 20:56:06.105 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:56:06.107 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:56:06.113 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-16 20:56:06.113 +02:00 [DBG] End userinfo request
2020-08-16 20:56:14.142 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 20:56:14.143 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 20:56:14.143 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 20:56:14.143 +02:00 [DBG] Start discovery request
2020-08-16 20:56:14.156 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 20:56:14.265 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 20:56:14.267 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 20:56:14.267 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 20:56:14.267 +02:00 [DBG] Start key discovery request
2020-08-16 20:56:14.399 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-16 20:56:14.399 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-16 20:56:14.399 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-16 20:56:14.400 +02:00 [DBG] Start userinfo request
2020-08-16 20:56:14.400 +02:00 [DBG] Bearer token found in header
2020-08-16 20:56:14.426 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:56:14.426 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:56:14.434 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:56:14.434 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:56:14.437 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 20:56:14.438 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597604164,"exp":1597607764,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597603006,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 20:56:14.438 +02:00 [DBG] Creating userinfo response
2020-08-16 20:56:14.438 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:56:14.438 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:56:14.442 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:56:14.442 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-16 20:56:14.442 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:56:14.444 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:56:14.450 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-16 20:56:14.450 +02:00 [DBG] End userinfo request
2020-08-16 20:58:48.492 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-16 20:58:48.526 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-16 20:58:48.526 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-16 20:58:48.526 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-16 20:58:48.526 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-16 20:58:48.526 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-16 20:58:48.526 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-16 20:58:48.748 +02:00 [DBG] Login Url: /Account/Login
2020-08-16 20:58:48.750 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-16 20:58:48.750 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-16 20:58:48.750 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-16 20:58:48.750 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-16 20:58:48.750 +02:00 [DBG] Error Url: /home/error
2020-08-16 20:58:48.750 +02:00 [DBG] Error Id Parameter: errorId
2020-08-16 20:58:48.774 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-08-16 20:58:48.777 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-08-16 20:58:48.778 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-08-16 20:58:48.834 +02:00 [DBG] Processing signout request for 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 20:58:48.836 +02:00 [DBG] Start end session request validation
2020-08-16 20:58:48.839 +02:00 [DBG] Start identity token validation
2020-08-16 20:58:49.525 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:58:49.532 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:58:49.533 +02:00 [DBG] Client found: listify.webapp / The Listify WebApplication
2020-08-16 20:58:49.602 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 20:58:49.611 +02:00 [DBG] Token validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597604164,"exp":1597604464,"iss":"http://localhost:5000","aud":"listify.webapp","nonce":"aXQyNXlPcjlCYjFvaXY1T01DaVl0MzVFUFcwOEhBcGdsT35kX0R1Y0VZdDR4","iat":1597604164,"at_hash":"6FGNHS24ffvllJSf6Xrcvw","s_hash":"o0Tz_uHzYuVGXQGYZSICFg","sid":"RpgktgGwDr7tp4LoD2Si3g","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597603006,"idp":"Facebook","amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 20:58:49.633 +02:00 [INF] End session request validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","PostLogOutUri":"http://localhost:4200","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200"},"$type":"EndSessionRequestValidationLog"}
2020-08-16 20:58:49.634 +02:00 [DBG] Success validating end session request from listify.webapp
2020-08-16 20:58:49.985 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-16 20:58:49.986 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-16 20:58:49.987 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-16 20:58:49.992 +02:00 [INF] {"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"80000028-0004-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-16T18:58:49.0000000Z","ProcessId":2400,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-16 20:58:50.398 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 20:58:50.424 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:58:50.425 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:58:50.431 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 20:58:50.433 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 20:58:50.433 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 20:58:50.435 +02:00 [DBG] Start discovery request
2020-08-16 20:58:50.889 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 20:58:50.952 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 20:58:50.956 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:58:50.956 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:58:50.957 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 20:58:50.958 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 20:58:50.959 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 20:58:50.962 +02:00 [DBG] Start key discovery request
2020-08-16 20:59:01.432 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 20:59:01.445 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:59:01.445 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:59:01.447 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 20:59:01.449 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 20:59:01.449 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 20:59:01.450 +02:00 [DBG] Start discovery request
2020-08-16 20:59:01.471 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 20:59:01.704 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 20:59:01.710 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:59:01.710 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:59:01.711 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 20:59:01.712 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 20:59:01.712 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 20:59:01.712 +02:00 [DBG] Start key discovery request
2020-08-16 20:59:02.611 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-16 20:59:02.614 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-16 20:59:02.614 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-16 20:59:02.616 +02:00 [DBG] Start authorize request
2020-08-16 20:59:02.619 +02:00 [DBG] No user present in authorize request
2020-08-16 20:59:02.622 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 20:59:02.663 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:59:02.663 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:59:02.770 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:59:02.823 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 20:59:02.831 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:59:02.833 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 20:59:02.840 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 20:59:02.846 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"MmUuOUk4eFBUMkdPWmp-WWZoNGtESHRldzhMamhCRHAxZmJPVHJSRmNPLWNk","UiLocales":null,"Nonce":"MmUuOUk4eFBUMkdPWmp-WWZoNGtESHRldzhMamhCRHAxZmJPVHJSRmNPLWNk","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"MmUuOUk4eFBUMkdPWmp-WWZoNGtESHRldzhMamhCRHAxZmJPVHJSRmNPLWNk","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"MmUuOUk4eFBUMkdPWmp-WWZoNGtESHRldzhMamhCRHAxZmJPVHJSRmNPLWNk"},"$type":"AuthorizeRequestValidationLog"}
2020-08-16 20:59:02.851 +02:00 [INF] Showing login: User is not authenticated
2020-08-16 20:59:02.988 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 20:59:03.028 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:59:03.028 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:59:03.033 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:59:03.047 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 20:59:03.050 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:59:03.052 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 20:59:03.052 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 20:59:03.073 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:59:03.073 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:59:15.409 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-16 20:59:17.188 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-16 20:59:17.619 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000013-0007-fb00-b63f-84710c7967bb","TimeStamp":"2020-08-16T18:59:17.0000000Z","ProcessId":2400,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-16 20:59:17.625 +02:00 [DBG] Augmenting SignInContext
2020-08-16 20:59:17.625 +02:00 [DBG] Adding amr claim with value: external
2020-08-16 20:59:17.627 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-16 20:59:17.627 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-16 20:59:17.733 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-16 20:59:17.735 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-16 20:59:17.735 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-16 20:59:17.737 +02:00 [DBG] Start authorize callback request
2020-08-16 20:59:17.741 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 20:59:17.741 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 20:59:17.927 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:59:17.927 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:59:17.942 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:59:17.957 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 20:59:17.961 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:59:17.974 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 20:59:17.974 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 20:59:17.974 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"MmUuOUk4eFBUMkdPWmp-WWZoNGtESHRldzhMamhCRHAxZmJPVHJSRmNPLWNk","UiLocales":null,"Nonce":"MmUuOUk4eFBUMkdPWmp-WWZoNGtESHRldzhMamhCRHAxZmJPVHJSRmNPLWNk","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"1SsPGAbFfBrCdWkCmNYO-w","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"MmUuOUk4eFBUMkdPWmp-WWZoNGtESHRldzhMamhCRHAxZmJPVHJSRmNPLWNk","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"MmUuOUk4eFBUMkdPWmp-WWZoNGtESHRldzhMamhCRHAxZmJPVHJSRmNPLWNk"},"$type":"AuthorizeRequestValidationLog"}
2020-08-16 20:59:17.993 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-16 20:59:17.995 +02:00 [DBG] Creating Implicit Flow response.
2020-08-16 20:59:18.004 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-16 20:59:18.004 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 20:59:18.101 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-16 20:59:18.101 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-16 20:59:18.109 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****VHVg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****hZiw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000014-0007-fb00-b63f-84710c7967bb","TimeStamp":"2020-08-16T18:59:18.0000000Z","ProcessId":2400,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-16 20:59:18.110 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"MmUuOUk4eFBUMkdPWmp-WWZoNGtESHRldzhMamhCRHAxZmJPVHJSRmNPLWNk","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-16 20:59:18.115 +02:00 [DBG] Augmenting SignInContext
2020-08-16 20:59:18.115 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-16 20:59:18.552 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 20:59:18.582 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:59:18.582 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:59:18.583 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 20:59:18.587 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 20:59:18.587 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 20:59:18.587 +02:00 [DBG] Start discovery request
2020-08-16 20:59:18.622 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 20:59:18.804 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 20:59:18.811 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:59:18.812 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:59:18.813 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 20:59:18.816 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 20:59:18.816 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 20:59:18.816 +02:00 [DBG] Start key discovery request
2020-08-16 20:59:18.955 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-16 20:59:18.978 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:59:18.978 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:59:19.078 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-16 20:59:19.082 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 20:59:19.082 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 20:59:19.083 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-16 20:59:19.085 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-16 20:59:19.085 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-16 20:59:19.092 +02:00 [DBG] Start userinfo request
2020-08-16 20:59:19.095 +02:00 [DBG] Bearer token found in header
2020-08-16 20:59:19.282 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:59:19.282 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:59:19.320 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:59:19.320 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:59:19.335 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 20:59:19.335 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597604358,"exp":1597607958,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597604357,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 20:59:19.339 +02:00 [DBG] Creating userinfo response
2020-08-16 20:59:19.342 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:59:19.343 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:59:19.347 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:59:19.350 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-16 20:59:19.351 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:59:19.352 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:59:19.357 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-16 20:59:19.358 +02:00 [DBG] End userinfo request
2020-08-16 20:59:37.412 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 20:59:37.413 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 20:59:37.413 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 20:59:37.413 +02:00 [DBG] Start discovery request
2020-08-16 20:59:37.793 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 20:59:37.856 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 20:59:37.857 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 20:59:37.857 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 20:59:37.857 +02:00 [DBG] Start key discovery request
2020-08-16 20:59:39.521 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-16 20:59:39.522 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-16 20:59:39.522 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-16 20:59:39.522 +02:00 [DBG] Start userinfo request
2020-08-16 20:59:39.522 +02:00 [DBG] Bearer token found in header
2020-08-16 20:59:39.685 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:59:39.686 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:59:39.710 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 20:59:39.710 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 20:59:39.747 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 20:59:39.747 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597604358,"exp":1597607958,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597604357,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 20:59:39.747 +02:00 [DBG] Creating userinfo response
2020-08-16 20:59:39.747 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:59:39.747 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:59:39.752 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:59:39.753 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-16 20:59:39.753 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 20:59:39.755 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 20:59:39.772 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-16 20:59:39.772 +02:00 [DBG] End userinfo request
2020-08-16 21:16:14.840 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-16 21:16:14.917 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-16 21:16:14.917 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-16 21:16:14.918 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-16 21:16:14.918 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-16 21:16:14.918 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-16 21:16:14.918 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-16 21:16:15.156 +02:00 [DBG] Login Url: /Account/Login
2020-08-16 21:16:15.157 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-16 21:16:15.157 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-16 21:16:15.157 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-16 21:16:15.157 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-16 21:16:15.157 +02:00 [DBG] Error Url: /home/error
2020-08-16 21:16:15.157 +02:00 [DBG] Error Id Parameter: errorId
2020-08-16 21:16:15.186 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-08-16 21:16:15.189 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-08-16 21:16:15.189 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-08-16 21:16:15.194 +02:00 [DBG] Processing signout request for 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 21:16:15.196 +02:00 [DBG] Start end session request validation
2020-08-16 21:16:15.199 +02:00 [DBG] Start identity token validation
2020-08-16 21:16:16.344 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 21:16:16.354 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 21:16:16.356 +02:00 [DBG] Client found: listify.webapp / The Listify WebApplication
2020-08-16 21:16:16.452 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 21:16:16.459 +02:00 [DBG] Token validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597604358,"exp":1597604658,"iss":"http://localhost:5000","aud":"listify.webapp","nonce":"MmUuOUk4eFBUMkdPWmp-WWZoNGtESHRldzhMamhCRHAxZmJPVHJSRmNPLWNk","iat":1597604358,"at_hash":"APq7_R__9cquGXCEg8Lirw","s_hash":"luRwJBq_7iDCgCpEZ9kcXQ","sid":"1SsPGAbFfBrCdWkCmNYO-w","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597604357,"idp":"Facebook","amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 21:16:16.491 +02:00 [INF] End session request validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","PostLogOutUri":"http://localhost:4200","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200"},"$type":"EndSessionRequestValidationLog"}
2020-08-16 21:16:16.492 +02:00 [DBG] Success validating end session request from listify.webapp
2020-08-16 21:16:16.840 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-16 21:16:16.841 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-16 21:16:16.841 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-16 21:16:16.846 +02:00 [INF] {"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"80000026-0002-fb00-b63f-84710c7967bb","TimeStamp":"2020-08-16T19:16:16.0000000Z","ProcessId":21468,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-16 21:16:17.347 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 21:16:17.371 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 21:16:17.372 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 21:16:17.377 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 21:16:17.380 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 21:16:17.380 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 21:16:17.383 +02:00 [DBG] Start discovery request
2020-08-16 21:16:17.757 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 21:16:17.845 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 21:16:17.848 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 21:16:17.849 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 21:16:17.849 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 21:16:17.850 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 21:16:17.850 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 21:16:17.852 +02:00 [DBG] Start key discovery request
2020-08-16 21:16:23.665 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-16 21:16:23.669 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-16 21:16:23.669 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-16 21:16:23.671 +02:00 [DBG] Start authorize request
2020-08-16 21:16:23.674 +02:00 [DBG] No user present in authorize request
2020-08-16 21:16:23.675 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 21:16:23.713 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 21:16:23.713 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 21:16:23.772 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 21:16:23.808 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 21:16:23.822 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 21:16:23.826 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 21:16:23.832 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 21:16:23.836 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"ZGI1THhyeFZYM1BzeHdFOFdWVVg0dnl-NFhxcDVpaHNaQjd1Rll4RVhwVGph","UiLocales":null,"Nonce":"ZGI1THhyeFZYM1BzeHdFOFdWVVg0dnl-NFhxcDVpaHNaQjd1Rll4RVhwVGph","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"ZGI1THhyeFZYM1BzeHdFOFdWVVg0dnl-NFhxcDVpaHNaQjd1Rll4RVhwVGph","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"ZGI1THhyeFZYM1BzeHdFOFdWVVg0dnl-NFhxcDVpaHNaQjd1Rll4RVhwVGph"},"$type":"AuthorizeRequestValidationLog"}
2020-08-16 21:16:23.839 +02:00 [INF] Showing login: User is not authenticated
2020-08-16 21:16:24.428 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 21:16:24.445 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 21:16:24.445 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 21:16:24.449 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 21:16:24.452 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 21:16:24.454 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 21:16:24.457 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 21:16:24.457 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 21:16:24.471 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 21:16:24.472 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 21:16:31.831 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-16 21:16:33.353 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-16 21:16:33.483 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"8000002b-0002-fb00-b63f-84710c7967bb","TimeStamp":"2020-08-16T19:16:33.0000000Z","ProcessId":21468,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-16 21:16:33.488 +02:00 [DBG] Augmenting SignInContext
2020-08-16 21:16:33.488 +02:00 [DBG] Adding amr claim with value: external
2020-08-16 21:16:33.490 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-16 21:16:33.490 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-16 21:16:33.499 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-16 21:16:33.499 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-16 21:16:33.500 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-16 21:16:33.502 +02:00 [DBG] Start authorize callback request
2020-08-16 21:16:33.505 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 21:16:33.505 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 21:16:33.530 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 21:16:33.530 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 21:16:33.534 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 21:16:33.549 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 21:16:33.558 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 21:16:33.571 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 21:16:33.572 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 21:16:33.572 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"ZGI1THhyeFZYM1BzeHdFOFdWVVg0dnl-NFhxcDVpaHNaQjd1Rll4RVhwVGph","UiLocales":null,"Nonce":"ZGI1THhyeFZYM1BzeHdFOFdWVVg0dnl-NFhxcDVpaHNaQjd1Rll4RVhwVGph","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"if3di5P48q2H35NvipkkCg","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"ZGI1THhyeFZYM1BzeHdFOFdWVVg0dnl-NFhxcDVpaHNaQjd1Rll4RVhwVGph","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"ZGI1THhyeFZYM1BzeHdFOFdWVVg0dnl-NFhxcDVpaHNaQjd1Rll4RVhwVGph"},"$type":"AuthorizeRequestValidationLog"}
2020-08-16 21:16:33.580 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-16 21:16:33.583 +02:00 [DBG] Creating Implicit Flow response.
2020-08-16 21:16:33.593 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-16 21:16:33.593 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 21:16:33.627 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-16 21:16:33.627 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-16 21:16:33.633 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****c4Gg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Vlog","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000002c-0002-fb00-b63f-84710c7967bb","TimeStamp":"2020-08-16T19:16:33.0000000Z","ProcessId":21468,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-16 21:16:33.634 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"ZGI1THhyeFZYM1BzeHdFOFdWVVg0dnl-NFhxcDVpaHNaQjd1Rll4RVhwVGph","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-16 21:16:33.639 +02:00 [DBG] Augmenting SignInContext
2020-08-16 21:16:33.639 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-16 21:16:34.007 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 21:16:34.015 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 21:16:34.015 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 21:16:34.016 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 21:16:34.016 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 21:16:34.017 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 21:16:34.017 +02:00 [DBG] Start discovery request
2020-08-16 21:16:34.031 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 21:16:34.402 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 21:16:34.412 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 21:16:34.412 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 21:16:34.413 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 21:16:34.415 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 21:16:34.415 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 21:16:34.415 +02:00 [DBG] Start key discovery request
2020-08-16 21:16:34.738 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-16 21:16:34.745 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 21:16:34.746 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 21:16:34.769 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-16 21:16:34.773 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 21:16:34.773 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 21:16:34.774 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-16 21:16:34.777 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-16 21:16:34.777 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-16 21:16:34.780 +02:00 [DBG] Start userinfo request
2020-08-16 21:16:34.784 +02:00 [DBG] Bearer token found in header
2020-08-16 21:16:34.835 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 21:16:34.835 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 21:16:34.847 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 21:16:34.848 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 21:16:34.851 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 21:16:34.852 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597605393,"exp":1597608993,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597605393,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 21:16:34.858 +02:00 [DBG] Creating userinfo response
2020-08-16 21:16:34.863 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 21:16:34.864 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 21:16:34.875 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 21:16:34.879 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-16 21:16:34.880 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 21:16:34.887 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 21:16:34.897 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-16 21:16:34.897 +02:00 [DBG] End userinfo request
2020-08-16 21:16:49.891 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 21:16:49.894 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 21:16:49.895 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 21:16:49.895 +02:00 [DBG] Start discovery request
2020-08-16 21:16:49.914 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 21:16:50.112 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 21:16:50.117 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 21:16:50.118 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 21:16:50.118 +02:00 [DBG] Start key discovery request
2020-08-16 21:16:51.150 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-16 21:16:51.152 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-16 21:16:51.152 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-16 21:16:51.152 +02:00 [DBG] Start userinfo request
2020-08-16 21:16:51.152 +02:00 [DBG] Bearer token found in header
2020-08-16 21:16:51.270 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 21:16:51.272 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 21:16:51.302 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 21:16:51.302 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 21:16:51.314 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 21:16:51.316 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597605393,"exp":1597608993,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597605393,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 21:16:51.317 +02:00 [DBG] Creating userinfo response
2020-08-16 21:16:51.318 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 21:16:51.318 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 21:16:51.333 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 21:16:51.333 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-16 21:16:51.333 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 21:16:51.341 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 21:16:51.356 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-16 21:16:51.356 +02:00 [DBG] End userinfo request
2020-08-16 21:29:22.426 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-16 21:29:22.754 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-16 21:29:22.754 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-16 21:29:22.754 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-16 21:29:22.754 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-16 21:29:22.754 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-16 21:29:22.754 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-16 21:29:23.245 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 21:29:23.302 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 21:29:23.306 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 21:29:23.385 +02:00 [DBG] Login Url: /Account/Login
2020-08-16 21:29:23.385 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-16 21:29:23.385 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-16 21:29:23.385 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-16 21:29:23.385 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-16 21:29:23.385 +02:00 [DBG] Error Url: /home/error
2020-08-16 21:29:23.385 +02:00 [DBG] Error Id Parameter: errorId
2020-08-16 21:29:23.396 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 21:29:23.402 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 21:29:23.402 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 21:29:23.404 +02:00 [DBG] Start discovery request
2020-08-16 21:29:23.979 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 21:29:24.280 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 21:29:24.306 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 21:29:24.307 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 21:29:24.311 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 21:29:24.313 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 21:29:24.313 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 21:29:24.314 +02:00 [DBG] Start key discovery request
2020-08-16 21:29:24.622 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-16 21:29:24.632 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-16 21:29:24.632 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-16 21:29:24.633 +02:00 [DBG] Start authorize request
2020-08-16 21:29:24.640 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 21:29:24.644 +02:00 [DBG] Start authorize request protocol validation
2020-08-16 21:29:25.079 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 21:29:25.086 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 21:29:25.157 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 21:29:25.205 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 21:29:25.218 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 21:29:25.237 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-16 21:29:25.244 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-16 21:29:25.256 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"dEJwTEx2dEI5RnRkMFdVVzBLRGUwekxmUDI3cWJ4czU5a2RUV0R0MnhNYklh","UiLocales":null,"Nonce":"dEJwTEx2dEI5RnRkMFdVVzBLRGUwekxmUDI3cWJ4czU5a2RUV0R0MnhNYklh","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"if3di5P48q2H35NvipkkCg","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"dEJwTEx2dEI5RnRkMFdVVzBLRGUwekxmUDI3cWJ4czU5a2RUV0R0MnhNYklh","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"dEJwTEx2dEI5RnRkMFdVVzBLRGUwekxmUDI3cWJ4czU5a2RUV0R0MnhNYklh"},"$type":"AuthorizeRequestValidationLog"}
2020-08-16 21:29:25.294 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-16 21:29:25.296 +02:00 [DBG] Creating Implicit Flow response.
2020-08-16 21:29:25.312 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-16 21:29:25.313 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-16 21:29:25.644 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-16 21:29:25.644 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-16 21:29:25.655 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****1LTw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****2loA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000036-0004-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-16T19:29:25.0000000Z","ProcessId":22464,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-16 21:29:25.657 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"dEJwTEx2dEI5RnRkMFdVVzBLRGUwekxmUDI3cWJ4czU5a2RUV0R0MnhNYklh","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-16 21:29:26.262 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-16 21:29:26.272 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 21:29:26.273 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 21:29:26.276 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 21:29:26.278 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 21:29:26.278 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 21:29:26.279 +02:00 [DBG] Start discovery request
2020-08-16 21:29:26.300 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 21:29:28.571 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-16 21:29:28.577 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 21:29:28.578 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 21:29:28.581 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 21:29:28.582 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 21:29:28.582 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 21:29:28.582 +02:00 [DBG] Start key discovery request
2020-08-16 21:29:28.750 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-16 21:29:28.754 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 21:29:28.754 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 21:29:28.758 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-16 21:29:28.767 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-16 21:29:28.767 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-16 21:29:28.767 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-16 21:29:28.770 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-16 21:29:28.770 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-16 21:29:28.774 +02:00 [DBG] Start userinfo request
2020-08-16 21:29:28.777 +02:00 [DBG] Bearer token found in header
2020-08-16 21:29:28.898 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 21:29:28.899 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 21:29:28.962 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 21:29:28.962 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 21:29:28.972 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 21:29:28.974 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597606165,"exp":1597609765,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597605393,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 21:29:28.983 +02:00 [DBG] Creating userinfo response
2020-08-16 21:29:28.987 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 21:29:28.989 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 21:29:28.998 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 21:29:29.003 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-16 21:29:29.004 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 21:29:29.017 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 21:29:29.033 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-16 21:29:29.033 +02:00 [DBG] End userinfo request
2020-08-16 21:29:35.315 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-16 21:29:35.332 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-16 21:29:35.332 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-16 21:29:35.333 +02:00 [DBG] Start discovery request
2020-08-16 21:29:35.348 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-16 21:29:35.496 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-16 21:29:35.498 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-16 21:29:35.498 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-16 21:29:35.498 +02:00 [DBG] Start key discovery request
2020-08-16 21:29:35.633 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-16 21:29:35.635 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-16 21:29:35.635 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-16 21:29:35.635 +02:00 [DBG] Start userinfo request
2020-08-16 21:29:35.636 +02:00 [DBG] Bearer token found in header
2020-08-16 21:29:35.675 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 21:29:35.675 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 21:29:35.684 +02:00 [DBG] listify.webapp found in database: true
2020-08-16 21:29:35.685 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-16 21:29:35.688 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-16 21:29:35.688 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597606165,"exp":1597609765,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597605393,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-16 21:29:35.689 +02:00 [DBG] Creating userinfo response
2020-08-16 21:29:35.689 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 21:29:35.689 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 21:29:35.693 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 21:29:35.693 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-16 21:29:35.693 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-16 21:29:35.695 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-16 21:29:35.699 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-16 21:29:35.699 +02:00 [DBG] End userinfo request
2020-08-17 00:54:47.968 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-17 00:54:48.054 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-17 00:54:48.055 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-17 00:54:48.055 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-17 00:54:48.055 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-17 00:54:48.055 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-17 00:54:48.055 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-17 00:54:48.683 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 00:54:48.730 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 00:54:48.734 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 00:54:48.798 +02:00 [DBG] Login Url: /Account/Login
2020-08-17 00:54:48.798 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-17 00:54:48.798 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-17 00:54:48.798 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-17 00:54:48.798 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-17 00:54:48.798 +02:00 [DBG] Error Url: /home/error
2020-08-17 00:54:48.798 +02:00 [DBG] Error Id Parameter: errorId
2020-08-17 00:54:48.810 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 00:54:48.815 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 00:54:48.815 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 00:54:48.816 +02:00 [DBG] Start discovery request
2020-08-17 00:54:49.920 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 00:54:50.172 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 00:54:50.177 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 00:54:50.177 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 00:54:50.216 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 00:54:50.221 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 00:54:50.221 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 00:54:50.222 +02:00 [DBG] Start key discovery request
2020-08-17 00:54:50.331 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-17 00:54:50.347 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-17 00:54:50.347 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-17 00:54:50.348 +02:00 [DBG] Start authorize request
2020-08-17 00:54:50.359 +02:00 [DBG] No user present in authorize request
2020-08-17 00:54:50.362 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 00:54:50.723 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 00:54:50.730 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 00:54:50.806 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 00:54:50.859 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 00:54:50.874 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 00:54:50.889 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 00:54:50.895 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 00:54:50.908 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"dWJIMEJSVzZKZEVsfkhZb3VQZzNFcE1oT2tXbWJlcGtxdnBOWGhHMzE5cExP","UiLocales":null,"Nonce":"dWJIMEJSVzZKZEVsfkhZb3VQZzNFcE1oT2tXbWJlcGtxdnBOWGhHMzE5cExP","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"dWJIMEJSVzZKZEVsfkhZb3VQZzNFcE1oT2tXbWJlcGtxdnBOWGhHMzE5cExP","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"dWJIMEJSVzZKZEVsfkhZb3VQZzNFcE1oT2tXbWJlcGtxdnBOWGhHMzE5cExP"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 00:54:50.914 +02:00 [INF] Showing login: User is not authenticated
2020-08-17 00:54:51.209 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 00:54:51.241 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 00:54:51.241 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 00:54:51.246 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 00:54:51.260 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 00:54:51.263 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 00:54:51.265 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 00:54:51.265 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 00:54:51.278 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 00:54:51.278 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 00:54:54.091 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-17 00:54:55.881 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-17 00:54:56.139 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"8000003d-0004-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-16T22:54:56.0000000Z","ProcessId":9136,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-17 00:54:56.148 +02:00 [DBG] Augmenting SignInContext
2020-08-17 00:54:56.149 +02:00 [DBG] Adding amr claim with value: external
2020-08-17 00:54:56.152 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-17 00:54:56.156 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-17 00:54:56.191 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-17 00:54:56.192 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-17 00:54:56.192 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-17 00:54:56.194 +02:00 [DBG] Start authorize callback request
2020-08-17 00:54:56.197 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 00:54:56.197 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 00:54:56.229 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 00:54:56.230 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 00:54:56.234 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 00:54:56.250 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 00:54:56.254 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 00:54:56.257 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 00:54:56.257 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 00:54:56.258 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"dWJIMEJSVzZKZEVsfkhZb3VQZzNFcE1oT2tXbWJlcGtxdnBOWGhHMzE5cExP","UiLocales":null,"Nonce":"dWJIMEJSVzZKZEVsfkhZb3VQZzNFcE1oT2tXbWJlcGtxdnBOWGhHMzE5cExP","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"gdfrEiAI70kDgk8FLVRRDw","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"dWJIMEJSVzZKZEVsfkhZb3VQZzNFcE1oT2tXbWJlcGtxdnBOWGhHMzE5cExP","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"dWJIMEJSVzZKZEVsfkhZb3VQZzNFcE1oT2tXbWJlcGtxdnBOWGhHMzE5cExP"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 00:54:56.275 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-17 00:54:56.278 +02:00 [DBG] Creating Implicit Flow response.
2020-08-17 00:54:56.286 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-17 00:54:56.287 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 00:55:00.511 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-17 00:55:00.512 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-17 00:55:00.518 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****twvQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Ac5Q","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000003e-0004-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-16T22:55:00.0000000Z","ProcessId":9136,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-17 00:55:00.520 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"dWJIMEJSVzZKZEVsfkhZb3VQZzNFcE1oT2tXbWJlcGtxdnBOWGhHMzE5cExP","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-17 00:55:00.527 +02:00 [DBG] Augmenting SignInContext
2020-08-17 00:55:00.527 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-17 00:55:01.366 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 00:55:01.374 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 00:55:01.375 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 00:55:01.376 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 00:55:01.377 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 00:55:01.377 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 00:55:01.377 +02:00 [DBG] Start discovery request
2020-08-17 00:55:01.397 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 00:55:01.513 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 00:55:01.518 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 00:55:01.519 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 00:55:01.519 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 00:55:01.519 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 00:55:01.520 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 00:55:01.520 +02:00 [DBG] Start key discovery request
2020-08-17 00:55:01.698 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 00:55:01.702 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 00:55:01.702 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 00:55:01.705 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 00:55:01.708 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 00:55:01.708 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 00:55:01.708 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 00:55:01.711 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 00:55:01.711 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 00:55:01.714 +02:00 [DBG] Start userinfo request
2020-08-17 00:55:01.716 +02:00 [DBG] Bearer token found in header
2020-08-17 00:55:01.935 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 00:55:01.935 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 00:55:01.966 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 00:55:01.966 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 00:55:01.970 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 00:55:01.971 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597618499,"exp":1597622099,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597618496,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 00:55:01.977 +02:00 [DBG] Creating userinfo response
2020-08-17 00:55:01.980 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 00:55:01.981 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 00:55:01.987 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 00:55:01.992 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 00:55:01.992 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 00:55:01.996 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 00:55:02.001 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 00:55:02.002 +02:00 [DBG] End userinfo request
2020-08-17 00:55:10.957 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 00:55:10.960 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 00:55:10.960 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 00:55:10.960 +02:00 [DBG] Start discovery request
2020-08-17 00:55:10.978 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 00:55:11.822 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 00:55:11.826 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 00:55:11.826 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 00:55:11.826 +02:00 [DBG] Start key discovery request
2020-08-17 00:55:11.950 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 00:55:11.951 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 00:55:11.951 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 00:55:11.952 +02:00 [DBG] Start userinfo request
2020-08-17 00:55:11.952 +02:00 [DBG] Bearer token found in header
2020-08-17 00:55:11.976 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 00:55:11.976 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 00:55:11.984 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 00:55:11.984 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 00:55:11.987 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 00:55:11.988 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597618499,"exp":1597622099,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597618496,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 00:55:11.988 +02:00 [DBG] Creating userinfo response
2020-08-17 00:55:11.988 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 00:55:11.988 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 00:55:11.993 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 00:55:11.993 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 00:55:11.993 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 00:55:11.995 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 00:55:11.999 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 00:55:11.999 +02:00 [DBG] End userinfo request
2020-08-17 00:59:48.890 +02:00 [INF] Removing 0 grants
2020-08-17 00:59:48.902 +02:00 [INF] Removing 0 device flow codes
2020-08-17 01:03:12.515 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 01:03:12.540 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:03:12.541 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:03:12.542 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 01:03:12.543 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 01:03:12.543 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 01:03:12.543 +02:00 [DBG] Start discovery request
2020-08-17 01:03:12.575 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 01:03:13.067 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 01:03:13.074 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 01:03:13.074 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 01:03:13.074 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 01:03:13.074 +02:00 [DBG] Start discovery request
2020-08-17 01:03:13.077 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:03:13.077 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:03:13.078 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 01:03:13.079 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 01:03:13.081 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 01:03:13.081 +02:00 [DBG] Start key discovery request
2020-08-17 01:03:13.132 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 01:03:13.149 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 01:03:13.150 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 01:03:13.150 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 01:03:13.150 +02:00 [DBG] Start key discovery request
2020-08-17 01:03:13.157 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 01:03:13.161 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 01:03:13.161 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 01:03:13.161 +02:00 [DBG] Start userinfo request
2020-08-17 01:03:13.161 +02:00 [DBG] Bearer token found in header
2020-08-17 01:03:13.205 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:03:13.205 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:03:13.217 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:03:13.218 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:03:13.224 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 01:03:13.225 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597618499,"exp":1597622099,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597618496,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 01:03:13.225 +02:00 [DBG] Creating userinfo response
2020-08-17 01:03:13.225 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:03:13.225 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:03:13.231 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:03:13.231 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 01:03:13.231 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:03:13.233 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:03:13.242 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 01:03:13.242 +02:00 [DBG] End userinfo request
2020-08-17 01:03:46.508 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-08-17 01:03:46.518 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-08-17 01:03:46.519 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-08-17 01:03:46.535 +02:00 [DBG] Processing signout request for 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 01:03:46.540 +02:00 [DBG] Start end session request validation
2020-08-17 01:03:46.542 +02:00 [DBG] Start identity token validation
2020-08-17 01:03:46.589 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:03:46.589 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:03:46.590 +02:00 [DBG] Client found: listify.webapp / The Listify WebApplication
2020-08-17 01:03:46.594 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 01:03:46.594 +02:00 [DBG] Token validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597618500,"exp":1597618800,"iss":"http://localhost:5000","aud":"listify.webapp","nonce":"dWJIMEJSVzZKZEVsfkhZb3VQZzNFcE1oT2tXbWJlcGtxdnBOWGhHMzE5cExP","iat":1597618500,"at_hash":"3lnhpnm95Cu61172qsd28g","s_hash":"zaDq4jEQOqhFg9UC7hjLMQ","sid":"gdfrEiAI70kDgk8FLVRRDw","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597618496,"idp":"Facebook","amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 01:03:46.599 +02:00 [INF] End session request validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","PostLogOutUri":"http://localhost:4200","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200"},"$type":"EndSessionRequestValidationLog"}
2020-08-17 01:03:46.600 +02:00 [DBG] Success validating end session request from listify.webapp
2020-08-17 01:03:46.674 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-17 01:03:46.674 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-17 01:03:46.675 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-17 01:03:46.675 +02:00 [INF] {"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"8000002d-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-16T23:03:46.0000000Z","ProcessId":9136,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-17 01:03:47.028 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 01:03:47.034 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:03:47.034 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:03:47.035 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 01:03:47.036 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 01:03:47.036 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 01:03:47.037 +02:00 [DBG] Start discovery request
2020-08-17 01:03:47.053 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 01:03:47.217 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 01:03:47.223 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:03:47.224 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:03:47.225 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 01:03:47.225 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 01:03:47.225 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 01:03:47.225 +02:00 [DBG] Start key discovery request
2020-08-17 01:03:47.682 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-17 01:03:47.683 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-17 01:03:47.683 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-17 01:03:47.683 +02:00 [DBG] Start authorize request
2020-08-17 01:03:47.684 +02:00 [DBG] No user present in authorize request
2020-08-17 01:03:47.684 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 01:03:47.736 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:03:47.736 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:03:47.744 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:03:47.765 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 01:03:47.775 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:03:47.790 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 01:03:47.791 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 01:03:47.791 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"X3F-eXA5bWhDT2lUNWVuNHVSU2lWOTBMeHBTOGtjSUE3Z1ZQZG1mMVh1d1Rm","UiLocales":null,"Nonce":"X3F-eXA5bWhDT2lUNWVuNHVSU2lWOTBMeHBTOGtjSUE3Z1ZQZG1mMVh1d1Rm","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"X3F-eXA5bWhDT2lUNWVuNHVSU2lWOTBMeHBTOGtjSUE3Z1ZQZG1mMVh1d1Rm","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"X3F-eXA5bWhDT2lUNWVuNHVSU2lWOTBMeHBTOGtjSUE3Z1ZQZG1mMVh1d1Rm"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 01:03:47.791 +02:00 [INF] Showing login: User is not authenticated
2020-08-17 01:03:47.816 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 01:03:47.852 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:03:47.852 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:03:47.857 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:03:47.868 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 01:03:47.870 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:03:47.872 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 01:03:47.872 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 01:03:47.891 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:03:47.891 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:03:49.332 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-17 01:03:50.743 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-17 01:03:50.837 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000035-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-16T23:03:50.0000000Z","ProcessId":9136,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-17 01:03:50.837 +02:00 [DBG] Augmenting SignInContext
2020-08-17 01:03:50.837 +02:00 [DBG] Adding amr claim with value: external
2020-08-17 01:03:50.838 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-17 01:03:50.838 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-17 01:03:50.846 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-17 01:03:50.847 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-17 01:03:50.847 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-17 01:03:50.847 +02:00 [DBG] Start authorize callback request
2020-08-17 01:03:50.847 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 01:03:50.847 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 01:03:50.873 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:03:50.873 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:03:50.877 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:03:50.889 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 01:03:50.892 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:03:50.894 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 01:03:50.894 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 01:03:50.895 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"X3F-eXA5bWhDT2lUNWVuNHVSU2lWOTBMeHBTOGtjSUE3Z1ZQZG1mMVh1d1Rm","UiLocales":null,"Nonce":"X3F-eXA5bWhDT2lUNWVuNHVSU2lWOTBMeHBTOGtjSUE3Z1ZQZG1mMVh1d1Rm","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"-k6IRmMWBcNCpLXtY_autA","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"X3F-eXA5bWhDT2lUNWVuNHVSU2lWOTBMeHBTOGtjSUE3Z1ZQZG1mMVh1d1Rm","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"X3F-eXA5bWhDT2lUNWVuNHVSU2lWOTBMeHBTOGtjSUE3Z1ZQZG1mMVh1d1Rm"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 01:03:50.898 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-17 01:03:50.899 +02:00 [DBG] Creating Implicit Flow response.
2020-08-17 01:03:50.899 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-17 01:03:50.899 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 01:03:50.905 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-17 01:03:50.905 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-17 01:03:50.907 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****i-yg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****qKMw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000036-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-16T23:03:50.0000000Z","ProcessId":9136,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-17 01:03:50.907 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"X3F-eXA5bWhDT2lUNWVuNHVSU2lWOTBMeHBTOGtjSUE3Z1ZQZG1mMVh1d1Rm","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-17 01:03:50.908 +02:00 [DBG] Augmenting SignInContext
2020-08-17 01:03:50.908 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-17 01:03:51.196 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 01:03:51.199 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:03:51.200 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:03:51.200 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 01:03:51.200 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 01:03:51.200 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 01:03:51.200 +02:00 [DBG] Start discovery request
2020-08-17 01:03:51.211 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 01:03:51.467 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 01:03:51.471 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:03:51.471 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:03:51.472 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 01:03:51.472 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 01:03:51.472 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 01:03:51.472 +02:00 [DBG] Start key discovery request
2020-08-17 01:03:51.618 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 01:03:51.627 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:03:51.627 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:03:51.633 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 01:03:51.649 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:03:51.649 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:03:51.650 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 01:03:51.652 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 01:03:51.652 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 01:03:51.652 +02:00 [DBG] Start userinfo request
2020-08-17 01:03:51.652 +02:00 [DBG] Bearer token found in header
2020-08-17 01:03:51.737 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:03:51.738 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:03:51.795 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:03:51.796 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:03:51.801 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 01:03:51.802 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597619030,"exp":1597622630,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597619030,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 01:03:51.802 +02:00 [DBG] Creating userinfo response
2020-08-17 01:03:51.802 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:03:51.802 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:03:51.811 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:03:51.812 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 01:03:51.812 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:03:51.814 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:03:51.815 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 01:03:51.815 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 01:03:51.815 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 01:03:51.815 +02:00 [DBG] Start discovery request
2020-08-17 01:03:51.832 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 01:03:51.843 +02:00 [DBG] End userinfo request
2020-08-17 01:03:51.856 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 01:03:51.870 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 01:03:51.870 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 01:03:51.870 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 01:03:51.870 +02:00 [DBG] Start key discovery request
2020-08-17 01:03:51.872 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 01:03:51.873 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 01:03:51.873 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 01:03:51.873 +02:00 [DBG] Start userinfo request
2020-08-17 01:03:51.873 +02:00 [DBG] Bearer token found in header
2020-08-17 01:03:51.910 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:03:51.911 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:03:51.922 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:03:51.923 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:03:51.925 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 01:03:51.926 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597619030,"exp":1597622630,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597619030,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 01:03:51.926 +02:00 [DBG] Creating userinfo response
2020-08-17 01:03:51.926 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:03:51.926 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:03:51.930 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:03:51.931 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 01:03:51.931 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:03:51.932 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:03:51.937 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 01:03:51.937 +02:00 [DBG] End userinfo request
2020-08-17 01:05:23.550 +02:00 [INF] Removing 0 grants
2020-08-17 01:05:23.553 +02:00 [INF] Removing 0 device flow codes
2020-08-17 01:33:47.282 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-17 01:33:47.396 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-17 01:33:47.396 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-17 01:33:47.396 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-17 01:33:47.396 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-17 01:33:47.396 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-17 01:33:47.396 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-17 01:33:47.807 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 01:33:47.807 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 01:33:47.941 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:33:47.949 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:33:47.950 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:33:47.950 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:33:48.039 +02:00 [DBG] Login Url: /Account/Login
2020-08-17 01:33:48.039 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-17 01:33:48.040 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-17 01:33:48.040 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-17 01:33:48.040 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-17 01:33:48.040 +02:00 [DBG] Error Url: /home/error
2020-08-17 01:33:48.040 +02:00 [DBG] Error Id Parameter: errorId
2020-08-17 01:33:48.074 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 01:33:48.074 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 01:33:48.101 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 01:33:48.101 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 01:33:48.101 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 01:33:48.101 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 01:33:48.103 +02:00 [DBG] Start discovery request
2020-08-17 01:33:48.103 +02:00 [DBG] Start discovery request
2020-08-17 01:33:48.619 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 01:33:48.619 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 01:33:48.778 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 01:33:48.781 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:33:48.782 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:33:48.788 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 01:33:48.790 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 01:33:48.790 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 01:33:48.791 +02:00 [DBG] Start key discovery request
2020-08-17 01:33:48.920 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-17 01:33:48.931 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-17 01:33:48.931 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-17 01:33:48.932 +02:00 [DBG] Start authorize request
2020-08-17 01:33:48.940 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 01:33:48.942 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 01:33:49.156 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:33:49.163 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:33:49.227 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:33:49.266 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 01:33:49.275 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:33:49.278 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 01:33:49.282 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 01:33:49.292 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"TXR-M1JXWWFHfml4bEJ6Y2VJVlp0Xy40YTM0VVpHVkZISnhQYWZuTXdFR1dm","UiLocales":null,"Nonce":"TXR-M1JXWWFHfml4bEJ6Y2VJVlp0Xy40YTM0VVpHVkZISnhQYWZuTXdFR1dm","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"-k6IRmMWBcNCpLXtY_autA","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"TXR-M1JXWWFHfml4bEJ6Y2VJVlp0Xy40YTM0VVpHVkZISnhQYWZuTXdFR1dm","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"TXR-M1JXWWFHfml4bEJ6Y2VJVlp0Xy40YTM0VVpHVkZISnhQYWZuTXdFR1dm"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 01:33:49.316 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-17 01:33:49.318 +02:00 [DBG] Creating Implicit Flow response.
2020-08-17 01:33:49.327 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-17 01:33:49.327 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 01:33:49.575 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-17 01:33:49.575 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-17 01:33:49.585 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****KxHw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****4N6Q","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000049-0004-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-16T23:33:49.0000000Z","ProcessId":18740,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-17 01:33:49.587 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"TXR-M1JXWWFHfml4bEJ6Y2VJVlp0Xy40YTM0VVpHVkZISnhQYWZuTXdFR1dm","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-17 01:33:50.044 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 01:33:50.054 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:33:50.055 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:33:50.058 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 01:33:50.075 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 01:33:50.075 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 01:33:50.076 +02:00 [DBG] Start discovery request
2020-08-17 01:33:50.101 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 01:33:50.248 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 01:33:50.253 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:33:50.253 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:33:50.255 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 01:33:50.256 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 01:33:50.256 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 01:33:50.256 +02:00 [DBG] Start key discovery request
2020-08-17 01:33:50.459 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 01:33:50.463 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:33:50.463 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:33:50.465 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 01:33:50.467 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:33:50.467 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:33:50.468 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 01:33:50.470 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 01:33:50.470 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 01:33:50.472 +02:00 [DBG] Start userinfo request
2020-08-17 01:33:50.474 +02:00 [DBG] Bearer token found in header
2020-08-17 01:33:50.528 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:33:50.528 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:33:50.540 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:33:50.540 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:33:50.544 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 01:33:50.545 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597620829,"exp":1597624429,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597619030,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 01:33:50.548 +02:00 [DBG] Creating userinfo response
2020-08-17 01:33:50.550 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:33:50.551 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:33:50.554 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:33:50.558 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 01:33:50.558 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:33:50.560 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:33:50.564 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 01:33:50.565 +02:00 [DBG] End userinfo request
2020-08-17 01:34:00.298 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 01:34:00.299 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 01:34:00.299 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 01:34:00.299 +02:00 [DBG] Start discovery request
2020-08-17 01:34:00.707 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 01:34:00.865 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 01:34:00.867 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 01:34:00.867 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 01:34:00.867 +02:00 [DBG] Start key discovery request
2020-08-17 01:34:01.004 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 01:34:01.005 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 01:34:01.005 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 01:34:01.005 +02:00 [DBG] Start userinfo request
2020-08-17 01:34:01.005 +02:00 [DBG] Bearer token found in header
2020-08-17 01:34:01.434 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:34:01.435 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:34:01.466 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:34:01.466 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:34:01.717 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 01:34:01.719 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597620829,"exp":1597624429,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597619030,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 01:34:01.719 +02:00 [DBG] Creating userinfo response
2020-08-17 01:34:01.719 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:34:01.719 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:34:01.832 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:34:01.832 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 01:34:01.832 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:34:01.835 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:34:01.852 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 01:34:01.852 +02:00 [DBG] End userinfo request
2020-08-17 01:36:10.967 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 01:36:10.993 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:36:10.994 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:36:10.995 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 01:36:10.996 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 01:36:10.996 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 01:36:10.996 +02:00 [DBG] Start discovery request
2020-08-17 01:36:11.067 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 01:36:11.634 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 01:36:11.667 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:36:11.668 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:36:11.670 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 01:36:11.683 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 01:36:11.684 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 01:36:11.684 +02:00 [DBG] Start key discovery request
2020-08-17 01:36:12.260 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 01:36:12.261 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 01:36:12.261 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 01:36:12.261 +02:00 [DBG] Start discovery request
2020-08-17 01:36:12.276 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 01:36:12.288 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 01:36:12.288 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 01:36:12.288 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 01:36:12.288 +02:00 [DBG] Start key discovery request
2020-08-17 01:36:12.299 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 01:36:12.304 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 01:36:12.304 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 01:36:12.304 +02:00 [DBG] Start userinfo request
2020-08-17 01:36:12.304 +02:00 [DBG] Bearer token found in header
2020-08-17 01:36:12.455 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:36:12.455 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:36:12.478 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:36:12.478 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:36:12.481 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 01:36:12.482 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597620829,"exp":1597624429,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597619030,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 01:36:12.482 +02:00 [DBG] Creating userinfo response
2020-08-17 01:36:12.482 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:36:12.482 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:36:12.487 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:36:12.487 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 01:36:12.487 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:36:12.488 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:36:12.493 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 01:36:12.493 +02:00 [DBG] End userinfo request
2020-08-17 01:36:17.647 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-08-17 01:36:17.650 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-08-17 01:36:17.650 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-08-17 01:36:18.184 +02:00 [DBG] Processing signout request for 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 01:36:18.186 +02:00 [DBG] Start end session request validation
2020-08-17 01:36:18.189 +02:00 [DBG] Start identity token validation
2020-08-17 01:36:18.217 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:36:18.217 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:36:18.218 +02:00 [DBG] Client found: listify.webapp / The Listify WebApplication
2020-08-17 01:36:18.220 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 01:36:18.221 +02:00 [DBG] Token validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597620829,"exp":1597621129,"iss":"http://localhost:5000","aud":"listify.webapp","nonce":"TXR-M1JXWWFHfml4bEJ6Y2VJVlp0Xy40YTM0VVpHVkZISnhQYWZuTXdFR1dm","iat":1597620829,"at_hash":"7m4-gvS6a9w1iecU6101ow","s_hash":"btqFboUfYODzhrnclwOGvw","sid":"-k6IRmMWBcNCpLXtY_autA","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597619030,"idp":"Facebook","amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 01:36:18.224 +02:00 [INF] End session request validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","PostLogOutUri":"http://localhost:4200","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200"},"$type":"EndSessionRequestValidationLog"}
2020-08-17 01:36:18.225 +02:00 [DBG] Success validating end session request from listify.webapp
2020-08-17 01:36:18.628 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-17 01:36:18.629 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-17 01:36:18.630 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-17 01:36:18.631 +02:00 [INF] {"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"80000040-0002-fc00-b63f-84710c7967bb","TimeStamp":"2020-08-16T23:36:18.0000000Z","ProcessId":18740,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-17 01:36:18.698 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-17 01:36:18.699 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-17 01:36:18.699 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-17 01:36:18.699 +02:00 [DBG] Start authorize request
2020-08-17 01:36:18.700 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 01:36:18.700 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 01:36:18.750 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:36:18.750 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:36:18.758 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:36:18.778 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 01:36:18.784 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:36:18.802 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 01:36:18.803 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 01:36:18.804 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"WHJUT3pxVUgyWTI4X0RjT1hvTE12cEl1UXZqcmd6VEhSWXltb3dYaEhWS2hs","UiLocales":null,"Nonce":"WHJUT3pxVUgyWTI4X0RjT1hvTE12cEl1UXZqcmd6VEhSWXltb3dYaEhWS2hs","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"-k6IRmMWBcNCpLXtY_autA","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"WHJUT3pxVUgyWTI4X0RjT1hvTE12cEl1UXZqcmd6VEhSWXltb3dYaEhWS2hs","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"WHJUT3pxVUgyWTI4X0RjT1hvTE12cEl1UXZqcmd6VEhSWXltb3dYaEhWS2hs"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 01:36:18.812 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-17 01:36:18.812 +02:00 [DBG] Creating Implicit Flow response.
2020-08-17 01:36:18.812 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-17 01:36:18.812 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 01:36:18.825 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-17 01:36:18.825 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-17 01:36:18.827 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****l9Eg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****qesg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000000c-0001-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-16T23:36:18.0000000Z","ProcessId":18740,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-17 01:36:18.827 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"WHJUT3pxVUgyWTI4X0RjT1hvTE12cEl1UXZqcmd6VEhSWXltb3dYaEhWS2hs","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-17 01:36:19.255 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 01:36:19.260 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:36:19.260 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:36:19.261 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 01:36:19.261 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 01:36:19.261 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 01:36:19.261 +02:00 [DBG] Start discovery request
2020-08-17 01:36:19.281 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 01:36:19.515 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 01:36:19.527 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:36:19.527 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:36:19.528 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 01:36:19.529 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 01:36:19.529 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 01:36:19.530 +02:00 [DBG] Start key discovery request
2020-08-17 01:36:19.845 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 01:36:19.851 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:36:19.851 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:36:19.861 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 01:36:19.867 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:36:19.867 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:36:19.868 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 01:36:19.869 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 01:36:19.869 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 01:36:19.869 +02:00 [DBG] Start userinfo request
2020-08-17 01:36:19.869 +02:00 [DBG] Bearer token found in header
2020-08-17 01:36:19.943 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:36:19.944 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:36:19.985 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:36:19.986 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:36:19.990 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 01:36:19.991 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597620978,"exp":1597624578,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597619030,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 01:36:19.991 +02:00 [DBG] Creating userinfo response
2020-08-17 01:36:19.991 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:36:19.991 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:36:19.999 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:36:19.999 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 01:36:19.999 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:36:20.010 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:36:20.049 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 01:36:20.049 +02:00 [DBG] End userinfo request
2020-08-17 01:36:20.096 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 01:36:20.100 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 01:36:20.100 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 01:36:20.100 +02:00 [DBG] Start discovery request
2020-08-17 01:36:20.125 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 01:36:20.138 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 01:36:20.139 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 01:36:20.139 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 01:36:20.139 +02:00 [DBG] Start key discovery request
2020-08-17 01:36:20.152 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 01:36:20.152 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 01:36:20.152 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 01:36:20.152 +02:00 [DBG] Start userinfo request
2020-08-17 01:36:20.152 +02:00 [DBG] Bearer token found in header
2020-08-17 01:36:20.222 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:36:20.222 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:36:20.265 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:36:20.266 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:36:20.270 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 01:36:20.270 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597620978,"exp":1597624578,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597619030,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 01:36:20.271 +02:00 [DBG] Creating userinfo response
2020-08-17 01:36:20.271 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:36:20.271 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:36:20.281 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:36:20.281 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 01:36:20.281 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:36:20.291 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:36:20.312 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 01:36:20.312 +02:00 [DBG] End userinfo request
2020-08-17 01:39:11.173 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-17 01:39:11.199 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-17 01:39:11.199 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-17 01:39:11.199 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-17 01:39:11.199 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-17 01:39:11.199 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-17 01:39:11.199 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-17 01:39:11.373 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 01:39:11.424 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:39:11.427 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:39:11.462 +02:00 [DBG] Login Url: /Account/Login
2020-08-17 01:39:11.463 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-17 01:39:11.463 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-17 01:39:11.463 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-17 01:39:11.463 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-17 01:39:11.463 +02:00 [DBG] Error Url: /home/error
2020-08-17 01:39:11.463 +02:00 [DBG] Error Id Parameter: errorId
2020-08-17 01:39:11.473 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 01:39:11.477 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 01:39:11.477 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 01:39:11.479 +02:00 [DBG] Start discovery request
2020-08-17 01:39:12.420 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 01:39:12.436 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 01:39:12.437 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 01:39:12.437 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 01:39:12.437 +02:00 [DBG] Start discovery request
2020-08-17 01:39:12.450 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 01:39:12.528 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 01:39:12.531 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:39:12.531 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:39:12.536 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 01:39:12.537 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 01:39:12.537 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 01:39:12.538 +02:00 [DBG] Start key discovery request
2020-08-17 01:39:12.596 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 01:39:12.596 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 01:39:12.597 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 01:39:12.597 +02:00 [DBG] Start key discovery request
2020-08-17 01:39:12.743 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 01:39:12.747 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 01:39:12.747 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 01:39:12.749 +02:00 [DBG] Start userinfo request
2020-08-17 01:39:12.751 +02:00 [DBG] Bearer token found in header
2020-08-17 01:39:13.259 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:39:13.266 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:39:13.296 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:39:13.296 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:39:13.318 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 01:39:13.323 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597620978,"exp":1597624578,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597619030,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 01:39:13.330 +02:00 [DBG] Creating userinfo response
2020-08-17 01:39:13.333 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:39:13.334 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:39:13.381 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:39:13.384 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 01:39:13.384 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:39:13.386 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:39:13.457 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 01:39:13.457 +02:00 [DBG] End userinfo request
2020-08-17 01:39:24.365 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-08-17 01:39:24.367 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-08-17 01:39:24.367 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-08-17 01:39:24.375 +02:00 [DBG] Processing signout request for 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 01:39:24.378 +02:00 [DBG] Start end session request validation
2020-08-17 01:39:24.380 +02:00 [DBG] Start identity token validation
2020-08-17 01:39:24.427 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:39:24.427 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:39:24.428 +02:00 [DBG] Client found: listify.webapp / The Listify WebApplication
2020-08-17 01:39:24.433 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 01:39:24.433 +02:00 [DBG] Token validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597620978,"exp":1597621278,"iss":"http://localhost:5000","aud":"listify.webapp","nonce":"WHJUT3pxVUgyWTI4X0RjT1hvTE12cEl1UXZqcmd6VEhSWXltb3dYaEhWS2hs","iat":1597620978,"at_hash":"Teq5e7QpVcpTB44-wqjKDg","s_hash":"BB38GDNYbvbNyVi9VcFGoA","sid":"-k6IRmMWBcNCpLXtY_autA","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597619030,"idp":"Facebook","amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 01:39:24.442 +02:00 [INF] End session request validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","PostLogOutUri":"http://localhost:4200","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200"},"$type":"EndSessionRequestValidationLog"}
2020-08-17 01:39:24.443 +02:00 [DBG] Success validating end session request from listify.webapp
2020-08-17 01:39:24.711 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-17 01:39:24.712 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-17 01:39:24.713 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-17 01:39:24.718 +02:00 [INF] {"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"8000003d-0006-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-16T23:39:24.0000000Z","ProcessId":24488,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-17 01:39:25.517 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 01:39:25.533 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:39:25.534 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:39:25.536 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 01:39:25.554 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 01:39:25.554 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 01:39:25.554 +02:00 [DBG] Start discovery request
2020-08-17 01:39:25.578 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 01:39:25.910 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 01:39:25.924 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:39:25.926 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:39:25.928 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 01:39:25.932 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 01:39:25.932 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 01:39:25.932 +02:00 [DBG] Start key discovery request
2020-08-17 01:39:26.186 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-17 01:39:26.196 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-17 01:39:26.197 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-17 01:39:26.199 +02:00 [DBG] Start authorize request
2020-08-17 01:39:26.204 +02:00 [DBG] No user present in authorize request
2020-08-17 01:39:26.225 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 01:39:26.272 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:39:26.273 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:39:26.299 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:39:26.348 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 01:39:26.361 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:39:26.376 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 01:39:26.382 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 01:39:26.388 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"TkJQMlVPYXVNLXFFbk5yTWVDUExjZHdEUzE5aUg2Nkl3dW0zRWVTVlVScEJC","UiLocales":null,"Nonce":"TkJQMlVPYXVNLXFFbk5yTWVDUExjZHdEUzE5aUg2Nkl3dW0zRWVTVlVScEJC","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"TkJQMlVPYXVNLXFFbk5yTWVDUExjZHdEUzE5aUg2Nkl3dW0zRWVTVlVScEJC","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"TkJQMlVPYXVNLXFFbk5yTWVDUExjZHdEUzE5aUg2Nkl3dW0zRWVTVlVScEJC"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 01:39:26.392 +02:00 [INF] Showing login: User is not authenticated
2020-08-17 01:39:26.646 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 01:39:26.693 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:39:26.693 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:39:26.700 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:39:26.718 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 01:39:26.723 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:39:26.745 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 01:39:26.745 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 01:39:26.785 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:39:26.785 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:39:30.236 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-17 01:39:32.932 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-17 01:39:33.118 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000046-0002-fc00-b63f-84710c7967bb","TimeStamp":"2020-08-16T23:39:33.0000000Z","ProcessId":24488,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-17 01:39:33.126 +02:00 [DBG] Augmenting SignInContext
2020-08-17 01:39:33.127 +02:00 [DBG] Adding amr claim with value: external
2020-08-17 01:39:33.128 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-17 01:39:33.129 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-17 01:39:33.206 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-17 01:39:33.207 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-17 01:39:33.207 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-17 01:39:33.209 +02:00 [DBG] Start authorize callback request
2020-08-17 01:39:33.211 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 01:39:33.211 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 01:39:33.237 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:39:33.237 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:39:33.242 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:39:33.257 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 01:39:33.262 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:39:33.275 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 01:39:33.275 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 01:39:33.276 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"TkJQMlVPYXVNLXFFbk5yTWVDUExjZHdEUzE5aUg2Nkl3dW0zRWVTVlVScEJC","UiLocales":null,"Nonce":"TkJQMlVPYXVNLXFFbk5yTWVDUExjZHdEUzE5aUg2Nkl3dW0zRWVTVlVScEJC","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"p2Dwl0Gj3-83DS9F4dxumQ","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"TkJQMlVPYXVNLXFFbk5yTWVDUExjZHdEUzE5aUg2Nkl3dW0zRWVTVlVScEJC","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"TkJQMlVPYXVNLXFFbk5yTWVDUExjZHdEUzE5aUg2Nkl3dW0zRWVTVlVScEJC"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 01:39:33.289 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-17 01:39:33.292 +02:00 [DBG] Creating Implicit Flow response.
2020-08-17 01:39:33.309 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-17 01:39:33.309 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 01:39:33.343 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-17 01:39:33.343 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-17 01:39:33.350 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Q_lw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****GjGA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000047-0002-fc00-b63f-84710c7967bb","TimeStamp":"2020-08-16T23:39:33.0000000Z","ProcessId":24488,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-17 01:39:33.352 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"TkJQMlVPYXVNLXFFbk5yTWVDUExjZHdEUzE5aUg2Nkl3dW0zRWVTVlVScEJC","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-17 01:39:33.356 +02:00 [DBG] Augmenting SignInContext
2020-08-17 01:39:33.357 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-17 01:39:33.701 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 01:39:33.707 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:39:33.707 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:39:33.708 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 01:39:33.708 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 01:39:33.709 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 01:39:33.709 +02:00 [DBG] Start discovery request
2020-08-17 01:39:33.723 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 01:39:33.972 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 01:39:33.979 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:39:33.980 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:39:33.981 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 01:39:33.982 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 01:39:33.982 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 01:39:33.982 +02:00 [DBG] Start key discovery request
2020-08-17 01:39:34.181 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 01:39:34.208 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:39:34.208 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:39:34.220 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 01:39:34.229 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:39:34.229 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:39:34.232 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 01:39:34.236 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 01:39:34.236 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 01:39:34.236 +02:00 [DBG] Start userinfo request
2020-08-17 01:39:34.236 +02:00 [DBG] Bearer token found in header
2020-08-17 01:39:34.289 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:39:34.289 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:39:34.302 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:39:34.303 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:39:34.306 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 01:39:34.307 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597621173,"exp":1597624773,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597621173,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 01:39:34.307 +02:00 [DBG] Creating userinfo response
2020-08-17 01:39:34.307 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:39:34.308 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:39:34.315 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:39:34.316 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 01:39:34.316 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:39:34.320 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:39:34.336 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 01:39:34.336 +02:00 [DBG] End userinfo request
2020-08-17 01:39:34.461 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 01:39:34.461 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 01:39:34.461 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 01:39:34.461 +02:00 [DBG] Start discovery request
2020-08-17 01:39:34.478 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 01:39:34.481 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 01:39:34.481 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 01:39:34.482 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 01:39:34.482 +02:00 [DBG] Start key discovery request
2020-08-17 01:39:34.484 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 01:39:34.488 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 01:39:34.488 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 01:39:34.488 +02:00 [DBG] Start userinfo request
2020-08-17 01:39:34.488 +02:00 [DBG] Bearer token found in header
2020-08-17 01:39:34.522 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:39:34.522 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:39:34.531 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:39:34.531 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:39:34.536 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 01:39:34.536 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597621173,"exp":1597624773,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597621173,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 01:39:34.537 +02:00 [DBG] Creating userinfo response
2020-08-17 01:39:34.537 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:39:34.537 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:39:34.542 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:39:34.542 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 01:39:34.542 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:39:34.544 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:39:34.553 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 01:39:34.553 +02:00 [DBG] End userinfo request
2020-08-17 01:41:04.988 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 01:41:05.002 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:41:05.002 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:41:05.003 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 01:41:05.003 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 01:41:05.003 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 01:41:05.003 +02:00 [DBG] Start discovery request
2020-08-17 01:41:05.018 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 01:41:05.035 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 01:41:05.037 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:41:05.037 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:41:05.037 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 01:41:05.038 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 01:41:05.038 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 01:41:05.038 +02:00 [DBG] Start key discovery request
2020-08-17 01:41:06.699 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-17 01:41:06.709 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-17 01:41:06.709 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-17 01:41:06.709 +02:00 [DBG] Start authorize request
2020-08-17 01:41:06.710 +02:00 [DBG] No user present in authorize request
2020-08-17 01:41:06.710 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 01:41:06.878 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:41:06.878 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:41:06.887 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:41:06.906 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 01:41:06.910 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:41:06.912 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 01:41:06.913 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 01:41:06.915 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"d3owV2pTcG5Id1lyTHouMjk1bUo5Z3VTSzhBeFVOLlIyZUVVR1hqR2RKQ0dW","UiLocales":null,"Nonce":"d3owV2pTcG5Id1lyTHouMjk1bUo5Z3VTSzhBeFVOLlIyZUVVR1hqR2RKQ0dW","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"d3owV2pTcG5Id1lyTHouMjk1bUo5Z3VTSzhBeFVOLlIyZUVVR1hqR2RKQ0dW","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"d3owV2pTcG5Id1lyTHouMjk1bUo5Z3VTSzhBeFVOLlIyZUVVR1hqR2RKQ0dW"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 01:41:06.915 +02:00 [INF] Showing login: User is not authenticated
2020-08-17 01:41:06.946 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 01:41:06.979 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:41:06.980 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:41:07.306 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:41:07.473 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 01:41:07.492 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:41:07.524 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 01:41:07.526 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 01:41:07.586 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:41:07.586 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:41:21.784 +02:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2020-08-17 01:41:22.081 +02:00 [DBG] Augmenting SignInContext
2020-08-17 01:41:22.082 +02:00 [DBG] Adding idp claim with value: local
2020-08-17 01:41:22.082 +02:00 [DBG] Adding auth_time claim with value: 1597621282
2020-08-17 01:41:22.083 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-17 01:41:22.089 +02:00 [INF] {"Username":"aboelkassem","Provider":null,"ProviderUserId":null,"SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","DisplayName":"aboelkassem","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000003-0005-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-16T23:41:22.0000000Z","ProcessId":24488,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-17 01:41:22.104 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-17 01:41:22.105 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-17 01:41:22.106 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-17 01:41:22.106 +02:00 [DBG] Start authorize callback request
2020-08-17 01:41:22.106 +02:00 [DBG] User in authorize request: 598738a9-a451-4183-a345-2bcf44f4ae50
2020-08-17 01:41:22.107 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 01:41:22.158 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:41:22.159 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:41:22.170 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:41:22.197 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 01:41:22.207 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:41:22.221 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 01:41:22.221 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 01:41:22.221 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"d3owV2pTcG5Id1lyTHouMjk1bUo5Z3VTSzhBeFVOLlIyZUVVR1hqR2RKQ0dW","UiLocales":null,"Nonce":"d3owV2pTcG5Id1lyTHouMjk1bUo5Z3VTSzhBeFVOLlIyZUVVR1hqR2RKQ0dW","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"rfuC7lQYh0r0OJU0vGre2w","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"d3owV2pTcG5Id1lyTHouMjk1bUo5Z3VTSzhBeFVOLlIyZUVVR1hqR2RKQ0dW","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"d3owV2pTcG5Id1lyTHouMjk1bUo5Z3VTSzhBeFVOLlIyZUVVR1hqR2RKQ0dW"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 01:41:22.233 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-17 01:41:22.233 +02:00 [DBG] Creating Implicit Flow response.
2020-08-17 01:41:22.234 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-17 01:41:22.234 +02:00 [DBG] Getting claims for access token for subject: 598738a9-a451-4183-a345-2bcf44f4ae50
2020-08-17 01:41:22.250 +02:00 [DBG] Getting claims for identity token for subject: 598738a9-a451-4183-a345-2bcf44f4ae50 and client: listify.webapp
2020-08-17 01:41:22.250 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-17 01:41:22.252 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****W7Gw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****QtmA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000004-0005-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-16T23:41:22.0000000Z","ProcessId":24488,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-17 01:41:22.252 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"d3owV2pTcG5Id1lyTHouMjk1bUo5Z3VTSzhBeFVOLlIyZUVVR1hqR2RKQ0dW","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-17 01:41:22.252 +02:00 [DBG] Augmenting SignInContext
2020-08-17 01:41:22.253 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-17 01:41:22.817 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 01:41:22.820 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:41:22.820 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:41:22.821 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 01:41:22.821 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 01:41:22.821 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 01:41:22.821 +02:00 [DBG] Start discovery request
2020-08-17 01:41:22.853 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 01:41:23.955 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 01:41:23.969 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:41:23.969 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:41:23.970 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 01:41:23.970 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 01:41:23.970 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 01:41:23.970 +02:00 [DBG] Start key discovery request
2020-08-17 01:41:24.040 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 01:41:24.057 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:41:24.057 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:41:24.070 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 01:41:24.079 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:41:24.080 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:41:24.082 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 01:41:24.083 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 01:41:24.084 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 01:41:24.086 +02:00 [DBG] Start userinfo request
2020-08-17 01:41:24.088 +02:00 [DBG] Bearer token found in header
2020-08-17 01:41:24.137 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:41:24.137 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:41:24.150 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:41:24.150 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:41:24.153 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 01:41:24.153 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597621282,"exp":1597624882,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"598738a9-a451-4183-a345-2bcf44f4ae50","auth_time":1597621282,"idp":"local","scope":["profile","openid","roles","listifyWebAPI"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-08-17 01:41:24.154 +02:00 [DBG] Creating userinfo response
2020-08-17 01:41:24.154 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:41:24.154 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:41:24.162 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:41:24.162 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 01:41:24.162 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:41:24.166 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:41:24.172 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website role preferred_username
2020-08-17 01:41:24.172 +02:00 [DBG] End userinfo request
2020-08-17 01:41:24.387 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 01:41:24.388 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 01:41:24.388 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 01:41:24.388 +02:00 [DBG] Start discovery request
2020-08-17 01:41:24.406 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 01:41:24.431 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 01:41:24.431 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 01:41:24.432 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 01:41:24.432 +02:00 [DBG] Start key discovery request
2020-08-17 01:41:24.443 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 01:41:24.444 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 01:41:24.444 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 01:41:24.444 +02:00 [DBG] Start userinfo request
2020-08-17 01:41:24.444 +02:00 [DBG] Bearer token found in header
2020-08-17 01:41:24.491 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:41:24.492 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:41:24.536 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:41:24.537 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:41:24.540 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 01:41:24.540 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597621282,"exp":1597624882,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"598738a9-a451-4183-a345-2bcf44f4ae50","auth_time":1597621282,"idp":"local","scope":["profile","openid","roles","listifyWebAPI"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-08-17 01:41:24.541 +02:00 [DBG] Creating userinfo response
2020-08-17 01:41:24.541 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:41:24.541 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:41:24.552 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:41:24.552 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 01:41:24.552 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:41:24.554 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:41:24.564 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website role preferred_username
2020-08-17 01:41:24.565 +02:00 [DBG] End userinfo request
2020-08-17 01:43:55.907 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 01:43:56.062 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:43:56.063 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:43:56.069 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 01:43:56.074 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 01:43:56.074 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 01:43:56.153 +02:00 [DBG] Start discovery request
2020-08-17 01:43:56.409 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 01:43:57.666 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 01:43:58.138 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:43:58.139 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:43:58.139 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 01:43:58.140 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 01:43:58.140 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 01:43:58.140 +02:00 [DBG] Start discovery request
2020-08-17 01:43:58.199 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 01:43:58.592 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 01:43:58.825 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:43:58.825 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:43:58.826 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 01:43:58.826 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 01:43:58.826 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 01:43:58.826 +02:00 [DBG] Start key discovery request
2020-08-17 01:44:00.573 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 01:44:00.577 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:44:00.578 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:44:00.578 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 01:44:00.579 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 01:44:00.579 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 01:44:00.579 +02:00 [DBG] Start key discovery request
2020-08-17 01:44:00.942 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 01:44:00.943 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 01:44:00.943 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 01:44:00.943 +02:00 [DBG] Start discovery request
2020-08-17 01:44:00.972 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 01:44:01.013 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 01:44:01.023 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 01:44:01.023 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 01:44:01.023 +02:00 [DBG] Start key discovery request
2020-08-17 01:44:01.044 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 01:44:01.045 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 01:44:01.045 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 01:44:01.045 +02:00 [DBG] Start userinfo request
2020-08-17 01:44:01.045 +02:00 [DBG] Bearer token found in header
2020-08-17 01:44:01.190 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:44:01.191 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:44:01.213 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:44:01.213 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:44:01.223 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 01:44:01.224 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597621282,"exp":1597624882,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"598738a9-a451-4183-a345-2bcf44f4ae50","auth_time":1597621282,"idp":"local","scope":["profile","openid","roles","listifyWebAPI"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-08-17 01:44:01.224 +02:00 [DBG] Creating userinfo response
2020-08-17 01:44:01.224 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:44:01.224 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:44:01.244 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:44:01.245 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 01:44:01.245 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:44:01.247 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:44:01.259 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website role preferred_username
2020-08-17 01:44:01.259 +02:00 [DBG] End userinfo request
2020-08-17 01:44:01.427 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 01:44:01.428 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 01:44:01.428 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 01:44:01.428 +02:00 [DBG] Start discovery request
2020-08-17 01:44:01.458 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 01:44:01.462 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 01:44:01.463 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 01:44:01.463 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 01:44:01.463 +02:00 [DBG] Start key discovery request
2020-08-17 01:44:01.472 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 01:44:01.473 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 01:44:01.473 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 01:44:01.473 +02:00 [DBG] Start userinfo request
2020-08-17 01:44:01.473 +02:00 [DBG] Bearer token found in header
2020-08-17 01:44:01.528 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:44:01.528 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:44:01.596 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:44:01.597 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:44:01.612 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 01:44:01.613 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597621173,"exp":1597624773,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597621173,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 01:44:01.613 +02:00 [DBG] Creating userinfo response
2020-08-17 01:44:01.613 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:44:01.614 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:44:01.633 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:44:01.638 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 01:44:01.639 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:44:01.655 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:44:01.663 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 01:44:01.663 +02:00 [DBG] End userinfo request
2020-08-17 01:44:11.636 +02:00 [INF] Removing 0 grants
2020-08-17 01:44:11.648 +02:00 [INF] Removing 0 device flow codes
2020-08-17 01:44:14.390 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 01:44:14.397 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:44:14.398 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:44:14.398 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 01:44:14.398 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 01:44:14.398 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 01:44:14.398 +02:00 [DBG] Start discovery request
2020-08-17 01:44:14.429 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 01:44:14.477 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 01:44:14.483 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:44:14.483 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:44:14.484 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 01:44:14.484 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 01:44:14.484 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 01:44:14.484 +02:00 [DBG] Start key discovery request
2020-08-17 01:44:15.275 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 01:44:15.275 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 01:44:15.275 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 01:44:15.276 +02:00 [DBG] Start discovery request
2020-08-17 01:44:15.292 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 01:44:15.295 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 01:44:15.295 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 01:44:15.295 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 01:44:15.295 +02:00 [DBG] Start key discovery request
2020-08-17 01:44:15.299 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 01:44:15.299 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 01:44:15.299 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 01:44:15.299 +02:00 [DBG] Start userinfo request
2020-08-17 01:44:15.299 +02:00 [DBG] Bearer token found in header
2020-08-17 01:44:15.328 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:44:15.328 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:44:15.342 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:44:15.342 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:44:15.346 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 01:44:15.347 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597621282,"exp":1597624882,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"598738a9-a451-4183-a345-2bcf44f4ae50","auth_time":1597621282,"idp":"local","scope":["profile","openid","roles","listifyWebAPI"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-08-17 01:44:15.347 +02:00 [DBG] Creating userinfo response
2020-08-17 01:44:15.348 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:44:15.348 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:44:15.353 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:44:15.353 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 01:44:15.353 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:44:15.355 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:44:15.430 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website role preferred_username
2020-08-17 01:44:15.430 +02:00 [DBG] End userinfo request
2020-08-17 01:44:15.504 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 01:44:15.510 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:44:15.510 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:44:15.510 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 01:44:15.510 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 01:44:15.510 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 01:44:15.510 +02:00 [DBG] Start discovery request
2020-08-17 01:44:15.531 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 01:44:15.819 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 01:44:15.823 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 01:44:15.823 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 01:44:15.831 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 01:44:15.831 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 01:44:15.832 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 01:44:15.832 +02:00 [DBG] Start discovery request
2020-08-17 01:44:15.842 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 01:44:15.842 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 01:44:15.842 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 01:44:15.842 +02:00 [DBG] Start key discovery request
2020-08-17 01:44:15.846 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 01:44:15.849 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 01:44:15.850 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 01:44:15.850 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 01:44:15.850 +02:00 [DBG] Start key discovery request
2020-08-17 01:44:15.854 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 01:44:15.855 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 01:44:15.855 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 01:44:15.855 +02:00 [DBG] Start userinfo request
2020-08-17 01:44:15.855 +02:00 [DBG] Bearer token found in header
2020-08-17 01:44:15.883 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:44:15.883 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:44:15.893 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 01:44:15.893 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 01:44:15.898 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 01:44:15.898 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597621173,"exp":1597624773,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597621173,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 01:44:15.899 +02:00 [DBG] Creating userinfo response
2020-08-17 01:44:15.899 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:44:15.899 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:44:15.905 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:44:15.905 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 01:44:15.906 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 01:44:15.908 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 01:44:15.915 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 01:44:15.916 +02:00 [DBG] End userinfo request
2020-08-17 02:35:13.842 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-17 02:35:13.949 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-17 02:35:13.949 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-17 02:35:13.949 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-17 02:35:13.949 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-17 02:35:13.949 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-17 02:35:13.949 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-17 02:35:14.278 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 02:35:14.337 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 02:35:14.339 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 02:35:14.373 +02:00 [DBG] Login Url: /Account/Login
2020-08-17 02:35:14.373 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-17 02:35:14.373 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-17 02:35:14.373 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-17 02:35:14.373 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-17 02:35:14.374 +02:00 [DBG] Error Url: /home/error
2020-08-17 02:35:14.374 +02:00 [DBG] Error Id Parameter: errorId
2020-08-17 02:35:14.385 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 02:35:14.385 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 02:35:14.390 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 02:35:14.390 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 02:35:14.390 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 02:35:14.390 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 02:35:14.391 +02:00 [DBG] Start discovery request
2020-08-17 02:35:14.391 +02:00 [DBG] Start discovery request
2020-08-17 02:35:15.070 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 02:35:15.070 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 02:35:15.880 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 02:35:15.885 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 02:35:15.885 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 02:35:15.890 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 02:35:15.892 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 02:35:15.892 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 02:35:15.893 +02:00 [DBG] Start key discovery request
2020-08-17 02:35:16.797 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-17 02:35:16.882 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-17 02:35:16.882 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-17 02:35:16.883 +02:00 [DBG] Start authorize request
2020-08-17 02:35:16.894 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 02:35:16.895 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 02:35:17.078 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 02:35:17.079 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 02:35:17.079 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 02:35:17.079 +02:00 [DBG] Start key discovery request
2020-08-17 02:35:17.122 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 02:35:17.130 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 02:35:17.185 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 02:35:17.213 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 02:35:17.215 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 02:35:17.216 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 02:35:17.218 +02:00 [DBG] Start userinfo request
2020-08-17 02:35:17.219 +02:00 [DBG] Bearer token found in header
2020-08-17 02:35:17.232 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 02:35:17.241 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 02:35:17.244 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 02:35:17.248 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 02:35:17.260 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"SkV3UHhjcktMVlM2TWVSdmNudmZ3a0xQTHktdEx1UUZGdEx2MWNaaVpVd2hC","UiLocales":null,"Nonce":"SkV3UHhjcktMVlM2TWVSdmNudmZ3a0xQTHktdEx1UUZGdEx2MWNaaVpVd2hC","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"p2Dwl0Gj3-83DS9F4dxumQ","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"SkV3UHhjcktMVlM2TWVSdmNudmZ3a0xQTHktdEx1UUZGdEx2MWNaaVpVd2hC","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"SkV3UHhjcktMVlM2TWVSdmNudmZ3a0xQTHktdEx1UUZGdEx2MWNaaVpVd2hC"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 02:35:17.269 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-17 02:35:17.271 +02:00 [DBG] Creating Implicit Flow response.
2020-08-17 02:35:17.279 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-17 02:35:17.280 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 02:35:17.908 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-17 02:35:17.909 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-17 02:35:17.924 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****TJcA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****oZRQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000046-0004-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-17T00:35:17.0000000Z","ProcessId":2428,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2020-08-17 02:35:17.926 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"SkV3UHhjcktMVlM2TWVSdmNudmZ3a0xQTHktdEx1UUZGdEx2MWNaaVpVd2hC","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-17 02:35:17.969 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 02:35:17.969 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 02:35:17.988 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 02:35:17.988 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 02:35:17.994 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 02:35:17.995 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597621173,"exp":1597624773,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597621173,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 02:35:17.998 +02:00 [DBG] Creating userinfo response
2020-08-17 02:35:18.001 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 02:35:18.002 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 02:35:18.006 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 02:35:18.010 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 02:35:18.010 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 02:35:18.012 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 02:35:18.016 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 02:35:18.016 +02:00 [DBG] End userinfo request
2020-08-17 02:35:20.488 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 02:35:20.499 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 02:35:20.499 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 02:35:20.500 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 02:35:20.510 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 02:35:20.510 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 02:35:20.510 +02:00 [DBG] Start discovery request
2020-08-17 02:35:20.515 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 02:35:21.141 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 02:35:21.149 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 02:35:21.150 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 02:35:21.151 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 02:35:21.153 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 02:35:21.153 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 02:35:21.154 +02:00 [DBG] Start key discovery request
2020-08-17 02:35:22.447 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 02:35:22.452 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 02:35:22.452 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 02:35:22.455 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 02:35:22.457 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 02:35:22.457 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 02:35:22.458 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 02:35:22.458 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 02:35:22.458 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 02:35:22.458 +02:00 [DBG] Start userinfo request
2020-08-17 02:35:22.459 +02:00 [DBG] Bearer token found in header
2020-08-17 02:35:22.470 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 02:35:22.470 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 02:35:22.478 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 02:35:22.478 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 02:35:22.480 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 02:35:22.481 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597624517,"exp":1597628117,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597621173,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 02:35:22.481 +02:00 [DBG] Creating userinfo response
2020-08-17 02:35:22.481 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 02:35:22.481 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 02:35:22.483 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 02:35:22.483 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 02:35:22.483 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 02:35:22.484 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 02:35:22.487 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 02:35:22.487 +02:00 [DBG] End userinfo request
2020-08-17 02:35:25.524 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 02:35:25.525 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 02:35:25.525 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 02:35:25.525 +02:00 [DBG] Start discovery request
2020-08-17 02:35:25.532 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 02:35:25.537 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 02:35:25.538 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 02:35:25.538 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 02:35:25.538 +02:00 [DBG] Start key discovery request
2020-08-17 02:35:25.540 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 02:35:25.544 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 02:35:25.545 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 02:35:25.545 +02:00 [DBG] Start userinfo request
2020-08-17 02:35:25.545 +02:00 [DBG] Bearer token found in header
2020-08-17 02:35:25.557 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 02:35:25.558 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 02:35:25.566 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 02:35:25.566 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 02:35:25.569 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 02:35:25.569 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597624517,"exp":1597628117,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597621173,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 02:35:25.569 +02:00 [DBG] Creating userinfo response
2020-08-17 02:35:25.569 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 02:35:25.569 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 02:35:25.573 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 02:35:25.573 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 02:35:25.573 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 02:35:25.575 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 02:35:25.580 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 02:35:25.580 +02:00 [DBG] End userinfo request
2020-08-17 03:00:48.979 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-17 03:00:49.060 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-17 03:00:49.060 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-17 03:00:49.061 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-17 03:00:49.061 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-17 03:00:49.061 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-17 03:00:49.061 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-17 03:00:49.974 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 03:00:49.974 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 03:00:49.974 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 03:00:50.080 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:00:50.084 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:00:50.116 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:00:50.116 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:00:50.116 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:00:50.116 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:00:50.147 +02:00 [DBG] Login Url: /Account/Login
2020-08-17 03:00:50.147 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-17 03:00:50.147 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-17 03:00:50.147 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-17 03:00:50.147 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-17 03:00:50.148 +02:00 [DBG] Error Url: /home/error
2020-08-17 03:00:50.148 +02:00 [DBG] Error Id Parameter: errorId
2020-08-17 03:00:50.160 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:00:50.160 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:00:50.160 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:00:50.165 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:00:50.165 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:00:50.165 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:00:50.165 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:00:50.165 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:00:50.165 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:00:50.167 +02:00 [DBG] Start discovery request
2020-08-17 03:00:50.167 +02:00 [DBG] Start discovery request
2020-08-17 03:00:50.167 +02:00 [DBG] Start discovery request
2020-08-17 03:00:51.137 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:00:51.137 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:00:51.137 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:00:51.459 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 03:00:51.464 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:00:51.464 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:00:51.469 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:00:51.471 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:00:51.471 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:00:51.472 +02:00 [DBG] Start key discovery request
2020-08-17 03:00:54.472 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-17 03:00:54.483 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-17 03:00:54.483 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-17 03:00:54.484 +02:00 [DBG] Start authorize request
2020-08-17 03:00:54.490 +02:00 [DBG] No user present in authorize request
2020-08-17 03:00:54.493 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 03:00:54.781 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:00:54.789 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:00:54.854 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:00:54.897 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:00:54.906 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:00:54.909 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:00:54.914 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 03:00:54.924 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"LnRKbnFlbFdUNTNNflhuOUhIbDd5T0poWjJIR0JULjljSHljNFpIYVpxfjds","UiLocales":null,"Nonce":"LnRKbnFlbFdUNTNNflhuOUhIbDd5T0poWjJIR0JULjljSHljNFpIYVpxfjds","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"LnRKbnFlbFdUNTNNflhuOUhIbDd5T0poWjJIR0JULjljSHljNFpIYVpxfjds","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"LnRKbnFlbFdUNTNNflhuOUhIbDd5T0poWjJIR0JULjljSHljNFpIYVpxfjds"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 03:00:54.931 +02:00 [INF] Showing login: User is not authenticated
2020-08-17 03:00:55.239 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 03:00:55.255 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:00:55.255 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:00:55.257 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:00:55.259 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:00:55.261 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:00:55.263 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:00:55.264 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 03:00:55.278 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:00:55.278 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:01:01.716 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-17 03:01:07.267 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-17 03:01:07.632 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000007-0002-fa00-b63f-84710c7967bb","TimeStamp":"2020-08-17T01:01:07.0000000Z","ProcessId":1368,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-17 03:01:07.638 +02:00 [DBG] Augmenting SignInContext
2020-08-17 03:01:07.639 +02:00 [DBG] Adding amr claim with value: external
2020-08-17 03:01:07.642 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-17 03:01:07.645 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-17 03:01:07.720 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-17 03:01:07.721 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-17 03:01:07.721 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-17 03:01:07.724 +02:00 [DBG] Start authorize callback request
2020-08-17 03:01:07.726 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 03:01:07.726 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 03:01:08.048 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:01:08.048 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:01:08.100 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:01:08.135 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:01:08.274 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:01:08.300 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:01:08.300 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 03:01:08.301 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"LnRKbnFlbFdUNTNNflhuOUhIbDd5T0poWjJIR0JULjljSHljNFpIYVpxfjds","UiLocales":null,"Nonce":"LnRKbnFlbFdUNTNNflhuOUhIbDd5T0poWjJIR0JULjljSHljNFpIYVpxfjds","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"TWFk8tJtyNb7SxUGT0gkkw","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"LnRKbnFlbFdUNTNNflhuOUhIbDd5T0poWjJIR0JULjljSHljNFpIYVpxfjds","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"LnRKbnFlbFdUNTNNflhuOUhIbDd5T0poWjJIR0JULjljSHljNFpIYVpxfjds"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 03:01:08.354 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-17 03:01:08.357 +02:00 [DBG] Creating Implicit Flow response.
2020-08-17 03:01:08.400 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-17 03:01:08.400 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 03:01:09.956 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-17 03:01:09.956 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-17 03:01:09.964 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****O3iQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****e8iw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000008-0002-fa00-b63f-84710c7967bb","TimeStamp":"2020-08-17T01:01:09.0000000Z","ProcessId":1368,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-17 03:01:09.966 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"LnRKbnFlbFdUNTNNflhuOUhIbDd5T0poWjJIR0JULjljSHljNFpIYVpxfjds","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-17 03:01:10.004 +02:00 [DBG] Augmenting SignInContext
2020-08-17 03:01:10.005 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-17 03:01:10.459 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 03:01:10.603 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:01:10.603 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:01:10.604 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:01:10.607 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:01:10.607 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:01:10.608 +02:00 [DBG] Start discovery request
2020-08-17 03:01:10.700 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:01:10.922 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 03:01:11.071 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:01:11.072 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:01:11.073 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:01:11.074 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:01:11.074 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:01:11.074 +02:00 [DBG] Start key discovery request
2020-08-17 03:01:11.254 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:01:11.260 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:01:11.260 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:01:11.270 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:01:11.272 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:01:11.272 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:01:11.272 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 03:01:11.275 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 03:01:11.276 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 03:01:11.278 +02:00 [DBG] Start userinfo request
2020-08-17 03:01:11.281 +02:00 [DBG] Bearer token found in header
2020-08-17 03:01:11.611 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:01:11.611 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:01:11.877 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:01:11.878 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:01:11.926 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:01:11.927 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597626069,"exp":1597629669,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597626067,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 03:01:12.143 +02:00 [DBG] Creating userinfo response
2020-08-17 03:01:12.147 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:01:12.148 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:01:12.320 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:01:12.323 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 03:01:12.323 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:01:12.325 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:01:12.383 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 03:01:12.383 +02:00 [DBG] End userinfo request
2020-08-17 03:01:29.083 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:01:29.084 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:01:29.084 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:01:29.084 +02:00 [DBG] Start discovery request
2020-08-17 03:01:29.275 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:01:29.590 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:01:29.594 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:01:29.594 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:01:29.594 +02:00 [DBG] Start key discovery request
2020-08-17 03:01:29.728 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 03:01:29.730 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 03:01:29.730 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 03:01:29.730 +02:00 [DBG] Start userinfo request
2020-08-17 03:01:29.731 +02:00 [DBG] Bearer token found in header
2020-08-17 03:01:29.876 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:01:29.877 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:01:29.896 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:01:29.896 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:01:29.914 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:01:29.915 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597626069,"exp":1597629669,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597626067,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 03:01:29.915 +02:00 [DBG] Creating userinfo response
2020-08-17 03:01:29.915 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:01:29.915 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:01:29.920 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:01:29.920 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 03:01:29.920 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:01:29.923 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:01:29.928 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 03:01:29.928 +02:00 [DBG] End userinfo request
2020-08-17 03:01:32.191 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:01:32.198 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:01:32.198 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:01:32.202 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:01:32.207 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:01:32.207 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:01:32.208 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 03:01:32.212 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 03:01:32.213 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 03:01:32.213 +02:00 [DBG] Start userinfo request
2020-08-17 03:01:32.213 +02:00 [DBG] Bearer token found in header
2020-08-17 03:01:32.257 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:01:32.257 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:01:32.304 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:01:32.304 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:01:32.309 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:01:32.309 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:01:32.309 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597626069,"exp":1597629669,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597626067,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 03:01:32.309 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:01:32.310 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:01:32.310 +02:00 [DBG] Creating userinfo response
2020-08-17 03:01:32.310 +02:00 [DBG] Start discovery request
2020-08-17 03:01:32.310 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:01:32.310 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:01:32.316 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:01:32.317 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 03:01:32.317 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:01:32.324 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:01:32.326 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:01:32.341 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:01:32.341 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:01:32.341 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:01:32.342 +02:00 [DBG] Start key discovery request
2020-08-17 03:01:32.344 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 03:01:32.344 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 03:01:32.344 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 03:01:32.344 +02:00 [DBG] Start userinfo request
2020-08-17 03:01:32.344 +02:00 [DBG] Bearer token found in header
2020-08-17 03:01:32.394 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 03:01:32.395 +02:00 [DBG] End userinfo request
2020-08-17 03:01:32.668 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:01:32.668 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:01:32.923 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:01:32.924 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:01:32.938 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:01:32.939 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597626069,"exp":1597629669,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597626067,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 03:01:32.939 +02:00 [DBG] Creating userinfo response
2020-08-17 03:01:32.939 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:01:32.939 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:01:32.987 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:01:32.987 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 03:01:32.987 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:01:32.991 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:01:32.998 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 03:01:32.998 +02:00 [DBG] End userinfo request
2020-08-17 03:01:35.240 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:01:35.367 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:01:35.368 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:01:35.368 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 03:01:35.369 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 03:01:35.369 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 03:01:35.369 +02:00 [DBG] Start userinfo request
2020-08-17 03:01:35.369 +02:00 [DBG] Bearer token found in header
2020-08-17 03:01:35.444 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:01:35.445 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:01:35.445 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:01:35.445 +02:00 [DBG] Start discovery request
2020-08-17 03:01:35.513 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:01:35.519 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:01:35.519 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:01:35.519 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:01:35.519 +02:00 [DBG] Start key discovery request
2020-08-17 03:01:35.529 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 03:01:35.530 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 03:01:35.530 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 03:01:35.530 +02:00 [DBG] Start userinfo request
2020-08-17 03:01:35.530 +02:00 [DBG] Bearer token found in header
2020-08-17 03:01:35.544 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:01:35.544 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:01:35.571 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:01:35.571 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:01:35.575 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:01:35.575 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597626069,"exp":1597629669,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597626067,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 03:01:35.575 +02:00 [DBG] Creating userinfo response
2020-08-17 03:01:35.576 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:01:35.576 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:01:35.582 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:01:35.583 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 03:01:35.583 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:01:35.585 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:01:35.587 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:01:35.587 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:01:35.592 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 03:01:35.592 +02:00 [DBG] End userinfo request
2020-08-17 03:01:35.621 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:01:35.621 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:01:35.625 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:01:35.625 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597626069,"exp":1597629669,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597626067,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 03:01:35.626 +02:00 [DBG] Creating userinfo response
2020-08-17 03:01:35.626 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:01:35.626 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:01:35.631 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:01:35.631 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 03:01:35.631 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:01:35.637 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:01:35.642 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 03:01:35.643 +02:00 [DBG] End userinfo request
2020-08-17 03:01:38.495 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:01:38.499 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:01:38.499 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:01:38.507 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:01:38.511 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:01:38.511 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:01:38.511 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 03:01:38.511 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 03:01:38.512 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 03:01:38.512 +02:00 [DBG] Start userinfo request
2020-08-17 03:01:38.512 +02:00 [DBG] Bearer token found in header
2020-08-17 03:01:38.544 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:01:38.544 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:01:38.551 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:01:38.551 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:09:47.454 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-17 03:09:47.494 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-17 03:09:47.495 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-17 03:09:47.495 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-17 03:09:47.495 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-17 03:09:47.495 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-17 03:09:47.495 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-17 03:09:47.685 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:09:47.730 +02:00 [DBG] Login Url: /Account/Login
2020-08-17 03:09:47.730 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-17 03:09:47.730 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-17 03:09:47.730 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-17 03:09:47.730 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-17 03:09:47.730 +02:00 [DBG] Error Url: /home/error
2020-08-17 03:09:47.730 +02:00 [DBG] Error Id Parameter: errorId
2020-08-17 03:09:47.750 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:09:47.762 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:09:47.773 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-08-17 03:09:47.781 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-08-17 03:09:47.781 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-08-17 03:09:47.786 +02:00 [DBG] Processing signout request for 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 03:09:47.788 +02:00 [DBG] Start end session request validation
2020-08-17 03:09:47.791 +02:00 [DBG] Start identity token validation
2020-08-17 03:09:48.414 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:09:48.421 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:09:48.423 +02:00 [DBG] Client found: listify.webapp / The Listify WebApplication
2020-08-17 03:09:48.497 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:09:48.504 +02:00 [DBG] Token validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597626069,"exp":1597626369,"iss":"http://localhost:5000","aud":"listify.webapp","nonce":"LnRKbnFlbFdUNTNNflhuOUhIbDd5T0poWjJIR0JULjljSHljNFpIYVpxfjds","iat":1597626069,"at_hash":"KW8Dpnul2dX3P8qtxEZFTA","s_hash":"NuiMwMvl2mNRTXEb-hqvFA","sid":"TWFk8tJtyNb7SxUGT0gkkw","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597626067,"idp":"Facebook","amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 03:09:48.528 +02:00 [INF] End session request validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","PostLogOutUri":"http://localhost:4200","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200"},"$type":"EndSessionRequestValidationLog"}
2020-08-17 03:09:48.529 +02:00 [DBG] Success validating end session request from listify.webapp
2020-08-17 03:09:48.775 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-17 03:09:48.776 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-17 03:09:48.777 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-17 03:09:48.783 +02:00 [INF] {"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"8000000d-0005-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-17T01:09:48.0000000Z","ProcessId":19544,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-17 03:09:49.244 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 03:09:49.254 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:09:49.254 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:09:49.258 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:09:49.262 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:09:49.262 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:09:49.263 +02:00 [DBG] Start discovery request
2020-08-17 03:09:49.672 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:09:49.753 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 03:09:49.758 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:09:49.758 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:09:49.759 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:09:49.761 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:09:49.762 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:09:49.765 +02:00 [DBG] Start key discovery request
2020-08-17 03:09:53.688 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 03:09:53.739 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:09:53.740 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:09:53.741 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:09:53.742 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:09:53.743 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:09:53.743 +02:00 [DBG] Start discovery request
2020-08-17 03:09:53.751 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:09:53.924 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 03:09:53.929 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:09:53.929 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:09:53.930 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:09:53.933 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:09:53.933 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:09:53.933 +02:00 [DBG] Start key discovery request
2020-08-17 03:09:54.879 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-17 03:09:54.883 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-17 03:09:54.883 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-17 03:09:54.887 +02:00 [DBG] Start authorize request
2020-08-17 03:09:54.890 +02:00 [DBG] No user present in authorize request
2020-08-17 03:09:54.893 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 03:09:54.915 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:09:54.915 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:09:54.996 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:09:55.044 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:09:55.058 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:09:55.061 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:09:55.068 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 03:09:55.074 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"UFEtSUcycGo1YkpMbk5fQXlfa1JhbzNRSjV0QnNKaERRcTVYTkNRQ1E0WXFl","UiLocales":null,"Nonce":"UFEtSUcycGo1YkpMbk5fQXlfa1JhbzNRSjV0QnNKaERRcTVYTkNRQ1E0WXFl","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"UFEtSUcycGo1YkpMbk5fQXlfa1JhbzNRSjV0QnNKaERRcTVYTkNRQ1E0WXFl","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"UFEtSUcycGo1YkpMbk5fQXlfa1JhbzNRSjV0QnNKaERRcTVYTkNRQ1E0WXFl"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 03:09:55.079 +02:00 [INF] Showing login: User is not authenticated
2020-08-17 03:09:55.176 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 03:09:55.188 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:09:55.188 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:09:55.191 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:09:55.193 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:09:55.195 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:09:55.197 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:09:55.198 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 03:09:55.214 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:09:55.214 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:09:57.590 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-17 03:09:59.231 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-17 03:10:00.257 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"8000000f-0002-fa00-b63f-84710c7967bb","TimeStamp":"2020-08-17T01:10:00.0000000Z","ProcessId":19544,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-17 03:10:00.263 +02:00 [DBG] Augmenting SignInContext
2020-08-17 03:10:00.263 +02:00 [DBG] Adding amr claim with value: external
2020-08-17 03:10:00.265 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-17 03:10:00.265 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-17 03:10:00.447 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-17 03:10:00.459 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-17 03:10:00.459 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-17 03:10:00.462 +02:00 [DBG] Start authorize callback request
2020-08-17 03:10:00.464 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 03:10:00.465 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 03:10:00.479 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:10:00.479 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:10:00.482 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:10:00.483 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:10:00.485 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:10:00.487 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:10:00.487 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 03:10:00.488 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"UFEtSUcycGo1YkpMbk5fQXlfa1JhbzNRSjV0QnNKaERRcTVYTkNRQ1E0WXFl","UiLocales":null,"Nonce":"UFEtSUcycGo1YkpMbk5fQXlfa1JhbzNRSjV0QnNKaERRcTVYTkNRQ1E0WXFl","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"MoIyEl872g_gohaDgzffdA","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"UFEtSUcycGo1YkpMbk5fQXlfa1JhbzNRSjV0QnNKaERRcTVYTkNRQ1E0WXFl","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"UFEtSUcycGo1YkpMbk5fQXlfa1JhbzNRSjV0QnNKaERRcTVYTkNRQ1E0WXFl"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 03:10:00.494 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-17 03:10:00.497 +02:00 [DBG] Creating Implicit Flow response.
2020-08-17 03:10:00.506 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-17 03:10:00.507 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 03:10:00.564 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-17 03:10:00.564 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-17 03:10:00.572 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****RQlQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****GHMA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000010-0002-fa00-b63f-84710c7967bb","TimeStamp":"2020-08-17T01:10:00.0000000Z","ProcessId":19544,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-17 03:10:00.574 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"UFEtSUcycGo1YkpMbk5fQXlfa1JhbzNRSjV0QnNKaERRcTVYTkNRQ1E0WXFl","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-17 03:10:00.581 +02:00 [DBG] Augmenting SignInContext
2020-08-17 03:10:00.582 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-17 03:10:02.243 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 03:10:02.248 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:10:02.248 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:10:02.249 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:10:02.251 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:10:02.251 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:10:02.251 +02:00 [DBG] Start discovery request
2020-08-17 03:10:02.255 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:10:02.464 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 03:10:02.467 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:10:02.467 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:10:02.467 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:10:02.470 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:10:02.470 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:10:02.470 +02:00 [DBG] Start key discovery request
2020-08-17 03:10:02.638 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:10:02.652 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:10:02.652 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:10:02.660 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:10:02.700 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:10:02.700 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:10:02.700 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 03:10:02.703 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 03:10:02.703 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 03:10:02.710 +02:00 [DBG] Start userinfo request
2020-08-17 03:10:02.715 +02:00 [DBG] Bearer token found in header
2020-08-17 03:10:02.786 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:10:02.786 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:10:02.809 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:10:02.810 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:10:02.815 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:10:02.816 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597626600,"exp":1597630200,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597626600,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 03:10:02.822 +02:00 [DBG] Creating userinfo response
2020-08-17 03:10:02.828 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:10:02.830 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:10:02.834 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:10:02.842 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 03:10:02.843 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:10:02.847 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:10:02.853 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 03:10:02.854 +02:00 [DBG] End userinfo request
2020-08-17 03:10:03.680 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:10:03.681 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:10:03.681 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:10:03.681 +02:00 [DBG] Start discovery request
2020-08-17 03:10:03.690 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:10:03.979 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:10:03.981 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:10:03.981 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:10:03.981 +02:00 [DBG] Start key discovery request
2020-08-17 03:10:04.162 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 03:10:04.162 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 03:10:04.162 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 03:10:04.163 +02:00 [DBG] Start userinfo request
2020-08-17 03:10:04.163 +02:00 [DBG] Bearer token found in header
2020-08-17 03:10:04.177 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:10:04.177 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:10:04.185 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:10:04.185 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:10:04.188 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:10:04.188 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597626600,"exp":1597630200,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597626600,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 03:10:04.188 +02:00 [DBG] Creating userinfo response
2020-08-17 03:10:04.188 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:10:04.188 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:10:04.191 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:10:04.191 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 03:10:04.191 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:10:04.193 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:10:04.196 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 03:10:04.196 +02:00 [DBG] End userinfo request
2020-08-17 03:14:25.778 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-17 03:14:25.811 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-17 03:14:25.811 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-17 03:14:25.811 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-17 03:14:25.811 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-17 03:14:25.811 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-17 03:14:25.811 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-17 03:14:26.578 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:14:26.607 +02:00 [DBG] Login Url: /Account/Login
2020-08-17 03:14:26.607 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-17 03:14:26.607 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-17 03:14:26.607 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-17 03:14:26.607 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-17 03:14:26.607 +02:00 [DBG] Error Url: /home/error
2020-08-17 03:14:26.607 +02:00 [DBG] Error Id Parameter: errorId
2020-08-17 03:14:26.632 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-08-17 03:14:26.635 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-08-17 03:14:26.635 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-08-17 03:14:26.658 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:14:26.659 +02:00 [DBG] Processing signout request for 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 03:14:26.661 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:14:26.662 +02:00 [DBG] Start end session request validation
2020-08-17 03:14:26.665 +02:00 [DBG] Start identity token validation
2020-08-17 03:14:27.263 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:14:27.268 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:14:27.269 +02:00 [DBG] Client found: listify.webapp / The Listify WebApplication
2020-08-17 03:14:27.338 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:14:27.344 +02:00 [DBG] Token validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597626600,"exp":1597626900,"iss":"http://localhost:5000","aud":"listify.webapp","nonce":"UFEtSUcycGo1YkpMbk5fQXlfa1JhbzNRSjV0QnNKaERRcTVYTkNRQ1E0WXFl","iat":1597626600,"at_hash":"32aOEEUxPaXm9I9dVpUDug","s_hash":"Z83rhm5pxjFIJnd78V0-tg","sid":"MoIyEl872g_gohaDgzffdA","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597626600,"idp":"Facebook","amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 03:14:27.366 +02:00 [INF] End session request validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","PostLogOutUri":"http://localhost:4200","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200"},"$type":"EndSessionRequestValidationLog"}
2020-08-17 03:14:27.367 +02:00 [DBG] Success validating end session request from listify.webapp
2020-08-17 03:14:27.591 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-17 03:14:27.593 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-17 03:14:27.593 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-17 03:14:27.598 +02:00 [INF] {"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"80000029-0005-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-17T01:14:27.0000000Z","ProcessId":12212,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-17 03:14:27.957 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 03:14:27.966 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:14:27.967 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:14:27.970 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:14:27.973 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:14:27.973 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:14:27.975 +02:00 [DBG] Start discovery request
2020-08-17 03:14:28.311 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:14:28.480 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 03:14:28.484 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:14:28.484 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:14:28.485 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:14:28.486 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:14:28.486 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:14:28.488 +02:00 [DBG] Start key discovery request
2020-08-17 03:14:33.929 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-17 03:14:33.935 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-17 03:14:33.935 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-17 03:14:33.936 +02:00 [DBG] Start authorize request
2020-08-17 03:14:33.939 +02:00 [DBG] No user present in authorize request
2020-08-17 03:14:33.940 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 03:14:33.962 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:14:33.962 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:14:34.032 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:14:34.075 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:14:34.084 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:14:34.086 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:14:34.091 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 03:14:34.097 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"ZmN-b3E5LjE1RllIMjNLNW1pY3B3bm1DV29jSWN6SG93QXF6aTJBWHd-aVpS","UiLocales":null,"Nonce":"ZmN-b3E5LjE1RllIMjNLNW1pY3B3bm1DV29jSWN6SG93QXF6aTJBWHd-aVpS","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"ZmN-b3E5LjE1RllIMjNLNW1pY3B3bm1DV29jSWN6SG93QXF6aTJBWHd-aVpS","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"ZmN-b3E5LjE1RllIMjNLNW1pY3B3bm1DV29jSWN6SG93QXF6aTJBWHd-aVpS"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 03:14:34.100 +02:00 [INF] Showing login: User is not authenticated
2020-08-17 03:14:34.157 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 03:14:34.169 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:14:34.169 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:14:34.171 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:14:34.174 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:14:34.176 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:14:34.179 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:14:34.180 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 03:14:34.196 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:14:34.196 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:14:50.438 +02:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2020-08-17 03:14:50.612 +02:00 [DBG] Augmenting SignInContext
2020-08-17 03:14:50.613 +02:00 [DBG] Adding idp claim with value: local
2020-08-17 03:14:50.613 +02:00 [DBG] Adding auth_time claim with value: 1597626890
2020-08-17 03:14:50.616 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-17 03:14:50.620 +02:00 [INF] {"Username":"aboelkassem","Provider":null,"ProviderUserId":null,"SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","DisplayName":"aboelkassem","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"8000002d-0005-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-17T01:14:50.0000000Z","ProcessId":12212,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-17 03:14:50.629 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-17 03:14:50.630 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-17 03:14:50.630 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-17 03:14:50.632 +02:00 [DBG] Start authorize callback request
2020-08-17 03:14:50.634 +02:00 [DBG] User in authorize request: 598738a9-a451-4183-a345-2bcf44f4ae50
2020-08-17 03:14:50.634 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 03:14:50.647 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:14:50.647 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:14:50.649 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:14:50.652 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:14:50.654 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:14:50.656 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:14:50.656 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 03:14:50.656 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"ZmN-b3E5LjE1RllIMjNLNW1pY3B3bm1DV29jSWN6SG93QXF6aTJBWHd-aVpS","UiLocales":null,"Nonce":"ZmN-b3E5LjE1RllIMjNLNW1pY3B3bm1DV29jSWN6SG93QXF6aTJBWHd-aVpS","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6PnP6dJ6S2DZ93rOfWs0lw","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"ZmN-b3E5LjE1RllIMjNLNW1pY3B3bm1DV29jSWN6SG93QXF6aTJBWHd-aVpS","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"ZmN-b3E5LjE1RllIMjNLNW1pY3B3bm1DV29jSWN6SG93QXF6aTJBWHd-aVpS"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 03:14:50.665 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-17 03:14:50.667 +02:00 [DBG] Creating Implicit Flow response.
2020-08-17 03:14:50.676 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-17 03:14:50.676 +02:00 [DBG] Getting claims for access token for subject: 598738a9-a451-4183-a345-2bcf44f4ae50
2020-08-17 03:14:50.711 +02:00 [DBG] Getting claims for identity token for subject: 598738a9-a451-4183-a345-2bcf44f4ae50 and client: listify.webapp
2020-08-17 03:14:50.711 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-17 03:14:50.717 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****YgJA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****uSEA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000002e-0005-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-17T01:14:50.0000000Z","ProcessId":12212,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-17 03:14:50.719 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"ZmN-b3E5LjE1RllIMjNLNW1pY3B3bm1DV29jSWN6SG93QXF6aTJBWHd-aVpS","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-17 03:14:50.723 +02:00 [DBG] Augmenting SignInContext
2020-08-17 03:14:50.724 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-17 03:14:51.103 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 03:14:51.109 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:14:51.109 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:14:51.110 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:14:51.110 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:14:51.110 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:14:51.111 +02:00 [DBG] Start discovery request
2020-08-17 03:14:51.116 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:14:51.269 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 03:14:51.271 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:14:51.271 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:14:51.272 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:14:51.272 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:14:51.272 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:14:51.272 +02:00 [DBG] Start key discovery request
2020-08-17 03:14:51.649 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:14:51.656 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:14:51.657 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:14:51.661 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:14:51.668 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:14:51.668 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:14:51.669 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 03:14:51.671 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 03:14:51.671 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 03:14:51.674 +02:00 [DBG] Start userinfo request
2020-08-17 03:14:51.676 +02:00 [DBG] Bearer token found in header
2020-08-17 03:14:51.702 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:14:51.703 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:14:51.720 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:14:51.721 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:14:51.724 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:14:51.724 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597626890,"exp":1597630490,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"598738a9-a451-4183-a345-2bcf44f4ae50","auth_time":1597626890,"idp":"local","scope":["profile","openid","roles","listifyWebAPI"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-08-17 03:14:51.730 +02:00 [DBG] Creating userinfo response
2020-08-17 03:14:51.734 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:14:51.736 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:14:51.740 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:14:51.745 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 03:14:51.745 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:14:51.748 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:14:51.754 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website role preferred_username
2020-08-17 03:14:51.754 +02:00 [DBG] End userinfo request
2020-08-17 03:14:52.534 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:14:52.537 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:14:52.537 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:14:52.537 +02:00 [DBG] Start discovery request
2020-08-17 03:14:52.543 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:14:52.608 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:14:52.610 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:14:52.610 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:14:52.610 +02:00 [DBG] Start key discovery request
2020-08-17 03:14:52.727 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 03:14:52.728 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 03:14:52.728 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 03:14:52.728 +02:00 [DBG] Start userinfo request
2020-08-17 03:14:52.728 +02:00 [DBG] Bearer token found in header
2020-08-17 03:14:52.741 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:14:52.741 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:14:52.749 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:14:52.749 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:14:52.752 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:14:52.752 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597626890,"exp":1597630490,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"598738a9-a451-4183-a345-2bcf44f4ae50","auth_time":1597626890,"idp":"local","scope":["profile","openid","roles","listifyWebAPI"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-08-17 03:14:52.752 +02:00 [DBG] Creating userinfo response
2020-08-17 03:14:52.752 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:14:52.752 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:14:52.755 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:14:52.755 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 03:14:52.755 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:14:52.757 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:14:52.760 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website role preferred_username
2020-08-17 03:14:52.760 +02:00 [DBG] End userinfo request
2020-08-17 03:19:18.802 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-17 03:19:18.833 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-17 03:19:18.833 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-17 03:19:18.833 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-17 03:19:18.833 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-17 03:19:18.833 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-17 03:19:18.833 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-17 03:19:19.036 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:19:19.084 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:19:19.089 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:19:19.120 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:19:19.123 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:19:19.123 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:19:19.163 +02:00 [DBG] Login Url: /Account/Login
2020-08-17 03:19:19.164 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-17 03:19:19.164 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-17 03:19:19.164 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-17 03:19:19.164 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-17 03:19:19.164 +02:00 [DBG] Error Url: /home/error
2020-08-17 03:19:19.164 +02:00 [DBG] Error Id Parameter: errorId
2020-08-17 03:19:19.179 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 03:19:19.185 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 03:19:19.186 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 03:19:19.190 +02:00 [DBG] Start userinfo request
2020-08-17 03:19:19.192 +02:00 [DBG] Bearer token found in header
2020-08-17 03:19:19.824 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:19:19.830 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:19:19.851 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:19:19.852 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:19:19.870 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:19:19.877 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597626890,"exp":1597630490,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"598738a9-a451-4183-a345-2bcf44f4ae50","auth_time":1597626890,"idp":"local","scope":["profile","openid","roles","listifyWebAPI"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-08-17 03:19:19.894 +02:00 [DBG] Creating userinfo response
2020-08-17 03:19:19.897 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:19:19.898 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:19:19.970 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:19:19.987 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 03:19:19.988 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:19:19.990 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:19:20.049 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website role preferred_username
2020-08-17 03:19:20.049 +02:00 [DBG] End userinfo request
2020-08-17 03:19:20.050 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:19:20.053 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:19:20.053 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:19:20.055 +02:00 [DBG] Start discovery request
2020-08-17 03:19:20.172 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:19:20.253 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:19:20.253 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:19:20.254 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:19:20.255 +02:00 [DBG] Start key discovery request
2020-08-17 03:19:20.435 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 03:19:20.436 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 03:19:20.436 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 03:19:20.436 +02:00 [DBG] Start userinfo request
2020-08-17 03:19:20.436 +02:00 [DBG] Bearer token found in header
2020-08-17 03:19:20.447 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:19:20.447 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:19:20.457 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:19:20.457 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:19:20.460 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:19:20.460 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597626890,"exp":1597630490,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"598738a9-a451-4183-a345-2bcf44f4ae50","auth_time":1597626890,"idp":"local","scope":["profile","openid","roles","listifyWebAPI"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-08-17 03:19:20.460 +02:00 [DBG] Creating userinfo response
2020-08-17 03:19:20.460 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:19:20.460 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:19:20.462 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:19:20.462 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 03:19:20.462 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:19:20.465 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:19:20.473 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website role preferred_username
2020-08-17 03:19:20.474 +02:00 [DBG] End userinfo request
2020-08-17 03:19:31.407 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-08-17 03:19:31.411 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-08-17 03:19:31.411 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-08-17 03:19:31.415 +02:00 [DBG] Processing signout request for 598738a9-a451-4183-a345-2bcf44f4ae50
2020-08-17 03:19:31.416 +02:00 [DBG] Start end session request validation
2020-08-17 03:19:31.418 +02:00 [DBG] Start identity token validation
2020-08-17 03:19:31.433 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:19:31.433 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:19:31.435 +02:00 [DBG] Client found: listify.webapp / The Listify WebApplication
2020-08-17 03:19:31.437 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:19:31.438 +02:00 [DBG] Token validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597626890,"exp":1597627190,"iss":"http://localhost:5000","aud":"listify.webapp","nonce":"ZmN-b3E5LjE1RllIMjNLNW1pY3B3bm1DV29jSWN6SG93QXF6aTJBWHd-aVpS","iat":1597626890,"at_hash":"CwySzDSI7eiZe6p14WjRyA","s_hash":"A8UCOhdU0HzG4I5d224HRA","sid":"6PnP6dJ6S2DZ93rOfWs0lw","sub":"598738a9-a451-4183-a345-2bcf44f4ae50","auth_time":1597626890,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2020-08-17 03:19:31.447 +02:00 [INF] End session request validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","PostLogOutUri":"http://localhost:4200","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200"},"$type":"EndSessionRequestValidationLog"}
2020-08-17 03:19:31.448 +02:00 [DBG] Success validating end session request from listify.webapp
2020-08-17 03:19:31.676 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-17 03:19:31.677 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-17 03:19:31.677 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-17 03:19:31.682 +02:00 [INF] {"SubjectId":"598738a9-a451-4183-a345-2bcf44f4ae50","DisplayName":"Mohamed Abdelrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"80000056-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-17T01:19:31.0000000Z","ProcessId":11168,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-17 03:19:31.953 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 03:19:31.960 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:19:31.961 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:19:31.962 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:19:31.962 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:19:31.963 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:19:31.963 +02:00 [DBG] Start discovery request
2020-08-17 03:19:31.968 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:19:32.121 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 03:19:32.125 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:19:32.125 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:19:32.126 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:19:32.127 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:19:32.127 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:19:32.127 +02:00 [DBG] Start key discovery request
2020-08-17 03:19:32.598 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-17 03:19:32.602 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-17 03:19:32.602 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-17 03:19:32.604 +02:00 [DBG] Start authorize request
2020-08-17 03:19:32.610 +02:00 [DBG] No user present in authorize request
2020-08-17 03:19:32.615 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 03:19:32.636 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:19:32.636 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:19:32.664 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:19:32.714 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:19:32.723 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:19:32.726 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:19:32.731 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 03:19:32.736 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"N1I3ajRDflN2TFdVTkx5emZVNDU4dU5QcEFkaUdPNTN2bzhYN3B2WC1HcFVD","UiLocales":null,"Nonce":"N1I3ajRDflN2TFdVTkx5emZVNDU4dU5QcEFkaUdPNTN2bzhYN3B2WC1HcFVD","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"N1I3ajRDflN2TFdVTkx5emZVNDU4dU5QcEFkaUdPNTN2bzhYN3B2WC1HcFVD","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"N1I3ajRDflN2TFdVTkx5emZVNDU4dU5QcEFkaUdPNTN2bzhYN3B2WC1HcFVD"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 03:19:32.738 +02:00 [INF] Showing login: User is not authenticated
2020-08-17 03:19:32.787 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 03:19:32.800 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:19:32.800 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:19:32.802 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:19:32.805 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:19:32.808 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:19:32.811 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:19:32.811 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 03:19:32.826 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:19:32.826 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:19:34.036 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-17 03:19:35.756 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-17 03:19:35.840 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"8000005c-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-17T01:19:35.0000000Z","ProcessId":11168,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-17 03:19:35.846 +02:00 [DBG] Augmenting SignInContext
2020-08-17 03:19:35.846 +02:00 [DBG] Adding amr claim with value: external
2020-08-17 03:19:35.848 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-17 03:19:35.848 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-17 03:19:35.855 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-17 03:19:35.856 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-17 03:19:35.856 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-17 03:19:35.858 +02:00 [DBG] Start authorize callback request
2020-08-17 03:19:35.860 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 03:19:35.861 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 03:19:35.871 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:19:35.872 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:19:35.874 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:19:35.876 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:19:35.878 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:19:35.880 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:19:35.881 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 03:19:35.881 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"N1I3ajRDflN2TFdVTkx5emZVNDU4dU5QcEFkaUdPNTN2bzhYN3B2WC1HcFVD","UiLocales":null,"Nonce":"N1I3ajRDflN2TFdVTkx5emZVNDU4dU5QcEFkaUdPNTN2bzhYN3B2WC1HcFVD","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"v4hFEb3djbe9aek_lNB6kg","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"N1I3ajRDflN2TFdVTkx5emZVNDU4dU5QcEFkaUdPNTN2bzhYN3B2WC1HcFVD","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"N1I3ajRDflN2TFdVTkx5emZVNDU4dU5QcEFkaUdPNTN2bzhYN3B2WC1HcFVD"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 03:19:35.889 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-17 03:19:35.892 +02:00 [DBG] Creating Implicit Flow response.
2020-08-17 03:19:35.900 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-17 03:19:35.901 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 03:19:35.931 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-17 03:19:35.931 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-17 03:19:35.938 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****bYoA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****7AEg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000005d-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-17T01:19:35.0000000Z","ProcessId":11168,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-17 03:19:35.940 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"N1I3ajRDflN2TFdVTkx5emZVNDU4dU5QcEFkaUdPNTN2bzhYN3B2WC1HcFVD","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-17 03:19:35.946 +02:00 [DBG] Augmenting SignInContext
2020-08-17 03:19:35.947 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-17 03:19:36.389 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 03:19:36.395 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:19:36.395 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:19:36.397 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:19:36.399 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:19:36.399 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:19:36.400 +02:00 [DBG] Start discovery request
2020-08-17 03:19:36.414 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:19:36.692 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 03:19:36.698 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:19:36.699 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:19:36.700 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:19:36.706 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:19:36.706 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:19:36.707 +02:00 [DBG] Start key discovery request
2020-08-17 03:19:37.018 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:19:37.023 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:19:37.023 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:19:37.027 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:19:37.030 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:19:37.030 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:19:37.032 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 03:19:37.036 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 03:19:37.036 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 03:19:37.036 +02:00 [DBG] Start userinfo request
2020-08-17 03:19:37.036 +02:00 [DBG] Bearer token found in header
2020-08-17 03:19:37.055 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:19:37.055 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:19:37.070 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:19:37.070 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:19:37.072 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:19:37.073 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597627175,"exp":1597630775,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597627175,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 03:19:37.073 +02:00 [DBG] Creating userinfo response
2020-08-17 03:19:37.073 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:19:37.073 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:19:37.077 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:19:37.077 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 03:19:37.077 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:19:37.082 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:19:37.087 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 03:19:37.087 +02:00 [DBG] End userinfo request
2020-08-17 03:19:37.370 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:19:37.371 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:19:37.371 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:19:37.371 +02:00 [DBG] Start discovery request
2020-08-17 03:19:37.380 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:19:37.387 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:19:37.388 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:19:37.388 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:19:37.388 +02:00 [DBG] Start key discovery request
2020-08-17 03:19:37.391 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 03:19:37.391 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 03:19:37.391 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 03:19:37.391 +02:00 [DBG] Start userinfo request
2020-08-17 03:19:37.391 +02:00 [DBG] Bearer token found in header
2020-08-17 03:19:37.420 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:19:37.420 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:19:37.445 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:19:37.446 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:19:37.449 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:19:37.450 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597627175,"exp":1597630775,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597627175,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 03:19:37.450 +02:00 [DBG] Creating userinfo response
2020-08-17 03:19:37.450 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:19:37.450 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:19:37.453 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:19:37.453 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 03:19:37.453 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:19:37.455 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:19:37.458 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 03:19:37.458 +02:00 [DBG] End userinfo request
2020-08-17 03:20:09.956 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:20:09.988 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:20:09.988 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:20:09.995 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:20:09.997 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:20:09.998 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:20:10.006 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 03:20:10.006 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 03:20:10.006 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 03:20:10.006 +02:00 [DBG] Start userinfo request
2020-08-17 03:20:10.007 +02:00 [DBG] Bearer token found in header
2020-08-17 03:20:10.010 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:20:10.010 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:20:10.010 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:20:10.010 +02:00 [DBG] Start discovery request
2020-08-17 03:20:10.056 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:20:10.056 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:20:10.060 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:20:10.064 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:20:10.065 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:20:10.065 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:20:10.065 +02:00 [DBG] Start key discovery request
2020-08-17 03:20:10.067 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:20:10.067 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 03:20:10.067 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:20:10.067 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 03:20:10.067 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 03:20:10.067 +02:00 [DBG] Start userinfo request
2020-08-17 03:20:10.067 +02:00 [DBG] Bearer token found in header
2020-08-17 03:20:10.071 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:20:10.071 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597627175,"exp":1597630775,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597627175,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 03:20:10.072 +02:00 [DBG] Creating userinfo response
2020-08-17 03:20:10.072 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:20:10.072 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:20:10.075 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:20:10.075 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 03:20:10.075 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:20:10.078 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:20:10.083 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:20:10.083 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:20:10.084 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 03:20:10.084 +02:00 [DBG] End userinfo request
2020-08-17 03:20:10.092 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:20:10.092 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:20:10.093 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:20:10.093 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597627175,"exp":1597630775,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597627175,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 03:20:10.093 +02:00 [DBG] Creating userinfo response
2020-08-17 03:20:10.093 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:20:10.093 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:20:10.095 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:20:10.095 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 03:20:10.095 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:20:10.097 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:20:10.099 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 03:20:10.099 +02:00 [DBG] End userinfo request
2020-08-17 03:20:10.750 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-08-17 03:20:10.751 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-08-17 03:20:10.751 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-08-17 03:20:10.752 +02:00 [DBG] Processing signout request for 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 03:20:10.752 +02:00 [DBG] Start end session request validation
2020-08-17 03:20:10.752 +02:00 [DBG] Start identity token validation
2020-08-17 03:20:10.763 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:20:10.764 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:20:10.764 +02:00 [DBG] Client found: listify.webapp / The Listify WebApplication
2020-08-17 03:20:10.770 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:20:10.770 +02:00 [DBG] Token validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597627175,"exp":1597627475,"iss":"http://localhost:5000","aud":"listify.webapp","nonce":"N1I3ajRDflN2TFdVTkx5emZVNDU4dU5QcEFkaUdPNTN2bzhYN3B2WC1HcFVD","iat":1597627175,"at_hash":"x_4Y3kSa5oY3AQbsEaIHmw","s_hash":"Tp01JKBNhQZIywjoEC2cyQ","sid":"v4hFEb3djbe9aek_lNB6kg","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597627175,"idp":"Facebook","amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 03:20:10.771 +02:00 [INF] End session request validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","PostLogOutUri":"http://localhost:4200","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200"},"$type":"EndSessionRequestValidationLog"}
2020-08-17 03:20:10.771 +02:00 [DBG] Success validating end session request from listify.webapp
2020-08-17 03:20:10.811 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-17 03:20:10.811 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-17 03:20:10.812 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-17 03:20:10.812 +02:00 [INF] {"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"8000005f-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-17T01:20:10.0000000Z","ProcessId":11168,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-17 03:20:11.150 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 03:20:11.152 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:20:11.152 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:20:11.153 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:20:11.153 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:20:11.153 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:20:11.153 +02:00 [DBG] Start discovery request
2020-08-17 03:20:11.157 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:20:11.426 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 03:20:11.429 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:20:11.429 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:20:11.429 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:20:11.430 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:20:11.430 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:20:11.430 +02:00 [DBG] Start key discovery request
2020-08-17 03:20:13.218 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 03:20:13.221 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:20:13.221 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:20:13.222 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:20:13.222 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:20:13.222 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:20:13.222 +02:00 [DBG] Start discovery request
2020-08-17 03:20:13.227 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:20:14.499 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 03:20:14.504 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:20:14.504 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:20:14.504 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:20:14.504 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:20:14.505 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:20:14.505 +02:00 [DBG] Start key discovery request
2020-08-17 03:20:15.824 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-17 03:20:15.825 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-17 03:20:15.825 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-17 03:20:15.825 +02:00 [DBG] Start authorize request
2020-08-17 03:20:15.825 +02:00 [DBG] No user present in authorize request
2020-08-17 03:20:15.825 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 03:20:15.856 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:20:15.856 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:20:15.862 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:20:15.876 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:20:15.879 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:20:15.880 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:20:15.881 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 03:20:15.881 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"d1pnOFVxU3ZxT3VHbkFZOHJEOGItd0lXSHdvcjR3V1BVSkt0Um1-dW5TbDRx","UiLocales":null,"Nonce":"d1pnOFVxU3ZxT3VHbkFZOHJEOGItd0lXSHdvcjR3V1BVSkt0Um1-dW5TbDRx","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"d1pnOFVxU3ZxT3VHbkFZOHJEOGItd0lXSHdvcjR3V1BVSkt0Um1-dW5TbDRx","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"d1pnOFVxU3ZxT3VHbkFZOHJEOGItd0lXSHdvcjR3V1BVSkt0Um1-dW5TbDRx"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 03:20:15.881 +02:00 [INF] Showing login: User is not authenticated
2020-08-17 03:20:15.915 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 03:20:15.927 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:20:15.927 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:20:15.929 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:20:15.930 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:20:15.931 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:20:15.933 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:20:15.933 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 03:20:15.942 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:20:15.942 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:20:19.419 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-17 03:20:20.712 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-17 03:20:20.753 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000066-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-17T01:20:20.0000000Z","ProcessId":11168,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-17 03:20:20.753 +02:00 [DBG] Augmenting SignInContext
2020-08-17 03:20:20.753 +02:00 [DBG] Adding amr claim with value: external
2020-08-17 03:20:20.754 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-17 03:20:20.754 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-17 03:20:20.764 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-17 03:20:20.764 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-17 03:20:20.764 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-17 03:20:20.764 +02:00 [DBG] Start authorize callback request
2020-08-17 03:20:20.765 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 03:20:20.765 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 03:20:20.794 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:20:20.794 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:20:20.799 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:20:20.813 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:20:20.815 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:20:20.817 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:20:20.817 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 03:20:20.817 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"d1pnOFVxU3ZxT3VHbkFZOHJEOGItd0lXSHdvcjR3V1BVSkt0Um1-dW5TbDRx","UiLocales":null,"Nonce":"d1pnOFVxU3ZxT3VHbkFZOHJEOGItd0lXSHdvcjR3V1BVSkt0Um1-dW5TbDRx","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"otuT52ZU0SBQOFvuXCFxMQ","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"d1pnOFVxU3ZxT3VHbkFZOHJEOGItd0lXSHdvcjR3V1BVSkt0Um1-dW5TbDRx","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"d1pnOFVxU3ZxT3VHbkFZOHJEOGItd0lXSHdvcjR3V1BVSkt0Um1-dW5TbDRx"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 03:20:20.820 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-17 03:20:20.820 +02:00 [DBG] Creating Implicit Flow response.
2020-08-17 03:20:20.820 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-17 03:20:20.820 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 03:20:20.825 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-17 03:20:20.825 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-17 03:20:20.827 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****zWdQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****z-lg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000067-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-17T01:20:20.0000000Z","ProcessId":11168,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-17 03:20:20.827 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"d1pnOFVxU3ZxT3VHbkFZOHJEOGItd0lXSHdvcjR3V1BVSkt0Um1-dW5TbDRx","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-17 03:20:20.827 +02:00 [DBG] Augmenting SignInContext
2020-08-17 03:20:20.828 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-17 03:20:21.216 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 03:20:21.219 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:20:21.219 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:20:21.219 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:20:21.220 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:20:21.220 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:20:21.220 +02:00 [DBG] Start discovery request
2020-08-17 03:20:21.230 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:20:21.457 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 03:20:21.461 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:20:21.461 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:20:21.462 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:20:21.462 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:20:21.462 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:20:21.463 +02:00 [DBG] Start key discovery request
2020-08-17 03:20:21.715 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:20:21.719 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:20:21.719 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:20:21.750 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:20:21.752 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:20:21.753 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:20:21.753 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 03:20:21.754 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 03:20:21.754 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 03:20:21.754 +02:00 [DBG] Start userinfo request
2020-08-17 03:20:21.754 +02:00 [DBG] Bearer token found in header
2020-08-17 03:20:21.787 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:20:21.787 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:20:21.807 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:20:21.808 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:20:21.815 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:20:21.816 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597627220,"exp":1597630820,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597627220,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 03:20:21.816 +02:00 [DBG] Creating userinfo response
2020-08-17 03:20:21.817 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:20:21.817 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:20:21.820 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:20:21.820 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 03:20:21.820 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:20:21.823 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:20:21.834 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 03:20:21.834 +02:00 [DBG] End userinfo request
2020-08-17 03:20:21.892 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:20:21.893 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:20:21.893 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:20:21.893 +02:00 [DBG] Start discovery request
2020-08-17 03:20:21.897 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:20:21.900 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:20:21.900 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:20:21.901 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:20:21.901 +02:00 [DBG] Start key discovery request
2020-08-17 03:20:21.912 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 03:20:21.912 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 03:20:21.913 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 03:20:21.913 +02:00 [DBG] Start userinfo request
2020-08-17 03:20:21.913 +02:00 [DBG] Bearer token found in header
2020-08-17 03:20:21.927 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:20:21.927 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:20:21.936 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:20:21.937 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:20:21.939 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:20:21.939 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597627220,"exp":1597630820,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597627220,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 03:20:21.940 +02:00 [DBG] Creating userinfo response
2020-08-17 03:20:21.940 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:20:21.940 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:20:21.943 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:20:21.943 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 03:20:21.943 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:20:21.945 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:20:21.949 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 03:20:21.949 +02:00 [DBG] End userinfo request
2020-08-17 03:23:51.012 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-17 03:23:51.072 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-17 03:23:51.072 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-17 03:23:51.072 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-17 03:23:51.072 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-17 03:23:51.072 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-17 03:23:51.073 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-17 03:23:51.259 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:23:51.295 +02:00 [DBG] Login Url: /Account/Login
2020-08-17 03:23:51.295 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-17 03:23:51.295 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-17 03:23:51.295 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-17 03:23:51.295 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-17 03:23:51.295 +02:00 [DBG] Error Url: /home/error
2020-08-17 03:23:51.295 +02:00 [DBG] Error Id Parameter: errorId
2020-08-17 03:23:51.320 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:23:51.322 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-08-17 03:23:51.322 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:23:51.326 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-08-17 03:23:51.326 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-08-17 03:23:51.337 +02:00 [DBG] Processing signout request for 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 03:23:51.339 +02:00 [DBG] Start end session request validation
2020-08-17 03:23:51.341 +02:00 [DBG] Start identity token validation
2020-08-17 03:23:51.860 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:23:51.866 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:23:51.868 +02:00 [DBG] Client found: listify.webapp / The Listify WebApplication
2020-08-17 03:23:51.941 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:23:51.948 +02:00 [DBG] Token validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597627220,"exp":1597627520,"iss":"http://localhost:5000","aud":"listify.webapp","nonce":"d1pnOFVxU3ZxT3VHbkFZOHJEOGItd0lXSHdvcjR3V1BVSkt0Um1-dW5TbDRx","iat":1597627220,"at_hash":"_qhtnLozSaLIDyAcXHUEGw","s_hash":"2A52GzDst1XF3wQx0UELLA","sid":"otuT52ZU0SBQOFvuXCFxMQ","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597627220,"idp":"Facebook","amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 03:23:51.973 +02:00 [INF] End session request validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","PostLogOutUri":"http://localhost:4200","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200"},"$type":"EndSessionRequestValidationLog"}
2020-08-17 03:23:51.975 +02:00 [DBG] Success validating end session request from listify.webapp
2020-08-17 03:23:52.213 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-17 03:23:52.215 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-17 03:23:52.215 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-17 03:23:52.221 +02:00 [INF] {"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"8000004d-0006-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-17T01:23:52.0000000Z","ProcessId":4404,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-17 03:23:52.588 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 03:23:52.596 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:23:52.597 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:23:52.600 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:23:52.603 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:23:52.603 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:23:52.604 +02:00 [DBG] Start discovery request
2020-08-17 03:23:52.962 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:23:53.061 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 03:23:53.071 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:23:53.072 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:23:53.074 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:23:53.075 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:23:53.075 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:23:53.077 +02:00 [DBG] Start key discovery request
2020-08-17 03:23:54.958 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 03:23:54.967 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:23:54.967 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:23:54.969 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:23:54.969 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:23:54.970 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:23:54.970 +02:00 [DBG] Start discovery request
2020-08-17 03:23:54.987 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:23:55.214 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 03:23:55.224 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:23:55.226 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:23:55.227 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:23:55.228 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:23:55.228 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:23:55.228 +02:00 [DBG] Start key discovery request
2020-08-17 03:23:59.403 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-17 03:23:59.406 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-17 03:23:59.407 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-17 03:23:59.408 +02:00 [DBG] Start authorize request
2020-08-17 03:23:59.412 +02:00 [DBG] No user present in authorize request
2020-08-17 03:23:59.414 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 03:23:59.452 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:23:59.453 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:23:59.524 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:23:59.567 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:23:59.576 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:23:59.579 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:23:59.583 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 03:23:59.587 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"MGhtM3BuY240NnJyR01DNzFxYnBLZDAzaTJCbkwzfkNOcGNHflV4VEJMejRU","UiLocales":null,"Nonce":"MGhtM3BuY240NnJyR01DNzFxYnBLZDAzaTJCbkwzfkNOcGNHflV4VEJMejRU","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"MGhtM3BuY240NnJyR01DNzFxYnBLZDAzaTJCbkwzfkNOcGNHflV4VEJMejRU","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"MGhtM3BuY240NnJyR01DNzFxYnBLZDAzaTJCbkwzfkNOcGNHflV4VEJMejRU"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 03:23:59.591 +02:00 [INF] Showing login: User is not authenticated
2020-08-17 03:23:59.650 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 03:23:59.700 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:23:59.700 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:23:59.707 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:23:59.720 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:23:59.724 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:23:59.736 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:23:59.736 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 03:23:59.766 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:23:59.766 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:24:00.852 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-17 03:24:02.684 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-17 03:24:02.798 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"8000005a-0006-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-17T01:24:02.0000000Z","ProcessId":4404,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-17 03:24:02.803 +02:00 [DBG] Augmenting SignInContext
2020-08-17 03:24:02.803 +02:00 [DBG] Adding amr claim with value: external
2020-08-17 03:24:02.805 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-17 03:24:02.805 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-17 03:24:02.818 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-17 03:24:02.820 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-17 03:24:02.820 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-17 03:24:02.822 +02:00 [DBG] Start authorize callback request
2020-08-17 03:24:02.825 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 03:24:02.825 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 03:24:02.852 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:24:02.852 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:24:02.858 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:24:02.873 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:24:02.877 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:24:02.889 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:24:02.890 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 03:24:02.890 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"MGhtM3BuY240NnJyR01DNzFxYnBLZDAzaTJCbkwzfkNOcGNHflV4VEJMejRU","UiLocales":null,"Nonce":"MGhtM3BuY240NnJyR01DNzFxYnBLZDAzaTJCbkwzfkNOcGNHflV4VEJMejRU","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"SgEoOi5URId6vwDK64ep9g","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"MGhtM3BuY240NnJyR01DNzFxYnBLZDAzaTJCbkwzfkNOcGNHflV4VEJMejRU","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"MGhtM3BuY240NnJyR01DNzFxYnBLZDAzaTJCbkwzfkNOcGNHflV4VEJMejRU"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 03:24:02.898 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-17 03:24:02.901 +02:00 [DBG] Creating Implicit Flow response.
2020-08-17 03:24:02.909 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-17 03:24:02.910 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 03:24:02.951 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-17 03:24:02.951 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-17 03:24:02.957 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****9JFA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****RRfQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000005b-0006-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-17T01:24:02.0000000Z","ProcessId":4404,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-17 03:24:02.958 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"MGhtM3BuY240NnJyR01DNzFxYnBLZDAzaTJCbkwzfkNOcGNHflV4VEJMejRU","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-17 03:24:02.963 +02:00 [DBG] Augmenting SignInContext
2020-08-17 03:24:02.963 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-17 03:24:03.366 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 03:24:03.372 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:24:03.372 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:24:03.373 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:24:03.375 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:24:03.375 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:24:03.375 +02:00 [DBG] Start discovery request
2020-08-17 03:24:03.388 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:24:03.624 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 03:24:03.629 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:24:03.630 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:24:03.632 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:24:03.635 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:24:03.635 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:24:03.635 +02:00 [DBG] Start key discovery request
2020-08-17 03:24:03.841 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:24:03.851 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:24:03.852 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:24:03.857 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:24:03.866 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:24:03.866 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:24:03.871 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 03:24:03.874 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 03:24:03.874 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 03:24:03.880 +02:00 [DBG] Start userinfo request
2020-08-17 03:24:03.890 +02:00 [DBG] Bearer token found in header
2020-08-17 03:24:03.961 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:24:03.961 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:24:04.028 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:24:04.028 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:24:04.038 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:24:04.039 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597627442,"exp":1597631042,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597627442,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 03:24:04.045 +02:00 [DBG] Creating userinfo response
2020-08-17 03:24:04.054 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:24:04.056 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:24:04.068 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:24:04.072 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 03:24:04.073 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:24:04.075 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:24:04.089 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 03:24:04.089 +02:00 [DBG] End userinfo request
2020-08-17 03:24:04.488 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:24:04.489 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:24:04.490 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:24:04.490 +02:00 [DBG] Start discovery request
2020-08-17 03:24:04.507 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:24:04.565 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:24:04.566 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:24:04.566 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:24:04.566 +02:00 [DBG] Start key discovery request
2020-08-17 03:24:04.720 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 03:24:04.721 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 03:24:04.721 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 03:24:04.721 +02:00 [DBG] Start userinfo request
2020-08-17 03:24:04.722 +02:00 [DBG] Bearer token found in header
2020-08-17 03:24:04.767 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:24:04.767 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:24:04.802 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:24:04.802 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:24:04.806 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:24:04.807 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597627442,"exp":1597631042,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597627442,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 03:24:04.807 +02:00 [DBG] Creating userinfo response
2020-08-17 03:24:04.807 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:24:04.807 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:24:04.812 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:24:04.812 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 03:24:04.812 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:24:04.816 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:24:04.821 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 03:24:04.821 +02:00 [DBG] End userinfo request
2020-08-17 03:26:28.035 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-17 03:26:28.060 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-17 03:26:28.060 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-17 03:26:28.060 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-17 03:26:28.060 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-17 03:26:28.060 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-17 03:26:28.060 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-17 03:26:28.243 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 03:26:28.273 +02:00 [DBG] Login Url: /Account/Login
2020-08-17 03:26:28.273 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-17 03:26:28.273 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-17 03:26:28.273 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-17 03:26:28.273 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-17 03:26:28.273 +02:00 [DBG] Error Url: /home/error
2020-08-17 03:26:28.273 +02:00 [DBG] Error Id Parameter: errorId
2020-08-17 03:26:28.286 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:26:28.290 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:26:28.290 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:26:28.291 +02:00 [DBG] Start discovery request
2020-08-17 03:26:28.321 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:26:28.323 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:26:28.333 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:26:28.342 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:26:28.342 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:26:28.342 +02:00 [DBG] Start discovery request
2020-08-17 03:26:28.904 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:26:28.904 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:26:29.011 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 03:26:29.017 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:26:29.017 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:26:29.022 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:26:29.022 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:26:29.022 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:26:29.024 +02:00 [DBG] Start key discovery request
2020-08-17 03:26:29.065 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:26:29.065 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:26:29.066 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:26:29.066 +02:00 [DBG] Start key discovery request
2020-08-17 03:26:29.184 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 03:26:29.188 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 03:26:29.188 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 03:26:29.191 +02:00 [DBG] Start userinfo request
2020-08-17 03:26:29.193 +02:00 [DBG] Bearer token found in header
2020-08-17 03:26:29.583 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:26:29.589 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:26:29.708 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:26:29.708 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:26:29.745 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:26:29.752 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597627442,"exp":1597631042,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597627442,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 03:26:29.759 +02:00 [DBG] Creating userinfo response
2020-08-17 03:26:29.763 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:26:29.764 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:26:29.810 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:26:29.814 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 03:26:29.815 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:26:29.895 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:26:30.079 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 03:26:30.079 +02:00 [DBG] End userinfo request
2020-08-17 03:26:34.816 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 03:26:34.827 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:26:34.828 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:26:34.830 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:26:34.841 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:26:34.841 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:26:34.841 +02:00 [DBG] Start discovery request
2020-08-17 03:26:34.853 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:26:35.022 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 03:26:35.026 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:26:35.027 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:26:35.027 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:26:35.030 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:26:35.030 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:26:35.030 +02:00 [DBG] Start key discovery request
2020-08-17 03:26:36.901 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-17 03:26:36.909 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-17 03:26:36.909 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-17 03:26:36.910 +02:00 [DBG] Start authorize request
2020-08-17 03:26:36.916 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 03:26:36.918 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 03:26:36.963 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:26:36.963 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:26:36.992 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:26:37.039 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:26:37.052 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:26:37.063 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:26:37.068 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 03:26:37.073 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"SUp0WHNlc2dDeTlWeFFPZVVyLWZxLnJSTTZWYWpJb29HZjFyU1VYcS1keTBn","UiLocales":null,"Nonce":"SUp0WHNlc2dDeTlWeFFPZVVyLWZxLnJSTTZWYWpJb29HZjFyU1VYcS1keTBn","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"SgEoOi5URId6vwDK64ep9g","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"SUp0WHNlc2dDeTlWeFFPZVVyLWZxLnJSTTZWYWpJb29HZjFyU1VYcS1keTBn","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"SUp0WHNlc2dDeTlWeFFPZVVyLWZxLnJSTTZWYWpJb29HZjFyU1VYcS1keTBn"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 03:26:37.094 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-17 03:26:37.096 +02:00 [DBG] Creating Implicit Flow response.
2020-08-17 03:26:37.104 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-17 03:26:37.105 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 03:26:37.239 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-17 03:26:37.240 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-17 03:26:37.254 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****DEEw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****rI4w","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000069-0002-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-17T01:26:37.0000000Z","ProcessId":2352,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-17 03:26:37.256 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"SUp0WHNlc2dDeTlWeFFPZVVyLWZxLnJSTTZWYWpJb29HZjFyU1VYcS1keTBn","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-17 03:26:37.610 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 03:26:37.618 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:26:37.618 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:26:37.619 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:26:37.620 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:26:37.620 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:26:37.620 +02:00 [DBG] Start discovery request
2020-08-17 03:26:37.635 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:26:37.865 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 03:26:37.882 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:26:37.882 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:26:37.888 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:26:37.889 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:26:37.889 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:26:37.890 +02:00 [DBG] Start key discovery request
2020-08-17 03:26:38.221 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:26:38.226 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:26:38.226 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:26:38.231 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:26:38.233 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:26:38.233 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:26:38.235 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 03:26:38.236 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 03:26:38.236 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 03:26:38.236 +02:00 [DBG] Start userinfo request
2020-08-17 03:26:38.236 +02:00 [DBG] Bearer token found in header
2020-08-17 03:26:38.295 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:26:38.295 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:26:38.325 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:26:38.327 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:26:38.327 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:26:38.328 +02:00 [DBG] Start discovery request
2020-08-17 03:26:38.353 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:26:38.363 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:26:38.364 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:26:38.364 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:26:38.364 +02:00 [DBG] Start key discovery request
2020-08-17 03:26:38.366 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:26:38.366 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:26:38.368 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 03:26:38.371 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:26:38.372 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597627597,"exp":1597631197,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597627442,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 03:26:38.372 +02:00 [DBG] Creating userinfo response
2020-08-17 03:26:38.372 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:26:38.372 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:26:38.375 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 03:26:38.376 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 03:26:38.376 +02:00 [DBG] Start userinfo request
2020-08-17 03:26:38.376 +02:00 [DBG] Bearer token found in header
2020-08-17 03:26:38.379 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:26:38.379 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 03:26:38.379 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:26:38.382 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:26:38.392 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 03:26:38.392 +02:00 [DBG] End userinfo request
2020-08-17 03:26:38.420 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:26:38.420 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:26:38.453 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:26:38.454 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:26:38.458 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:26:38.458 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597627597,"exp":1597631197,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597627442,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 03:26:38.459 +02:00 [DBG] Creating userinfo response
2020-08-17 03:26:38.459 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:26:38.459 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:26:38.465 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:26:38.465 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 03:26:38.465 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:26:38.468 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:26:38.479 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 03:26:38.479 +02:00 [DBG] End userinfo request
2020-08-17 03:29:03.453 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-17 03:29:03.482 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-17 03:29:03.483 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-17 03:29:03.483 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-17 03:29:03.483 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-17 03:29:03.483 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-17 03:29:03.483 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-17 03:29:03.667 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:29:03.698 +02:00 [DBG] Login Url: /Account/Login
2020-08-17 03:29:03.698 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-17 03:29:03.698 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-17 03:29:03.698 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-17 03:29:03.698 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-17 03:29:03.698 +02:00 [DBG] Error Url: /home/error
2020-08-17 03:29:03.698 +02:00 [DBG] Error Id Parameter: errorId
2020-08-17 03:29:03.724 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-08-17 03:29:03.727 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:29:03.728 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-08-17 03:29:03.729 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-08-17 03:29:03.731 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:29:03.736 +02:00 [DBG] Processing signout request for 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 03:29:03.737 +02:00 [DBG] Start end session request validation
2020-08-17 03:29:03.742 +02:00 [DBG] Start identity token validation
2020-08-17 03:29:04.206 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:29:04.212 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:29:04.214 +02:00 [DBG] Client found: listify.webapp / The Listify WebApplication
2020-08-17 03:29:04.398 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:29:04.404 +02:00 [DBG] Token validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597627597,"exp":1597627897,"iss":"http://localhost:5000","aud":"listify.webapp","nonce":"SUp0WHNlc2dDeTlWeFFPZVVyLWZxLnJSTTZWYWpJb29HZjFyU1VYcS1keTBn","iat":1597627597,"at_hash":"933RXx7gaRIIXRGTHM1Sgw","s_hash":"aiMMDbHwn8nEv0n8rs5MAA","sid":"SgEoOi5URId6vwDK64ep9g","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597627442,"idp":"Facebook","amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 03:29:04.427 +02:00 [INF] End session request validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","PostLogOutUri":"http://localhost:4200","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200"},"$type":"EndSessionRequestValidationLog"}
2020-08-17 03:29:04.428 +02:00 [DBG] Success validating end session request from listify.webapp
2020-08-17 03:29:04.661 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-17 03:29:04.662 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-17 03:29:04.662 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-17 03:29:04.668 +02:00 [INF] {"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"80000018-0005-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-17T01:29:04.0000000Z","ProcessId":8844,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-17 03:29:05.007 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 03:29:05.017 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:29:05.018 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:29:05.021 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:29:05.023 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:29:05.023 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:29:05.024 +02:00 [DBG] Start discovery request
2020-08-17 03:29:05.429 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:29:05.491 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 03:29:05.496 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:29:05.496 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:29:05.497 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:29:05.501 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:29:05.501 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:29:05.504 +02:00 [DBG] Start key discovery request
2020-08-17 03:29:10.422 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 03:29:10.428 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:29:10.428 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:29:10.429 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:29:10.430 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:29:10.430 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:29:10.430 +02:00 [DBG] Start discovery request
2020-08-17 03:29:10.447 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:29:10.647 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 03:29:10.660 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:29:10.661 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:29:10.662 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:29:10.663 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:29:10.663 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:29:10.663 +02:00 [DBG] Start key discovery request
2020-08-17 03:29:11.866 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-17 03:29:11.871 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-17 03:29:11.871 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-17 03:29:11.874 +02:00 [DBG] Start authorize request
2020-08-17 03:29:11.877 +02:00 [DBG] No user present in authorize request
2020-08-17 03:29:11.879 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 03:29:11.930 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:29:11.930 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:29:12.010 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:29:12.049 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:29:12.062 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:29:12.064 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:29:12.068 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 03:29:12.072 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"M0ZuU2tHNlRPLUpCUy1ZX0FDcm5iclozMjdSWnRkQ3U3Nk1uU1lWZVlKcXpi","UiLocales":null,"Nonce":"M0ZuU2tHNlRPLUpCUy1ZX0FDcm5iclozMjdSWnRkQ3U3Nk1uU1lWZVlKcXpi","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"M0ZuU2tHNlRPLUpCUy1ZX0FDcm5iclozMjdSWnRkQ3U3Nk1uU1lWZVlKcXpi","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"M0ZuU2tHNlRPLUpCUy1ZX0FDcm5iclozMjdSWnRkQ3U3Nk1uU1lWZVlKcXpi"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 03:29:12.074 +02:00 [INF] Showing login: User is not authenticated
2020-08-17 03:29:12.196 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 03:29:12.237 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:29:12.237 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:29:12.243 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:29:12.256 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:29:12.260 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:29:12.273 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:29:12.273 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 03:29:12.302 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:29:12.302 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:29:13.666 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-17 03:29:15.277 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-17 03:29:15.407 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"8000005c-0006-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-17T01:29:15.0000000Z","ProcessId":8844,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-17 03:29:15.414 +02:00 [DBG] Augmenting SignInContext
2020-08-17 03:29:15.415 +02:00 [DBG] Adding amr claim with value: external
2020-08-17 03:29:15.417 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-17 03:29:15.417 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-17 03:29:15.426 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-17 03:29:15.427 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-17 03:29:15.427 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-17 03:29:15.429 +02:00 [DBG] Start authorize callback request
2020-08-17 03:29:15.431 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 03:29:15.431 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 03:29:15.458 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:29:15.458 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:29:15.463 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:29:15.477 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:29:15.479 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:29:15.482 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:29:15.482 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 03:29:15.482 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"M0ZuU2tHNlRPLUpCUy1ZX0FDcm5iclozMjdSWnRkQ3U3Nk1uU1lWZVlKcXpi","UiLocales":null,"Nonce":"M0ZuU2tHNlRPLUpCUy1ZX0FDcm5iclozMjdSWnRkQ3U3Nk1uU1lWZVlKcXpi","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"e4s7nbt3tCYnTbVMQ7vejQ","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"M0ZuU2tHNlRPLUpCUy1ZX0FDcm5iclozMjdSWnRkQ3U3Nk1uU1lWZVlKcXpi","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"M0ZuU2tHNlRPLUpCUy1ZX0FDcm5iclozMjdSWnRkQ3U3Nk1uU1lWZVlKcXpi"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 03:29:15.490 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-17 03:29:15.494 +02:00 [DBG] Creating Implicit Flow response.
2020-08-17 03:29:15.502 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-17 03:29:15.502 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 03:29:15.539 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-17 03:29:15.540 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-17 03:29:15.547 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****uu4g","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Csmw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000005d-0006-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-17T01:29:15.0000000Z","ProcessId":8844,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-17 03:29:15.548 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"M0ZuU2tHNlRPLUpCUy1ZX0FDcm5iclozMjdSWnRkQ3U3Nk1uU1lWZVlKcXpi","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-17 03:29:15.553 +02:00 [DBG] Augmenting SignInContext
2020-08-17 03:29:15.553 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-17 03:29:16.016 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 03:29:16.022 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:29:16.022 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:29:16.023 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:29:16.026 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:29:16.026 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:29:16.027 +02:00 [DBG] Start discovery request
2020-08-17 03:29:16.046 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:29:16.285 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 03:29:16.290 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:29:16.290 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:29:16.291 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:29:16.295 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:29:16.295 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:29:16.295 +02:00 [DBG] Start key discovery request
2020-08-17 03:29:16.463 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:29:16.467 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:29:16.467 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:29:16.470 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:29:16.473 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:29:16.474 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:29:16.474 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 03:29:16.480 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 03:29:16.480 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 03:29:16.483 +02:00 [DBG] Start userinfo request
2020-08-17 03:29:16.486 +02:00 [DBG] Bearer token found in header
2020-08-17 03:29:16.540 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:29:16.540 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:29:16.558 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:29:16.558 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:29:16.568 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:29:16.569 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597627755,"exp":1597631355,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597627755,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 03:29:16.579 +02:00 [DBG] Creating userinfo response
2020-08-17 03:29:16.586 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:29:16.682 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:29:16.690 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:29:16.698 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 03:29:16.699 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:29:16.705 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:29:16.719 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 03:29:16.719 +02:00 [DBG] End userinfo request
2020-08-17 03:29:17.176 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:29:17.176 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:29:17.177 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:29:17.177 +02:00 [DBG] Start discovery request
2020-08-17 03:29:17.189 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:29:17.261 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:29:17.262 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:29:17.262 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:29:17.262 +02:00 [DBG] Start key discovery request
2020-08-17 03:29:17.379 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 03:29:17.380 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 03:29:17.380 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 03:29:17.380 +02:00 [DBG] Start userinfo request
2020-08-17 03:29:17.380 +02:00 [DBG] Bearer token found in header
2020-08-17 03:29:17.409 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:29:17.410 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:29:17.440 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:29:17.441 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:29:17.444 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:29:17.444 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597627755,"exp":1597631355,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597627755,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 03:29:17.445 +02:00 [DBG] Creating userinfo response
2020-08-17 03:29:17.445 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:29:17.445 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:29:17.450 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:29:17.450 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 03:29:17.450 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:29:17.452 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:29:17.457 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 03:29:17.458 +02:00 [DBG] End userinfo request
2020-08-17 03:39:45.757 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-17 03:39:45.839 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-17 03:39:45.839 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-17 03:39:45.839 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-17 03:39:45.839 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-17 03:39:45.839 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-17 03:39:45.839 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-17 03:39:46.494 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:39:46.540 +02:00 [DBG] Login Url: /Account/Login
2020-08-17 03:39:46.540 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-17 03:39:46.540 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-17 03:39:46.540 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-17 03:39:46.540 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-17 03:39:46.541 +02:00 [DBG] Error Url: /home/error
2020-08-17 03:39:46.541 +02:00 [DBG] Error Id Parameter: errorId
2020-08-17 03:39:46.576 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-08-17 03:39:46.580 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-08-17 03:39:46.580 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-08-17 03:39:46.586 +02:00 [DBG] Processing signout request for 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 03:39:46.591 +02:00 [DBG] Start end session request validation
2020-08-17 03:39:46.595 +02:00 [DBG] Start identity token validation
2020-08-17 03:39:46.887 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:39:46.891 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:39:49.227 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 03:39:49.273 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:39:49.273 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:39:49.275 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:39:49.278 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:39:49.278 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:39:49.280 +02:00 [DBG] Start discovery request
2020-08-17 03:39:51.145 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:39:51.154 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:39:51.156 +02:00 [DBG] Client found: listify.webapp / The Listify WebApplication
2020-08-17 03:39:51.176 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:39:51.642 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:39:51.649 +02:00 [DBG] Token validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597627755,"exp":1597628055,"iss":"http://localhost:5000","aud":"listify.webapp","nonce":"M0ZuU2tHNlRPLUpCUy1ZX0FDcm5iclozMjdSWnRkQ3U3Nk1uU1lWZVlKcXpi","iat":1597627755,"at_hash":"PnhZoNNdrNi2oLBKoHDeqA","s_hash":"yR5mZAy0aoLcIsiLtDgvdQ","sid":"e4s7nbt3tCYnTbVMQ7vejQ","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597627755,"idp":"Facebook","amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 03:39:51.666 +02:00 [INF] End session request validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","PostLogOutUri":"http://localhost:4200","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200"},"$type":"EndSessionRequestValidationLog"}
2020-08-17 03:39:51.667 +02:00 [DBG] Success validating end session request from listify.webapp
2020-08-17 03:39:54.425 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 03:39:54.685 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:39:54.686 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:39:54.697 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:39:54.698 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:39:54.699 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:39:54.699 +02:00 [DBG] Start discovery request
2020-08-17 03:39:55.425 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:39:55.480 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 03:39:55.701 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:39:55.702 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:39:55.703 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:39:55.704 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:39:55.705 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:39:55.706 +02:00 [DBG] Start key discovery request
2020-08-17 03:39:56.361 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-17 03:39:56.381 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-17 03:39:56.381 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-17 03:39:56.384 +02:00 [DBG] Start authorize request
2020-08-17 03:39:56.389 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 03:39:56.449 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 03:39:56.655 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:39:56.656 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:39:57.065 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:39:57.458 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:39:57.855 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:39:58.168 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:39:58.173 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 03:39:58.178 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"eGsycnNpbHNEYVVLTjdGUHpweE9MT2VKLXpXYktXU3ZKMmdKdHNqNV92ak0z","UiLocales":null,"Nonce":"eGsycnNpbHNEYVVLTjdGUHpweE9MT2VKLXpXYktXU3ZKMmdKdHNqNV92ak0z","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"e4s7nbt3tCYnTbVMQ7vejQ","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"eGsycnNpbHNEYVVLTjdGUHpweE9MT2VKLXpXYktXU3ZKMmdKdHNqNV92ak0z","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"eGsycnNpbHNEYVVLTjdGUHpweE9MT2VKLXpXYktXU3ZKMmdKdHNqNV92ak0z"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 03:39:58.487 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-17 03:39:58.490 +02:00 [DBG] Creating Implicit Flow response.
2020-08-17 03:39:58.498 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-17 03:39:58.499 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 03:39:58.849 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-17 03:39:58.850 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-17 03:39:58.863 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****T8jw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****KVPQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000061-0006-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-17T01:39:58.0000000Z","ProcessId":11924,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-17 03:39:58.865 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"eGsycnNpbHNEYVVLTjdGUHpweE9MT2VKLXpXYktXU3ZKMmdKdHNqNV92ak0z","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-17 03:39:59.387 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 03:39:59.658 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:39:59.658 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:39:59.660 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:39:59.682 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:39:59.682 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:39:59.683 +02:00 [DBG] Start discovery request
2020-08-17 03:39:59.870 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:40:00.032 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 03:40:00.310 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:40:00.310 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:40:00.311 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:40:00.312 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:40:00.312 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:40:00.312 +02:00 [DBG] Start key discovery request
2020-08-17 03:40:00.466 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:40:00.796 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:40:00.796 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:40:00.800 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:40:00.805 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:40:00.806 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:40:00.807 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 03:40:00.809 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 03:40:00.809 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 03:40:00.812 +02:00 [DBG] Start userinfo request
2020-08-17 03:40:00.814 +02:00 [DBG] Bearer token found in header
2020-08-17 03:40:01.562 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:40:01.562 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:40:01.995 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:40:01.996 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:40:02.249 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:40:02.250 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597628398,"exp":1597631998,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597627755,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 03:40:02.507 +02:00 [DBG] Creating userinfo response
2020-08-17 03:40:02.511 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:40:02.512 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:40:02.821 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:40:02.824 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 03:40:02.824 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:40:02.826 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:40:02.892 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 03:40:02.892 +02:00 [DBG] End userinfo request
2020-08-17 03:40:08.948 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:40:08.948 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:40:08.948 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:40:08.949 +02:00 [DBG] Start discovery request
2020-08-17 03:40:09.019 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:40:09.223 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:40:09.226 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:40:09.226 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:40:09.226 +02:00 [DBG] Start key discovery request
2020-08-17 03:40:09.366 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 03:40:09.367 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 03:40:09.367 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 03:40:09.367 +02:00 [DBG] Start userinfo request
2020-08-17 03:40:09.367 +02:00 [DBG] Bearer token found in header
2020-08-17 03:40:09.534 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:40:09.535 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:40:09.681 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:40:09.681 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:40:09.718 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:40:09.718 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597628398,"exp":1597631998,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597627755,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 03:40:09.719 +02:00 [DBG] Creating userinfo response
2020-08-17 03:40:09.719 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:40:09.719 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:40:09.724 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:40:09.724 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 03:40:09.724 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:40:09.726 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:40:09.767 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 03:40:09.767 +02:00 [DBG] End userinfo request
2020-08-17 03:40:28.190 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:40:28.205 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:40:28.205 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:40:28.213 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:40:28.216 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:40:28.216 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:40:28.217 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 03:40:28.222 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 03:40:28.223 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 03:40:28.223 +02:00 [DBG] Start userinfo request
2020-08-17 03:40:28.223 +02:00 [DBG] Bearer token found in header
2020-08-17 03:40:28.245 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:40:28.246 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:40:28.246 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:40:28.246 +02:00 [DBG] Start discovery request
2020-08-17 03:40:28.260 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:40:28.265 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:40:28.265 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:40:28.265 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:40:28.265 +02:00 [DBG] Start key discovery request
2020-08-17 03:40:28.276 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 03:40:28.276 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 03:40:28.276 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 03:40:28.276 +02:00 [DBG] Start userinfo request
2020-08-17 03:40:28.276 +02:00 [DBG] Bearer token found in header
2020-08-17 03:40:28.304 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:40:28.304 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:40:28.312 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:40:28.313 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:40:28.318 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:40:28.319 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597628398,"exp":1597631998,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597627755,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 03:40:28.319 +02:00 [DBG] Creating userinfo response
2020-08-17 03:40:28.319 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:40:28.319 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:40:28.324 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:40:28.324 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 03:40:28.325 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:40:28.326 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:40:28.334 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 03:40:28.334 +02:00 [DBG] End userinfo request
2020-08-17 03:40:28.655 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:40:28.656 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:40:28.673 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:40:28.673 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:40:28.678 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:40:28.678 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597628398,"exp":1597631998,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597627755,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 03:40:28.679 +02:00 [DBG] Creating userinfo response
2020-08-17 03:40:28.679 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:40:28.679 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:40:28.686 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:40:28.687 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 03:40:28.687 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:40:28.689 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:40:28.693 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 03:40:28.693 +02:00 [DBG] End userinfo request
2020-08-17 03:40:28.992 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-08-17 03:40:28.993 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-08-17 03:40:28.993 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-08-17 03:40:28.993 +02:00 [DBG] Processing signout request for 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 03:40:28.993 +02:00 [DBG] Start end session request validation
2020-08-17 03:40:28.993 +02:00 [DBG] Start identity token validation
2020-08-17 03:40:29.028 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:40:29.028 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:40:29.028 +02:00 [DBG] Client found: listify.webapp / The Listify WebApplication
2020-08-17 03:40:29.035 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:40:29.036 +02:00 [DBG] Token validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597628398,"exp":1597628698,"iss":"http://localhost:5000","aud":"listify.webapp","nonce":"eGsycnNpbHNEYVVLTjdGUHpweE9MT2VKLXpXYktXU3ZKMmdKdHNqNV92ak0z","iat":1597628398,"at_hash":"Y9tmgUVvYYIZOaH_9DfbvA","s_hash":"C_g9-l10_rBgIGerEaPBvw","sid":"e4s7nbt3tCYnTbVMQ7vejQ","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597627755,"idp":"Facebook","amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 03:40:29.036 +02:00 [INF] End session request validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","PostLogOutUri":"http://localhost:4200","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200"},"$type":"EndSessionRequestValidationLog"}
2020-08-17 03:40:29.036 +02:00 [DBG] Success validating end session request from listify.webapp
2020-08-17 03:40:29.322 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-17 03:40:29.323 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-17 03:40:29.323 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-17 03:40:29.325 +02:00 [INF] {"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"80000063-0006-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-17T01:40:29.0000000Z","ProcessId":11924,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-17 03:40:29.716 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 03:40:29.720 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:40:29.720 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:40:29.720 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:40:29.721 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:40:29.721 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:40:29.721 +02:00 [DBG] Start discovery request
2020-08-17 03:40:29.733 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:40:30.293 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 03:40:30.297 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:40:30.298 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:40:30.299 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:40:30.300 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:40:30.300 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:40:30.300 +02:00 [DBG] Start key discovery request
2020-08-17 03:40:32.919 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 03:40:32.923 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:40:32.924 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:40:32.924 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:40:32.924 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:40:32.924 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:40:32.924 +02:00 [DBG] Start discovery request
2020-08-17 03:40:32.937 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:40:33.296 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 03:40:33.313 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:40:33.313 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:40:33.314 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:40:33.315 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:40:33.315 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:40:33.315 +02:00 [DBG] Start key discovery request
2020-08-17 03:40:34.729 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-17 03:40:34.731 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-17 03:40:34.731 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-17 03:40:34.731 +02:00 [DBG] Start authorize request
2020-08-17 03:40:34.732 +02:00 [DBG] No user present in authorize request
2020-08-17 03:40:34.732 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 03:40:34.783 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:40:34.783 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:40:34.793 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:40:34.816 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:40:34.824 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:40:34.842 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:40:34.842 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 03:40:34.843 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"RGR2ZmhvMVNMeTdNWXQ0R1RwLVF4NlFUY0xCbHB4Xy5kSm15cGE5cEptQzJ5","UiLocales":null,"Nonce":"RGR2ZmhvMVNMeTdNWXQ0R1RwLVF4NlFUY0xCbHB4Xy5kSm15cGE5cEptQzJ5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"RGR2ZmhvMVNMeTdNWXQ0R1RwLVF4NlFUY0xCbHB4Xy5kSm15cGE5cEptQzJ5","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"RGR2ZmhvMVNMeTdNWXQ0R1RwLVF4NlFUY0xCbHB4Xy5kSm15cGE5cEptQzJ5"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 03:40:34.843 +02:00 [INF] Showing login: User is not authenticated
2020-08-17 03:40:35.124 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 03:40:35.160 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:40:35.160 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:40:35.165 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:40:35.179 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:40:35.181 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:40:35.183 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:40:35.183 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 03:40:35.198 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:40:35.199 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:40:38.194 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-17 03:40:39.794 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-17 03:40:40.031 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"8000004d-0001-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-17T01:40:40.0000000Z","ProcessId":11924,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-17 03:40:40.035 +02:00 [DBG] Augmenting SignInContext
2020-08-17 03:40:40.036 +02:00 [DBG] Adding amr claim with value: external
2020-08-17 03:40:40.038 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-17 03:40:40.038 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-17 03:40:40.049 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-17 03:40:40.050 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-17 03:40:40.051 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-17 03:40:40.053 +02:00 [DBG] Start authorize callback request
2020-08-17 03:40:40.055 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 03:40:40.055 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 03:40:40.088 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:40:40.088 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:40:40.094 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:40:40.106 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:40:40.111 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:40:40.129 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 03:40:40.129 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 03:40:40.130 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"RGR2ZmhvMVNMeTdNWXQ0R1RwLVF4NlFUY0xCbHB4Xy5kSm15cGE5cEptQzJ5","UiLocales":null,"Nonce":"RGR2ZmhvMVNMeTdNWXQ0R1RwLVF4NlFUY0xCbHB4Xy5kSm15cGE5cEptQzJ5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"T7Nw3oObnhmyEOUeBFKcFg","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"RGR2ZmhvMVNMeTdNWXQ0R1RwLVF4NlFUY0xCbHB4Xy5kSm15cGE5cEptQzJ5","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"RGR2ZmhvMVNMeTdNWXQ0R1RwLVF4NlFUY0xCbHB4Xy5kSm15cGE5cEptQzJ5"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 03:40:40.133 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-17 03:40:40.133 +02:00 [DBG] Creating Implicit Flow response.
2020-08-17 03:40:40.133 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-17 03:40:40.133 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 03:40:40.141 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-17 03:40:40.142 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-17 03:40:40.144 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****J3LQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****lKuw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000004e-0001-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-17T01:40:40.0000000Z","ProcessId":11924,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-17 03:40:40.144 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"RGR2ZmhvMVNMeTdNWXQ0R1RwLVF4NlFUY0xCbHB4Xy5kSm15cGE5cEptQzJ5","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-17 03:40:40.148 +02:00 [DBG] Augmenting SignInContext
2020-08-17 03:40:40.148 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-17 03:40:40.576 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 03:40:40.580 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:40:40.580 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:40:40.581 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:40:40.581 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:40:40.581 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:40:40.581 +02:00 [DBG] Start discovery request
2020-08-17 03:40:40.594 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:40:40.878 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 03:40:40.883 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:40:40.883 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:40:40.916 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:40:40.917 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:40:40.917 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:40:40.917 +02:00 [DBG] Start key discovery request
2020-08-17 03:40:41.104 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:40:41.109 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:40:41.109 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:40:41.171 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:40:41.175 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:40:41.175 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:40:41.176 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 03:40:41.178 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 03:40:41.178 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 03:40:41.178 +02:00 [DBG] Start userinfo request
2020-08-17 03:40:41.179 +02:00 [DBG] Bearer token found in header
2020-08-17 03:40:41.243 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:40:41.243 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:40:41.277 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:40:41.280 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:40:41.285 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:40:41.286 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597628440,"exp":1597632040,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597628440,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 03:40:41.286 +02:00 [DBG] Creating userinfo response
2020-08-17 03:40:41.286 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:40:41.286 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:40:41.305 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:40:41.307 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 03:40:41.318 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:40:41.330 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:40:41.340 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 03:40:41.340 +02:00 [DBG] End userinfo request
2020-08-17 03:40:41.634 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:40:41.634 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:40:41.634 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:40:41.634 +02:00 [DBG] Start discovery request
2020-08-17 03:40:41.646 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:40:41.649 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:40:41.649 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:40:41.649 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:40:41.650 +02:00 [DBG] Start key discovery request
2020-08-17 03:40:41.660 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 03:40:41.661 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 03:40:41.661 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 03:40:41.661 +02:00 [DBG] Start userinfo request
2020-08-17 03:40:41.661 +02:00 [DBG] Bearer token found in header
2020-08-17 03:40:41.704 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:40:41.704 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:40:41.753 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:40:41.753 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:40:41.756 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:40:41.757 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597628440,"exp":1597632040,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597628440,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 03:40:41.757 +02:00 [DBG] Creating userinfo response
2020-08-17 03:40:41.757 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:40:41.757 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:40:41.763 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:40:41.763 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 03:40:41.763 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:40:41.765 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:40:41.778 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 03:40:41.779 +02:00 [DBG] End userinfo request
2020-08-17 03:40:52.291 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:40:52.295 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:40:52.295 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:40:52.298 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 03:40:52.304 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 03:40:52.304 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 03:40:52.304 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 03:40:52.305 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 03:40:52.305 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 03:40:52.305 +02:00 [DBG] Start userinfo request
2020-08-17 03:40:52.305 +02:00 [DBG] Bearer token found in header
2020-08-17 03:40:52.353 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:40:52.353 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:40:52.388 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:40:52.388 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:40:52.392 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:40:52.392 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597628440,"exp":1597632040,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597628440,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 03:40:52.393 +02:00 [DBG] Creating userinfo response
2020-08-17 03:40:52.393 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:40:52.393 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:40:52.397 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:40:52.397 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 03:40:52.397 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:40:52.399 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:40:52.408 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 03:40:52.408 +02:00 [DBG] End userinfo request
2020-08-17 03:40:52.413 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 03:40:52.413 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 03:40:52.413 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 03:40:52.413 +02:00 [DBG] Start discovery request
2020-08-17 03:40:52.425 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 03:40:52.427 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 03:40:52.427 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 03:40:52.427 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 03:40:52.427 +02:00 [DBG] Start key discovery request
2020-08-17 03:40:52.429 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 03:40:52.429 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 03:40:52.429 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 03:40:52.429 +02:00 [DBG] Start userinfo request
2020-08-17 03:40:52.429 +02:00 [DBG] Bearer token found in header
2020-08-17 03:40:52.456 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:40:52.456 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:40:52.464 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 03:40:52.464 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 03:40:52.467 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 03:40:52.467 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597628440,"exp":1597632040,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597628440,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 03:40:52.467 +02:00 [DBG] Creating userinfo response
2020-08-17 03:40:52.467 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:40:52.467 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:40:52.472 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:40:52.472 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 03:40:52.472 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 03:40:52.474 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 03:40:52.478 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 03:40:52.478 +02:00 [DBG] End userinfo request
2020-08-17 21:38:22.548 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-17 21:38:22.636 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-17 21:38:22.636 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-17 21:38:22.636 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-17 21:38:22.636 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-17 21:38:22.636 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-17 21:38:22.636 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-17 21:38:23.778 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 21:38:23.778 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 21:38:23.850 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 21:38:23.858 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 21:38:23.859 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 21:38:23.859 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 21:38:23.940 +02:00 [DBG] Login Url: /Account/Login
2020-08-17 21:38:23.940 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-17 21:38:23.940 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-17 21:38:23.940 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-17 21:38:23.940 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-17 21:38:23.940 +02:00 [DBG] Error Url: /home/error
2020-08-17 21:38:23.940 +02:00 [DBG] Error Id Parameter: errorId
2020-08-17 21:38:23.952 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 21:38:23.952 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 21:38:23.964 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 21:38:23.964 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 21:38:23.964 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 21:38:23.964 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 21:38:23.966 +02:00 [DBG] Start discovery request
2020-08-17 21:38:23.966 +02:00 [DBG] Start discovery request
2020-08-17 21:38:24.765 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 21:38:24.765 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 21:38:25.117 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 21:38:25.122 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 21:38:25.122 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 21:38:25.128 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 21:38:25.130 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 21:38:25.130 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 21:38:25.131 +02:00 [DBG] Start key discovery request
2020-08-17 21:38:48.293 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-17 21:38:48.304 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-17 21:38:48.304 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-17 21:38:48.306 +02:00 [DBG] Start authorize request
2020-08-17 21:38:48.313 +02:00 [DBG] No user present in authorize request
2020-08-17 21:38:48.411 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 21:38:48.808 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 21:38:48.816 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 21:38:48.909 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 21:38:48.970 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 21:38:48.983 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 21:38:48.996 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 21:38:49.001 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 21:38:49.013 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"VVN2dGdTVjVWTy1XWjVPVEpHWEpDbU1UZk1FTU5BY1ptZWlaOW9LRXNlclJ1","UiLocales":null,"Nonce":"VVN2dGdTVjVWTy1XWjVPVEpHWEpDbU1UZk1FTU5BY1ptZWlaOW9LRXNlclJ1","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"VVN2dGdTVjVWTy1XWjVPVEpHWEpDbU1UZk1FTU5BY1ptZWlaOW9LRXNlclJ1","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"VVN2dGdTVjVWTy1XWjVPVEpHWEpDbU1UZk1FTU5BY1ptZWlaOW9LRXNlclJ1"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 21:38:49.020 +02:00 [INF] Showing login: User is not authenticated
2020-08-17 21:38:49.184 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 21:38:49.220 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 21:38:49.220 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 21:38:49.225 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 21:38:49.240 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 21:38:49.245 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 21:38:49.258 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 21:38:49.258 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 21:38:49.289 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 21:38:49.289 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 21:38:52.706 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-17 21:38:54.508 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-17 21:38:54.715 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"8000005c-0002-fb00-b63f-84710c7967bb","TimeStamp":"2020-08-17T19:38:54.0000000Z","ProcessId":12088,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-17 21:38:54.721 +02:00 [DBG] Augmenting SignInContext
2020-08-17 21:38:54.722 +02:00 [DBG] Adding amr claim with value: external
2020-08-17 21:38:54.725 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-17 21:38:54.727 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-17 21:38:54.739 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-17 21:38:54.739 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-17 21:38:54.739 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-17 21:38:54.741 +02:00 [DBG] Start authorize callback request
2020-08-17 21:38:54.745 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 21:38:54.745 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 21:38:54.776 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 21:38:54.776 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 21:38:54.782 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 21:38:54.824 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 21:38:54.833 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 21:38:54.844 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 21:38:54.844 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 21:38:54.845 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"VVN2dGdTVjVWTy1XWjVPVEpHWEpDbU1UZk1FTU5BY1ptZWlaOW9LRXNlclJ1","UiLocales":null,"Nonce":"VVN2dGdTVjVWTy1XWjVPVEpHWEpDbU1UZk1FTU5BY1ptZWlaOW9LRXNlclJ1","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"lUCC1RprgNFkNjL5ED3uGA","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"VVN2dGdTVjVWTy1XWjVPVEpHWEpDbU1UZk1FTU5BY1ptZWlaOW9LRXNlclJ1","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"VVN2dGdTVjVWTy1XWjVPVEpHWEpDbU1UZk1FTU5BY1ptZWlaOW9LRXNlclJ1"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 21:38:54.863 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-17 21:38:54.865 +02:00 [DBG] Creating Implicit Flow response.
2020-08-17 21:38:54.875 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-17 21:38:54.876 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 21:38:56.234 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-17 21:38:56.234 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-17 21:38:56.244 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****jiVg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****smsg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000005d-0002-fb00-b63f-84710c7967bb","TimeStamp":"2020-08-17T19:38:56.0000000Z","ProcessId":12088,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-17 21:38:56.247 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"VVN2dGdTVjVWTy1XWjVPVEpHWEpDbU1UZk1FTU5BY1ptZWlaOW9LRXNlclJ1","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-17 21:38:56.255 +02:00 [DBG] Augmenting SignInContext
2020-08-17 21:38:56.256 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-17 21:38:56.653 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 21:38:56.662 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 21:38:56.663 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 21:38:56.664 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 21:38:56.669 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 21:38:56.669 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 21:38:56.669 +02:00 [DBG] Start discovery request
2020-08-17 21:38:56.693 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 21:38:57.024 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 21:38:57.032 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 21:38:57.034 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 21:38:57.035 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 21:38:57.037 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 21:38:57.037 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 21:38:57.037 +02:00 [DBG] Start key discovery request
2020-08-17 21:38:57.109 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 21:38:57.113 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 21:38:57.120 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 21:38:57.120 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 21:38:57.124 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 21:38:57.124 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 21:38:57.125 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 21:38:57.128 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 21:38:57.129 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 21:38:57.129 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 21:38:57.134 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 21:38:57.134 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 21:38:57.134 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 21:38:57.134 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 21:38:57.139 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 21:38:57.139 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 21:38:57.140 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 21:38:57.140 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 21:38:57.143 +02:00 [DBG] Start userinfo request
2020-08-17 21:38:57.143 +02:00 [DBG] Start userinfo request
2020-08-17 21:38:57.146 +02:00 [DBG] Bearer token found in header
2020-08-17 21:38:57.146 +02:00 [DBG] Bearer token found in header
2020-08-17 21:38:57.651 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 21:38:57.651 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 21:38:57.651 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 21:38:57.651 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 21:38:57.701 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 21:38:57.701 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 21:38:57.701 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 21:38:57.701 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 21:38:57.707 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 21:38:57.707 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 21:38:57.708 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597693135,"exp":1597696735,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597693134,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 21:38:57.708 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597693135,"exp":1597696735,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597693134,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 21:38:57.714 +02:00 [DBG] Creating userinfo response
2020-08-17 21:38:57.714 +02:00 [DBG] Creating userinfo response
2020-08-17 21:38:57.718 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 21:38:57.718 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 21:38:57.720 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 21:38:57.720 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 21:38:57.726 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 21:38:57.726 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 21:38:57.730 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 21:38:57.730 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 21:38:57.730 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 21:38:57.730 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 21:38:57.736 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 21:38:57.736 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 21:38:57.743 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 21:38:57.743 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 21:38:57.743 +02:00 [DBG] End userinfo request
2020-08-17 21:38:57.743 +02:00 [DBG] End userinfo request
2020-08-17 21:39:09.916 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 21:39:09.916 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 21:39:09.917 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 21:39:09.917 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 21:39:09.917 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 21:39:09.917 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 21:39:09.917 +02:00 [DBG] Start discovery request
2020-08-17 21:39:09.918 +02:00 [DBG] Start discovery request
2020-08-17 21:39:09.936 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 21:39:09.936 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 21:39:10.101 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 21:39:10.101 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 21:39:10.103 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 21:39:10.103 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 21:39:10.103 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 21:39:10.103 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 21:39:10.104 +02:00 [DBG] Start key discovery request
2020-08-17 21:39:10.104 +02:00 [DBG] Start key discovery request
2020-08-17 21:39:10.301 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 21:39:10.301 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 21:39:10.304 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 21:39:10.304 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 21:39:10.304 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 21:39:10.305 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 21:39:10.305 +02:00 [DBG] Start userinfo request
2020-08-17 21:39:10.305 +02:00 [DBG] Start userinfo request
2020-08-17 21:39:10.305 +02:00 [DBG] Bearer token found in header
2020-08-17 21:39:10.305 +02:00 [DBG] Bearer token found in header
2020-08-17 21:39:10.351 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 21:39:10.351 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 21:39:10.351 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 21:39:10.351 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 21:39:10.363 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 21:39:10.363 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 21:39:10.366 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 21:39:10.367 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597693135,"exp":1597696735,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597693134,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 21:39:10.367 +02:00 [DBG] Creating userinfo response
2020-08-17 21:39:10.367 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 21:39:10.367 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 21:39:10.372 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 21:39:10.373 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 21:39:10.373 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 21:39:10.375 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 21:39:10.382 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 21:39:10.382 +02:00 [DBG] End userinfo request
2020-08-17 21:39:10.385 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 21:39:10.386 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 21:39:10.389 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 21:39:10.389 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597693135,"exp":1597696735,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597693134,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 21:39:10.389 +02:00 [DBG] Creating userinfo response
2020-08-17 21:39:10.389 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 21:39:10.389 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 21:39:10.395 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 21:39:10.395 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 21:39:10.395 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 21:39:10.399 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 21:39:10.404 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 21:39:10.404 +02:00 [DBG] End userinfo request
2020-08-17 21:43:23.540 +02:00 [INF] Removing 0 grants
2020-08-17 21:43:23.558 +02:00 [INF] Removing 0 device flow codes
2020-08-17 21:45:53.995 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 21:45:54.011 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 21:45:54.011 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 21:45:54.021 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 21:45:54.021 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 21:45:54.021 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 21:45:54.021 +02:00 [DBG] Start discovery request
2020-08-17 21:45:54.038 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 21:45:54.109 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 21:45:54.112 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 21:45:54.112 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 21:45:54.113 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 21:45:54.113 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 21:45:54.113 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 21:45:54.113 +02:00 [DBG] Start key discovery request
2020-08-17 21:46:27.970 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 21:46:27.980 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 21:46:27.980 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 21:46:27.981 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 21:46:27.981 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 21:46:27.981 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 21:46:27.981 +02:00 [DBG] Start discovery request
2020-08-17 21:46:28.024 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 21:46:28.179 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 21:46:28.185 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 21:46:28.185 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 21:46:28.186 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 21:46:28.186 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 21:46:28.187 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 21:46:28.187 +02:00 [DBG] Start key discovery request
2020-08-17 21:46:30.489 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-17 21:46:30.490 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-17 21:46:30.490 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-17 21:46:30.490 +02:00 [DBG] Start authorize request
2020-08-17 21:46:30.491 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 21:46:30.491 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 21:46:30.526 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 21:46:30.526 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 21:46:30.532 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 21:46:30.554 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 21:46:30.558 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 21:46:30.561 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 21:46:30.561 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 21:46:30.562 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"Mm9LaGg1ejBkcGdZaVVYRlFsa290QXBYS1VhNlozdkhoM2tEbmt4NTJwTVFu","UiLocales":null,"Nonce":"Mm9LaGg1ejBkcGdZaVVYRlFsa290QXBYS1VhNlozdkhoM2tEbmt4NTJwTVFu","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"lUCC1RprgNFkNjL5ED3uGA","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"Mm9LaGg1ejBkcGdZaVVYRlFsa290QXBYS1VhNlozdkhoM2tEbmt4NTJwTVFu","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"Mm9LaGg1ejBkcGdZaVVYRlFsa290QXBYS1VhNlozdkhoM2tEbmt4NTJwTVFu"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 21:46:30.565 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-17 21:46:30.565 +02:00 [DBG] Creating Implicit Flow response.
2020-08-17 21:46:30.565 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-17 21:46:30.565 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 21:46:30.574 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-17 21:46:30.574 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-17 21:46:30.575 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****2asA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****DfcA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000014-0006-fd00-b63f-84710c7967bb","TimeStamp":"2020-08-17T19:46:30.0000000Z","ProcessId":12088,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-17 21:46:30.575 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"Mm9LaGg1ejBkcGdZaVVYRlFsa290QXBYS1VhNlozdkhoM2tEbmt4NTJwTVFu","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-17 21:46:30.840 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 21:46:30.843 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 21:46:30.843 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 21:46:30.843 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 21:46:30.844 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 21:46:30.844 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 21:46:30.844 +02:00 [DBG] Start discovery request
2020-08-17 21:46:30.858 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 21:46:31.029 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 21:46:31.033 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 21:46:31.033 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 21:46:31.034 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 21:46:31.035 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 21:46:31.035 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 21:46:31.035 +02:00 [DBG] Start key discovery request
2020-08-17 21:46:31.130 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 21:46:31.134 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 21:46:31.134 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 21:46:31.143 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 21:46:31.147 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 21:46:31.148 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 21:46:31.148 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 21:46:31.149 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 21:46:31.149 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 21:46:31.149 +02:00 [DBG] Start userinfo request
2020-08-17 21:46:31.149 +02:00 [DBG] Bearer token found in header
2020-08-17 21:46:31.166 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 21:46:31.243 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 21:46:31.243 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 21:46:31.263 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 21:46:31.263 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 21:46:31.267 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 21:46:31.267 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597693590,"exp":1597697190,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597693134,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 21:46:31.267 +02:00 [DBG] Creating userinfo response
2020-08-17 21:46:31.269 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 21:46:31.272 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 21:46:31.272 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 21:46:31.272 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 21:46:31.277 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 21:46:31.277 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 21:46:31.277 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 21:46:31.279 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 21:46:31.284 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 21:46:31.284 +02:00 [DBG] End userinfo request
2020-08-17 21:46:31.465 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 21:46:31.475 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 21:46:31.475 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 21:46:31.476 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 21:46:31.477 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 21:46:31.477 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 21:46:31.477 +02:00 [DBG] Start userinfo request
2020-08-17 21:46:31.477 +02:00 [DBG] Bearer token found in header
2020-08-17 21:46:31.522 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 21:46:31.522 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 21:46:31.535 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 21:46:31.535 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 21:46:31.541 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 21:46:31.541 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597693590,"exp":1597697190,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597693134,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 21:46:31.541 +02:00 [DBG] Creating userinfo response
2020-08-17 21:46:31.541 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 21:46:31.541 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 21:46:31.548 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 21:46:31.548 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 21:46:31.548 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 21:46:31.551 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 21:46:31.559 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 21:46:31.559 +02:00 [DBG] End userinfo request
2020-08-17 21:46:31.579 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 21:46:31.580 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 21:46:31.580 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 21:46:31.580 +02:00 [DBG] Start discovery request
2020-08-17 21:46:31.599 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 21:46:31.602 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 21:46:31.602 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 21:46:31.603 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 21:46:31.603 +02:00 [DBG] Start key discovery request
2020-08-17 21:46:31.622 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 21:46:31.622 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 21:46:31.622 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 21:46:31.622 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 21:46:31.622 +02:00 [DBG] Start discovery request
2020-08-17 21:46:31.622 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 21:46:31.622 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 21:46:31.622 +02:00 [DBG] Start userinfo request
2020-08-17 21:46:31.622 +02:00 [DBG] Bearer token found in header
2020-08-17 21:46:31.637 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 21:46:31.650 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 21:46:31.650 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 21:46:31.650 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 21:46:31.650 +02:00 [DBG] Start key discovery request
2020-08-17 21:46:31.653 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 21:46:31.653 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 21:46:31.654 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 21:46:31.654 +02:00 [DBG] Start userinfo request
2020-08-17 21:46:31.654 +02:00 [DBG] Bearer token found in header
2020-08-17 21:46:31.666 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 21:46:31.666 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 21:46:31.698 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 21:46:31.698 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 21:46:31.710 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 21:46:31.711 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 21:46:31.714 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 21:46:31.715 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597693590,"exp":1597697190,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597693134,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 21:46:31.715 +02:00 [DBG] Creating userinfo response
2020-08-17 21:46:31.715 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 21:46:31.715 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 21:46:31.723 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 21:46:31.723 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 21:46:31.723 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 21:46:31.726 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 21:46:31.731 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 21:46:31.731 +02:00 [DBG] End userinfo request
2020-08-17 21:46:31.736 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 21:46:31.736 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 21:46:31.739 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 21:46:31.739 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597693590,"exp":1597697190,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597693134,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 21:46:31.739 +02:00 [DBG] Creating userinfo response
2020-08-17 21:46:31.739 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 21:46:31.739 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 21:46:31.743 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 21:46:31.743 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 21:46:31.744 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 21:46:31.745 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 21:46:31.750 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 21:46:31.750 +02:00 [DBG] End userinfo request
2020-08-17 21:48:23.630 +02:00 [INF] Removing 0 grants
2020-08-17 21:48:23.633 +02:00 [INF] Removing 0 device flow codes
2020-08-17 21:53:23.706 +02:00 [INF] Removing 0 grants
2020-08-17 21:53:23.710 +02:00 [INF] Removing 0 device flow codes
2020-08-17 21:58:24.053 +02:00 [INF] Removing 0 grants
2020-08-17 21:58:24.069 +02:00 [INF] Removing 0 device flow codes
2020-08-17 22:03:24.212 +02:00 [INF] Removing 0 grants
2020-08-17 22:03:24.215 +02:00 [INF] Removing 0 device flow codes
2020-08-17 22:08:24.246 +02:00 [INF] Removing 0 grants
2020-08-17 22:08:24.249 +02:00 [INF] Removing 0 device flow codes
2020-08-17 22:13:28.096 +02:00 [INF] Removing 0 grants
2020-08-17 22:13:28.163 +02:00 [INF] Removing 0 device flow codes
2020-08-17 22:52:27.165 +02:00 [INF] Removing 0 grants
2020-08-17 22:52:27.206 +02:00 [INF] Removing 0 device flow codes
2020-08-17 22:57:27.224 +02:00 [INF] Removing 0 grants
2020-08-17 22:57:27.675 +02:00 [INF] Removing 0 device flow codes
2020-08-17 23:02:28.456 +02:00 [INF] Removing 0 grants
2020-08-17 23:02:28.991 +02:00 [INF] Removing 0 device flow codes
2020-08-17 23:07:29.573 +02:00 [INF] Removing 0 grants
2020-08-17 23:07:29.593 +02:00 [INF] Removing 0 device flow codes
2020-08-17 23:12:30.085 +02:00 [INF] Removing 0 grants
2020-08-17 23:12:30.215 +02:00 [INF] Removing 0 device flow codes
2020-08-17 23:17:31.567 +02:00 [INF] Removing 0 grants
2020-08-17 23:17:31.705 +02:00 [INF] Removing 0 device flow codes
2020-08-17 23:22:32.141 +02:00 [INF] Removing 0 grants
2020-08-17 23:22:32.202 +02:00 [INF] Removing 0 device flow codes
2020-08-17 23:27:32.339 +02:00 [INF] Removing 0 grants
2020-08-17 23:27:32.342 +02:00 [INF] Removing 0 device flow codes
2020-08-17 23:32:32.425 +02:00 [INF] Removing 0 grants
2020-08-17 23:32:32.429 +02:00 [INF] Removing 0 device flow codes
2020-08-17 23:37:33.327 +02:00 [INF] Removing 0 grants
2020-08-17 23:37:33.520 +02:00 [INF] Removing 0 device flow codes
2020-08-17 23:52:47.540 +02:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-08-17 23:52:47.575 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-17 23:52:47.575 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-08-17 23:52:47.576 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-08-17 23:52:47.576 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-08-17 23:52:47.576 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-08-17 23:52:47.576 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-08-17 23:52:47.851 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 23:52:47.851 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 23:52:47.906 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 23:52:47.924 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 23:52:47.925 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 23:52:47.925 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 23:52:47.972 +02:00 [DBG] Login Url: /Account/Login
2020-08-17 23:52:47.972 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-08-17 23:52:47.972 +02:00 [DBG] Logout Url: /Account/Logout
2020-08-17 23:52:47.972 +02:00 [DBG] ConsentUrl Url: /consent
2020-08-17 23:52:47.972 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2020-08-17 23:52:47.972 +02:00 [DBG] Error Url: /home/error
2020-08-17 23:52:47.972 +02:00 [DBG] Error Id Parameter: errorId
2020-08-17 23:52:47.984 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 23:52:47.984 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 23:52:47.999 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 23:52:47.999 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 23:52:47.999 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 23:52:47.999 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 23:52:48.000 +02:00 [DBG] Start discovery request
2020-08-17 23:52:48.000 +02:00 [DBG] Start discovery request
2020-08-17 23:52:48.433 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 23:52:48.433 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 23:52:48.567 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 23:52:48.570 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 23:52:48.570 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 23:52:48.574 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 23:52:48.575 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 23:52:48.575 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 23:52:48.577 +02:00 [DBG] Start key discovery request
2020-08-17 23:52:48.624 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-17 23:52:48.634 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-17 23:52:48.634 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-17 23:52:48.636 +02:00 [DBG] Start authorize request
2020-08-17 23:52:48.643 +02:00 [DBG] No user present in authorize request
2020-08-17 23:52:48.645 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 23:52:48.901 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:52:48.911 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:52:48.971 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:52:49.011 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 23:52:49.019 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:52:49.022 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 23:52:49.027 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 23:52:49.037 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"NFB0c0o0UDVUU0JtU2R2eUJoVXdLcktIMkt3R3guQl9kNGFTLWY1cUFsRXps","UiLocales":null,"Nonce":"NFB0c0o0UDVUU0JtU2R2eUJoVXdLcktIMkt3R3guQl9kNGFTLWY1cUFsRXps","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"NFB0c0o0UDVUU0JtU2R2eUJoVXdLcktIMkt3R3guQl9kNGFTLWY1cUFsRXps","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"NFB0c0o0UDVUU0JtU2R2eUJoVXdLcktIMkt3R3guQl9kNGFTLWY1cUFsRXps"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 23:52:49.043 +02:00 [INF] Showing login: User is not authenticated
2020-08-17 23:52:49.262 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 23:52:49.279 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:52:49.279 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:52:49.282 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:52:49.285 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 23:52:49.288 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:52:49.290 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 23:52:49.290 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 23:52:49.306 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:52:49.306 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:52:52.814 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-17 23:52:54.424 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-17 23:52:54.909 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000007-0003-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-17T21:52:54.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-17 23:52:54.918 +02:00 [DBG] Augmenting SignInContext
2020-08-17 23:52:54.918 +02:00 [DBG] Adding amr claim with value: external
2020-08-17 23:52:54.921 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-17 23:52:54.924 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-17 23:52:55.000 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-17 23:52:55.001 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-17 23:52:55.001 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-17 23:52:55.003 +02:00 [DBG] Start authorize callback request
2020-08-17 23:52:55.005 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 23:52:55.005 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 23:52:55.189 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:52:55.189 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:52:55.260 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:52:55.326 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 23:52:55.333 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:52:55.347 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 23:52:55.348 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 23:52:55.348 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"NFB0c0o0UDVUU0JtU2R2eUJoVXdLcktIMkt3R3guQl9kNGFTLWY1cUFsRXps","UiLocales":null,"Nonce":"NFB0c0o0UDVUU0JtU2R2eUJoVXdLcktIMkt3R3guQl9kNGFTLWY1cUFsRXps","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"_k8zPh5m2neT0pI-CLQAiQ","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"NFB0c0o0UDVUU0JtU2R2eUJoVXdLcktIMkt3R3guQl9kNGFTLWY1cUFsRXps","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"NFB0c0o0UDVUU0JtU2R2eUJoVXdLcktIMkt3R3guQl9kNGFTLWY1cUFsRXps"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 23:52:55.370 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-17 23:52:55.373 +02:00 [DBG] Creating Implicit Flow response.
2020-08-17 23:52:55.383 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-17 23:52:55.384 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 23:52:56.196 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-17 23:52:56.196 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-17 23:52:56.204 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Zb2g","$type":"Token"},{"TokenType":"access_token","TokenValue":"****4XUQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000008-0003-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-17T21:52:56.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-17 23:52:56.206 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"NFB0c0o0UDVUU0JtU2R2eUJoVXdLcktIMkt3R3guQl9kNGFTLWY1cUFsRXps","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-17 23:52:56.213 +02:00 [DBG] Augmenting SignInContext
2020-08-17 23:52:56.213 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-17 23:52:56.528 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 23:52:56.541 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 23:52:56.541 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 23:52:56.542 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 23:52:56.544 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 23:52:56.544 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 23:52:56.544 +02:00 [DBG] Start discovery request
2020-08-17 23:52:56.558 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 23:52:56.681 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 23:52:56.685 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 23:52:56.686 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 23:52:56.686 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 23:52:56.687 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 23:52:56.687 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 23:52:56.687 +02:00 [DBG] Start key discovery request
2020-08-17 23:52:56.756 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 23:52:56.759 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 23:52:56.762 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 23:52:56.762 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 23:52:56.763 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 23:52:56.763 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 23:52:56.765 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 23:52:56.765 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 23:52:56.772 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 23:52:56.772 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 23:52:56.772 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 23:52:56.772 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 23:52:56.772 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 23:52:56.773 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 23:52:56.775 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 23:52:56.775 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 23:52:56.776 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 23:52:56.776 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 23:52:56.779 +02:00 [DBG] Start userinfo request
2020-08-17 23:52:56.779 +02:00 [DBG] Start userinfo request
2020-08-17 23:52:56.782 +02:00 [DBG] Bearer token found in header
2020-08-17 23:52:56.782 +02:00 [DBG] Bearer token found in header
2020-08-17 23:52:57.047 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:52:57.047 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:52:57.047 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:52:57.047 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:52:57.076 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:52:57.076 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:52:57.076 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:52:57.077 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:52:57.081 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 23:52:57.081 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 23:52:57.082 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597701176,"exp":1597704776,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597701174,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 23:52:57.082 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597701176,"exp":1597704776,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597701174,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 23:52:57.088 +02:00 [DBG] Creating userinfo response
2020-08-17 23:52:57.088 +02:00 [DBG] Creating userinfo response
2020-08-17 23:52:57.090 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:52:57.090 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:52:57.091 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:52:57.091 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:52:57.097 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:52:57.097 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:52:57.101 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 23:52:57.101 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 23:52:57.101 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:52:57.101 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:52:57.104 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:52:57.104 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:52:57.110 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 23:52:57.110 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 23:52:57.111 +02:00 [DBG] End userinfo request
2020-08-17 23:52:57.111 +02:00 [DBG] End userinfo request
2020-08-17 23:53:05.096 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 23:53:05.096 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 23:53:05.098 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 23:53:05.098 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 23:53:05.098 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 23:53:05.098 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 23:53:05.098 +02:00 [DBG] Start discovery request
2020-08-17 23:53:05.098 +02:00 [DBG] Start discovery request
2020-08-17 23:53:05.434 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 23:53:05.455 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 23:53:05.901 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 23:53:05.901 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 23:53:05.904 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 23:53:05.904 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 23:53:05.904 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 23:53:05.904 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 23:53:05.904 +02:00 [DBG] Start key discovery request
2020-08-17 23:53:05.905 +02:00 [DBG] Start key discovery request
2020-08-17 23:53:06.065 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 23:53:06.065 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 23:53:06.068 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 23:53:06.068 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 23:53:06.069 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 23:53:06.069 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 23:53:06.069 +02:00 [DBG] Start userinfo request
2020-08-17 23:53:06.069 +02:00 [DBG] Bearer token found in header
2020-08-17 23:53:06.069 +02:00 [DBG] Start userinfo request
2020-08-17 23:53:06.069 +02:00 [DBG] Bearer token found in header
2020-08-17 23:53:06.167 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:53:06.168 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:53:06.181 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:53:06.182 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:53:06.205 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:53:06.205 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:53:06.217 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:53:06.217 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:53:06.231 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 23:53:06.232 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597701176,"exp":1597704776,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597701174,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 23:53:06.233 +02:00 [DBG] Creating userinfo response
2020-08-17 23:53:06.233 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:53:06.233 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:53:06.233 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 23:53:06.233 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597701176,"exp":1597704776,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597701174,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 23:53:06.234 +02:00 [DBG] Creating userinfo response
2020-08-17 23:53:06.234 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:53:06.234 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:53:06.241 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:53:06.241 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:53:06.242 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 23:53:06.242 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:53:06.242 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 23:53:06.242 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:53:06.245 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:53:06.245 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:53:06.253 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 23:53:06.253 +02:00 [DBG] End userinfo request
2020-08-17 23:53:06.272 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 23:53:06.272 +02:00 [DBG] End userinfo request
2020-08-17 23:55:54.163 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 23:55:54.212 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 23:55:54.218 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 23:55:54.219 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 23:55:54.219 +02:00 [DBG] Start discovery request
2020-08-17 23:55:54.347 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 23:55:54.347 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 23:55:54.349 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 23:55:54.352 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 23:55:54.352 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 23:55:54.353 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 23:55:54.354 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 23:55:54.354 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 23:55:54.354 +02:00 [DBG] Start userinfo request
2020-08-17 23:55:54.354 +02:00 [DBG] Bearer token found in header
2020-08-17 23:55:54.365 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 23:55:54.373 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 23:55:54.374 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 23:55:54.374 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 23:55:54.374 +02:00 [DBG] Start key discovery request
2020-08-17 23:55:54.376 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 23:55:54.377 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 23:55:54.377 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 23:55:54.377 +02:00 [DBG] Start userinfo request
2020-08-17 23:55:54.377 +02:00 [DBG] Bearer token found in header
2020-08-17 23:55:54.402 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:55:54.402 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:55:54.427 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:55:54.427 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:55:54.443 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:55:54.443 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:55:54.448 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 23:55:54.449 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597701176,"exp":1597704776,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597701174,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 23:55:54.449 +02:00 [DBG] Creating userinfo response
2020-08-17 23:55:54.449 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:55:54.449 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:55:54.456 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:55:54.456 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 23:55:54.456 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:55:54.461 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:55:54.461 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:55:54.462 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:55:54.465 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 23:55:54.466 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597701176,"exp":1597704776,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597701174,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 23:55:54.466 +02:00 [DBG] Creating userinfo response
2020-08-17 23:55:54.466 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:55:54.466 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:55:54.471 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 23:55:54.471 +02:00 [DBG] End userinfo request
2020-08-17 23:55:54.471 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:55:54.472 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 23:55:54.472 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:55:54.474 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:55:54.481 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 23:55:54.481 +02:00 [DBG] End userinfo request
2020-08-17 23:55:55.069 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-08-17 23:55:55.072 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-08-17 23:55:55.073 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-08-17 23:55:55.076 +02:00 [DBG] Processing signout request for 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 23:55:55.081 +02:00 [DBG] Start end session request validation
2020-08-17 23:55:55.084 +02:00 [DBG] Start identity token validation
2020-08-17 23:55:55.141 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:55:55.141 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:55:55.142 +02:00 [DBG] Client found: listify.webapp / The Listify WebApplication
2020-08-17 23:55:55.147 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 23:55:55.148 +02:00 [DBG] Token validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597701176,"exp":1597701476,"iss":"http://localhost:5000","aud":"listify.webapp","nonce":"NFB0c0o0UDVUU0JtU2R2eUJoVXdLcktIMkt3R3guQl9kNGFTLWY1cUFsRXps","iat":1597701176,"at_hash":"_-QXeXDCDvZAu-lhY6K3wQ","s_hash":"1KUGOeKH-N7UqEo-edzX0A","sid":"_k8zPh5m2neT0pI-CLQAiQ","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597701174,"idp":"Facebook","amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 23:55:55.152 +02:00 [INF] End session request validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","PostLogOutUri":"http://localhost:4200","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200"},"$type":"EndSessionRequestValidationLog"}
2020-08-17 23:55:55.154 +02:00 [DBG] Success validating end session request from listify.webapp
2020-08-17 23:55:55.239 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-17 23:55:55.239 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-17 23:55:55.240 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-17 23:55:55.241 +02:00 [INF] {"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"80000003-0006-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-17T21:55:55.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-17 23:55:55.606 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 23:55:55.612 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 23:55:55.612 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 23:55:55.613 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 23:55:55.614 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 23:55:55.614 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 23:55:55.614 +02:00 [DBG] Start discovery request
2020-08-17 23:55:55.628 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 23:55:55.740 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 23:55:55.744 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 23:55:55.744 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 23:55:55.745 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 23:55:55.745 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 23:55:55.745 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 23:55:55.745 +02:00 [DBG] Start key discovery request
2020-08-17 23:55:56.673 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-17 23:55:56.674 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-17 23:55:56.674 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-17 23:55:56.674 +02:00 [DBG] Start authorize request
2020-08-17 23:55:56.675 +02:00 [DBG] No user present in authorize request
2020-08-17 23:55:56.675 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 23:55:56.709 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:55:56.709 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:55:56.718 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:55:56.733 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 23:55:56.736 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:55:56.739 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 23:55:56.739 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 23:55:56.740 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"U2p5aFhEZkdkQi5rMDFtSU1mLktHY2cuLkd1Y3Z6N0s4UmxBTX5QVFFpZ2pp","UiLocales":null,"Nonce":"U2p5aFhEZkdkQi5rMDFtSU1mLktHY2cuLkd1Y3Z6N0s4UmxBTX5QVFFpZ2pp","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"U2p5aFhEZkdkQi5rMDFtSU1mLktHY2cuLkd1Y3Z6N0s4UmxBTX5QVFFpZ2pp","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"U2p5aFhEZkdkQi5rMDFtSU1mLktHY2cuLkd1Y3Z6N0s4UmxBTX5QVFFpZ2pp"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 23:55:56.740 +02:00 [INF] Showing login: User is not authenticated
2020-08-17 23:55:56.999 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 23:55:57.037 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:55:57.037 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:55:57.042 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:55:57.065 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 23:55:57.070 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:55:57.158 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 23:55:57.158 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 23:55:57.218 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:55:57.218 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:55:59.748 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-17 23:56:00.921 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-17 23:56:00.964 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000004-0002-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-17T21:56:00.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-17 23:56:00.965 +02:00 [DBG] Augmenting SignInContext
2020-08-17 23:56:00.965 +02:00 [DBG] Adding amr claim with value: external
2020-08-17 23:56:00.965 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-17 23:56:00.965 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-17 23:56:01.005 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-17 23:56:01.006 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-17 23:56:01.006 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-17 23:56:01.006 +02:00 [DBG] Start authorize callback request
2020-08-17 23:56:01.006 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 23:56:01.006 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 23:56:01.041 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:56:01.041 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:56:01.068 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:56:01.088 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 23:56:01.095 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:56:01.112 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 23:56:01.112 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 23:56:01.113 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"U2p5aFhEZkdkQi5rMDFtSU1mLktHY2cuLkd1Y3Z6N0s4UmxBTX5QVFFpZ2pp","UiLocales":null,"Nonce":"U2p5aFhEZkdkQi5rMDFtSU1mLktHY2cuLkd1Y3Z6N0s4UmxBTX5QVFFpZ2pp","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"rJkSMAlfIosMTcMpGB7tGg","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"U2p5aFhEZkdkQi5rMDFtSU1mLktHY2cuLkd1Y3Z6N0s4UmxBTX5QVFFpZ2pp","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"U2p5aFhEZkdkQi5rMDFtSU1mLktHY2cuLkd1Y3Z6N0s4UmxBTX5QVFFpZ2pp"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 23:56:01.118 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-17 23:56:01.118 +02:00 [DBG] Creating Implicit Flow response.
2020-08-17 23:56:01.118 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-17 23:56:01.119 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 23:56:01.126 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-17 23:56:01.126 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-17 23:56:01.128 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****GgVA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****xJwA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000005-0002-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-17T21:56:01.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-17 23:56:01.128 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"U2p5aFhEZkdkQi5rMDFtSU1mLktHY2cuLkd1Y3Z6N0s4UmxBTX5QVFFpZ2pp","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-17 23:56:01.128 +02:00 [DBG] Augmenting SignInContext
2020-08-17 23:56:01.129 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-17 23:56:01.464 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 23:56:01.467 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 23:56:01.467 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 23:56:01.468 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 23:56:01.468 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 23:56:01.469 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 23:56:01.469 +02:00 [DBG] Start discovery request
2020-08-17 23:56:01.480 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 23:56:01.607 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 23:56:01.612 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 23:56:01.612 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 23:56:01.613 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 23:56:01.614 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 23:56:01.614 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 23:56:01.614 +02:00 [DBG] Start key discovery request
2020-08-17 23:56:01.695 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 23:56:01.696 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 23:56:01.699 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 23:56:01.699 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 23:56:01.700 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 23:56:01.700 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 23:56:01.703 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 23:56:01.708 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 23:56:01.709 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 23:56:01.709 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 23:56:01.709 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 23:56:01.711 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 23:56:01.711 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 23:56:01.712 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 23:56:01.712 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 23:56:01.712 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 23:56:01.712 +02:00 [DBG] Start userinfo request
2020-08-17 23:56:01.712 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 23:56:01.712 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 23:56:01.712 +02:00 [DBG] Start userinfo request
2020-08-17 23:56:01.712 +02:00 [DBG] Bearer token found in header
2020-08-17 23:56:01.713 +02:00 [DBG] Bearer token found in header
2020-08-17 23:56:01.802 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:56:01.802 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:56:01.803 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:56:01.803 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:56:01.843 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:56:01.843 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:56:01.844 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:56:01.845 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:56:01.854 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 23:56:01.855 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597701361,"exp":1597704961,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597701360,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 23:56:01.855 +02:00 [DBG] Creating userinfo response
2020-08-17 23:56:01.855 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:56:01.856 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:56:01.858 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 23:56:01.858 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597701361,"exp":1597704961,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597701360,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 23:56:01.860 +02:00 [DBG] Creating userinfo response
2020-08-17 23:56:01.860 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:56:01.860 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:56:01.870 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:56:01.870 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 23:56:01.871 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:56:01.890 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:56:01.890 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:56:01.890 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 23:56:01.891 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:56:01.896 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:56:01.897 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 23:56:01.897 +02:00 [DBG] End userinfo request
2020-08-17 23:56:01.903 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 23:56:01.903 +02:00 [DBG] End userinfo request
2020-08-17 23:56:02.500 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 23:56:02.501 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 23:56:02.501 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 23:56:02.501 +02:00 [DBG] Start discovery request
2020-08-17 23:56:02.518 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 23:56:02.523 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 23:56:02.523 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 23:56:02.523 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 23:56:02.523 +02:00 [DBG] Start key discovery request
2020-08-17 23:56:02.526 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 23:56:02.527 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 23:56:02.527 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 23:56:02.527 +02:00 [DBG] Start userinfo request
2020-08-17 23:56:02.527 +02:00 [DBG] Bearer token found in header
2020-08-17 23:56:02.559 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:56:02.560 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:56:02.586 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:56:02.587 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:56:02.590 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 23:56:02.590 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597701361,"exp":1597704961,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597701360,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 23:56:02.590 +02:00 [DBG] Creating userinfo response
2020-08-17 23:56:02.590 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:56:02.590 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:56:02.595 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:56:02.595 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 23:56:02.595 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:56:02.597 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:56:02.602 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 23:56:02.602 +02:00 [DBG] End userinfo request
2020-08-17 23:56:02.946 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 23:56:02.946 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 23:56:02.946 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 23:56:02.946 +02:00 [DBG] Start discovery request
2020-08-17 23:56:02.957 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 23:56:02.960 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 23:56:02.960 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 23:56:02.960 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 23:56:02.960 +02:00 [DBG] Start key discovery request
2020-08-17 23:56:02.964 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 23:56:02.965 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 23:56:02.965 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 23:56:02.965 +02:00 [DBG] Start userinfo request
2020-08-17 23:56:02.965 +02:00 [DBG] Bearer token found in header
2020-08-17 23:56:02.995 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:56:02.995 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:56:03.025 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:56:03.025 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:56:03.029 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 23:56:03.029 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597701361,"exp":1597704961,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597701360,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 23:56:03.029 +02:00 [DBG] Creating userinfo response
2020-08-17 23:56:03.029 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:56:03.029 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:56:03.034 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:56:03.035 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 23:56:03.035 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:56:03.037 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:56:03.042 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 23:56:03.042 +02:00 [DBG] End userinfo request
2020-08-17 23:57:47.971 +02:00 [INF] Removing 0 grants
2020-08-17 23:57:48.011 +02:00 [INF] Removing 0 device flow codes
2020-08-17 23:59:02.997 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 23:59:03.028 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 23:59:03.029 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 23:59:03.030 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 23:59:03.032 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 23:59:03.032 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 23:59:03.032 +02:00 [DBG] Start discovery request
2020-08-17 23:59:03.126 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 23:59:03.324 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 23:59:03.345 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 23:59:03.345 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 23:59:03.356 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 23:59:03.356 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 23:59:03.357 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 23:59:03.357 +02:00 [DBG] Start key discovery request
2020-08-17 23:59:03.378 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 23:59:03.379 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 23:59:03.379 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 23:59:03.379 +02:00 [DBG] Start discovery request
2020-08-17 23:59:03.398 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 23:59:03.408 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 23:59:03.409 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 23:59:03.409 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 23:59:03.409 +02:00 [DBG] Start key discovery request
2020-08-17 23:59:03.425 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 23:59:03.426 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 23:59:03.426 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 23:59:03.426 +02:00 [DBG] Start userinfo request
2020-08-17 23:59:03.426 +02:00 [DBG] Bearer token found in header
2020-08-17 23:59:03.503 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:59:03.504 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:59:03.560 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:59:03.560 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:59:03.589 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 23:59:03.589 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597701361,"exp":1597704961,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597701360,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 23:59:03.589 +02:00 [DBG] Creating userinfo response
2020-08-17 23:59:03.589 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:59:03.589 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:59:03.595 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:59:03.596 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 23:59:03.596 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:59:03.597 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:59:03.606 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 23:59:03.606 +02:00 [DBG] End userinfo request
2020-08-17 23:59:11.160 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 23:59:11.165 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 23:59:11.165 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 23:59:11.168 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 23:59:11.172 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 23:59:11.172 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 23:59:11.173 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 23:59:11.173 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 23:59:11.173 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 23:59:11.173 +02:00 [DBG] Start userinfo request
2020-08-17 23:59:11.173 +02:00 [DBG] Bearer token found in header
2020-08-17 23:59:11.190 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 23:59:11.190 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 23:59:11.190 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 23:59:11.191 +02:00 [DBG] Start discovery request
2020-08-17 23:59:11.201 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 23:59:11.204 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 23:59:11.204 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 23:59:11.204 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 23:59:11.204 +02:00 [DBG] Start key discovery request
2020-08-17 23:59:11.206 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 23:59:11.206 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:59:11.206 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 23:59:11.206 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 23:59:11.206 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:59:11.206 +02:00 [DBG] Start userinfo request
2020-08-17 23:59:11.206 +02:00 [DBG] Bearer token found in header
2020-08-17 23:59:11.239 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:59:11.240 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:59:11.241 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:59:11.241 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:59:11.244 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 23:59:11.244 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597701361,"exp":1597704961,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597701360,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 23:59:11.245 +02:00 [DBG] Creating userinfo response
2020-08-17 23:59:11.245 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:59:11.245 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:59:11.261 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:59:11.261 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:59:11.265 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 23:59:11.265 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597701361,"exp":1597704961,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597701360,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 23:59:11.265 +02:00 [DBG] Creating userinfo response
2020-08-17 23:59:11.265 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:59:11.265 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:59:11.272 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:59:11.272 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 23:59:11.272 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:59:11.276 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:59:11.284 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 23:59:11.284 +02:00 [DBG] End userinfo request
2020-08-17 23:59:11.291 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:59:11.291 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 23:59:11.291 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:59:11.298 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:59:11.305 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 23:59:11.305 +02:00 [DBG] End userinfo request
2020-08-17 23:59:11.861 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-08-17 23:59:11.862 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-08-17 23:59:11.862 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-08-17 23:59:11.862 +02:00 [DBG] Processing signout request for 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 23:59:11.862 +02:00 [DBG] Start end session request validation
2020-08-17 23:59:11.862 +02:00 [DBG] Start identity token validation
2020-08-17 23:59:11.912 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:59:11.913 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:59:11.913 +02:00 [DBG] Client found: listify.webapp / The Listify WebApplication
2020-08-17 23:59:11.917 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 23:59:11.917 +02:00 [DBG] Token validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597701361,"exp":1597701661,"iss":"http://localhost:5000","aud":"listify.webapp","nonce":"U2p5aFhEZkdkQi5rMDFtSU1mLktHY2cuLkd1Y3Z6N0s4UmxBTX5QVFFpZ2pp","iat":1597701361,"at_hash":"27YLWKygsPXwCupYjf3aCA","s_hash":"5R9NBLueLnv-EIJ3Rb9BIQ","sid":"rJkSMAlfIosMTcMpGB7tGg","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597701360,"idp":"Facebook","amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 23:59:11.918 +02:00 [INF] End session request validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","PostLogOutUri":"http://localhost:4200","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200"},"$type":"EndSessionRequestValidationLog"}
2020-08-17 23:59:11.918 +02:00 [DBG] Success validating end session request from listify.webapp
2020-08-17 23:59:11.986 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-17 23:59:11.986 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-17 23:59:11.986 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-17 23:59:11.986 +02:00 [INF] {"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"80000005-0004-fc00-b63f-84710c7967bb","TimeStamp":"2020-08-17T21:59:11.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-17 23:59:12.160 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 23:59:12.163 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 23:59:12.163 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 23:59:12.164 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 23:59:12.164 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 23:59:12.164 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 23:59:12.164 +02:00 [DBG] Start discovery request
2020-08-17 23:59:12.176 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 23:59:12.279 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 23:59:12.281 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 23:59:12.281 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 23:59:12.282 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 23:59:12.282 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 23:59:12.282 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 23:59:12.282 +02:00 [DBG] Start key discovery request
2020-08-17 23:59:12.804 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-17 23:59:12.808 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-17 23:59:12.808 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-17 23:59:12.808 +02:00 [DBG] Start authorize request
2020-08-17 23:59:12.808 +02:00 [DBG] No user present in authorize request
2020-08-17 23:59:12.808 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 23:59:12.836 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:59:12.836 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:59:12.840 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:59:12.855 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 23:59:12.858 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:59:12.860 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 23:59:12.860 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 23:59:12.860 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"SEN3TUJ-Rkpod3diMDJ0a2JKQlRuakVfSVVtNEpfemh4ZHZ3YnZ2RmdKUWY0","UiLocales":null,"Nonce":"SEN3TUJ-Rkpod3diMDJ0a2JKQlRuakVfSVVtNEpfemh4ZHZ3YnZ2RmdKUWY0","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"SEN3TUJ-Rkpod3diMDJ0a2JKQlRuakVfSVVtNEpfemh4ZHZ3YnZ2RmdKUWY0","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"SEN3TUJ-Rkpod3diMDJ0a2JKQlRuakVfSVVtNEpfemh4ZHZ3YnZ2RmdKUWY0"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 23:59:12.861 +02:00 [INF] Showing login: User is not authenticated
2020-08-17 23:59:12.882 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 23:59:12.897 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:59:12.897 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:59:12.899 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:59:12.900 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 23:59:12.902 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:59:12.904 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 23:59:12.904 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 23:59:12.922 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:59:12.922 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:59:14.502 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-17 23:59:15.624 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-17 23:59:15.660 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000012-0003-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-17T21:59:15.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-17 23:59:15.661 +02:00 [DBG] Augmenting SignInContext
2020-08-17 23:59:15.661 +02:00 [DBG] Adding amr claim with value: external
2020-08-17 23:59:15.662 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-17 23:59:15.662 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-17 23:59:15.669 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-17 23:59:15.673 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-17 23:59:15.673 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-17 23:59:15.673 +02:00 [DBG] Start authorize callback request
2020-08-17 23:59:15.674 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 23:59:15.674 +02:00 [DBG] Start authorize request protocol validation
2020-08-17 23:59:15.703 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:59:15.703 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:59:15.709 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:59:15.727 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 23:59:15.730 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:59:15.732 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-17 23:59:15.732 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-17 23:59:15.733 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"SEN3TUJ-Rkpod3diMDJ0a2JKQlRuakVfSVVtNEpfemh4ZHZ3YnZ2RmdKUWY0","UiLocales":null,"Nonce":"SEN3TUJ-Rkpod3diMDJ0a2JKQlRuakVfSVVtNEpfemh4ZHZ3YnZ2RmdKUWY0","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"5szaMWnuINkz4su26OFzxw","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"SEN3TUJ-Rkpod3diMDJ0a2JKQlRuakVfSVVtNEpfemh4ZHZ3YnZ2RmdKUWY0","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"SEN3TUJ-Rkpod3diMDJ0a2JKQlRuakVfSVVtNEpfemh4ZHZ3YnZ2RmdKUWY0"},"$type":"AuthorizeRequestValidationLog"}
2020-08-17 23:59:15.736 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-17 23:59:15.736 +02:00 [DBG] Creating Implicit Flow response.
2020-08-17 23:59:15.737 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-17 23:59:15.737 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-17 23:59:15.743 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-17 23:59:15.743 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-17 23:59:15.745 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****A_lQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****dP3A","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000013-0003-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-17T21:59:15.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-17 23:59:15.745 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"SEN3TUJ-Rkpod3diMDJ0a2JKQlRuakVfSVVtNEpfemh4ZHZ3YnZ2RmdKUWY0","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-17 23:59:15.746 +02:00 [DBG] Augmenting SignInContext
2020-08-17 23:59:15.747 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-17 23:59:16.118 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-17 23:59:16.121 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 23:59:16.121 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 23:59:16.121 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 23:59:16.121 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 23:59:16.122 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 23:59:16.122 +02:00 [DBG] Start discovery request
2020-08-17 23:59:16.138 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 23:59:16.267 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-17 23:59:16.270 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 23:59:16.270 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 23:59:16.270 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 23:59:16.271 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 23:59:16.271 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 23:59:16.271 +02:00 [DBG] Start key discovery request
2020-08-17 23:59:16.343 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 23:59:16.344 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 23:59:16.351 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 23:59:16.351 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 23:59:16.352 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 23:59:16.352 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 23:59:16.354 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 23:59:16.354 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-17 23:59:16.358 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 23:59:16.361 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-17 23:59:16.372 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 23:59:16.372 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 23:59:16.358 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-17 23:59:16.373 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 23:59:16.373 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 23:59:16.373 +02:00 [DBG] Start userinfo request
2020-08-17 23:59:16.373 +02:00 [DBG] Bearer token found in header
2020-08-17 23:59:16.373 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 23:59:16.373 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 23:59:16.373 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 23:59:16.373 +02:00 [DBG] Start userinfo request
2020-08-17 23:59:16.373 +02:00 [DBG] Bearer token found in header
2020-08-17 23:59:16.472 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:59:16.473 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:59:16.478 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:59:16.478 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:59:16.539 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:59:16.539 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:59:16.539 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:59:16.539 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:59:16.543 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 23:59:16.543 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 23:59:16.543 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597701555,"exp":1597705155,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597701555,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 23:59:16.543 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597701555,"exp":1597705155,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597701555,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 23:59:16.543 +02:00 [DBG] Creating userinfo response
2020-08-17 23:59:16.543 +02:00 [DBG] Creating userinfo response
2020-08-17 23:59:16.543 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:59:16.543 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:59:16.543 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:59:16.543 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:59:16.552 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:59:16.552 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:59:16.553 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 23:59:16.553 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 23:59:16.553 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:59:16.553 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:59:16.556 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:59:16.556 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:59:16.565 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 23:59:16.565 +02:00 [DBG] End userinfo request
2020-08-17 23:59:16.565 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 23:59:16.565 +02:00 [DBG] End userinfo request
2020-08-17 23:59:16.640 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 23:59:16.640 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 23:59:16.641 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 23:59:16.641 +02:00 [DBG] Start discovery request
2020-08-17 23:59:16.660 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 23:59:16.667 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-17 23:59:16.668 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-17 23:59:16.668 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 23:59:16.668 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-17 23:59:16.668 +02:00 [DBG] Start discovery request
2020-08-17 23:59:16.668 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 23:59:16.668 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 23:59:16.668 +02:00 [DBG] Start key discovery request
2020-08-17 23:59:16.671 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 23:59:16.672 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 23:59:16.672 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 23:59:16.672 +02:00 [DBG] Start userinfo request
2020-08-17 23:59:16.672 +02:00 [DBG] Bearer token found in header
2020-08-17 23:59:16.687 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-17 23:59:16.690 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-17 23:59:16.690 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-17 23:59:16.690 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-17 23:59:16.690 +02:00 [DBG] Start key discovery request
2020-08-17 23:59:16.692 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-17 23:59:16.692 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-17 23:59:16.693 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-17 23:59:16.693 +02:00 [DBG] Start userinfo request
2020-08-17 23:59:16.693 +02:00 [DBG] Bearer token found in header
2020-08-17 23:59:16.726 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:59:16.726 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:59:16.745 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:59:16.745 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:59:16.776 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:59:16.776 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:59:16.780 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 23:59:16.781 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597701555,"exp":1597705155,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597701555,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 23:59:16.781 +02:00 [DBG] Creating userinfo response
2020-08-17 23:59:16.781 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:59:16.781 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:59:16.787 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:59:16.787 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 23:59:16.788 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:59:16.790 +02:00 [DBG] listify.webapp found in database: true
2020-08-17 23:59:16.790 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-17 23:59:16.790 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:59:16.793 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-17 23:59:16.793 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597701555,"exp":1597705155,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597701555,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-17 23:59:16.793 +02:00 [DBG] Creating userinfo response
2020-08-17 23:59:16.794 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:59:16.794 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:59:16.796 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:59:16.797 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-17 23:59:16.797 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-17 23:59:16.798 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 23:59:16.798 +02:00 [DBG] End userinfo request
2020-08-17 23:59:16.799 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-17 23:59:16.803 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-17 23:59:16.803 +02:00 [DBG] End userinfo request
2020-08-18 00:00:44.659 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:00:44.663 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:00:44.664 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:00:44.694 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:00:44.695 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:00:44.695 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:00:44.695 +02:00 [DBG] Start discovery request
2020-08-18 00:00:44.708 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:00:44.819 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:00:44.832 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:00:44.833 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:00:44.833 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:00:44.833 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:00:44.834 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:00:44.834 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:00:44.834 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:00:44.834 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:00:44.834 +02:00 [DBG] Start discovery request
2020-08-18 00:00:44.834 +02:00 [DBG] Start key discovery request
2020-08-18 00:00:44.844 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:00:44.847 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:00:44.847 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:00:44.847 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:00:44.847 +02:00 [DBG] Start key discovery request
2020-08-18 00:00:44.858 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:00:44.865 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:00:44.865 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:00:44.865 +02:00 [DBG] Start userinfo request
2020-08-18 00:00:44.865 +02:00 [DBG] Bearer token found in header
2020-08-18 00:00:44.902 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:00:44.902 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:00:44.910 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:00:44.910 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:00:44.913 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:00:44.913 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597701555,"exp":1597705155,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597701555,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:00:44.913 +02:00 [DBG] Creating userinfo response
2020-08-18 00:00:44.913 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:00:44.913 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:00:44.917 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:00:44.917 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:00:44.917 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:00:44.919 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:00:44.924 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:00:44.924 +02:00 [DBG] End userinfo request
2020-08-18 00:01:34.422 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:01:34.427 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:01:34.427 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:01:34.427 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:01:34.427 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:01:34.427 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:01:34.427 +02:00 [DBG] Start discovery request
2020-08-18 00:01:34.459 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:01:34.586 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:01:34.591 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:01:34.591 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:01:34.592 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:01:34.592 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:01:34.592 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:01:34.592 +02:00 [DBG] Start key discovery request
2020-08-18 00:01:34.644 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:01:34.644 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:01:34.644 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:01:34.644 +02:00 [DBG] Start discovery request
2020-08-18 00:01:34.667 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:01:34.680 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:01:34.680 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:01:34.680 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:01:34.680 +02:00 [DBG] Start key discovery request
2020-08-18 00:01:34.692 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:01:34.692 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:01:34.692 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:01:34.692 +02:00 [DBG] Start userinfo request
2020-08-18 00:01:34.693 +02:00 [DBG] Bearer token found in header
2020-08-18 00:01:34.750 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:01:34.751 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:01:34.765 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:01:34.765 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:01:34.769 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:01:34.769 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597701555,"exp":1597705155,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597701555,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:01:34.769 +02:00 [DBG] Creating userinfo response
2020-08-18 00:01:34.769 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:01:34.770 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:01:34.775 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:01:34.775 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:01:34.776 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:01:34.777 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:01:34.782 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:01:34.782 +02:00 [DBG] End userinfo request
2020-08-18 00:01:39.597 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:01:39.602 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:01:39.602 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:01:39.603 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:01:39.603 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:01:39.603 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:01:39.603 +02:00 [DBG] Start discovery request
2020-08-18 00:01:39.624 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:01:39.922 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:01:39.928 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:01:39.928 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:01:39.929 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:01:39.930 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:01:39.930 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:01:39.930 +02:00 [DBG] Start key discovery request
2020-08-18 00:01:40.745 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:01:40.745 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:01:40.745 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:01:40.746 +02:00 [DBG] Start discovery request
2020-08-18 00:01:40.761 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:01:40.764 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:01:40.764 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:01:40.764 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:01:40.765 +02:00 [DBG] Start key discovery request
2020-08-18 00:01:40.767 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:01:40.768 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:01:40.768 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:01:40.768 +02:00 [DBG] Start userinfo request
2020-08-18 00:01:40.768 +02:00 [DBG] Bearer token found in header
2020-08-18 00:01:40.814 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:01:40.814 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:01:40.885 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:01:40.885 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:01:40.893 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:01:40.893 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597701555,"exp":1597705155,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597701555,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:01:40.894 +02:00 [DBG] Creating userinfo response
2020-08-18 00:01:40.894 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:01:40.894 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:01:40.904 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:01:40.904 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:01:40.904 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:01:40.907 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:01:40.917 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:01:40.917 +02:00 [DBG] End userinfo request
2020-08-18 00:02:47.240 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:02:47.264 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:02:47.267 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:02:47.268 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:02:47.268 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:02:47.268 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:02:47.268 +02:00 [DBG] Start discovery request
2020-08-18 00:02:47.416 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:02:47.883 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:02:47.888 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:02:47.889 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:02:47.890 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:02:47.890 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:02:47.894 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:02:47.896 +02:00 [DBG] Start key discovery request
2020-08-18 00:02:47.988 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:02:47.988 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:02:47.988 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:02:47.988 +02:00 [DBG] Start discovery request
2020-08-18 00:02:48.068 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:02:48.101 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:02:48.101 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:02:48.101 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:02:48.101 +02:00 [DBG] Start key discovery request
2020-08-18 00:02:48.104 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:02:48.105 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:02:48.105 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:02:48.105 +02:00 [DBG] Start userinfo request
2020-08-18 00:02:48.105 +02:00 [DBG] Bearer token found in header
2020-08-18 00:02:48.137 +02:00 [INF] Removing 0 grants
2020-08-18 00:02:48.167 +02:00 [INF] Removing 0 device flow codes
2020-08-18 00:02:48.233 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:02:48.234 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:02:48.320 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:02:48.320 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:02:48.336 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:02:48.337 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597701555,"exp":1597705155,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597701555,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:02:48.337 +02:00 [DBG] Creating userinfo response
2020-08-18 00:02:48.337 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:02:48.337 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:02:48.351 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:02:48.352 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:02:48.352 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:02:48.354 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:02:48.369 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:02:48.369 +02:00 [DBG] End userinfo request
2020-08-18 00:03:51.896 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:03:52.284 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:03:52.284 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:03:52.285 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:03:52.285 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:03:52.285 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:03:52.286 +02:00 [DBG] Start discovery request
2020-08-18 00:03:52.464 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:03:52.530 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:03:52.531 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:03:52.531 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:03:52.532 +02:00 [DBG] Start discovery request
2020-08-18 00:03:52.561 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:03:52.567 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:03:52.567 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:03:52.568 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:03:52.568 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:03:52.568 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:03:52.568 +02:00 [DBG] Start key discovery request
2020-08-18 00:03:52.578 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:03:52.661 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:03:52.662 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:03:52.662 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:03:52.662 +02:00 [DBG] Start key discovery request
2020-08-18 00:03:52.675 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:03:52.677 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:03:52.677 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:03:52.678 +02:00 [DBG] Start userinfo request
2020-08-18 00:03:52.678 +02:00 [DBG] Bearer token found in header
2020-08-18 00:03:52.839 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:03:52.839 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:03:52.933 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:03:52.933 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:03:52.963 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:03:52.963 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597701555,"exp":1597705155,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597701555,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:03:52.964 +02:00 [DBG] Creating userinfo response
2020-08-18 00:03:52.964 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:03:52.964 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:03:52.975 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:03:52.976 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:03:52.977 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:03:53.107 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:03:53.128 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:03:53.129 +02:00 [DBG] End userinfo request
2020-08-18 00:06:14.064 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:06:14.078 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:06:14.078 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:06:14.116 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:06:14.117 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:06:14.117 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:06:14.117 +02:00 [DBG] Start discovery request
2020-08-18 00:06:14.150 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:06:14.210 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:06:14.214 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:06:14.215 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:06:14.217 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:06:14.217 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:06:14.217 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:06:14.217 +02:00 [DBG] Start key discovery request
2020-08-18 00:06:16.227 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:06:16.229 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:06:16.229 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:06:16.229 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:06:16.229 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:06:16.229 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:06:16.229 +02:00 [DBG] Start discovery request
2020-08-18 00:06:16.234 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:06:16.337 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:06:16.338 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:06:16.339 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:06:16.339 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:06:16.339 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:06:16.339 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:06:16.339 +02:00 [DBG] Start key discovery request
2020-08-18 00:06:17.506 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-18 00:06:17.506 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-18 00:06:17.507 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-18 00:06:17.507 +02:00 [DBG] Start authorize request
2020-08-18 00:06:17.507 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-18 00:06:17.507 +02:00 [DBG] Start authorize request protocol validation
2020-08-18 00:06:17.539 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:06:17.540 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:06:17.566 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:06:17.579 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:06:17.581 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:06:17.583 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:06:17.583 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-18 00:06:17.584 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"cGdmTmdabzVFNzVyT1BJaHlNSkVYWnRxR1dQWVpOby1CVzMwX001RER1flZI","UiLocales":null,"Nonce":"cGdmTmdabzVFNzVyT1BJaHlNSkVYWnRxR1dQWVpOby1CVzMwX001RER1flZI","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"5szaMWnuINkz4su26OFzxw","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"cGdmTmdabzVFNzVyT1BJaHlNSkVYWnRxR1dQWVpOby1CVzMwX001RER1flZI","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"cGdmTmdabzVFNzVyT1BJaHlNSkVYWnRxR1dQWVpOby1CVzMwX001RER1flZI"},"$type":"AuthorizeRequestValidationLog"}
2020-08-18 00:06:17.588 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-18 00:06:17.588 +02:00 [DBG] Creating Implicit Flow response.
2020-08-18 00:06:17.589 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-18 00:06:17.589 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-18 00:06:17.597 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-18 00:06:17.597 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-18 00:06:17.599 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****7NJw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****jK1g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000000b-0002-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-17T22:06:17.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-18 00:06:17.624 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"cGdmTmdabzVFNzVyT1BJaHlNSkVYWnRxR1dQWVpOby1CVzMwX001RER1flZI","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-18 00:06:18.224 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:06:18.227 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:06:18.227 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:06:18.228 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:06:18.229 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:06:18.229 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:06:18.229 +02:00 [DBG] Start discovery request
2020-08-18 00:06:18.233 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:06:18.310 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:06:18.313 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:06:18.313 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:06:18.313 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:06:18.313 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:06:18.313 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:06:18.313 +02:00 [DBG] Start key discovery request
2020-08-18 00:06:18.389 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-18 00:06:18.391 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:06:18.391 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:06:18.393 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-18 00:06:18.395 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:06:18.395 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:06:18.395 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:06:18.396 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:06:18.396 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:06:18.396 +02:00 [DBG] Start userinfo request
2020-08-18 00:06:18.396 +02:00 [DBG] Bearer token found in header
2020-08-18 00:06:18.420 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:06:18.420 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:06:18.482 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:06:18.482 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:06:18.486 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:06:18.487 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597701977,"exp":1597705577,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597701555,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:06:18.487 +02:00 [DBG] Creating userinfo response
2020-08-18 00:06:18.487 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:06:18.487 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:06:18.492 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:06:18.492 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:06:18.492 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:06:18.495 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:06:18.495 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:06:18.495 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:06:18.495 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:06:18.495 +02:00 [DBG] Start discovery request
2020-08-18 00:06:18.511 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:06:18.511 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:06:18.511 +02:00 [DBG] End userinfo request
2020-08-18 00:06:18.513 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:06:18.532 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:06:18.532 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:06:18.532 +02:00 [DBG] Start key discovery request
2020-08-18 00:06:18.547 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:06:18.547 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:06:18.547 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:06:18.547 +02:00 [DBG] Start userinfo request
2020-08-18 00:06:18.547 +02:00 [DBG] Bearer token found in header
2020-08-18 00:06:18.560 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:06:18.560 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:06:18.624 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:06:18.624 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:06:18.626 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:06:18.626 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597701977,"exp":1597705577,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597701555,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:06:18.626 +02:00 [DBG] Creating userinfo response
2020-08-18 00:06:18.627 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:06:18.627 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:06:18.628 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:06:18.628 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:06:18.629 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:06:18.630 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:06:18.634 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:06:18.635 +02:00 [DBG] End userinfo request
2020-08-18 00:07:33.831 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:07:33.835 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:07:33.835 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:07:33.843 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:07:33.844 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:07:33.844 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:07:33.844 +02:00 [DBG] Start discovery request
2020-08-18 00:07:33.867 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:07:33.996 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:07:34.033 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:07:34.033 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:07:34.034 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:07:34.044 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:07:34.045 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:07:34.045 +02:00 [DBG] Start key discovery request
2020-08-18 00:07:48.188 +02:00 [INF] Removing 0 grants
2020-08-18 00:07:48.190 +02:00 [INF] Removing 0 device flow codes
2020-08-18 00:07:49.063 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-08-18 00:07:49.067 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-08-18 00:07:49.067 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-08-18 00:07:49.067 +02:00 [DBG] Processing signout request for 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-18 00:07:49.067 +02:00 [DBG] Start end session request validation
2020-08-18 00:07:49.067 +02:00 [DBG] Start identity token validation
2020-08-18 00:07:49.123 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:07:49.123 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:07:49.123 +02:00 [DBG] Client found: listify.webapp / The Listify WebApplication
2020-08-18 00:07:49.128 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:07:49.128 +02:00 [DBG] Token validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597701977,"exp":1597702277,"iss":"http://localhost:5000","aud":"listify.webapp","nonce":"cGdmTmdabzVFNzVyT1BJaHlNSkVYWnRxR1dQWVpOby1CVzMwX001RER1flZI","iat":1597701977,"at_hash":"tADz3T3gpoY28oUjZOXjfA","s_hash":"aqvDL1uyRaa7tid1gFQ9dg","sid":"5szaMWnuINkz4su26OFzxw","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597701555,"idp":"Facebook","amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:07:49.128 +02:00 [INF] End session request validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","PostLogOutUri":"http://localhost:4200","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200"},"$type":"EndSessionRequestValidationLog"}
2020-08-18 00:07:49.128 +02:00 [DBG] Success validating end session request from listify.webapp
2020-08-18 00:07:49.277 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-18 00:07:49.277 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-18 00:07:49.278 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-18 00:07:49.278 +02:00 [INF] {"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"8000000d-0002-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-17T22:07:49.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-18 00:07:49.552 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:07:49.554 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:07:49.554 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:07:49.554 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:07:49.554 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:07:49.554 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:07:49.554 +02:00 [DBG] Start discovery request
2020-08-18 00:07:49.587 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:07:49.687 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:07:49.689 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:07:49.689 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:07:49.689 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:07:49.689 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:07:49.689 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:07:49.689 +02:00 [DBG] Start key discovery request
2020-08-18 00:07:49.789 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-18 00:07:49.789 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-18 00:07:49.789 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-18 00:07:49.789 +02:00 [DBG] Start authorize request
2020-08-18 00:07:49.789 +02:00 [DBG] No user present in authorize request
2020-08-18 00:07:49.789 +02:00 [DBG] Start authorize request protocol validation
2020-08-18 00:07:49.804 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:07:49.804 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:07:49.807 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:07:49.849 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:07:49.852 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:07:49.854 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:07:49.854 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-18 00:07:49.855 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"UjJHTDhTN3RaUFJjZjAzY2p1WFFHNDFZb1hxOUVSV3FTM01YdnRZaEYyRC41","UiLocales":null,"Nonce":"UjJHTDhTN3RaUFJjZjAzY2p1WFFHNDFZb1hxOUVSV3FTM01YdnRZaEYyRC41","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"UjJHTDhTN3RaUFJjZjAzY2p1WFFHNDFZb1hxOUVSV3FTM01YdnRZaEYyRC41","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"UjJHTDhTN3RaUFJjZjAzY2p1WFFHNDFZb1hxOUVSV3FTM01YdnRZaEYyRC41"},"$type":"AuthorizeRequestValidationLog"}
2020-08-18 00:07:49.855 +02:00 [INF] Showing login: User is not authenticated
2020-08-18 00:07:49.923 +02:00 [DBG] Start authorize request protocol validation
2020-08-18 00:07:49.961 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:07:49.961 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:07:49.964 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:07:49.965 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:07:49.967 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:07:49.969 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:07:49.969 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-18 00:07:49.981 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:07:49.981 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:07:51.419 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2020-08-18 00:08:14.702 +02:00 [DBG] Start authorize request protocol validation
2020-08-18 00:08:14.765 +02:00 [DBG] Start authorize request protocol validation
2020-08-18 00:08:14.847 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:08:14.847 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:08:14.856 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:08:14.875 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:08:14.875 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:08:14.877 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:08:14.880 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:08:14.881 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:08:14.900 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:08:14.901 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-18 00:08:14.908 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:08:14.915 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:08:14.943 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:08:14.943 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:08:14.955 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:08:14.955 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-18 00:08:14.982 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:08:14.982 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:08:15.148 +02:00 [DBG] Start authorize request protocol validation
2020-08-18 00:08:15.187 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:08:15.187 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:08:15.193 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:08:15.209 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:08:15.213 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:08:15.215 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:08:15.215 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-18 00:08:15.255 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:08:15.256 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:08:18.414 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-18 00:08:19.527 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-18 00:08:19.564 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000022-0001-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-17T22:08:19.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-18 00:08:19.564 +02:00 [DBG] Augmenting SignInContext
2020-08-18 00:08:19.564 +02:00 [DBG] Adding amr claim with value: external
2020-08-18 00:08:19.565 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-18 00:08:19.565 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-18 00:08:19.572 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-18 00:08:19.573 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-18 00:08:19.573 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-18 00:08:19.573 +02:00 [DBG] Start authorize callback request
2020-08-18 00:08:19.603 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-18 00:08:19.603 +02:00 [DBG] Start authorize request protocol validation
2020-08-18 00:08:19.626 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:08:19.626 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:08:19.630 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:08:19.643 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:08:19.645 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:08:19.647 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:08:19.647 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-18 00:08:19.647 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"UjJHTDhTN3RaUFJjZjAzY2p1WFFHNDFZb1hxOUVSV3FTM01YdnRZaEYyRC41","UiLocales":null,"Nonce":"UjJHTDhTN3RaUFJjZjAzY2p1WFFHNDFZb1hxOUVSV3FTM01YdnRZaEYyRC41","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"o3GrnOI5rjfEPzm2LZqIZw","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"UjJHTDhTN3RaUFJjZjAzY2p1WFFHNDFZb1hxOUVSV3FTM01YdnRZaEYyRC41","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"UjJHTDhTN3RaUFJjZjAzY2p1WFFHNDFZb1hxOUVSV3FTM01YdnRZaEYyRC41"},"$type":"AuthorizeRequestValidationLog"}
2020-08-18 00:08:19.650 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-18 00:08:19.650 +02:00 [DBG] Creating Implicit Flow response.
2020-08-18 00:08:19.650 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-18 00:08:19.650 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-18 00:08:19.656 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-18 00:08:19.656 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-18 00:08:19.657 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****f0pg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****sQAg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000023-0001-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-17T22:08:19.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-18 00:08:19.657 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"UjJHTDhTN3RaUFJjZjAzY2p1WFFHNDFZb1hxOUVSV3FTM01YdnRZaEYyRC41","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-18 00:08:19.657 +02:00 [DBG] Augmenting SignInContext
2020-08-18 00:08:19.657 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-18 00:08:19.827 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:08:19.829 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:08:19.829 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:08:19.829 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:08:19.829 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:08:19.829 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:08:19.829 +02:00 [DBG] Start discovery request
2020-08-18 00:08:19.841 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:08:19.943 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:08:19.945 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:08:19.945 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:08:19.945 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:08:19.945 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:08:19.945 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:08:19.945 +02:00 [DBG] Start key discovery request
2020-08-18 00:08:20.127 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-18 00:08:20.129 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:08:20.129 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:08:20.132 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-18 00:08:20.134 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:08:20.134 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:08:20.134 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:08:20.135 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:08:20.135 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:08:20.135 +02:00 [DBG] Start userinfo request
2020-08-18 00:08:20.135 +02:00 [DBG] Bearer token found in header
2020-08-18 00:08:20.150 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:08:20.150 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:08:20.164 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:08:20.164 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:08:20.167 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:08:20.167 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597702099,"exp":1597705699,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597702099,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:08:20.175 +02:00 [DBG] Creating userinfo response
2020-08-18 00:08:20.175 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:08:20.176 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:08:20.179 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:08:20.180 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:08:20.180 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:08:20.182 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:08:20.186 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:08:20.187 +02:00 [DBG] End userinfo request
2020-08-18 00:08:36.822 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-08-18 00:08:36.822 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-08-18 00:08:36.823 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-08-18 00:08:36.823 +02:00 [DBG] Processing signout request for 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-18 00:08:36.823 +02:00 [DBG] Start end session request validation
2020-08-18 00:08:36.823 +02:00 [DBG] Start identity token validation
2020-08-18 00:08:36.834 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:08:36.834 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:08:36.834 +02:00 [DBG] Client found: listify.webapp / The Listify WebApplication
2020-08-18 00:08:36.836 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:08:36.836 +02:00 [DBG] Token validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597702099,"exp":1597702399,"iss":"http://localhost:5000","aud":"listify.webapp","nonce":"UjJHTDhTN3RaUFJjZjAzY2p1WFFHNDFZb1hxOUVSV3FTM01YdnRZaEYyRC41","iat":1597702099,"at_hash":"ZTYOJ7_gWNJmhZ-0mri7cg","s_hash":"zwEzMqtfHxwnZFY-kmqEbA","sid":"o3GrnOI5rjfEPzm2LZqIZw","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597702099,"idp":"Facebook","amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:08:36.836 +02:00 [INF] End session request validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","PostLogOutUri":"http://localhost:4200","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200"},"$type":"EndSessionRequestValidationLog"}
2020-08-18 00:08:36.836 +02:00 [DBG] Success validating end session request from listify.webapp
2020-08-18 00:08:36.862 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-18 00:08:36.863 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-18 00:08:36.863 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-18 00:08:36.863 +02:00 [INF] {"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"80000025-0001-fe00-b63f-84710c7967bb","TimeStamp":"2020-08-17T22:08:36.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-18 00:08:37.041 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:08:37.043 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:08:37.043 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:08:37.043 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:08:37.043 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:08:37.043 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:08:37.043 +02:00 [DBG] Start discovery request
2020-08-18 00:08:37.047 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:08:37.150 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:08:37.152 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:08:37.152 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:08:37.152 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:08:37.152 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:08:37.153 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:08:37.153 +02:00 [DBG] Start key discovery request
2020-08-18 00:08:50.654 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:08:50.657 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:08:50.657 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:08:50.657 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:08:50.658 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:08:50.658 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:08:50.658 +02:00 [DBG] Start discovery request
2020-08-18 00:08:50.661 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:08:50.776 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:08:50.779 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:08:50.779 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:08:50.779 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:08:50.779 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:08:50.779 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:08:50.779 +02:00 [DBG] Start key discovery request
2020-08-18 00:08:54.545 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:08:54.546 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:08:54.547 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:08:54.547 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:08:54.547 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:08:54.547 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:08:54.547 +02:00 [DBG] Start discovery request
2020-08-18 00:08:54.551 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:08:54.648 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:08:54.650 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:08:54.650 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:08:54.650 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:08:54.651 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:08:54.651 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:08:54.651 +02:00 [DBG] Start key discovery request
2020-08-18 00:08:56.618 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:08:56.620 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:08:56.620 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:08:56.620 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:08:56.620 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:08:56.620 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:08:56.620 +02:00 [DBG] Start discovery request
2020-08-18 00:08:56.624 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:08:56.746 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:08:56.748 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:08:56.748 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:08:56.748 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:08:56.748 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:08:56.749 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:08:56.749 +02:00 [DBG] Start key discovery request
2020-08-18 00:08:59.688 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-18 00:08:59.688 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-18 00:08:59.688 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-18 00:08:59.688 +02:00 [DBG] Start authorize request
2020-08-18 00:08:59.688 +02:00 [DBG] No user present in authorize request
2020-08-18 00:08:59.688 +02:00 [DBG] Start authorize request protocol validation
2020-08-18 00:08:59.700 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:08:59.700 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:08:59.702 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:08:59.704 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:08:59.705 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:08:59.707 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:08:59.707 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-18 00:08:59.707 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"S2NPUXNEd0ZhaVVCa0ZJZ1diSXFIcXdVN1pYRFZKbDdCa0dPejlKSWQwMkNC","UiLocales":null,"Nonce":"S2NPUXNEd0ZhaVVCa0ZJZ1diSXFIcXdVN1pYRFZKbDdCa0dPejlKSWQwMkNC","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"S2NPUXNEd0ZhaVVCa0ZJZ1diSXFIcXdVN1pYRFZKbDdCa0dPejlKSWQwMkNC","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"S2NPUXNEd0ZhaVVCa0ZJZ1diSXFIcXdVN1pYRFZKbDdCa0dPejlKSWQwMkNC"},"$type":"AuthorizeRequestValidationLog"}
2020-08-18 00:08:59.707 +02:00 [INF] Showing login: User is not authenticated
2020-08-18 00:08:59.760 +02:00 [DBG] Start authorize request protocol validation
2020-08-18 00:08:59.773 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:08:59.773 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:08:59.774 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:08:59.776 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:08:59.777 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:08:59.779 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:08:59.780 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-18 00:08:59.787 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:08:59.787 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:09:01.512 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-18 00:09:02.349 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-18 00:09:02.379 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000040-0002-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-17T22:09:02.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-18 00:09:02.379 +02:00 [DBG] Augmenting SignInContext
2020-08-18 00:09:02.379 +02:00 [DBG] Adding amr claim with value: external
2020-08-18 00:09:02.380 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-18 00:09:02.380 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-18 00:09:02.388 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-18 00:09:02.388 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-18 00:09:02.388 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-18 00:09:02.388 +02:00 [DBG] Start authorize callback request
2020-08-18 00:09:02.388 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-18 00:09:02.388 +02:00 [DBG] Start authorize request protocol validation
2020-08-18 00:09:02.399 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:09:02.399 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:09:02.401 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:09:02.403 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:09:02.405 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:09:02.406 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:09:02.407 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-18 00:09:02.407 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"S2NPUXNEd0ZhaVVCa0ZJZ1diSXFIcXdVN1pYRFZKbDdCa0dPejlKSWQwMkNC","UiLocales":null,"Nonce":"S2NPUXNEd0ZhaVVCa0ZJZ1diSXFIcXdVN1pYRFZKbDdCa0dPejlKSWQwMkNC","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"y2mBXrAJiWEYLiIVBOwGqg","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"S2NPUXNEd0ZhaVVCa0ZJZ1diSXFIcXdVN1pYRFZKbDdCa0dPejlKSWQwMkNC","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"S2NPUXNEd0ZhaVVCa0ZJZ1diSXFIcXdVN1pYRFZKbDdCa0dPejlKSWQwMkNC"},"$type":"AuthorizeRequestValidationLog"}
2020-08-18 00:09:02.410 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-18 00:09:02.410 +02:00 [DBG] Creating Implicit Flow response.
2020-08-18 00:09:02.410 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-18 00:09:02.410 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-18 00:09:02.416 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-18 00:09:02.416 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-18 00:09:02.418 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****GmfQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****bBVw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000041-0002-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-17T22:09:02.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-18 00:09:02.418 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"S2NPUXNEd0ZhaVVCa0ZJZ1diSXFIcXdVN1pYRFZKbDdCa0dPejlKSWQwMkNC","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-18 00:09:02.418 +02:00 [DBG] Augmenting SignInContext
2020-08-18 00:09:02.419 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-18 00:09:02.720 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:09:02.722 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:09:02.722 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:09:02.722 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:09:02.722 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:09:02.723 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:09:02.723 +02:00 [DBG] Start discovery request
2020-08-18 00:09:02.726 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:09:02.842 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:09:02.844 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:09:02.844 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:09:02.844 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:09:02.844 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:09:02.844 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:09:02.844 +02:00 [DBG] Start key discovery request
2020-08-18 00:09:02.907 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-18 00:09:02.909 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:09:02.909 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:09:02.910 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-18 00:09:02.912 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:09:02.912 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:09:02.913 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:09:02.913 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:09:02.913 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:09:02.913 +02:00 [DBG] Start userinfo request
2020-08-18 00:09:02.913 +02:00 [DBG] Bearer token found in header
2020-08-18 00:09:02.929 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:09:02.929 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:09:02.941 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:09:02.941 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:09:02.943 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:09:02.944 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597702142,"exp":1597705742,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597702142,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:09:02.944 +02:00 [DBG] Creating userinfo response
2020-08-18 00:09:02.944 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:09:02.944 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:09:02.946 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:09:02.946 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:09:02.946 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:09:02.951 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:09:02.957 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:09:02.957 +02:00 [DBG] End userinfo request
2020-08-18 00:09:22.308 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:09:22.311 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:09:22.311 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:09:22.311 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:09:22.311 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:09:22.311 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:09:22.312 +02:00 [DBG] Start discovery request
2020-08-18 00:09:22.325 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:09:22.496 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:09:22.499 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:09:22.499 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:09:22.499 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:09:22.499 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:09:22.499 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:09:22.499 +02:00 [DBG] Start key discovery request
2020-08-18 00:09:22.552 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:09:22.553 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:09:22.553 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:09:22.553 +02:00 [DBG] Start discovery request
2020-08-18 00:09:22.560 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:09:22.573 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:09:22.573 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:09:22.573 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:09:22.574 +02:00 [DBG] Start key discovery request
2020-08-18 00:09:22.578 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:09:22.579 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:09:22.579 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:09:22.579 +02:00 [DBG] Start userinfo request
2020-08-18 00:09:22.579 +02:00 [DBG] Bearer token found in header
2020-08-18 00:09:22.677 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:09:22.677 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:09:22.712 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:09:22.712 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:09:22.715 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:09:22.715 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597702142,"exp":1597705742,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597702142,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:09:22.715 +02:00 [DBG] Creating userinfo response
2020-08-18 00:09:22.716 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:09:22.716 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:09:22.725 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:09:22.725 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:09:22.725 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:09:22.727 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:09:22.732 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:09:22.732 +02:00 [DBG] End userinfo request
2020-08-18 00:09:27.427 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-08-18 00:09:27.427 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-08-18 00:09:27.427 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-08-18 00:09:27.427 +02:00 [DBG] Processing signout request for 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-18 00:09:27.427 +02:00 [DBG] Start end session request validation
2020-08-18 00:09:27.427 +02:00 [DBG] Start identity token validation
2020-08-18 00:09:27.438 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:09:27.438 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:09:27.438 +02:00 [DBG] Client found: listify.webapp / The Listify WebApplication
2020-08-18 00:09:27.441 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:09:27.442 +02:00 [DBG] Token validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597702142,"exp":1597702442,"iss":"http://localhost:5000","aud":"listify.webapp","nonce":"S2NPUXNEd0ZhaVVCa0ZJZ1diSXFIcXdVN1pYRFZKbDdCa0dPejlKSWQwMkNC","iat":1597702142,"at_hash":"TtIASlRH7c6-LLRiEp3NdQ","s_hash":"VKLPGAgLDbHW-xyq0WCI9g","sid":"y2mBXrAJiWEYLiIVBOwGqg","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597702142,"idp":"Facebook","amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:09:27.442 +02:00 [INF] End session request validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","PostLogOutUri":"http://localhost:4200","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200"},"$type":"EndSessionRequestValidationLog"}
2020-08-18 00:09:27.443 +02:00 [DBG] Success validating end session request from listify.webapp
2020-08-18 00:09:27.473 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-18 00:09:27.473 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-18 00:09:27.474 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-18 00:09:27.475 +02:00 [INF] {"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"80000043-0002-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-17T22:09:27.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-18 00:09:27.740 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:09:27.742 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:09:27.743 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:09:27.743 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:09:27.743 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:09:27.743 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:09:27.743 +02:00 [DBG] Start discovery request
2020-08-18 00:09:27.746 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:09:27.862 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:09:27.864 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:09:27.864 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:09:27.864 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:09:27.864 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:09:27.864 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:09:27.864 +02:00 [DBG] Start key discovery request
2020-08-18 00:09:28.264 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-18 00:09:28.264 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-18 00:09:28.264 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-18 00:09:28.264 +02:00 [DBG] Start authorize request
2020-08-18 00:09:28.264 +02:00 [DBG] No user present in authorize request
2020-08-18 00:09:28.264 +02:00 [DBG] Start authorize request protocol validation
2020-08-18 00:09:28.275 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:09:28.276 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:09:28.277 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:09:28.297 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:09:28.300 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:09:28.302 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:09:28.302 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-18 00:09:28.302 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"aG9Wa24taDhKdE0ubVFsLTFXNENhbHRDZmhTYU44LXJBVmNYSF9lNVdqeWlQ","UiLocales":null,"Nonce":"aG9Wa24taDhKdE0ubVFsLTFXNENhbHRDZmhTYU44LXJBVmNYSF9lNVdqeWlQ","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"aG9Wa24taDhKdE0ubVFsLTFXNENhbHRDZmhTYU44LXJBVmNYSF9lNVdqeWlQ","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"aG9Wa24taDhKdE0ubVFsLTFXNENhbHRDZmhTYU44LXJBVmNYSF9lNVdqeWlQ"},"$type":"AuthorizeRequestValidationLog"}
2020-08-18 00:09:28.302 +02:00 [INF] Showing login: User is not authenticated
2020-08-18 00:09:28.329 +02:00 [DBG] Start authorize request protocol validation
2020-08-18 00:09:28.341 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:09:28.341 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:09:28.344 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:09:28.346 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:09:28.348 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:09:28.349 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:09:28.349 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-18 00:09:28.358 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:09:28.358 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:09:29.581 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-18 00:09:30.785 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-18 00:09:30.824 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000048-0002-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-17T22:09:30.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-18 00:09:30.825 +02:00 [DBG] Augmenting SignInContext
2020-08-18 00:09:30.825 +02:00 [DBG] Adding amr claim with value: external
2020-08-18 00:09:30.825 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-18 00:09:30.825 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-18 00:09:30.832 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-18 00:09:30.832 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-18 00:09:30.832 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-18 00:09:30.832 +02:00 [DBG] Start authorize callback request
2020-08-18 00:09:30.833 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-18 00:09:30.833 +02:00 [DBG] Start authorize request protocol validation
2020-08-18 00:09:30.844 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:09:30.844 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:09:30.846 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:09:30.848 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:09:30.849 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:09:30.851 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:09:30.851 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-18 00:09:30.851 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"aG9Wa24taDhKdE0ubVFsLTFXNENhbHRDZmhTYU44LXJBVmNYSF9lNVdqeWlQ","UiLocales":null,"Nonce":"aG9Wa24taDhKdE0ubVFsLTFXNENhbHRDZmhTYU44LXJBVmNYSF9lNVdqeWlQ","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"-CUKVVjDovajf5BbpyhUxA","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"aG9Wa24taDhKdE0ubVFsLTFXNENhbHRDZmhTYU44LXJBVmNYSF9lNVdqeWlQ","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"aG9Wa24taDhKdE0ubVFsLTFXNENhbHRDZmhTYU44LXJBVmNYSF9lNVdqeWlQ"},"$type":"AuthorizeRequestValidationLog"}
2020-08-18 00:09:30.853 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-18 00:09:30.854 +02:00 [DBG] Creating Implicit Flow response.
2020-08-18 00:09:30.854 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-18 00:09:30.854 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-18 00:09:30.859 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-18 00:09:30.859 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-18 00:09:30.861 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****5nNQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****rkOA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000049-0002-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-17T22:09:30.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-18 00:09:30.861 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"aG9Wa24taDhKdE0ubVFsLTFXNENhbHRDZmhTYU44LXJBVmNYSF9lNVdqeWlQ","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-18 00:09:30.861 +02:00 [DBG] Augmenting SignInContext
2020-08-18 00:09:30.861 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-18 00:09:31.046 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:09:31.048 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:09:31.048 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:09:31.049 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:09:31.049 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:09:31.049 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:09:31.049 +02:00 [DBG] Start discovery request
2020-08-18 00:09:31.052 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:09:31.182 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:09:31.184 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:09:31.184 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:09:31.184 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:09:31.184 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:09:31.184 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:09:31.184 +02:00 [DBG] Start key discovery request
2020-08-18 00:09:31.254 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-18 00:09:31.257 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:09:31.257 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:09:31.259 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-18 00:09:31.262 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:09:31.263 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:09:31.263 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:09:31.264 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:09:31.264 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:09:31.264 +02:00 [DBG] Start userinfo request
2020-08-18 00:09:31.264 +02:00 [DBG] Bearer token found in header
2020-08-18 00:09:31.285 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:09:31.285 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:09:31.300 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:09:31.301 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:09:31.303 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:09:31.303 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597702170,"exp":1597705770,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597702170,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:09:31.304 +02:00 [DBG] Creating userinfo response
2020-08-18 00:09:31.304 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:09:31.304 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:09:31.306 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:09:31.306 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:09:31.306 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:09:31.309 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:09:31.316 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:09:31.316 +02:00 [DBG] End userinfo request
2020-08-18 00:09:31.471 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:09:31.472 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:09:31.472 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:09:31.472 +02:00 [DBG] Start discovery request
2020-08-18 00:09:31.476 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:09:31.479 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:09:31.479 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:09:31.480 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:09:31.480 +02:00 [DBG] Start key discovery request
2020-08-18 00:09:31.482 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:09:31.483 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:09:31.483 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:09:31.483 +02:00 [DBG] Start userinfo request
2020-08-18 00:09:31.483 +02:00 [DBG] Bearer token found in header
2020-08-18 00:09:31.499 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:09:31.499 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:09:31.510 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:09:31.510 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:09:31.514 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:09:31.514 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597702170,"exp":1597705770,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597702170,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:09:31.515 +02:00 [DBG] Creating userinfo response
2020-08-18 00:09:31.515 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:09:31.515 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:09:31.517 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:09:31.517 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:09:31.517 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:09:31.519 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:09:31.523 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:09:31.523 +02:00 [DBG] End userinfo request
2020-08-18 00:11:49.242 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:11:49.260 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:11:49.260 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:11:49.261 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:11:49.261 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:11:49.261 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:11:49.261 +02:00 [DBG] Start discovery request
2020-08-18 00:11:49.387 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:11:49.680 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:11:49.686 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:11:49.686 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:11:49.687 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:11:49.688 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:11:49.688 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:11:49.688 +02:00 [DBG] Start key discovery request
2020-08-18 00:11:49.811 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:11:49.811 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:11:49.811 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:11:49.811 +02:00 [DBG] Start discovery request
2020-08-18 00:11:49.864 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:11:49.877 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:11:49.877 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:11:49.877 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:11:49.877 +02:00 [DBG] Start key discovery request
2020-08-18 00:11:49.947 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:11:49.948 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:11:49.948 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:11:49.948 +02:00 [DBG] Start userinfo request
2020-08-18 00:11:49.948 +02:00 [DBG] Bearer token found in header
2020-08-18 00:11:50.054 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:11:50.054 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:11:50.087 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:11:50.087 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:11:50.095 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:11:50.095 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597702170,"exp":1597705770,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597702170,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:11:50.095 +02:00 [DBG] Creating userinfo response
2020-08-18 00:11:50.095 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:11:50.095 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:11:50.111 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:11:50.111 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:11:50.111 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:11:50.117 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:11:50.125 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:11:50.125 +02:00 [DBG] End userinfo request
2020-08-18 00:12:40.105 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:12:40.119 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:12:40.119 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:12:40.119 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:12:40.119 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:12:40.119 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:12:40.119 +02:00 [DBG] Start discovery request
2020-08-18 00:12:40.131 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:12:40.371 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:12:40.376 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:12:40.378 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:12:40.378 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:12:40.379 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:12:40.379 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:12:40.379 +02:00 [DBG] Start key discovery request
2020-08-18 00:12:40.494 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:12:40.495 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:12:40.495 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:12:40.495 +02:00 [DBG] Start discovery request
2020-08-18 00:12:40.516 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:12:40.529 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:12:40.529 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:12:40.529 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:12:40.529 +02:00 [DBG] Start key discovery request
2020-08-18 00:12:40.608 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:12:40.608 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:12:40.608 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:12:40.608 +02:00 [DBG] Start userinfo request
2020-08-18 00:12:40.608 +02:00 [DBG] Bearer token found in header
2020-08-18 00:12:40.647 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:12:40.647 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:12:40.663 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:12:40.663 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:12:40.667 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:12:40.667 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597702170,"exp":1597705770,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597702170,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:12:40.667 +02:00 [DBG] Creating userinfo response
2020-08-18 00:12:40.668 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:12:40.668 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:12:40.676 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:12:40.677 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:12:40.677 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:12:40.679 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:12:40.687 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:12:40.687 +02:00 [DBG] End userinfo request
2020-08-18 00:12:48.206 +02:00 [INF] Removing 0 grants
2020-08-18 00:12:48.217 +02:00 [INF] Removing 0 device flow codes
2020-08-18 00:13:04.140 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:13:04.142 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:13:04.142 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:13:04.143 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:13:04.143 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:13:04.143 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:13:04.143 +02:00 [DBG] Start discovery request
2020-08-18 00:13:04.147 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:13:04.312 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:13:04.314 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:13:04.314 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:13:04.314 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:13:04.314 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:13:04.315 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:13:04.315 +02:00 [DBG] Start key discovery request
2020-08-18 00:13:04.352 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:13:04.353 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:13:04.353 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:13:04.353 +02:00 [DBG] Start discovery request
2020-08-18 00:13:04.361 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:13:04.376 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:13:04.377 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:13:04.378 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:13:04.378 +02:00 [DBG] Start key discovery request
2020-08-18 00:13:04.384 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:13:04.384 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:13:04.384 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:13:04.384 +02:00 [DBG] Start userinfo request
2020-08-18 00:13:04.385 +02:00 [DBG] Bearer token found in header
2020-08-18 00:13:04.468 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:13:04.468 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:13:04.486 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:13:04.486 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:13:04.488 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:13:04.488 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597702170,"exp":1597705770,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597702170,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:13:04.488 +02:00 [DBG] Creating userinfo response
2020-08-18 00:13:04.489 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:13:04.489 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:13:04.491 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:13:04.491 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:13:04.491 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:13:04.494 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:13:04.497 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:13:04.497 +02:00 [DBG] End userinfo request
2020-08-18 00:14:25.279 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:14:25.309 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:14:25.310 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:14:25.310 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:14:25.310 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:14:25.310 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:14:25.310 +02:00 [DBG] Start discovery request
2020-08-18 00:14:25.332 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:14:25.504 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:14:25.508 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:14:25.516 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:14:25.516 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:14:25.516 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:14:25.516 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:14:25.516 +02:00 [DBG] Start key discovery request
2020-08-18 00:14:25.568 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:14:25.568 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:14:25.568 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:14:25.569 +02:00 [DBG] Start discovery request
2020-08-18 00:14:25.575 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:14:25.588 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:14:25.588 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:14:25.588 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:14:25.588 +02:00 [DBG] Start key discovery request
2020-08-18 00:14:25.639 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:14:25.639 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:14:25.639 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:14:25.640 +02:00 [DBG] Start userinfo request
2020-08-18 00:14:25.640 +02:00 [DBG] Bearer token found in header
2020-08-18 00:14:25.672 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:14:25.672 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:14:25.693 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:14:25.694 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:14:25.697 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:14:25.697 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597702170,"exp":1597705770,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597702170,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:14:25.697 +02:00 [DBG] Creating userinfo response
2020-08-18 00:14:25.697 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:14:25.697 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:14:25.702 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:14:25.702 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:14:25.702 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:14:25.704 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:14:25.710 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:14:25.710 +02:00 [DBG] End userinfo request
2020-08-18 00:14:51.237 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:14:51.250 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:14:51.250 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:14:51.250 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:14:51.250 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:14:51.250 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:14:51.250 +02:00 [DBG] Start discovery request
2020-08-18 00:14:51.269 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:14:51.426 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:14:51.429 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:14:51.430 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:14:51.431 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:14:51.432 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:14:51.432 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:14:51.433 +02:00 [DBG] Start key discovery request
2020-08-18 00:14:51.453 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:14:51.453 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:14:51.453 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:14:51.453 +02:00 [DBG] Start discovery request
2020-08-18 00:14:51.459 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:14:51.737 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:14:51.738 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:14:51.738 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:14:51.738 +02:00 [DBG] Start key discovery request
2020-08-18 00:14:51.739 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:14:51.740 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:14:51.740 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:14:51.740 +02:00 [DBG] Start userinfo request
2020-08-18 00:14:51.740 +02:00 [DBG] Bearer token found in header
2020-08-18 00:14:51.782 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:14:51.782 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:14:51.791 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:14:51.791 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:14:51.794 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:14:51.794 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597702170,"exp":1597705770,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597702170,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:14:51.794 +02:00 [DBG] Creating userinfo response
2020-08-18 00:14:51.794 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:14:51.794 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:14:51.800 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:14:51.800 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:14:51.800 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:14:51.801 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:14:51.805 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:14:51.805 +02:00 [DBG] End userinfo request
2020-08-18 00:14:53.377 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-08-18 00:14:53.378 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-08-18 00:14:53.378 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-08-18 00:14:53.378 +02:00 [DBG] Processing signout request for 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-18 00:14:53.378 +02:00 [DBG] Start end session request validation
2020-08-18 00:14:53.378 +02:00 [DBG] Start identity token validation
2020-08-18 00:14:53.390 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:14:53.390 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:14:53.390 +02:00 [DBG] Client found: listify.webapp / The Listify WebApplication
2020-08-18 00:14:53.392 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:14:53.393 +02:00 [DBG] Token validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597702170,"exp":1597702470,"iss":"http://localhost:5000","aud":"listify.webapp","nonce":"aG9Wa24taDhKdE0ubVFsLTFXNENhbHRDZmhTYU44LXJBVmNYSF9lNVdqeWlQ","iat":1597702170,"at_hash":"A5V4TbTw9EHAXmvHSoQTBg","s_hash":"_pNDiWzu5TsCqXxqMaPz6g","sid":"-CUKVVjDovajf5BbpyhUxA","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597702170,"idp":"Facebook","amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:14:53.393 +02:00 [INF] End session request validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","PostLogOutUri":"http://localhost:4200","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200"},"$type":"EndSessionRequestValidationLog"}
2020-08-18 00:14:53.393 +02:00 [DBG] Success validating end session request from listify.webapp
2020-08-18 00:14:53.419 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-18 00:14:53.419 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-18 00:14:53.419 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-18 00:14:53.419 +02:00 [INF] {"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"8000001d-0004-fc00-b63f-84710c7967bb","TimeStamp":"2020-08-17T22:14:53.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-18 00:14:53.588 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:14:53.590 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:14:53.590 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:14:53.590 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:14:53.590 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:14:53.590 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:14:53.590 +02:00 [DBG] Start discovery request
2020-08-18 00:14:53.595 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:14:53.702 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:14:53.704 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:14:53.704 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:14:53.705 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:14:53.705 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:14:53.705 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:14:53.705 +02:00 [DBG] Start key discovery request
2020-08-18 00:14:55.151 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-18 00:14:55.151 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-18 00:14:55.151 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-18 00:14:55.151 +02:00 [DBG] Start authorize request
2020-08-18 00:14:55.151 +02:00 [DBG] No user present in authorize request
2020-08-18 00:14:55.151 +02:00 [DBG] Start authorize request protocol validation
2020-08-18 00:14:55.162 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:14:55.162 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:14:55.164 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:14:55.178 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:14:55.181 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:14:55.183 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:14:55.183 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-18 00:14:55.183 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"SGo4TXpIVkRGZ1FuRmJuUFouNWtGOUZLYXRJVTliYlMtQVM4Ny1NNXVacGR2","UiLocales":null,"Nonce":"SGo4TXpIVkRGZ1FuRmJuUFouNWtGOUZLYXRJVTliYlMtQVM4Ny1NNXVacGR2","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"SGo4TXpIVkRGZ1FuRmJuUFouNWtGOUZLYXRJVTliYlMtQVM4Ny1NNXVacGR2","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"SGo4TXpIVkRGZ1FuRmJuUFouNWtGOUZLYXRJVTliYlMtQVM4Ny1NNXVacGR2"},"$type":"AuthorizeRequestValidationLog"}
2020-08-18 00:14:55.183 +02:00 [INF] Showing login: User is not authenticated
2020-08-18 00:14:55.231 +02:00 [DBG] Start authorize request protocol validation
2020-08-18 00:14:55.245 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:14:55.245 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:14:55.247 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:14:55.249 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:14:55.252 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:14:55.254 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:14:55.255 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-18 00:14:55.263 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:14:55.264 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:14:57.122 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-18 00:14:58.408 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-18 00:14:58.446 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000022-0004-fc00-b63f-84710c7967bb","TimeStamp":"2020-08-17T22:14:58.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-18 00:14:58.446 +02:00 [DBG] Augmenting SignInContext
2020-08-18 00:14:58.446 +02:00 [DBG] Adding amr claim with value: external
2020-08-18 00:14:58.447 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-18 00:14:58.447 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-18 00:14:58.455 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-18 00:14:58.455 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-18 00:14:58.455 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-18 00:14:58.455 +02:00 [DBG] Start authorize callback request
2020-08-18 00:14:58.455 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-18 00:14:58.455 +02:00 [DBG] Start authorize request protocol validation
2020-08-18 00:14:58.465 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:14:58.465 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:14:58.467 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:14:58.469 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:14:58.471 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:14:58.472 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:14:58.472 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-18 00:14:58.473 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"SGo4TXpIVkRGZ1FuRmJuUFouNWtGOUZLYXRJVTliYlMtQVM4Ny1NNXVacGR2","UiLocales":null,"Nonce":"SGo4TXpIVkRGZ1FuRmJuUFouNWtGOUZLYXRJVTliYlMtQVM4Ny1NNXVacGR2","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"it5aYzwoHoMmPp0v7kZn2A","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"SGo4TXpIVkRGZ1FuRmJuUFouNWtGOUZLYXRJVTliYlMtQVM4Ny1NNXVacGR2","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"SGo4TXpIVkRGZ1FuRmJuUFouNWtGOUZLYXRJVTliYlMtQVM4Ny1NNXVacGR2"},"$type":"AuthorizeRequestValidationLog"}
2020-08-18 00:14:58.475 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-18 00:14:58.475 +02:00 [DBG] Creating Implicit Flow response.
2020-08-18 00:14:58.475 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-18 00:14:58.475 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-18 00:14:58.479 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-18 00:14:58.479 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-18 00:14:58.480 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****sQnw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****qO8g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000023-0004-fc00-b63f-84710c7967bb","TimeStamp":"2020-08-17T22:14:58.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-18 00:14:58.480 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"SGo4TXpIVkRGZ1FuRmJuUFouNWtGOUZLYXRJVTliYlMtQVM4Ny1NNXVacGR2","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-18 00:14:58.480 +02:00 [DBG] Augmenting SignInContext
2020-08-18 00:14:58.481 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-18 00:14:58.677 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:14:58.678 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:14:58.679 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:14:58.679 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:14:58.679 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:14:58.679 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:14:58.679 +02:00 [DBG] Start discovery request
2020-08-18 00:14:58.683 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:14:58.778 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:14:58.779 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:14:58.780 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:14:58.780 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:14:58.780 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:14:58.780 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:14:58.780 +02:00 [DBG] Start key discovery request
2020-08-18 00:14:58.841 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-18 00:14:58.843 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:14:58.844 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:14:58.845 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-18 00:14:58.847 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:14:58.847 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:14:58.847 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:14:58.848 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:14:58.848 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:14:58.848 +02:00 [DBG] Start userinfo request
2020-08-18 00:14:58.848 +02:00 [DBG] Bearer token found in header
2020-08-18 00:14:58.862 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:14:58.862 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:14:58.877 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:14:58.877 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:14:58.880 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:14:58.880 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597702498,"exp":1597706098,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597702498,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:14:58.880 +02:00 [DBG] Creating userinfo response
2020-08-18 00:14:58.880 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:14:58.880 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:14:58.882 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:14:58.882 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:14:58.883 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:14:58.884 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:14:58.890 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:14:58.890 +02:00 [DBG] End userinfo request
2020-08-18 00:14:58.946 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:14:58.947 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:14:58.947 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:14:58.947 +02:00 [DBG] Start discovery request
2020-08-18 00:14:58.951 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:14:58.964 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:14:58.964 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:14:58.964 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:14:58.964 +02:00 [DBG] Start key discovery request
2020-08-18 00:14:58.965 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:14:58.966 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:14:58.966 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:14:58.966 +02:00 [DBG] Start userinfo request
2020-08-18 00:14:58.966 +02:00 [DBG] Bearer token found in header
2020-08-18 00:14:58.992 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:14:58.992 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:14:59.003 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:14:59.003 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:14:59.007 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:14:59.007 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597702498,"exp":1597706098,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597702498,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:14:59.007 +02:00 [DBG] Creating userinfo response
2020-08-18 00:14:59.007 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:14:59.007 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:14:59.009 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:14:59.010 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:14:59.010 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:14:59.011 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:14:59.014 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:14:59.014 +02:00 [DBG] End userinfo request
2020-08-18 00:15:17.351 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:15:17.353 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:15:17.353 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:15:17.353 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:15:17.353 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:15:17.353 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:15:17.353 +02:00 [DBG] Start discovery request
2020-08-18 00:15:17.360 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:15:17.518 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:15:17.522 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:15:17.523 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:15:17.524 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:15:17.524 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:15:17.524 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:15:17.524 +02:00 [DBG] Start key discovery request
2020-08-18 00:15:17.562 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:15:17.562 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:15:17.562 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:15:17.562 +02:00 [DBG] Start discovery request
2020-08-18 00:15:17.567 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:15:17.576 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:15:17.577 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:15:17.577 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:15:17.577 +02:00 [DBG] Start key discovery request
2020-08-18 00:15:17.578 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:15:17.578 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:15:17.579 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:15:17.579 +02:00 [DBG] Start userinfo request
2020-08-18 00:15:17.579 +02:00 [DBG] Bearer token found in header
2020-08-18 00:15:17.593 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:15:17.593 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:15:17.608 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:15:17.608 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:15:17.611 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:15:17.611 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597702498,"exp":1597706098,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597702498,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:15:17.611 +02:00 [DBG] Creating userinfo response
2020-08-18 00:15:17.611 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:15:17.611 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:15:17.614 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:15:17.614 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:15:17.614 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:15:17.616 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:15:17.619 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:15:17.619 +02:00 [DBG] End userinfo request
2020-08-18 00:17:48.255 +02:00 [INF] Removing 0 grants
2020-08-18 00:17:48.262 +02:00 [INF] Removing 0 device flow codes
2020-08-18 00:18:23.093 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:18:23.114 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:18:23.114 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:18:23.115 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:18:23.115 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:18:23.115 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:18:23.115 +02:00 [DBG] Start discovery request
2020-08-18 00:18:23.188 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:18:23.500 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:18:23.520 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:18:23.520 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:18:23.520 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:18:23.521 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:18:23.521 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:18:23.521 +02:00 [DBG] Start key discovery request
2020-08-18 00:18:23.544 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:18:23.544 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:18:23.544 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:18:23.544 +02:00 [DBG] Start discovery request
2020-08-18 00:18:23.549 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:18:23.560 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:18:23.560 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:18:23.560 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:18:23.560 +02:00 [DBG] Start key discovery request
2020-08-18 00:18:23.562 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:18:23.780 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:18:23.780 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:18:23.780 +02:00 [DBG] Start userinfo request
2020-08-18 00:18:23.780 +02:00 [DBG] Bearer token found in header
2020-08-18 00:18:23.845 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:18:23.845 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:18:23.854 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:18:23.855 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:18:23.859 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:18:23.859 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597702498,"exp":1597706098,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597702498,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:18:23.859 +02:00 [DBG] Creating userinfo response
2020-08-18 00:18:23.859 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:18:23.859 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:18:23.865 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:18:23.865 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:18:23.865 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:18:23.867 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:18:23.877 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:18:23.877 +02:00 [DBG] End userinfo request
2020-08-18 00:18:33.463 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:18:33.466 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:18:33.466 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:18:33.468 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:18:33.469 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:18:33.469 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:18:33.469 +02:00 [DBG] Start discovery request
2020-08-18 00:18:33.511 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:18:34.128 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:18:34.130 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:18:34.130 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:18:34.130 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:18:34.131 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:18:34.131 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:18:34.131 +02:00 [DBG] Start key discovery request
2020-08-18 00:18:34.172 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:18:34.172 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:18:34.172 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:18:34.173 +02:00 [DBG] Start discovery request
2020-08-18 00:18:34.177 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:18:34.179 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:18:34.179 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:18:34.179 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:18:34.179 +02:00 [DBG] Start key discovery request
2020-08-18 00:18:34.182 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:18:34.182 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:18:34.182 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:18:34.182 +02:00 [DBG] Start userinfo request
2020-08-18 00:18:34.182 +02:00 [DBG] Bearer token found in header
2020-08-18 00:18:34.197 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:18:34.197 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:18:34.212 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:18:34.212 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:18:34.215 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:18:34.215 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597702498,"exp":1597706098,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597702498,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:18:34.215 +02:00 [DBG] Creating userinfo response
2020-08-18 00:18:34.215 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:18:34.215 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:18:34.223 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:18:34.223 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:18:34.224 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:18:34.227 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:18:34.230 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:18:34.231 +02:00 [DBG] End userinfo request
2020-08-18 00:18:46.340 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-08-18 00:18:46.340 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-08-18 00:18:46.340 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-08-18 00:18:46.340 +02:00 [DBG] Processing signout request for 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-18 00:18:46.341 +02:00 [DBG] Start end session request validation
2020-08-18 00:18:46.341 +02:00 [DBG] Start identity token validation
2020-08-18 00:18:46.354 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:18:46.354 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:18:46.354 +02:00 [DBG] Client found: listify.webapp / The Listify WebApplication
2020-08-18 00:18:46.356 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:18:46.356 +02:00 [DBG] Token validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597702498,"exp":1597702798,"iss":"http://localhost:5000","aud":"listify.webapp","nonce":"SGo4TXpIVkRGZ1FuRmJuUFouNWtGOUZLYXRJVTliYlMtQVM4Ny1NNXVacGR2","iat":1597702498,"at_hash":"YFbpdxZJD82W2OrQcG2lNQ","s_hash":"QX51fmM8_OdRoq20XO8tDA","sid":"it5aYzwoHoMmPp0v7kZn2A","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597702498,"idp":"Facebook","amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:18:46.356 +02:00 [INF] End session request validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","PostLogOutUri":"http://localhost:4200","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200"},"$type":"EndSessionRequestValidationLog"}
2020-08-18 00:18:46.356 +02:00 [DBG] Success validating end session request from listify.webapp
2020-08-18 00:18:46.386 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-18 00:18:46.386 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-18 00:18:46.386 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-18 00:18:46.386 +02:00 [INF] {"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"8000000d-0000-fb00-b63f-84710c7967bb","TimeStamp":"2020-08-17T22:18:46.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-18 00:18:46.549 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:18:46.552 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:18:46.552 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:18:46.552 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:18:46.553 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:18:46.553 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:18:46.553 +02:00 [DBG] Start discovery request
2020-08-18 00:18:46.556 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:18:46.657 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:18:46.659 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:18:46.659 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:18:46.660 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:18:46.660 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:18:46.660 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:18:46.660 +02:00 [DBG] Start key discovery request
2020-08-18 00:18:48.944 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-18 00:18:48.944 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-18 00:18:48.944 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-18 00:18:48.944 +02:00 [DBG] Start authorize request
2020-08-18 00:18:48.945 +02:00 [DBG] No user present in authorize request
2020-08-18 00:18:48.945 +02:00 [DBG] Start authorize request protocol validation
2020-08-18 00:18:48.958 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:18:48.958 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:18:48.960 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:18:48.974 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:18:48.976 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:18:48.977 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:18:48.977 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-18 00:18:48.977 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"by1WLUdJRkpOUEp5T0JNd1BzY3Eta3ZOQmlMdkd6X2F5RFNvc2lXVmlzNktZ","UiLocales":null,"Nonce":"by1WLUdJRkpOUEp5T0JNd1BzY3Eta3ZOQmlMdkd6X2F5RFNvc2lXVmlzNktZ","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"by1WLUdJRkpOUEp5T0JNd1BzY3Eta3ZOQmlMdkd6X2F5RFNvc2lXVmlzNktZ","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"by1WLUdJRkpOUEp5T0JNd1BzY3Eta3ZOQmlMdkd6X2F5RFNvc2lXVmlzNktZ"},"$type":"AuthorizeRequestValidationLog"}
2020-08-18 00:18:48.977 +02:00 [INF] Showing login: User is not authenticated
2020-08-18 00:18:49.003 +02:00 [DBG] Start authorize request protocol validation
2020-08-18 00:18:49.013 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:18:49.013 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:18:49.015 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:18:49.016 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:18:49.020 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:18:49.021 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:18:49.021 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-18 00:18:49.029 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:18:49.029 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:18:50.438 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-18 00:18:51.596 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-18 00:18:51.626 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000012-0000-fb00-b63f-84710c7967bb","TimeStamp":"2020-08-17T22:18:51.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-18 00:18:51.626 +02:00 [DBG] Augmenting SignInContext
2020-08-18 00:18:51.626 +02:00 [DBG] Adding amr claim with value: external
2020-08-18 00:18:51.627 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-18 00:18:51.627 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-18 00:18:51.632 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-18 00:18:51.632 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-18 00:18:51.632 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-18 00:18:51.632 +02:00 [DBG] Start authorize callback request
2020-08-18 00:18:51.632 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-18 00:18:51.632 +02:00 [DBG] Start authorize request protocol validation
2020-08-18 00:18:51.643 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:18:51.643 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:18:51.644 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:18:51.645 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:18:51.647 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:18:51.648 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:18:51.648 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-18 00:18:51.648 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"by1WLUdJRkpOUEp5T0JNd1BzY3Eta3ZOQmlMdkd6X2F5RFNvc2lXVmlzNktZ","UiLocales":null,"Nonce":"by1WLUdJRkpOUEp5T0JNd1BzY3Eta3ZOQmlMdkd6X2F5RFNvc2lXVmlzNktZ","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"vKI2j3W5gIHbCEiQJvRhow","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"by1WLUdJRkpOUEp5T0JNd1BzY3Eta3ZOQmlMdkd6X2F5RFNvc2lXVmlzNktZ","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"by1WLUdJRkpOUEp5T0JNd1BzY3Eta3ZOQmlMdkd6X2F5RFNvc2lXVmlzNktZ"},"$type":"AuthorizeRequestValidationLog"}
2020-08-18 00:18:51.650 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-18 00:18:51.650 +02:00 [DBG] Creating Implicit Flow response.
2020-08-18 00:18:51.650 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-18 00:18:51.650 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-18 00:18:51.655 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-18 00:18:51.655 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-18 00:18:51.656 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****ToKA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****qvOQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000013-0000-fb00-b63f-84710c7967bb","TimeStamp":"2020-08-17T22:18:51.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-18 00:18:51.743 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"by1WLUdJRkpOUEp5T0JNd1BzY3Eta3ZOQmlMdkd6X2F5RFNvc2lXVmlzNktZ","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-18 00:18:51.744 +02:00 [DBG] Augmenting SignInContext
2020-08-18 00:18:51.744 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-18 00:18:51.953 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:18:51.955 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:18:51.955 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:18:51.956 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:18:51.956 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:18:51.956 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:18:51.956 +02:00 [DBG] Start discovery request
2020-08-18 00:18:51.959 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:18:52.059 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:18:52.061 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:18:52.061 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:18:52.061 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:18:52.061 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:18:52.061 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:18:52.061 +02:00 [DBG] Start key discovery request
2020-08-18 00:18:52.123 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-18 00:18:52.126 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:18:52.126 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:18:52.127 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-18 00:18:52.129 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:18:52.130 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:18:52.130 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:18:52.130 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:18:52.130 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:18:52.130 +02:00 [DBG] Start userinfo request
2020-08-18 00:18:52.130 +02:00 [DBG] Bearer token found in header
2020-08-18 00:18:52.145 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:18:52.145 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:18:52.159 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:18:52.159 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:18:52.161 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:18:52.161 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597702731,"exp":1597706331,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597702731,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:18:52.161 +02:00 [DBG] Creating userinfo response
2020-08-18 00:18:52.161 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:18:52.162 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:18:52.163 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:18:52.164 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:18:52.164 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:18:52.166 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:18:52.169 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:18:52.169 +02:00 [DBG] End userinfo request
2020-08-18 00:18:52.231 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:18:52.231 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:18:52.231 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:18:52.231 +02:00 [DBG] Start discovery request
2020-08-18 00:18:52.234 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:18:52.247 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:18:52.248 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:18:52.248 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:18:52.248 +02:00 [DBG] Start key discovery request
2020-08-18 00:18:52.258 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:18:52.258 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:18:52.258 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:18:52.259 +02:00 [DBG] Start userinfo request
2020-08-18 00:18:52.259 +02:00 [DBG] Bearer token found in header
2020-08-18 00:18:52.267 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:18:52.267 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:18:52.276 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:18:52.276 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:18:52.278 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:18:52.278 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597702731,"exp":1597706331,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597702731,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:18:52.278 +02:00 [DBG] Creating userinfo response
2020-08-18 00:18:52.278 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:18:52.278 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:18:52.280 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:18:52.280 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:18:52.280 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:18:52.281 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:18:52.283 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:18:52.283 +02:00 [DBG] End userinfo request
2020-08-18 00:22:09.276 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-08-18 00:22:09.276 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-08-18 00:22:09.276 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-08-18 00:22:09.276 +02:00 [DBG] Processing signout request for 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-18 00:22:09.276 +02:00 [DBG] Start end session request validation
2020-08-18 00:22:09.276 +02:00 [DBG] Start identity token validation
2020-08-18 00:22:09.331 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:22:09.331 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:22:09.331 +02:00 [DBG] Client found: listify.webapp / The Listify WebApplication
2020-08-18 00:22:09.336 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:22:09.336 +02:00 [DBG] Token validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597702731,"exp":1597703031,"iss":"http://localhost:5000","aud":"listify.webapp","nonce":"by1WLUdJRkpOUEp5T0JNd1BzY3Eta3ZOQmlMdkd6X2F5RFNvc2lXVmlzNktZ","iat":1597702731,"at_hash":"NX92MqzeQQUJyKvA57lmzg","s_hash":"NXbo_N060Gc8XTk458xh3A","sid":"vKI2j3W5gIHbCEiQJvRhow","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597702731,"idp":"Facebook","amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:22:09.336 +02:00 [INF] End session request validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","PostLogOutUri":"http://localhost:4200","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200"},"$type":"EndSessionRequestValidationLog"}
2020-08-18 00:22:09.336 +02:00 [DBG] Success validating end session request from listify.webapp
2020-08-18 00:22:09.364 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-18 00:22:09.364 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-18 00:22:09.364 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-18 00:22:09.364 +02:00 [INF] {"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"80000005-0000-fa00-b63f-84710c7967bb","TimeStamp":"2020-08-17T22:22:09.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-18 00:22:09.537 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:22:09.539 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:22:09.539 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:22:09.539 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:22:09.539 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:22:09.539 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:22:09.539 +02:00 [DBG] Start discovery request
2020-08-18 00:22:09.552 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:22:09.660 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:22:09.662 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:22:09.662 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:22:09.663 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:22:09.663 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:22:09.663 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:22:09.663 +02:00 [DBG] Start key discovery request
2020-08-18 00:22:09.979 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-18 00:22:09.979 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-18 00:22:09.979 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-18 00:22:09.979 +02:00 [DBG] Start authorize request
2020-08-18 00:22:09.979 +02:00 [DBG] No user present in authorize request
2020-08-18 00:22:09.979 +02:00 [DBG] Start authorize request protocol validation
2020-08-18 00:22:09.993 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:22:09.993 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:22:09.996 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:22:10.010 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:22:10.012 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:22:10.013 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:22:10.013 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-18 00:22:10.014 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"MTlmdEl0bGh5aVhBcU1uT1gwUS1rZH4yVXhKYU9KOFc1VzV-SURPSE5nNE1Y","UiLocales":null,"Nonce":"MTlmdEl0bGh5aVhBcU1uT1gwUS1rZH4yVXhKYU9KOFc1VzV-SURPSE5nNE1Y","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"MTlmdEl0bGh5aVhBcU1uT1gwUS1rZH4yVXhKYU9KOFc1VzV-SURPSE5nNE1Y","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"MTlmdEl0bGh5aVhBcU1uT1gwUS1rZH4yVXhKYU9KOFc1VzV-SURPSE5nNE1Y"},"$type":"AuthorizeRequestValidationLog"}
2020-08-18 00:22:10.014 +02:00 [INF] Showing login: User is not authenticated
2020-08-18 00:22:10.038 +02:00 [DBG] Start authorize request protocol validation
2020-08-18 00:22:10.051 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:22:10.051 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:22:10.055 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:22:10.056 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:22:10.058 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:22:10.060 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:22:10.060 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-18 00:22:10.071 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:22:10.071 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:22:11.533 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-18 00:22:12.789 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-18 00:22:12.845 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"8000000a-0000-fa00-b63f-84710c7967bb","TimeStamp":"2020-08-17T22:22:12.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-18 00:22:12.846 +02:00 [DBG] Augmenting SignInContext
2020-08-18 00:22:12.846 +02:00 [DBG] Adding amr claim with value: external
2020-08-18 00:22:12.846 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-18 00:22:12.846 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-18 00:22:12.861 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-18 00:22:12.861 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-18 00:22:12.862 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-18 00:22:12.862 +02:00 [DBG] Start authorize callback request
2020-08-18 00:22:12.862 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-18 00:22:12.862 +02:00 [DBG] Start authorize request protocol validation
2020-08-18 00:22:12.876 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:22:12.876 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:22:12.878 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:22:12.879 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:22:12.881 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:22:12.882 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:22:12.883 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-18 00:22:12.883 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"MTlmdEl0bGh5aVhBcU1uT1gwUS1rZH4yVXhKYU9KOFc1VzV-SURPSE5nNE1Y","UiLocales":null,"Nonce":"MTlmdEl0bGh5aVhBcU1uT1gwUS1rZH4yVXhKYU9KOFc1VzV-SURPSE5nNE1Y","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"apgXMhGrShXoAw46SklMNg","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"MTlmdEl0bGh5aVhBcU1uT1gwUS1rZH4yVXhKYU9KOFc1VzV-SURPSE5nNE1Y","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"MTlmdEl0bGh5aVhBcU1uT1gwUS1rZH4yVXhKYU9KOFc1VzV-SURPSE5nNE1Y"},"$type":"AuthorizeRequestValidationLog"}
2020-08-18 00:22:12.885 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-18 00:22:12.885 +02:00 [DBG] Creating Implicit Flow response.
2020-08-18 00:22:12.885 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-18 00:22:12.885 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-18 00:22:12.890 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-18 00:22:12.890 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-18 00:22:12.892 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****-Cgw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****oQQg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000000b-0000-fa00-b63f-84710c7967bb","TimeStamp":"2020-08-17T22:22:12.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-18 00:22:12.892 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"MTlmdEl0bGh5aVhBcU1uT1gwUS1rZH4yVXhKYU9KOFc1VzV-SURPSE5nNE1Y","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-18 00:22:12.892 +02:00 [DBG] Augmenting SignInContext
2020-08-18 00:22:12.892 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-18 00:22:13.089 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:22:13.091 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:22:13.091 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:22:13.091 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:22:13.091 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:22:13.091 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:22:13.091 +02:00 [DBG] Start discovery request
2020-08-18 00:22:13.095 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:22:13.192 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:22:13.193 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:22:13.194 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:22:13.194 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:22:13.194 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:22:13.194 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:22:13.194 +02:00 [DBG] Start key discovery request
2020-08-18 00:22:13.260 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-18 00:22:13.262 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:22:13.262 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:22:13.293 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-18 00:22:13.295 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:22:13.295 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:22:13.296 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:22:13.296 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:22:13.296 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:22:13.296 +02:00 [DBG] Start userinfo request
2020-08-18 00:22:13.296 +02:00 [DBG] Bearer token found in header
2020-08-18 00:22:13.313 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:22:13.313 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:22:13.326 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:22:13.326 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:22:13.329 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:22:13.330 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597702932,"exp":1597706532,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597702932,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:22:13.330 +02:00 [DBG] Creating userinfo response
2020-08-18 00:22:13.330 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:22:13.330 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:22:13.333 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:22:13.333 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:22:13.333 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:22:13.335 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:22:13.341 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:22:13.341 +02:00 [DBG] End userinfo request
2020-08-18 00:22:13.372 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:22:13.373 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:22:13.373 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:22:13.373 +02:00 [DBG] Start discovery request
2020-08-18 00:22:13.378 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:22:13.400 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:22:13.401 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:22:13.401 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:22:13.401 +02:00 [DBG] Start key discovery request
2020-08-18 00:22:13.411 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:22:13.411 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:22:13.412 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:22:13.412 +02:00 [DBG] Start userinfo request
2020-08-18 00:22:13.412 +02:00 [DBG] Bearer token found in header
2020-08-18 00:22:13.420 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:22:13.421 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:22:13.430 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:22:13.430 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:22:13.432 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:22:13.433 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597702932,"exp":1597706532,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597702932,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:22:13.433 +02:00 [DBG] Creating userinfo response
2020-08-18 00:22:13.433 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:22:13.433 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:22:13.434 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:22:13.434 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:22:13.434 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:22:13.436 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:22:13.442 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:22:13.442 +02:00 [DBG] End userinfo request
2020-08-18 00:23:44.795 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:23:44.824 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:23:44.824 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:23:44.832 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:23:44.832 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:23:44.840 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:23:44.840 +02:00 [DBG] Start discovery request
2020-08-18 00:23:44.929 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:23:44.931 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:23:44.931 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:23:44.931 +02:00 [DBG] Start discovery request
2020-08-18 00:23:44.944 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:23:44.949 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:23:44.950 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:23:44.951 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:23:44.951 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:23:44.951 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:23:44.951 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:23:44.951 +02:00 [DBG] Start key discovery request
2020-08-18 00:23:45.123 +02:00 [INF] Removing 0 grants
2020-08-18 00:23:45.125 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:23:45.126 +02:00 [INF] Removing 0 device flow codes
2020-08-18 00:23:45.136 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:23:45.136 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:23:45.136 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:23:45.137 +02:00 [DBG] Start key discovery request
2020-08-18 00:23:45.138 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:23:45.138 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:23:45.138 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:23:45.138 +02:00 [DBG] Start userinfo request
2020-08-18 00:23:45.138 +02:00 [DBG] Bearer token found in header
2020-08-18 00:23:45.162 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:23:45.162 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:23:45.172 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:23:45.172 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:23:45.175 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:23:45.176 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597702932,"exp":1597706532,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597702932,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:23:45.176 +02:00 [DBG] Creating userinfo response
2020-08-18 00:23:45.176 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:23:45.176 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:23:45.181 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:23:45.181 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:23:45.181 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:23:45.184 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:23:45.190 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:23:45.190 +02:00 [DBG] End userinfo request
2020-08-18 00:24:11.625 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:24:11.629 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:24:11.629 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:24:11.636 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:24:11.636 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:24:11.636 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:24:11.636 +02:00 [DBG] Start discovery request
2020-08-18 00:24:11.657 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:24:11.814 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:24:11.815 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:24:11.816 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:24:11.816 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:24:11.816 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:24:11.816 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:24:11.816 +02:00 [DBG] Start key discovery request
2020-08-18 00:24:11.857 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:24:11.857 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:24:11.858 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:24:11.858 +02:00 [DBG] Start discovery request
2020-08-18 00:24:11.863 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:24:11.884 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:24:11.884 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:24:11.884 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:24:11.884 +02:00 [DBG] Start key discovery request
2020-08-18 00:24:11.887 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:24:11.887 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:24:11.887 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:24:11.887 +02:00 [DBG] Start userinfo request
2020-08-18 00:24:11.887 +02:00 [DBG] Bearer token found in header
2020-08-18 00:24:11.945 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:24:11.945 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:24:11.953 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:24:11.953 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:24:11.963 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:24:11.963 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597702932,"exp":1597706532,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597702932,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:24:11.963 +02:00 [DBG] Creating userinfo response
2020-08-18 00:24:11.963 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:24:11.963 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:24:11.966 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:24:11.966 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:24:11.966 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:24:11.968 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:24:11.971 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:24:11.971 +02:00 [DBG] End userinfo request
2020-08-18 00:24:20.570 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-08-18 00:24:20.570 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-08-18 00:24:20.570 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-08-18 00:24:20.570 +02:00 [DBG] Processing signout request for 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-18 00:24:20.570 +02:00 [DBG] Start end session request validation
2020-08-18 00:24:20.571 +02:00 [DBG] Start identity token validation
2020-08-18 00:24:20.582 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:24:20.582 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:24:20.583 +02:00 [DBG] Client found: listify.webapp / The Listify WebApplication
2020-08-18 00:24:20.721 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:24:20.721 +02:00 [DBG] Token validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597702932,"exp":1597703232,"iss":"http://localhost:5000","aud":"listify.webapp","nonce":"MTlmdEl0bGh5aVhBcU1uT1gwUS1rZH4yVXhKYU9KOFc1VzV-SURPSE5nNE1Y","iat":1597702932,"at_hash":"vHJf7BCnOKPaYj7eymhqMg","s_hash":"kfMkuJQW5FMtfZ9GEsEh3g","sid":"apgXMhGrShXoAw46SklMNg","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597702932,"idp":"Facebook","amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:24:20.722 +02:00 [INF] End session request validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","PostLogOutUri":"http://localhost:4200","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200"},"$type":"EndSessionRequestValidationLog"}
2020-08-18 00:24:20.722 +02:00 [DBG] Success validating end session request from listify.webapp
2020-08-18 00:24:20.745 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-18 00:24:20.745 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-18 00:24:20.745 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-18 00:24:20.745 +02:00 [INF] {"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"8000004e-0002-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-17T22:24:20.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-18 00:24:20.904 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:24:20.906 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:24:20.906 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:24:20.906 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:24:20.907 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:24:20.907 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:24:20.907 +02:00 [DBG] Start discovery request
2020-08-18 00:24:20.910 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:24:21.008 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:24:21.010 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:24:21.010 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:24:21.010 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:24:21.010 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:24:21.010 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:24:21.010 +02:00 [DBG] Start key discovery request
2020-08-18 00:24:23.803 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-18 00:24:23.804 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-18 00:24:23.804 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-18 00:24:23.804 +02:00 [DBG] Start authorize request
2020-08-18 00:24:23.804 +02:00 [DBG] No user present in authorize request
2020-08-18 00:24:23.804 +02:00 [DBG] Start authorize request protocol validation
2020-08-18 00:24:23.815 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:24:23.815 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:24:23.817 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:24:23.830 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:24:23.831 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:24:23.833 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:24:23.833 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-18 00:24:23.833 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"bjh3fjN2MlVqflZOR2xoVGs5LVlwYno1eXlXNGZhQWlTWmhjZU9tQmZTN0hm","UiLocales":null,"Nonce":"bjh3fjN2MlVqflZOR2xoVGs5LVlwYno1eXlXNGZhQWlTWmhjZU9tQmZTN0hm","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"bjh3fjN2MlVqflZOR2xoVGs5LVlwYno1eXlXNGZhQWlTWmhjZU9tQmZTN0hm","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"bjh3fjN2MlVqflZOR2xoVGs5LVlwYno1eXlXNGZhQWlTWmhjZU9tQmZTN0hm"},"$type":"AuthorizeRequestValidationLog"}
2020-08-18 00:24:23.833 +02:00 [INF] Showing login: User is not authenticated
2020-08-18 00:24:23.856 +02:00 [DBG] Start authorize request protocol validation
2020-08-18 00:24:23.866 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:24:23.866 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:24:23.867 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:24:23.870 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:24:23.872 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:24:23.873 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:24:23.874 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-18 00:24:23.881 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:24:23.881 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:24:25.096 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-18 00:24:26.095 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-18 00:24:26.126 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000053-0002-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-17T22:24:26.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-18 00:24:26.126 +02:00 [DBG] Augmenting SignInContext
2020-08-18 00:24:26.126 +02:00 [DBG] Adding amr claim with value: external
2020-08-18 00:24:26.126 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-18 00:24:26.126 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-18 00:24:26.131 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-18 00:24:26.131 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-18 00:24:26.131 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-18 00:24:26.131 +02:00 [DBG] Start authorize callback request
2020-08-18 00:24:26.131 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-18 00:24:26.131 +02:00 [DBG] Start authorize request protocol validation
2020-08-18 00:24:26.142 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:24:26.142 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:24:26.143 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:24:26.144 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:24:26.146 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:24:26.147 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:24:26.147 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-18 00:24:26.147 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"bjh3fjN2MlVqflZOR2xoVGs5LVlwYno1eXlXNGZhQWlTWmhjZU9tQmZTN0hm","UiLocales":null,"Nonce":"bjh3fjN2MlVqflZOR2xoVGs5LVlwYno1eXlXNGZhQWlTWmhjZU9tQmZTN0hm","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"rZjZEHUztdb2_TdBO5xUVw","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"bjh3fjN2MlVqflZOR2xoVGs5LVlwYno1eXlXNGZhQWlTWmhjZU9tQmZTN0hm","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"bjh3fjN2MlVqflZOR2xoVGs5LVlwYno1eXlXNGZhQWlTWmhjZU9tQmZTN0hm"},"$type":"AuthorizeRequestValidationLog"}
2020-08-18 00:24:26.149 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-18 00:24:26.149 +02:00 [DBG] Creating Implicit Flow response.
2020-08-18 00:24:26.149 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-18 00:24:26.149 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-18 00:24:26.153 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-18 00:24:26.153 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-18 00:24:26.155 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****GdeA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****3YfQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000054-0002-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-17T22:24:26.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-18 00:24:26.155 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"bjh3fjN2MlVqflZOR2xoVGs5LVlwYno1eXlXNGZhQWlTWmhjZU9tQmZTN0hm","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-18 00:24:26.155 +02:00 [DBG] Augmenting SignInContext
2020-08-18 00:24:26.155 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-18 00:24:26.326 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:24:26.328 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:24:26.328 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:24:26.329 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:24:26.329 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:24:26.329 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:24:26.329 +02:00 [DBG] Start discovery request
2020-08-18 00:24:26.332 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:24:26.428 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:24:26.429 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:24:26.430 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:24:26.430 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:24:26.430 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:24:26.430 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:24:26.430 +02:00 [DBG] Start key discovery request
2020-08-18 00:24:26.493 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-18 00:24:26.495 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:24:26.495 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:24:26.497 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-18 00:24:26.499 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:24:26.499 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:24:26.499 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:24:26.499 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:24:26.499 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:24:26.499 +02:00 [DBG] Start userinfo request
2020-08-18 00:24:26.499 +02:00 [DBG] Bearer token found in header
2020-08-18 00:24:26.515 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:24:26.516 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:24:26.528 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:24:26.528 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:24:26.530 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:24:26.531 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597703066,"exp":1597706666,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597703066,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:24:26.531 +02:00 [DBG] Creating userinfo response
2020-08-18 00:24:26.531 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:24:26.531 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:24:26.533 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:24:26.533 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:24:26.533 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:24:26.535 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:24:26.539 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:24:26.539 +02:00 [DBG] End userinfo request
2020-08-18 00:24:26.602 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:24:26.602 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:24:26.603 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:24:26.604 +02:00 [DBG] Start discovery request
2020-08-18 00:24:26.610 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:24:26.612 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:24:26.612 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:24:26.612 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:24:26.612 +02:00 [DBG] Start key discovery request
2020-08-18 00:24:26.614 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:24:26.614 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:24:26.614 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:24:26.614 +02:00 [DBG] Start userinfo request
2020-08-18 00:24:26.614 +02:00 [DBG] Bearer token found in header
2020-08-18 00:24:26.628 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:24:26.628 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:24:26.635 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:24:26.635 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:24:26.637 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:24:26.638 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597703066,"exp":1597706666,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597703066,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:24:26.638 +02:00 [DBG] Creating userinfo response
2020-08-18 00:24:26.639 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:24:26.639 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:24:26.641 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:24:26.641 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:24:26.642 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:24:26.643 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:24:26.646 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:24:26.646 +02:00 [DBG] End userinfo request
2020-08-18 00:24:45.465 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-08-18 00:24:45.465 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-08-18 00:24:45.465 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-08-18 00:24:45.465 +02:00 [DBG] Processing signout request for 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-18 00:24:45.465 +02:00 [DBG] Start end session request validation
2020-08-18 00:24:45.465 +02:00 [DBG] Start identity token validation
2020-08-18 00:24:45.493 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:24:45.493 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:24:45.493 +02:00 [DBG] Client found: listify.webapp / The Listify WebApplication
2020-08-18 00:24:45.496 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:24:45.496 +02:00 [DBG] Token validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597703066,"exp":1597703366,"iss":"http://localhost:5000","aud":"listify.webapp","nonce":"bjh3fjN2MlVqflZOR2xoVGs5LVlwYno1eXlXNGZhQWlTWmhjZU9tQmZTN0hm","iat":1597703066,"at_hash":"O4uW3PaTfqKJi9nb-kIsWw","s_hash":"nJcs0D-5gWElr3DDzJp7rg","sid":"rZjZEHUztdb2_TdBO5xUVw","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597703066,"idp":"Facebook","amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:24:45.496 +02:00 [INF] End session request validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","PostLogOutUri":"http://localhost:4200","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200"},"$type":"EndSessionRequestValidationLog"}
2020-08-18 00:24:45.496 +02:00 [DBG] Success validating end session request from listify.webapp
2020-08-18 00:24:45.519 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-18 00:24:45.519 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-18 00:24:45.519 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-18 00:24:45.519 +02:00 [INF] {"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"80000056-0002-ff00-b63f-84710c7967bb","TimeStamp":"2020-08-17T22:24:45.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-18 00:24:45.684 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:24:45.686 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:24:45.686 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:24:45.686 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:24:45.686 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:24:45.686 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:24:45.686 +02:00 [DBG] Start discovery request
2020-08-18 00:24:45.697 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:24:45.783 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:24:45.784 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:24:45.785 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:24:45.785 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:24:45.785 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:24:45.785 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:24:45.785 +02:00 [DBG] Start key discovery request
2020-08-18 00:25:40.747 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:25:40.759 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:25:40.760 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:25:40.760 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:25:40.760 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:25:40.760 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:25:40.760 +02:00 [DBG] Start discovery request
2020-08-18 00:25:40.787 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:25:40.901 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:25:40.905 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:25:40.905 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:25:40.905 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:25:40.905 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:25:40.905 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:25:40.905 +02:00 [DBG] Start key discovery request
2020-08-18 00:25:50.524 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:25:50.535 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:25:50.535 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:25:50.536 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:25:50.536 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:25:50.536 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:25:50.536 +02:00 [DBG] Start discovery request
2020-08-18 00:25:50.560 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:25:50.840 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:25:50.868 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:25:50.868 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:25:50.868 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:25:50.868 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:25:50.868 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:25:50.868 +02:00 [DBG] Start key discovery request
2020-08-18 00:25:59.416 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:25:59.435 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:25:59.436 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:25:59.437 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:25:59.437 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:25:59.438 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:25:59.438 +02:00 [DBG] Start discovery request
2020-08-18 00:25:59.479 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:25:59.889 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:25:59.895 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:25:59.896 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:25:59.896 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:25:59.896 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:25:59.896 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:25:59.896 +02:00 [DBG] Start key discovery request
2020-08-18 00:28:12.483 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:28:12.525 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:28:12.525 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:28:12.525 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:28:12.526 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:28:12.526 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:28:12.526 +02:00 [DBG] Start discovery request
2020-08-18 00:28:12.540 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:28:12.616 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:28:12.619 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:28:12.619 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:28:12.619 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:28:12.627 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:28:12.627 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:28:12.627 +02:00 [DBG] Start key discovery request
2020-08-18 00:28:45.138 +02:00 [INF] Removing 0 grants
2020-08-18 00:28:45.155 +02:00 [INF] Removing 0 device flow codes
2020-08-18 00:29:57.326 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:29:57.368 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:29:57.369 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:29:57.369 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:29:57.369 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:29:57.370 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:29:57.370 +02:00 [DBG] Start discovery request
2020-08-18 00:29:57.415 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:29:57.447 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:29:57.481 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:29:57.481 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:29:57.481 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:29:57.482 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:29:57.482 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:29:57.482 +02:00 [DBG] Start key discovery request
2020-08-18 00:31:02.626 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:31:02.630 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:31:02.630 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:31:02.630 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:31:02.630 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:31:02.631 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:31:02.631 +02:00 [DBG] Start discovery request
2020-08-18 00:31:02.647 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:31:02.754 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:31:02.756 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:31:02.757 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:31:02.757 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:31:02.765 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:31:02.765 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:31:02.765 +02:00 [DBG] Start key discovery request
2020-08-18 00:32:56.090 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:32:56.186 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:32:56.186 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:32:56.187 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:32:56.187 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:32:56.187 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:32:56.187 +02:00 [DBG] Start discovery request
2020-08-18 00:32:56.212 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:32:56.246 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:32:56.258 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:32:56.258 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:32:56.258 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:32:56.259 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:32:56.259 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:32:56.259 +02:00 [DBG] Start key discovery request
2020-08-18 00:33:10.073 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:33:10.092 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:33:10.092 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:33:10.093 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:33:10.093 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:33:10.093 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:33:10.093 +02:00 [DBG] Start discovery request
2020-08-18 00:33:10.119 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:33:10.395 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:33:10.402 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:33:10.403 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:33:10.403 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:33:10.403 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:33:10.403 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:33:10.403 +02:00 [DBG] Start key discovery request
2020-08-18 00:33:45.170 +02:00 [INF] Removing 0 grants
2020-08-18 00:33:45.241 +02:00 [INF] Removing 0 device flow codes
2020-08-18 00:35:02.441 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:35:02.530 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:35:02.530 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:35:02.531 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:35:02.531 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:35:02.531 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:35:02.531 +02:00 [DBG] Start discovery request
2020-08-18 00:35:02.576 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:35:02.980 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:35:02.988 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:35:02.988 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:35:02.989 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:35:02.990 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:35:02.991 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:35:02.991 +02:00 [DBG] Start key discovery request
2020-08-18 00:35:37.697 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:35:37.709 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:35:37.710 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:35:37.711 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:35:37.711 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:35:37.711 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:35:37.711 +02:00 [DBG] Start discovery request
2020-08-18 00:35:37.752 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:35:37.979 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:35:37.994 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:35:37.994 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:35:37.994 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:35:37.995 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:35:37.995 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:35:37.995 +02:00 [DBG] Start key discovery request
2020-08-18 00:38:45.260 +02:00 [INF] Removing 0 grants
2020-08-18 00:38:45.273 +02:00 [INF] Removing 0 device flow codes
2020-08-18 00:38:59.711 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:38:59.715 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:38:59.715 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:38:59.715 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:38:59.723 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:38:59.723 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:38:59.723 +02:00 [DBG] Start discovery request
2020-08-18 00:38:59.741 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:38:59.968 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:38:59.972 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:38:59.972 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:38:59.972 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:38:59.972 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:38:59.972 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:38:59.972 +02:00 [DBG] Start key discovery request
2020-08-18 00:39:14.627 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:39:14.630 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:39:14.630 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:39:14.630 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:39:14.630 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:39:14.630 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:39:14.630 +02:00 [DBG] Start discovery request
2020-08-18 00:39:14.634 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:39:14.746 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:39:14.748 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:39:14.749 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:39:14.749 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:39:14.749 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:39:14.749 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:39:14.749 +02:00 [DBG] Start key discovery request
2020-08-18 00:40:24.067 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:40:24.104 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:40:24.104 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:40:24.104 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:40:24.104 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:40:24.104 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:40:24.104 +02:00 [DBG] Start discovery request
2020-08-18 00:40:24.121 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:40:24.187 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:40:24.190 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:40:24.190 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:40:24.190 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:40:24.190 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:40:24.190 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:40:24.190 +02:00 [DBG] Start key discovery request
2020-08-18 00:40:25.970 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-18 00:40:25.971 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-18 00:40:25.971 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-18 00:40:25.971 +02:00 [DBG] Start authorize request
2020-08-18 00:40:25.971 +02:00 [DBG] No user present in authorize request
2020-08-18 00:40:25.971 +02:00 [DBG] Start authorize request protocol validation
2020-08-18 00:40:26.038 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:40:26.038 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:40:26.070 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:40:26.086 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:40:26.095 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:40:26.097 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:40:26.097 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-18 00:40:26.097 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"RXB4SW9jTjlRakJSckNQeUJ3RnlxTjZPb0RSWk0xQ0JLcEtrMGhHUXVOZXRL","UiLocales":null,"Nonce":"RXB4SW9jTjlRakJSckNQeUJ3RnlxTjZPb0RSWk0xQ0JLcEtrMGhHUXVOZXRL","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"RXB4SW9jTjlRakJSckNQeUJ3RnlxTjZPb0RSWk0xQ0JLcEtrMGhHUXVOZXRL","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"RXB4SW9jTjlRakJSckNQeUJ3RnlxTjZPb0RSWk0xQ0JLcEtrMGhHUXVOZXRL"},"$type":"AuthorizeRequestValidationLog"}
2020-08-18 00:40:26.098 +02:00 [INF] Showing login: User is not authenticated
2020-08-18 00:40:26.119 +02:00 [DBG] Start authorize request protocol validation
2020-08-18 00:40:26.129 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:40:26.130 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:40:26.131 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:40:26.133 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:40:26.134 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:40:26.136 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:40:26.136 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-18 00:40:26.144 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:40:26.144 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:40:27.587 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-18 00:40:28.865 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-18 00:40:28.897 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000019-0000-fb00-b63f-84710c7967bb","TimeStamp":"2020-08-17T22:40:28.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-18 00:40:28.898 +02:00 [DBG] Augmenting SignInContext
2020-08-18 00:40:28.898 +02:00 [DBG] Adding amr claim with value: external
2020-08-18 00:40:28.898 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-18 00:40:28.898 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-18 00:40:28.904 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-18 00:40:28.904 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-18 00:40:28.904 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-18 00:40:28.904 +02:00 [DBG] Start authorize callback request
2020-08-18 00:40:28.904 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-18 00:40:28.904 +02:00 [DBG] Start authorize request protocol validation
2020-08-18 00:40:28.915 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:40:28.916 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:40:28.917 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:40:28.919 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:40:28.921 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:40:28.923 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:40:28.923 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-18 00:40:28.924 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"RXB4SW9jTjlRakJSckNQeUJ3RnlxTjZPb0RSWk0xQ0JLcEtrMGhHUXVOZXRL","UiLocales":null,"Nonce":"RXB4SW9jTjlRakJSckNQeUJ3RnlxTjZPb0RSWk0xQ0JLcEtrMGhHUXVOZXRL","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"rDU8NyhfXNMdMY3BJgTbrw","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"RXB4SW9jTjlRakJSckNQeUJ3RnlxTjZPb0RSWk0xQ0JLcEtrMGhHUXVOZXRL","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"RXB4SW9jTjlRakJSckNQeUJ3RnlxTjZPb0RSWk0xQ0JLcEtrMGhHUXVOZXRL"},"$type":"AuthorizeRequestValidationLog"}
2020-08-18 00:40:28.927 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-18 00:40:28.927 +02:00 [DBG] Creating Implicit Flow response.
2020-08-18 00:40:28.927 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-18 00:40:28.927 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-18 00:40:28.932 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-18 00:40:28.932 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-18 00:40:28.934 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****R37A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****wQ-g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000001a-0000-fb00-b63f-84710c7967bb","TimeStamp":"2020-08-17T22:40:28.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-18 00:40:28.934 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"RXB4SW9jTjlRakJSckNQeUJ3RnlxTjZPb0RSWk0xQ0JLcEtrMGhHUXVOZXRL","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-18 00:40:28.934 +02:00 [DBG] Augmenting SignInContext
2020-08-18 00:40:28.935 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-18 00:40:29.136 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:40:29.138 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:40:29.138 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:40:29.138 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:40:29.138 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:40:29.139 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:40:29.139 +02:00 [DBG] Start discovery request
2020-08-18 00:40:29.142 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:40:29.239 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:40:29.241 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:40:29.241 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:40:29.241 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:40:29.241 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:40:29.241 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:40:29.241 +02:00 [DBG] Start key discovery request
2020-08-18 00:40:29.302 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-18 00:40:29.304 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:40:29.304 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:40:29.306 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-18 00:40:29.308 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:40:29.308 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:40:29.308 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:40:29.309 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:40:29.309 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:40:29.309 +02:00 [DBG] Start userinfo request
2020-08-18 00:40:29.309 +02:00 [DBG] Bearer token found in header
2020-08-18 00:40:29.324 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:40:29.324 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:40:29.337 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:40:29.337 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:40:29.339 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:40:29.339 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597704028,"exp":1597707628,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597704028,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:40:29.339 +02:00 [DBG] Creating userinfo response
2020-08-18 00:40:29.340 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:40:29.340 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:40:29.342 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:40:29.342 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:40:29.342 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:40:29.343 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:40:29.346 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:40:29.346 +02:00 [DBG] End userinfo request
2020-08-18 00:40:29.478 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:40:29.478 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:40:29.478 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:40:29.478 +02:00 [DBG] Start discovery request
2020-08-18 00:40:29.482 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:40:29.486 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:40:29.486 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:40:29.486 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:40:29.486 +02:00 [DBG] Start key discovery request
2020-08-18 00:40:29.488 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:40:29.488 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:40:29.488 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:40:29.489 +02:00 [DBG] Start userinfo request
2020-08-18 00:40:29.489 +02:00 [DBG] Bearer token found in header
2020-08-18 00:40:29.521 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:40:29.521 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:40:29.553 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:40:29.553 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:40:29.555 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:40:29.555 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597704028,"exp":1597707628,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597704028,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:40:29.555 +02:00 [DBG] Creating userinfo response
2020-08-18 00:40:29.555 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:40:29.556 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:40:29.558 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:40:29.558 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:40:29.558 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:40:29.570 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:40:29.574 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:40:29.574 +02:00 [DBG] End userinfo request
2020-08-18 00:41:13.485 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:41:13.498 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:41:13.499 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:41:13.499 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:41:13.499 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:41:13.499 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:41:13.499 +02:00 [DBG] Start discovery request
2020-08-18 00:41:13.552 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:41:13.660 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:41:13.663 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:41:13.663 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:41:13.664 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:41:13.664 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:41:13.664 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:41:13.664 +02:00 [DBG] Start key discovery request
2020-08-18 00:41:13.669 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:41:13.669 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:41:13.669 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:41:13.669 +02:00 [DBG] Start discovery request
2020-08-18 00:41:13.674 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:41:13.687 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:41:13.688 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:41:13.688 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:41:13.688 +02:00 [DBG] Start key discovery request
2020-08-18 00:41:13.690 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:41:13.690 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:41:13.690 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:41:13.690 +02:00 [DBG] Start userinfo request
2020-08-18 00:41:13.690 +02:00 [DBG] Bearer token found in header
2020-08-18 00:41:13.721 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:41:13.721 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:41:13.736 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:41:13.737 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:41:13.741 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:41:13.741 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597704028,"exp":1597707628,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597704028,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:41:13.741 +02:00 [DBG] Creating userinfo response
2020-08-18 00:41:13.741 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:41:13.741 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:41:13.748 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:41:13.748 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:41:13.748 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:41:13.751 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:41:13.756 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:41:13.756 +02:00 [DBG] End userinfo request
2020-08-18 00:41:31.030 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-08-18 00:41:31.030 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-08-18 00:41:31.030 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-08-18 00:41:31.031 +02:00 [DBG] Processing signout request for 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-18 00:41:31.031 +02:00 [DBG] Start end session request validation
2020-08-18 00:41:31.031 +02:00 [DBG] Start identity token validation
2020-08-18 00:41:31.044 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:41:31.045 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:41:31.045 +02:00 [DBG] Client found: listify.webapp / The Listify WebApplication
2020-08-18 00:41:31.049 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:41:31.049 +02:00 [DBG] Token validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597704028,"exp":1597704328,"iss":"http://localhost:5000","aud":"listify.webapp","nonce":"RXB4SW9jTjlRakJSckNQeUJ3RnlxTjZPb0RSWk0xQ0JLcEtrMGhHUXVOZXRL","iat":1597704028,"at_hash":"u0KtNmwUJ30zeLdlTM6uKg","s_hash":"7I9LQdyZYobQXL4-fN6gbw","sid":"rDU8NyhfXNMdMY3BJgTbrw","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597704028,"idp":"Facebook","amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:41:31.049 +02:00 [INF] End session request validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","PostLogOutUri":"http://localhost:4200","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200"},"$type":"EndSessionRequestValidationLog"}
2020-08-18 00:41:31.049 +02:00 [DBG] Success validating end session request from listify.webapp
2020-08-18 00:41:31.081 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-18 00:41:31.082 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-18 00:41:31.082 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-18 00:41:31.082 +02:00 [INF] {"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"8000001c-0000-fb00-b63f-84710c7967bb","TimeStamp":"2020-08-17T22:41:31.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-18 00:41:31.516 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:41:31.519 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:41:31.519 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:41:31.519 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:41:31.519 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:41:31.519 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:41:31.519 +02:00 [DBG] Start discovery request
2020-08-18 00:41:31.523 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:41:31.662 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:41:31.666 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:41:31.666 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:41:31.666 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:41:31.666 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:41:31.666 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:41:31.666 +02:00 [DBG] Start key discovery request
2020-08-18 00:41:31.975 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-18 00:41:31.975 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-18 00:41:31.975 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-18 00:41:31.975 +02:00 [DBG] Start authorize request
2020-08-18 00:41:31.975 +02:00 [DBG] No user present in authorize request
2020-08-18 00:41:31.975 +02:00 [DBG] Start authorize request protocol validation
2020-08-18 00:41:31.991 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:41:31.992 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:41:31.995 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:41:32.019 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:41:32.022 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:41:32.024 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:41:32.024 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-18 00:41:32.024 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"X09jUW4zQ2pWenFPT0dKNTJxb01KaV96WWRKelkxTmVZY2xFRmttQktUWkZJ","UiLocales":null,"Nonce":"X09jUW4zQ2pWenFPT0dKNTJxb01KaV96WWRKelkxTmVZY2xFRmttQktUWkZJ","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"X09jUW4zQ2pWenFPT0dKNTJxb01KaV96WWRKelkxTmVZY2xFRmttQktUWkZJ","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"X09jUW4zQ2pWenFPT0dKNTJxb01KaV96WWRKelkxTmVZY2xFRmttQktUWkZJ"},"$type":"AuthorizeRequestValidationLog"}
2020-08-18 00:41:32.024 +02:00 [INF] Showing login: User is not authenticated
2020-08-18 00:41:32.066 +02:00 [DBG] Start authorize request protocol validation
2020-08-18 00:41:32.076 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:41:32.076 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:41:32.078 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:41:32.080 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:41:32.082 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:41:32.084 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:41:32.084 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-18 00:41:32.091 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:41:32.092 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:41:33.275 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-18 00:41:33.980 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-18 00:41:34.259 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000022-0000-fb00-b63f-84710c7967bb","TimeStamp":"2020-08-17T22:41:34.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-18 00:41:34.259 +02:00 [DBG] Augmenting SignInContext
2020-08-18 00:41:34.259 +02:00 [DBG] Adding amr claim with value: external
2020-08-18 00:41:34.259 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-18 00:41:34.259 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-18 00:41:34.291 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-18 00:41:34.291 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-18 00:41:34.291 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-18 00:41:34.291 +02:00 [DBG] Start authorize callback request
2020-08-18 00:41:34.292 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-18 00:41:34.292 +02:00 [DBG] Start authorize request protocol validation
2020-08-18 00:41:34.316 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:41:34.316 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:41:34.319 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:41:34.321 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:41:34.324 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:41:34.326 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:41:34.326 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-18 00:41:34.326 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"X09jUW4zQ2pWenFPT0dKNTJxb01KaV96WWRKelkxTmVZY2xFRmttQktUWkZJ","UiLocales":null,"Nonce":"X09jUW4zQ2pWenFPT0dKNTJxb01KaV96WWRKelkxTmVZY2xFRmttQktUWkZJ","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"QuGPnsTTt96K7FK4I4HlDQ","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"X09jUW4zQ2pWenFPT0dKNTJxb01KaV96WWRKelkxTmVZY2xFRmttQktUWkZJ","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"X09jUW4zQ2pWenFPT0dKNTJxb01KaV96WWRKelkxTmVZY2xFRmttQktUWkZJ"},"$type":"AuthorizeRequestValidationLog"}
2020-08-18 00:41:34.329 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-18 00:41:34.329 +02:00 [DBG] Creating Implicit Flow response.
2020-08-18 00:41:34.329 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-18 00:41:34.329 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-18 00:41:34.336 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-18 00:41:34.336 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-18 00:41:34.337 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****AQcQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****NHmQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000023-0000-fb00-b63f-84710c7967bb","TimeStamp":"2020-08-17T22:41:34.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-18 00:41:34.338 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"X09jUW4zQ2pWenFPT0dKNTJxb01KaV96WWRKelkxTmVZY2xFRmttQktUWkZJ","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-18 00:41:34.338 +02:00 [DBG] Augmenting SignInContext
2020-08-18 00:41:34.338 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-18 00:41:34.697 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:41:34.699 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:41:34.700 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:41:34.700 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:41:34.700 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:41:34.700 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:41:34.700 +02:00 [DBG] Start discovery request
2020-08-18 00:41:34.705 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:41:34.852 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:41:34.855 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:41:34.855 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:41:34.856 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:41:34.856 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:41:34.864 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:41:34.864 +02:00 [DBG] Start key discovery request
2020-08-18 00:41:34.955 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-18 00:41:34.957 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:41:34.958 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:41:34.960 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-18 00:41:34.962 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:41:34.962 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:41:34.962 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:41:34.963 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:41:34.963 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:41:34.963 +02:00 [DBG] Start userinfo request
2020-08-18 00:41:34.963 +02:00 [DBG] Bearer token found in header
2020-08-18 00:41:34.980 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:41:34.980 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:41:34.993 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:41:34.994 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:41:34.996 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:41:34.996 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597704094,"exp":1597707694,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597704094,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:41:34.997 +02:00 [DBG] Creating userinfo response
2020-08-18 00:41:34.997 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:41:34.997 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:41:35.003 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:41:35.004 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:41:35.004 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:41:35.007 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:41:35.011 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:41:35.011 +02:00 [DBG] End userinfo request
2020-08-18 00:41:35.223 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:41:35.223 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:41:35.223 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:41:35.223 +02:00 [DBG] Start discovery request
2020-08-18 00:41:35.228 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:41:35.246 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:41:35.247 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:41:35.247 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:41:35.247 +02:00 [DBG] Start key discovery request
2020-08-18 00:41:35.272 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:41:35.272 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:41:35.272 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:41:35.273 +02:00 [DBG] Start userinfo request
2020-08-18 00:41:35.273 +02:00 [DBG] Bearer token found in header
2020-08-18 00:41:35.291 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:41:35.291 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:41:35.305 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:41:35.305 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:41:35.308 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:41:35.308 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597704094,"exp":1597707694,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597704094,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:41:35.308 +02:00 [DBG] Creating userinfo response
2020-08-18 00:41:35.308 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:41:35.308 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:41:35.311 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:41:35.311 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:41:35.311 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:41:35.313 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:41:35.321 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:41:35.322 +02:00 [DBG] End userinfo request
2020-08-18 00:42:11.569 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:42:11.618 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:42:11.618 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:42:11.619 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:42:11.619 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:42:11.619 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:42:11.619 +02:00 [DBG] Start discovery request
2020-08-18 00:42:11.665 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:42:12.414 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:42:12.430 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:42:12.430 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:42:12.431 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:42:12.432 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:42:12.432 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:42:12.432 +02:00 [DBG] Start key discovery request
2020-08-18 00:42:12.687 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:42:12.689 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:42:12.689 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:42:12.689 +02:00 [DBG] Start discovery request
2020-08-18 00:42:12.719 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:42:12.744 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:42:12.744 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:42:12.744 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:42:12.744 +02:00 [DBG] Start key discovery request
2020-08-18 00:42:12.756 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:42:12.756 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:42:12.756 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:42:12.756 +02:00 [DBG] Start userinfo request
2020-08-18 00:42:12.756 +02:00 [DBG] Bearer token found in header
2020-08-18 00:42:12.808 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:42:12.808 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:42:12.855 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:42:12.855 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:42:12.859 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:42:12.859 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597704094,"exp":1597707694,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597704094,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:42:12.859 +02:00 [DBG] Creating userinfo response
2020-08-18 00:42:12.859 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:42:12.859 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:42:12.891 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:42:12.891 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:42:12.891 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:42:12.895 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:42:12.948 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:42:12.948 +02:00 [DBG] End userinfo request
2020-08-18 00:42:14.378 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:42:14.381 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:42:14.381 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:42:14.381 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:42:14.382 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:42:14.382 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:42:14.382 +02:00 [DBG] Start discovery request
2020-08-18 00:42:14.394 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:42:14.951 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:42:14.958 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:42:14.958 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:42:14.958 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:42:14.958 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:42:14.958 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:42:14.958 +02:00 [DBG] Start discovery request
2020-08-18 00:42:14.959 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:42:14.959 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:42:14.959 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:42:14.959 +02:00 [DBG] Start key discovery request
2020-08-18 00:42:14.975 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:42:14.976 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:42:14.977 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:42:14.977 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:42:14.977 +02:00 [DBG] Start key discovery request
2020-08-18 00:42:14.979 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:42:14.979 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:42:14.980 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:42:14.980 +02:00 [DBG] Start userinfo request
2020-08-18 00:42:14.980 +02:00 [DBG] Bearer token found in header
2020-08-18 00:42:15.069 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:42:15.070 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:42:15.118 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:42:15.118 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:42:15.123 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:42:15.123 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597704094,"exp":1597707694,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597704094,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:42:15.123 +02:00 [DBG] Creating userinfo response
2020-08-18 00:42:15.123 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:42:15.123 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:42:15.130 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:42:15.130 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:42:15.130 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:42:15.167 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:42:15.255 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:42:15.256 +02:00 [DBG] End userinfo request
2020-08-18 00:42:16.744 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-08-18 00:42:16.744 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-08-18 00:42:16.744 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-08-18 00:42:16.744 +02:00 [DBG] Processing signout request for 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-18 00:42:16.744 +02:00 [DBG] Start end session request validation
2020-08-18 00:42:16.744 +02:00 [DBG] Start identity token validation
2020-08-18 00:42:16.775 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:42:16.775 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:42:16.775 +02:00 [DBG] Client found: listify.webapp / The Listify WebApplication
2020-08-18 00:42:16.779 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:42:16.779 +02:00 [DBG] Token validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597704094,"exp":1597704394,"iss":"http://localhost:5000","aud":"listify.webapp","nonce":"X09jUW4zQ2pWenFPT0dKNTJxb01KaV96WWRKelkxTmVZY2xFRmttQktUWkZJ","iat":1597704094,"at_hash":"skg85IKtTvcEIHo2-X9YJQ","s_hash":"qa-OXoO1fF3fZHii1UdieQ","sid":"QuGPnsTTt96K7FK4I4HlDQ","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597704094,"idp":"Facebook","amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:42:16.780 +02:00 [INF] End session request validation success
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","PostLogOutUri":"http://localhost:4200","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:4200"},"$type":"EndSessionRequestValidationLog"}
2020-08-18 00:42:16.780 +02:00 [DBG] Success validating end session request from listify.webapp
2020-08-18 00:42:16.822 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-08-18 00:42:16.822 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-18 00:42:16.822 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-08-18 00:42:16.822 +02:00 [INF] {"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"80000025-0000-fb00-b63f-84710c7967bb","TimeStamp":"2020-08-17T22:42:16.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2020-08-18 00:42:17.062 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:42:17.065 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:42:17.065 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:42:17.065 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:42:17.065 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:42:17.065 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:42:17.065 +02:00 [DBG] Start discovery request
2020-08-18 00:42:17.077 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:42:17.278 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:42:17.281 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:42:17.281 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:42:17.281 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:42:17.281 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:42:17.281 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:42:17.281 +02:00 [DBG] Start key discovery request
2020-08-18 00:42:17.686 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-08-18 00:42:17.686 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-08-18 00:42:17.686 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-08-18 00:42:17.686 +02:00 [DBG] Start authorize request
2020-08-18 00:42:17.686 +02:00 [DBG] No user present in authorize request
2020-08-18 00:42:17.686 +02:00 [DBG] Start authorize request protocol validation
2020-08-18 00:42:17.720 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:42:17.720 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:42:17.727 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:42:17.745 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:42:17.750 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:42:17.771 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:42:17.772 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-18 00:42:17.772 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"Z2kueUVfRnVQWl9qWVNifndrS3E1ZFh-dGZqM2YuZkk3anZBLkFGTFRqZlE1","UiLocales":null,"Nonce":"Z2kueUVfRnVQWl9qWVNifndrS3E1ZFh-dGZqM2YuZkk3anZBLkFGTFRqZlE1","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"Z2kueUVfRnVQWl9qWVNifndrS3E1ZFh-dGZqM2YuZkk3anZBLkFGTFRqZlE1","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"Z2kueUVfRnVQWl9qWVNifndrS3E1ZFh-dGZqM2YuZkk3anZBLkFGTFRqZlE1"},"$type":"AuthorizeRequestValidationLog"}
2020-08-18 00:42:17.772 +02:00 [INF] Showing login: User is not authenticated
2020-08-18 00:42:17.803 +02:00 [DBG] Start authorize request protocol validation
2020-08-18 00:42:17.832 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:42:17.833 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:42:17.837 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:42:17.849 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:42:17.851 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:42:17.852 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:42:17.852 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-18 00:42:17.873 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:42:17.873 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:42:18.690 +02:00 [INF] AuthenticationScheme: Facebook was challenged.
2020-08-18 00:42:19.314 +02:00 [INF] AuthenticationScheme: Identity.External signed in.
2020-08-18 00:42:19.500 +02:00 [INF] {"Username":null,"Provider":"Facebook","ProviderUserId":"3163109557109218","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","DisplayName":"Mohamed Abd Elrahman","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"8000002b-0000-fb00-b63f-84710c7967bb","TimeStamp":"2020-08-17T22:42:19.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-08-18 00:42:19.500 +02:00 [DBG] Augmenting SignInContext
2020-08-18 00:42:19.500 +02:00 [DBG] Adding amr claim with value: external
2020-08-18 00:42:19.500 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-18 00:42:19.500 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-08-18 00:42:19.775 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-08-18 00:42:19.775 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-08-18 00:42:19.775 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-08-18 00:42:19.775 +02:00 [DBG] Start authorize callback request
2020-08-18 00:42:19.776 +02:00 [DBG] User in authorize request: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-18 00:42:19.776 +02:00 [DBG] Start authorize request protocol validation
2020-08-18 00:42:19.815 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:42:19.816 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:42:19.821 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:42:19.840 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:42:19.842 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:42:19.844 +02:00 [DBG] Found ["listifyWebAPI"] API scopes in database
2020-08-18 00:42:19.844 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-08-18 00:42:19.845 +02:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","AllowedRedirectUris":["http://localhost:4200"],"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"profile openid roles listifyWebAPI","State":"Z2kueUVfRnVQWl9qWVNifndrS3E1ZFh-dGZqM2YuZkk3anZBLkFGTFRqZlE1","UiLocales":null,"Nonce":"Z2kueUVfRnVQWl9qWVNifndrS3E1ZFh-dGZqM2YuZkk3anZBLkFGTFRqZlE1","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"34oRbDazLpnQIQPN0QPUfA","Raw":{"response_type":"id_token token","client_id":"listify.webapp","state":"Z2kueUVfRnVQWl9qWVNifndrS3E1ZFh-dGZqM2YuZkk3anZBLkFGTFRqZlE1","redirect_uri":"http://localhost:4200","scope":"profile openid roles listifyWebAPI","nonce":"Z2kueUVfRnVQWl9qWVNifndrS3E1ZFh-dGZqM2YuZkk3anZBLkFGTFRqZlE1"},"$type":"AuthorizeRequestValidationLog"}
2020-08-18 00:42:19.848 +02:00 [DBG] Client is configured to not require consent, no consent is required
2020-08-18 00:42:19.848 +02:00 [DBG] Creating Implicit Flow response.
2020-08-18 00:42:19.848 +02:00 [DBG] Getting claims for access token for client: listify.webapp
2020-08-18 00:42:19.848 +02:00 [DBG] Getting claims for access token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e
2020-08-18 00:42:19.881 +02:00 [DBG] Getting claims for identity token for subject: 95b3f912-82da-423d-9c3f-d80659c4318e and client: listify.webapp
2020-08-18 00:42:19.881 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-08-18 00:42:19.899 +02:00 [INF] {"ClientId":"listify.webapp","ClientName":"The Listify WebApplication","RedirectUri":"http://localhost:4200","Endpoint":"Authorize","SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","Scopes":"profile openid roles listifyWebAPI","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****CiDw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****jR5A","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000002c-0000-fb00-b63f-84710c7967bb","TimeStamp":"2020-08-17T22:42:19.0000000Z","ProcessId":9660,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-08-18 00:42:19.899 +02:00 [DBG] Authorize endpoint response
{"SubjectId":"95b3f912-82da-423d-9c3f-d80659c4318e","ClientId":"listify.webapp","RedirectUri":"http://localhost:4200","State":"Z2kueUVfRnVQWl9qWVNifndrS3E1ZFh-dGZqM2YuZkk3anZBLkFGTFRqZlE1","Scope":"profile openid roles listifyWebAPI","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-08-18 00:42:19.900 +02:00 [DBG] Augmenting SignInContext
2020-08-18 00:42:19.900 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-08-18 00:42:20.675 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:42:20.679 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:42:20.679 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:42:20.679 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:42:20.679 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:42:20.679 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:42:20.680 +02:00 [DBG] Start discovery request
2020-08-18 00:42:20.796 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:42:20.968 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:42:20.971 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:42:20.971 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:42:20.972 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:42:20.972 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:42:20.972 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:42:20.972 +02:00 [DBG] Start key discovery request
2020-08-18 00:42:21.086 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-18 00:42:21.089 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:42:21.089 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:42:21.091 +02:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2020-08-18 00:42:21.093 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:42:21.093 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:42:21.093 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:42:21.094 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:42:21.094 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:42:21.094 +02:00 [DBG] Start userinfo request
2020-08-18 00:42:21.094 +02:00 [DBG] Bearer token found in header
2020-08-18 00:42:21.128 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:42:21.128 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:42:21.141 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:42:21.141 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:42:21.148 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:42:21.148 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597704139,"exp":1597707739,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597704139,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:42:21.148 +02:00 [DBG] Creating userinfo response
2020-08-18 00:42:21.148 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:42:21.148 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:42:21.155 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:42:21.155 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:42:21.155 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:42:21.161 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:42:21.169 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:42:21.169 +02:00 [DBG] End userinfo request
2020-08-18 00:42:21.342 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:42:21.343 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:42:21.343 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:42:21.343 +02:00 [DBG] Start discovery request
2020-08-18 00:42:21.356 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:42:21.357 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:42:21.358 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:42:21.358 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:42:21.358 +02:00 [DBG] Start key discovery request
2020-08-18 00:42:21.359 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:42:21.360 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:42:21.360 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:42:21.360 +02:00 [DBG] Start userinfo request
2020-08-18 00:42:21.360 +02:00 [DBG] Bearer token found in header
2020-08-18 00:42:21.388 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:42:21.388 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:42:21.415 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:42:21.415 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:42:21.418 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:42:21.418 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597704139,"exp":1597707739,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597704139,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:42:21.418 +02:00 [DBG] Creating userinfo response
2020-08-18 00:42:21.418 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:42:21.418 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:42:21.423 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:42:21.423 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:42:21.423 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:42:21.425 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:42:21.434 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:42:21.434 +02:00 [DBG] End userinfo request
2020-08-18 00:42:46.196 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:42:46.199 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:42:46.200 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:42:46.200 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:42:46.200 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:42:46.200 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:42:46.200 +02:00 [DBG] Start discovery request
2020-08-18 00:42:46.216 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:42:46.582 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:42:46.598 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:42:46.598 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:42:46.598 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:42:46.598 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:42:46.598 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:42:46.598 +02:00 [DBG] Start key discovery request
2020-08-18 00:42:46.845 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:42:46.845 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:42:46.845 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:42:46.845 +02:00 [DBG] Start discovery request
2020-08-18 00:42:46.864 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:42:46.884 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:42:46.884 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:42:46.884 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:42:46.884 +02:00 [DBG] Start key discovery request
2020-08-18 00:42:46.890 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-08-18 00:42:46.890 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-08-18 00:42:46.891 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-08-18 00:42:46.891 +02:00 [DBG] Start userinfo request
2020-08-18 00:42:46.891 +02:00 [DBG] Bearer token found in header
2020-08-18 00:42:46.932 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:42:46.932 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:42:46.967 +02:00 [DBG] listify.webapp found in database: true
2020-08-18 00:42:46.967 +02:00 [DBG] client configuration validation for client listify.webapp succeeded.
2020-08-18 00:42:46.973 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-08-18 00:42:46.973 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1597704139,"exp":1597707739,"iss":"http://localhost:5000","aud":"listifyWebAPI","client_id":"listify.webapp","sub":"95b3f912-82da-423d-9c3f-d80659c4318e","auth_time":1597704139,"idp":"Facebook","scope":["profile","openid","roles","listifyWebAPI"],"amr":"external"},"$type":"TokenValidationLog"}
2020-08-18 00:42:46.973 +02:00 [DBG] Creating userinfo response
2020-08-18 00:42:46.973 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:42:46.974 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:42:46.980 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:42:46.980 +02:00 [DBG] Requested claim types: preferred_username nickname middle_name given_name family_name name profile picture website gender birthdate zoneinfo locale updated_at sub role
2020-08-18 00:42:46.980 +02:00 [DBG] Scopes in access token: profile openid roles listifyWebAPI
2020-08-18 00:42:46.988 +02:00 [DBG] Found ["profile","openid","roles"] identity scopes in database
2020-08-18 00:42:46.995 +02:00 [INF] Profile service returned the following claim types: sub name preferred_username
2020-08-18 00:42:46.995 +02:00 [DBG] End userinfo request
2020-08-18 00:43:45.314 +02:00 [INF] Removing 0 grants
2020-08-18 00:43:45.317 +02:00 [INF] Removing 0 device flow codes
2020-08-18 00:48:45.338 +02:00 [INF] Removing 0 grants
2020-08-18 00:48:45.720 +02:00 [INF] Removing 0 device flow codes
2020-08-18 00:50:50.292 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2020-08-18 00:50:50.308 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:50:50.308 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:50:50.325 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-08-18 00:50:50.325 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-08-18 00:50:50.325 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-08-18 00:50:50.325 +02:00 [DBG] Start discovery request
2020-08-18 00:50:50.341 +02:00 [DBG] Found ["profile","openid","roles","listifyWebAPI"] as all scopes in database
2020-08-18 00:50:50.563 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2020-08-18 00:50:50.566 +02:00 [DBG] Origin http://localhost:4200 is allowed: true
2020-08-18 00:50:50.566 +02:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2020-08-18 00:50:50.566 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-08-18 00:50:50.566 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-08-18 00:50:50.566 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-08-18 00:50:50.566 +02:00 [DBG] Start key discovery request
